window.__require=function t(e,n,i){function o(s,r){if(!n[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){return o(e[s][1][t]||t)},u,u.exports,t,e,n,i)}return n[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<i.length;s++)o(i[s]);return o}({AchieveItem:[function(t,e,n){"use strict";cc._RF.push(e,"cb6f7Yg3NxM7rjSGvokJ21O","AchieveItem");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../nativets/Config"),s=t("../../TextureMgr"),r=t("../../Menu"),c=t("../../Audio"),l=t("../Others"),u=t("../../Hero/HeroGlobal"),d=cc._decorator,p=d.ccclass,h=(d.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(t){this.goBtn=this.node.getChildByName("go"),this.getBtn=this.node.getChildByName("get"),this.icon=this.node.getChildByName("icon").getComponent(cc.Sprite),this.progressBar=this.node.getChildByName("ProgressBar").getComponent(cc.ProgressBar),this.textLabel=this.node.getChildByName("text").getComponent(cc.Label),this.countLabel=this.node.getChildByName("count").getComponent(cc.Label),this.coinsLabel=this.node.getChildByName("coins").getComponent(cc.Label),this.titleLabel=this.node.getChildByName("title").getComponent(cc.Label)},e.prototype.onLoad=function(){},e.prototype.onRefresh=function(t){this.index=t;var e=a.Achieve[t],n=e.amount,i=u.default.instance.AchieveGetCountData[t]+1;i>n.length-1&&(i=n.length-1);var o=n[i],r=u.default.instance.AchieveCountData[t];r>o&&4!=t&&(r=o);var c=r/o;4==t&&r<o&&(c=1,0==r&&(c=0)),e.gold?(this.icon.spriteFrame=s.default.instance.rewardSfInGame[1],this.rewardNum=e.gold[i],this.isGold=!0):(this.icon.spriteFrame=s.default.instance.rewardSfInGame[0],this.rewardNum=e.dimond[i],this.isGold=!1),this.coinsLabel.string="x "+this.rewardNum,this.textLabel.string=e.name+e.amount[i]+e.unit,this.countLabel.string=r+"/"+e.amount[i],this.titleLabel.string=e.title,this.progressBar.progress=c,this.progressBar.node.active=4!=t;var l=-1,d=u.default.instance.AchieveGetCountData[t];l=1==c?0:-1,d>=e.amount.length-1&&(l=1),this.setState(l)},e.prototype.setState=function(t){this.goBtn.active=-1==t,this.getBtn.active=0==t},e.prototype.onBtnGet=function(){c.default.instance.playAudio("BtnClick"),this.onGet()},e.prototype.onGet=function(){u.default.instance.AchieveGetCountData[this.index]++,this.isGold?r.default.instance.addCoins(this.rewardNum):r.default.instance.addJade(this.rewardNum),this.onRefresh(this.index)},e.prototype.onBtnGo=function(){c.default.instance.playAudio("BtnClick"),l.default.instance.onClose()},e.prototype.start=function(){},e=o([p],e)}(cc.Component));n.default=h,cc._RF.pop()},{"../../Audio":"Audio","../../Hero/HeroGlobal":"HeroGlobal","../../Menu":"Menu","../../TextureMgr":"TextureMgr","../../nativets/Config":"Config","../Others":"Others"}],AchieveLv:[function(t,e,n){"use strict";cc._RF.push(e,"fe9b9WGSaVFBony9f+iuPsk","AchieveLv");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../nativets/Config"),s=t("../../TextureMgr"),r=t("../../Menu"),c=t("../../Audio"),l=t("../Others"),u=t("../../Hero/HeroGlobal"),d=cc._decorator,p=d.ccclass,h=(d.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(t){this.goBtn=this.node.getChildByName("go"),this.getBtn=this.node.getChildByName("get"),this.icon=this.node.getChildByName("icon").getComponent(cc.Sprite),this.textLabel=this.node.getChildByName("text").getComponent(cc.Label),this.title0=this.node.getChildByName("0"),this.title1=this.node.getChildByName("1"),this.node.getChildByName("icon1").getComponent(cc.Sprite).spriteFrame=s.default.instance.rewardSfInGame[0],this.node.getChildByName("icon2").getComponent(cc.Sprite).spriteFrame=s.default.instance.rewardSfInGame[1],this.coins1Label=this.node.getChildByName("coins1").getComponent(cc.Label),this.coins2Label=this.node.getChildByName("coins2").getComponent(cc.Label)},e.prototype.onLoad=function(){},e.prototype.onRefresh=function(t){this.coins1Label||this.init(9),this.index=t;var e=a.Achieve[t],n=e.amount,i=u.default.instance.AchieveGetCountData[t]+1;i>n.length-1&&(i=n.length-1);var o=n[i],s=u.default.instance.AchieveCountData[t];s>o&&4!=t&&(s=o);var r=s/o;4==t&&s<o&&(r=1,0==s&&(r=0)),this.rewardNum2=e.gold[i],this.rewardNum1=e.dimond[i],this.coins1Label.string="x "+e.dimond[i],this.coins2Label.string="x "+e.gold[i],this.textLabel.string="\u7b49\u7ea7\u8fbe\u5230"+e.amount[i]+"\u7ea7\u53ef\u9886\u53d6";var c=-1,l=u.default.instance.AchieveGetCountData[t];c=1==r?0:-1,l>=e.amount.length-1&&(c=1),this.setState(c)},e.prototype.setState=function(t){this.goBtn.active=-1==t,this.getBtn.active=0==t,this.title0.active=0==t,this.title1.active=0!=t},e.prototype.onBtnGet=function(){c.default.instance.playAudio("BtnClick"),this.onGet()},e.prototype.onGet=function(){u.default.instance.AchieveGetCountData[this.index]++,r.default.instance.addCoins(this.rewardNum2),r.default.instance.addJade(this.rewardNum1),this.onRefresh(this.index)},e.prototype.onBtnGo=function(){c.default.instance.playAudio("BtnClick"),l.default.instance.onClose()},e.prototype.start=function(){},e=o([p],e)}(cc.Component));n.default=h,cc._RF.pop()},{"../../Audio":"Audio","../../Hero/HeroGlobal":"HeroGlobal","../../Menu":"Menu","../../TextureMgr":"TextureMgr","../../nativets/Config":"Config","../Others":"Others"}],Achieve:[function(t,e,n){"use strict";cc._RF.push(e,"b1a75ZCZ/FHxJIif5F36aYc","Achieve");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./AchieveItem"),s=t("./AchieveLv"),r=t("../../Hero/HeroGlobal"),c=cc._decorator,l=c.ccclass,u=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.achieveItem=null,e}var n;return i(e,t),n=e,e.prototype.init=function(){this.layoutNode=this.node.getChildByName("ScrollView").getChildByName("view").getChildByName("content"),this.initLayout()},e.prototype.initLayout=function(){this.achieveScripts=[];for(var t=0;t<9;t++){var e=cc.instantiate(this.achieveItem);e.parent=this.layoutNode,this.achieveScripts.push(e.getComponent(a.default)),this.achieveScripts[t].init(t)}this.achieveLvScript=this.node.getChildByName("lv").getComponent(s.default),this.achieveLvScript.init(9)},e.prototype.onLoad=function(){n.instance=this,this.init()},e.prototype.onRefresh=function(){for(var t=0;t<9;t++)this.achieveScripts[t].onRefresh(t);r.default.instance.setExp(r.default.instance.Exp),this.achieveLvScript.onRefresh(9)},e.prototype.onEnable=function(){this.onRefresh()},e.prototype.start=function(){},e.instance=null,o([u(cc.Prefab)],e.prototype,"achieveItem",void 0),e=n=o([l],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../../Hero/HeroGlobal":"HeroGlobal","./AchieveItem":"AchieveItem","./AchieveLv":"AchieveLv"}],Activity:[function(t,e,n){"use strict";cc._RF.push(e,"a5587zj1cNNFKptmYQuwvi0","Activity");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Ad/AdMgr"),s=t("../Ad/AdList"),r=t("../DataMgr"),c=t("../Menu"),l=t("../Hero/HeroGlobal"),u=t("../TextureMgr"),d=t("../nativets/Config"),p=cc._decorator,h=p.ccclass,f=p.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.activityItem=null,e.bgSf=[],e.haveSf=[],e.nowSf=[],e.nothaveSf=[],e}var n;return i(e,t),n=e,e.prototype.init=function(){var t=this.node.getChildByName("progress");this.progressArrs=[];for(var e=0;e<3;e++)this.progressArrs.push(t.getChildByName(""+e));this.btnGet=this.node.getChildByName("get").getComponent(cc.Button),this.initLayout()},e.prototype.onLoad=function(){n.instance=this,this.init(),this.refreshState()},e.prototype.start=function(){},e.prototype.getCoinsNum=function(){return 400+15*l.default.instance.Level},e.prototype.getJadeNum=function(){return 20+5*Math.floor(.05*l.default.instance.Level)},e.prototype.getLifeNum=function(){return 10},e.prototype.initLayout=function(){this.itemBg=[],this.itemIcon=[],this.itemName=[],this.itemNum=[],this.itemTitle=[];for(var t=0;t<4;t++){var e=cc.instantiate(this.activityItem);switch(e.parent=this.node,e.name=""+t,e.position=cc.v2(230*t-350,-20),this.itemBg.push(e.getComponent(cc.Sprite)),this.itemTitle.push(e.getChildByName("title").getComponent(cc.Sprite)),this.itemIcon.push(e.getChildByName("icon").getComponent(cc.Sprite)),this.itemName.push(e.getChildByName("name").getComponent(cc.Label)),this.itemNum.push(e.getChildByName("num").getComponent(cc.Label)),t){case 0:this.itemIcon[t].spriteFrame=u.default.instance.rewardSfInGame[1],this.itemName[t].string="\u91d1\u5e01";break;case 1:this.itemIcon[t].spriteFrame=u.default.instance.rewardSfInGame[0],this.itemName[t].string="\u94bb\u77f3";break;case 2:this.itemIcon[t].spriteFrame=u.default.instance.rewardSfInGame[2],this.itemName[t].string="\u519b\u7cae";break;case 3:var n=d.getDataById(6010203);this.itemIcon[t].spriteFrame=u.default.instance.getSoulIconById(6010203),this.itemName[t].string="\u6b66\u9b42",this.itemNum[t].string=n.name}}},e.prototype.refreshLayout=function(){for(var t=0;t<4;t++)switch(this.itemBg[t].spriteFrame=this.getBgSf(t),this.itemTitle[t].spriteFrame=this.getTitleSf(t)[t],t){case 0:this.itemNum[t].string="x"+this.getCoinsNum();break;case 1:this.itemNum[t].string="x"+this.getJadeNum();break;case 2:this.itemNum[t].string="x"+this.getLifeNum()}},e.prototype.getTitleSf=function(t){return t<r.default.instance.activityCount?this.haveSf:t==r.default.instance.activityCount?this.nowSf:this.nothaveSf},e.prototype.getBgSf=function(t){return t<r.default.instance.activityCount?this.bgSf[0]:t==r.default.instance.activityCount?this.bgSf[1]:this.bgSf[2]},e.prototype.onBtnGet=function(){r.default.instance.activityCount<4&&(a.default.instance?a.default.instance.showRewardAd(s.default.WXVIDEOLIST2.\u6bcf\u65e5):(this.onGet(),r.default.instance.activityCount++,r.default.instance.saveSaveDate())),this.refreshState()},e.prototype.onGet=function(){if(r.default.instance.activityCount<4)switch(r.default.instance.activityCount){case 0:c.default.instance.addCoins(this.getCoinsNum());break;case 1:c.default.instance.addJade(this.getJadeNum());break;case 2:c.default.instance.addLife(this.getLifeNum());break;case 3:l.default.instance.pushEquipmentData(6010203)}},e.prototype.refreshState=function(){var t=r.default.instance.activityCount;this.setState(t),this.setProgress(t),this.refreshLayout()},e.prototype.setState=function(t){this.btnGet.interactable=t<4},e.prototype.setProgress=function(t){for(var e=0;e<3;e++)this.progressArrs[e].active=e<t},e.prototype.onEnable=function(){this.btnGet&&this.refreshState()},e.instance=null,o([f(cc.Prefab)],e.prototype,"activityItem",void 0),o([f([cc.SpriteFrame])],e.prototype,"bgSf",void 0),o([f([cc.SpriteFrame])],e.prototype,"haveSf",void 0),o([f([cc.SpriteFrame])],e.prototype,"nowSf",void 0),o([f([cc.SpriteFrame])],e.prototype,"nothaveSf",void 0),e=n=o([h],e)}(cc.Component);n.default=g,cc._RF.pop()},{"../Ad/AdList":"AdList","../Ad/AdMgr":"AdMgr","../DataMgr":"DataMgr","../Hero/HeroGlobal":"HeroGlobal","../Menu":"Menu","../TextureMgr":"TextureMgr","../nativets/Config":"Config"}],AdList:[function(t,e,n){"use strict";cc._RF.push(e,"55d92n0d1NLu51cSYAVL75V","AdList"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.BANNERLIST=cc.Enum({"\u9996\u9875\u53f3\u4e0b":1,"\u5730\u56fe\u8be6\u60c5\u53f3\u4e0b":2,"\u6e38\u620f\u5185\u6682\u505c\u4e2d\u4e0b":3,"\u6e38\u620f\u7ed3\u7b97\u53f3\u4e0a":4,"\u5947\u9047\u4e2d\u4e0b":5,"\u5468\u8fb9\u5de6\u4e0b":6,"\u901a\u5173\u5b9d\u7bb1":7,"\u5730\u56fe\u53f3\u4e0a":8,"\u52a0\u8f7d\u53f3\u4e0b":9}),t.WXVIDEOLIST1=cc.Enum({"\u5f00\u5c40Buff":101,"\u590d\u6d3b":102}),t.WXVIDEOLIST2=cc.Enum({"\u52a0\u91d1\u5e01":201,"\u52a0\u4f53\u529b":202,"\u52a0\u4ed9\u7389":203,"\u6bcf\u65e5":204,"\u8865\u7b7e":205,"\u5168\u90fd\u8981":206,"\u53cc\u500d\u9886\u53d6":207,"\u6b66\u9b42\u5408\u6210":208,"\u9650\u65f6\u6b66\u9b42":209,"\u79d8\u7c4d\u53cc\u500d":210,"\u795e\u7fc5":211,"\u6536\u85cf\u793c\u5305":212,"\u5947\u95e8\u62bd\u5956":213,"\u514d\u8d39\u5947\u95e8":214}),t.QQVIDEOLIST1=cc.Enum({"\u5f00\u5c40Buff":101,"\u590d\u6d3b":102}),t.QQVIDEOLIST2=cc.Enum({"\u52a0\u91d1\u5e01":201,"\u52a0\u4f53\u529b":202,"\u52a0\u4ed9\u7389":203,"\u6bcf\u65e5":204,"\u8865\u7b7e":205,"\u5168\u90fd\u8981":206,"\u53cc\u500d\u9886\u53d6":207,"\u6b66\u9b42\u5408\u6210":208,"\u9650\u65f6\u6b66\u9b42":209,"\u79d8\u7c4d\u53cc\u500d":210,"\u795e\u7fc5":211,"\u6536\u85cf\u793c\u5305":212,"\u5947\u95e8\u62bd\u5956":213,"\u514d\u8d39\u5947\u95e8":214}),t.QQBlockList=cc.Enum({"\u9996\u9875\u5355\u4e2a":1,"\u7ed3\u7b975\u4e2a":5}),t.OPPOVIDEOLIST1=cc.Enum({"\u5f00\u5c40Buff":101,"\u590d\u6d3b":102}),t.OPPOVIDEOLIST2=cc.Enum({"\u52a0\u91d1\u5e01":201,"\u52a0\u4f53\u529b":202,"\u52a0\u4ed9\u7389":203,"\u6bcf\u65e5":204,"\u8865\u7b7e":205,"\u5168\u90fd\u8981":206,"\u53cc\u500d\u9886\u53d6":207,"\u6b66\u9b42\u5408\u6210":208,"\u9650\u65f6\u6b66\u9b42":209,"\u79d8\u7c4d\u53cc\u500d":210,"\u795e\u7fc5":211,"\u6536\u85cf\u793c\u5305":212,"\u5947\u95e8\u62bd\u5956":213,"\u514d\u8d39\u5947\u95e8":214}),t.VIVOVIDEOLIST1=cc.Enum({"\u5f00\u5c40Buff":101,"\u590d\u6d3b":102}),t.VIVOVIDEOLIST2=cc.Enum({"\u52a0\u91d1\u5e01":201,"\u52a0\u4f53\u529b":202,"\u52a0\u4ed9\u7389":203,"\u6bcf\u65e5":204,"\u8865\u7b7e":205,"\u5168\u90fd\u8981":206,"\u53cc\u500d\u9886\u53d6":207,"\u6b66\u9b42\u5408\u6210":208,"\u9650\u65f6\u6b66\u9b42":209,"\u79d8\u7c4d\u53cc\u500d":210,"\u795e\u7fc5":211,"\u6536\u85cf\u793c\u5305":212,"\u5947\u95e8\u62bd\u5956":213,"\u514d\u8d39\u5947\u95e8":214}),t}();n.default=i,cc._RF.pop()},{}],AdMgr:[function(t,e,n){"use strict";cc._RF.push(e,"0ec39sxd/BMlb+egelcaD9P","AdMgr");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../nativets/Platform"),s=t("./WXAdMgr"),r=t("./AdRewardMgr"),c=t("./QQAdMgr"),l=t("./OPPOAdMgr"),u=t("./VIVOAdMgr"),d=t("./NativeAd"),p=t("./AndroidAdMgr"),h=t("./TTAdMgr"),f=cc._decorator,g=f.ccclass,m=(f.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return i(e,t),n=e,e.prototype.init=function(){switch(r.default.getInstance(),this.PlatformString=a.getPlatform(),console.log(this.PlatformString),this.PlatformString){case a.Platform.WX:s.default.getInstance().init();break;case a.Platform.QQ:c.default.getInstance().init();break;case a.Platform.OPPO:l.default.getInstance().init(),this.OPPOInterstitialCount=0;break;case a.Platform.VIVO:u.default.getInstance().init(),this.VIVOInterstitialCount=0;break;case a.Platform.Android:p.default.getInstance().init();break;case a.Platform.TT:h.default.getInstance().init()}},e.prototype.showBannerAd=function(t){switch(this.PlatformString){case a.Platform.WX:s.default.instance.WXBannerShow(t);break;case a.Platform.QQ:c.default.instance.QQBannerShow(t);break;case a.Platform.OPPO:l.default.instance.OPPOBannerShow(t);break;case a.Platform.VIVO:u.default.instance.VIVOBannerShow(t);break;case a.Platform.Android:p.default.instance.AndroidBannerShow();break;case a.Platform.TT:h.default.instance.TTBannerShow(t)}},e.prototype.reloadBanner=function(){switch(this.PlatformString){case a.Platform.WX:s.default.instance.WXBannerInit();break;case a.Platform.QQ:c.default.instance.QQBannerInit()}},e.prototype.getBoxGiftRate=function(t){switch(this.PlatformString){case a.Platform.WX:return t?s.default.instance.winRate:s.default.instance.failRate;case a.Platform.QQ:return console.log("BoxRate",c.default.instance.winRate,c.default.instance.failRate),t?c.default.instance.winRate:c.default.instance.failRate}},e.prototype.getBoxGiftLimit=function(t){switch(this.PlatformString){case a.Platform.WX:return t?s.default.instance.winLimit:s.default.instance.failLimit;case a.Platform.QQ:return t?c.default.instance.winLimit:c.default.instance.failLimit}},e.prototype.showRewardAd=function(t){switch(cc.log("showRewardAd",t),this.PlatformString){case a.Platform.WX:s.default.instance.WXRewardShow(t);break;case a.Platform.QQ:c.default.instance.QQRewardShow(t);break;case a.Platform.OPPO:l.default.instance.OPPORewardShow(t);break;case a.Platform.VIVO:u.default.instance.VIVORewardShow(t);break;case a.Platform.Android:p.default.instance.AndroidRewardShow(t);break;case a.Platform.TT:h.default.instance.TTRewardShow(t)}},e.prototype.showShortcut=function(){switch(this.PlatformString){case a.Platform.WX:s.default.instance.WXFLoatShow();break;case a.Platform.QQ:c.default.instance.QQFLoatShow(),c.default.instance.QQShortcutShow();break;case a.Platform.OPPO:l.default.instance.OPPOShortcutShow();break;case a.Platform.VIVO:u.default.instance.VIVOShortcutShow()}},e.prototype.addShortcut=function(){switch(this.PlatformString){case a.Platform.WX:break;case a.Platform.QQ:c.default.instance.QQShortcutAdd();break;case a.Platform.OPPO:l.default.instance.OPPOShortcutAdd();break;case a.Platform.VIVO:u.default.instance.VIVOShortcutAdd()}},e.prototype.showGamePortal=function(){switch(this.PlatformString){case a.Platform.WX:s.default.instance.WXGamePortalShow();break;case a.Platform.QQ:c.default.instance.QQAppBoxShow()}},e.prototype.showGridAd=function(){switch(this.PlatformString){case a.Platform.WX:s.default.instance.WXGridAdShow()}},e.prototype.showInterstitial=function(){switch(this.PlatformString){case a.Platform.WX:case a.Platform.QQ:break;case a.Platform.OPPO:l.default.instance.OPPOInterstitialShow();break;case a.Platform.VIVO:u.default.instance.VIVOInterstitialShow();break;case a.Platform.Android:p.default.instance.AndroidInterstitialShow()}},e.prototype.showNativeAd=function(){switch(this.PlatformString){case a.Platform.WX:case a.Platform.QQ:case a.Platform.OPPO:break;case a.Platform.VIVO:d.default.instance&&d.default.instance.open();break;case a.Platform.Android:}},e.prototype.hideBanner=function(){switch(this.PlatformString){case a.Platform.WX:s.default.instance.WXBannerHide();break;case a.Platform.QQ:c.default.instance.QQBannerHide();break;case a.Platform.OPPO:l.default.instance.OPPOBannerHide();break;case a.Platform.VIVO:u.default.instance.VIVOBannerHide();break;case a.Platform.Android:p.default.instance.AndroidBannerHide();break;case a.Platform.TT:h.default.instance.TTBannerHide()}this.reloadBanner()},e.prototype.onLoad=function(){n.instance=this,cc.game.addPersistRootNode(this.node),this.init()},e.prototype.start=function(){},e.instance=null,e=n=o([g],e)}(cc.Component));n.default=m,cc._RF.pop()},{"../nativets/Platform":"Platform","./AdRewardMgr":"AdRewardMgr","./AndroidAdMgr":"AndroidAdMgr","./NativeAd":"NativeAd","./OPPOAdMgr":"OPPOAdMgr","./QQAdMgr":"QQAdMgr","./TTAdMgr":"TTAdMgr","./VIVOAdMgr":"VIVOAdMgr","./WXAdMgr":"WXAdMgr"}],AdRewardMgr:[function(t,e,n){"use strict";cc._RF.push(e,"99537R8zYlCD67DXO9vEInn","AdRewardMgr"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../Game"),o=t("../BizarreAdventure/BizarreAdventure"),a=t("../Menu"),s=t("../DataMgr"),r=t("./AdList"),c=t("../Others/Activity"),l=t("../Others/Sign"),u=t("../Map/MapBox"),d=t("../Equipment"),p=t("../nativets/Global"),h=t("../Map/MapSelect"),f=t("../Hero/HeroGlobal"),g=t("../Others/TimeLimit/TimeLimit"),m=t("../BizarreAdventure/BATips"),y=t("../nativets/SaveMgr"),v=t("../Others/Qimen/Qimen"),b=function(){function t(){}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.onSuccess=function(t){switch(t){case r.default.WXVIDEOLIST1.\u5f00\u5c40Buff:p.default.getInstance().preBuff=!0,h.default.instance.refreshBuff();break;case r.default.WXVIDEOLIST1.\u590d\u6d3b:i.default.instance.onRevive();break;case r.default.WXVIDEOLIST2.\u5168\u90fd\u8981:o.default.instance.getAll();break;case r.default.WXVIDEOLIST2.\u53cc\u500d\u9886\u53d6:u.default.instance.getAll();break;case r.default.WXVIDEOLIST2.\u52a0\u91d1\u5e01:a.default.instance.addCoins(300+10*f.default.instance.Level),s.default.instance.coinsCount++,s.default.instance.saveSaveDate();break;case r.default.WXVIDEOLIST2.\u52a0\u4f53\u529b:a.default.instance.addLife(s.default.instance.lifeArrs[s.default.instance.lifeCount]),s.default.instance.lifeCount++,s.default.instance.saveSaveDate();break;case r.default.WXVIDEOLIST2.\u52a0\u4ed9\u7389:a.default.instance.addJade(s.default.instance.jadeArrs[s.default.instance.jadeCount]),s.default.instance.jadeCount++,s.default.instance.saveSaveDate();break;case r.default.WXVIDEOLIST2.\u6bcf\u65e5:c.default.instance.onGet(),s.default.instance.activityCount++,s.default.instance.saveSaveDate();break;case r.default.WXVIDEOLIST2.\u8865\u7b7e:l.default.instance.onSuccess();break;case r.default.WXVIDEOLIST2.\u6b66\u9b42\u5408\u6210:d.default.instance.soulRateVideo=1,d.default.instance.refreshSoulCompressRate();break;case r.default.WXVIDEOLIST2.\u9650\u65f6\u6b66\u9b42:f.default.instance.unlockPet(1),g.default.instance.onClose();break;case r.default.WXVIDEOLIST2.\u79d8\u7c4d\u53cc\u500d:m.default.instance.onDoubleReward();break;case r.default.WXVIDEOLIST2.\u795e\u7fc5:f.default.instance.pushEquipmentData(50204e4),f.default.instance.saveEquipmentArrs(),y.save("WingReward","true");break;case r.default.WXVIDEOLIST2.\u6536\u85cf\u793c\u5305:a.default.instance.addCoins(1e3);break;case r.default.WXVIDEOLIST2.\u514d\u8d39\u5947\u95e8:v.default.instance.onOpen();break;case r.default.WXVIDEOLIST2.\u5947\u95e8\u62bd\u5956:v.default.instance.getAll()}},t.instance=null,t}();n.default=b,cc._RF.pop()},{"../BizarreAdventure/BATips":"BATips","../BizarreAdventure/BizarreAdventure":"BizarreAdventure","../DataMgr":"DataMgr","../Equipment":"Equipment","../Game":"Game","../Hero/HeroGlobal":"HeroGlobal","../Map/MapBox":"MapBox","../Map/MapSelect":"MapSelect","../Menu":"Menu","../Others/Activity":"Activity","../Others/Qimen/Qimen":"Qimen","../Others/Sign":"Sign","../Others/TimeLimit/TimeLimit":"TimeLimit","../nativets/Global":"Global","../nativets/SaveMgr":"SaveMgr","./AdList":"AdList"}],AndroidAdMgr:[function(t,e,n){"use strict";cc._RF.push(e,"46255GS+zBB0ZZi+zesiUeJ","AndroidAdMgr");var i=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var o=t("./AdRewardMgr"),a=cc._decorator,s=a.ccclass,r=(a.property,function(){function t(){}var e;return e=t,t.getInstance=function(){return this.instance||(this.instance=new e),this.instance},t.prototype.init=function(){this.AndroidInit()},t.prototype.AndroidInit=function(){cc.director.on("AndroidSuccess",this.onAndroidSuccess,this),cc.director.on("AndroidFail",this.onAndroidFail,this)},t.prototype.onAndroidSuccess=function(t){o.default.instance.onSuccess(t)},t.prototype.onAndroidFail=function(t){},t.prototype.AndroidRewardShow=function(t){this.AndroidRewardIndex=t,jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showAd","(I)V",t)},t.prototype.AndroidBannerShow=function(){},t.prototype.AndroidBannerHide=function(){},t.prototype.AndroidShowToast=function(){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showToast","()V")},t.prototype.AndroidInterstitialShow=function(){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showInterstitial","()V")},t.prototype.AndroidInterstitialHide=function(){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","hideInterstitial","()V")},t.prototype.AndroidNativeShow=function(){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showNative","()V")},t.instance=null,t=e=i([s],t)}());n.default=r,cc._RF.pop()},{"./AdRewardMgr":"AdRewardMgr"}],AndroidHide:[function(t,e,n){"use strict";cc._RF.push(e,"21346vljphLHrNNm4vmzahZ","AndroidHide");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,r=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return i(e,t),n=e,e.prototype.onLoad=function(){n.instance=this,this.node.active=!1,cc.director.on("AndroidHide",this.show,this)},e.prototype.show=function(){this.node.active=!0},e.prototype.close=function(){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","hideInterstitial","()V"),this.node.active=!1},e.prototype.onBtnClose=function(){this.close()},e.prototype.onDestroy=function(){cc.director.off("AndroidHide",this.show,this)},e.instance=null,e=n=o([s],e)}(cc.Component));n.default=r,cc._RF.pop()},{}],ArrowRain:[function(t,e,n){"use strict";cc._RF.push(e,"7223cWFswJCfoG5oTlvuFcl","ArrowRain");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../nativets/Global"),s=t("../Hero/Hero"),r=t("../nativets/Config"),c=t("../Audio"),l=cc._decorator,u=l.ccclass,d=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.attackSpace=3,e.attackTime=.5,e}var n;return i(e,t),n=e,e.prototype.init=function(){this.attackSpace=3,this.hit=this.node.getChildByName("hit"),this.hitBox=this.hit.getComponent(cc.BoxCollider),this.warn=this.node.getChildByName("warn"),this.warnBg=this.node.getChildByName("warnBg")},e.prototype.onLoad=function(){n.instance=this,this.init()},e.prototype.use=function(){c.default.instance.playAudio("ArrowRain"),this.playing=!0,this.node.x=s.default.instance.node.x,this.hitBox.tag=1.5*r.MonsterATK[a.default.getInstance().gameDifficulty][a.default.getInstance().nowLevel-40*a.default.getInstance().gameDifficulty-1],this.playBegin()},e.prototype.unuse=function(){this.node.x=-900,this.playing=!1},e.prototype.setWarnActive=function(t){this.warn.active=t,this.warnBg.active=t},e.prototype.playBegin=function(){this.setWarnActive(!0),this.isStop=!1,this.node.y=-220,this.hit.y=900,this.speedY=0},e.prototype.reset=function(){this.node.y=-900},e.prototype.playEnd=function(){this.setWarnActive(!1),this.isStop=!0},e.prototype.start=function(){},e.prototype.update=function(t){var e=this;a.default.getInstance().inGame&&this.playing?this.hit.y<=0?this.isStop||(this.playEnd(),this.scheduleOnce(function(){e.unuse()},1.5)):(this.speedY+=-1800*t,this.hit.y+=this.speedY*t):this.playBegin()},e.instance=null,e=n=o([u],e)}(cc.Component));n.default=d,cc._RF.pop()},{"../Audio":"Audio","../Hero/Hero":"Hero","../nativets/Config":"Config","../nativets/Global":"Global"}],AudioGame:[function(t,e,n){"use strict";cc._RF.push(e,"1b7d277eoBAb6vlv43OfIrW","AudioGame");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,r=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioArrs=[],e}var n;return i(e,t),n=e,e.prototype.onLoad=function(){n.instance=this},e.prototype.getClip=function(t){return this.audioArrs[t]},e.prototype.start=function(){},e.instance=null,o([r({type:cc.AudioClip})],e.prototype,"audioArrs",void 0),e=n=o([s],e)}(cc.Component);n.default=c,cc._RF.pop()},{}],Audio:[function(t,e,n){"use strict";cc._RF.push(e,"295d57kkilAi5fk+Meu/hBy","Audio");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./Hero/HeroGlobal"),s=t("./Game"),r=t("./nativets/Global"),c=t("./AudioGame"),l=cc._decorator,u=l.ccclass,d=l.property,p=["ZYshow","DCshow","DQshow","BtnClick","CEUp","TopScroll","Eight"],h=["ZYattack1","ZYattack2","ZYattack3up","ZYattackmulti","ZYfalsh","ZYthunder","ZYsplitground","ZYfail","ZYultimate","DCfail","DCultimate","DQfail","DQultimate","monsterSword","monsterLancer","monsterSkill","DCArrow","ZYhurt0","ZYhurt1","ZYhurt2","DChurt0","DChurt1","DChurt2","DQhurt0","DQhurt1","DQhurt2","MonsterShow","addHp","MonsterDead","GetCoins","Typing","Win","Lose","ZYpd","DCjudge","DCmulti","Eleplantattack","Eleplantdead","Monsterfire","Monsterice","Giantstone","Giantdead","Giantroll","Eagleattack","Eagledead","ZYleidong","DCjianyu","monsterArrow","DCjumpattack","DCattack3","ArrowRain","BossWarn","XHDSkill1","XHDSkill2","XHDSkill3","CCSkill1","CCSkill2","CCSkill3","XXSkill1","XXSkill2","XXSkill3","DQattack1","DQattack2","DQattack3","DQjumpattack","DQyanluo","DQliuxingyu","DQheidong","DQdibaotianxing"],f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioArrs=[],e.monsterAudioArrs=[],e.menubgmclip=null,e.gamebgmclip=null,e.loadingclip=null,e.walkclip=null,e.bgm1=null,e.bgm2=null,e.BGvolume=.6,e.volume=.9,e}var n;return i(e,t),n=e,e.prototype.init=function(){cc.audioEngine.setFinishCallback(this.showId,function(){cc.log("effect stop")})},e.prototype.start=function(){n.instance=this},e.prototype.playBgm=function(t){var e=this;if(a.default.instance.BgmSwitch)switch(t){case"menu":null==this.bgm1&&this.menubgmclip&&(this.bgm1=cc.audioEngine.play(this.menubgmclip,!0,this.BGvolume));break;case"game":null==this.bgm2&&(this.gamebgmclip?this.bgm2=cc.audioEngine.play(this.gamebgmclip,!0,this.BGvolume):this.loadBgm||(this.loadBgm=!0,cc.loader.loadRes("bgm/game_bgm",cc.AudioClip,function(t,n){e.gamebgmclip=n,e.bgm2=cc.audioEngine.play(e.gamebgmclip,!0,e.BGvolume),e.loadBgm=!1})));break;case"loading":null==this.bgm3&&this.loadingclip&&(this.bgm3=cc.audioEngine.play(this.loadingclip,!1,this.BGvolume))}},e.prototype.stopBgm=function(t){switch(t){case"menu":null!=this.bgm1&&(cc.audioEngine.stop(this.bgm1),this.bgm1=null);break;case"game":null!=this.bgm2&&(cc.audioEngine.stop(this.bgm2),this.bgm2=null);break;case"loading":null!=this.bgm3&&(cc.audioEngine.stop(this.bgm3),this.bgm3=null)}},e.prototype.playAudio=function(t){var e=this;if(!a.default.instance.EffectSwitch)return"ZYfail"!=t&&"DCfail"!=t&&"DQfail"!=t||this.scheduleOnce(function(){s.default.instance.node&&(e.stopBgm("game"),e.playAudio("Lose"),s.default.instance.gameEndBg.active=!0,s.default.instance.gameEndBox.active=!0)},1.5),void("ZYshow"!=t&&"DCshow"!=t&&"DQshow"!=t||r.default.getInstance().inGame&&this.scheduleOnce(function(){e.playBgm("game")},3));if("walk"==t)this.walkclip&&(this.walk=cc.audioEngine.play(this.walkclip,!0,this.volume));else{var n=p.indexOf(t),i=(this.audioArrs,this.audioArrs[n]);-1==n&&(n=h.indexOf(t),c.default.instance&&(c.default.instance.audioArrs,i=c.default.instance.getClip(n))),-1!=n&&("ZYshow"==t||"DCshow"==t||"DQshow"==t?(i&&(this.showId=cc.audioEngine.play(i,!1,this.volume)),r.default.getInstance().inGame&&cc.audioEngine.setFinishCallback(this.showId,function(){e.playBgm("game")})):"ZYfail"==t||"DCfail"==t||"DQfail"==t?(i&&(this.showId=cc.audioEngine.play(i,!1,this.volume)),cc.audioEngine.setFinishCallback(this.showId,function(){s.default.instance.node&&(e.stopBgm("game"),e.playAudio("Lose"),s.default.instance.gameEndBg.active=!0,s.default.instance.gameEndBox.active=!0)})):i&&cc.audioEngine.play(i,!1,this.volume))}},e.prototype.stopAudio=function(t){switch(t){case"walk":null!=this.walk&&(cc.audioEngine.stop(this.walk),this.walk=null)}},e.prototype.playFirst=function(t){var e=p.indexOf(t);this.firstId&&cc.audioEngine.stop(this.firstId),-1!=e&&this.audioArrs[e]&&(this.firstId=cc.audioEngine.play(this.audioArrs[e],!1,this.volume))},e.instance=null,o([d({type:cc.AudioClip})],e.prototype,"audioArrs",void 0),o([d({type:cc.AudioClip})],e.prototype,"monsterAudioArrs",void 0),o([d({type:cc.AudioClip})],e.prototype,"menubgmclip",void 0),o([d({type:cc.AudioClip})],e.prototype,"gamebgmclip",void 0),o([d({type:cc.AudioClip})],e.prototype,"loadingclip",void 0),o([d({type:cc.AudioClip})],e.prototype,"walkclip",void 0),e=n=o([u],e)}(cc.Component);n.default=f,cc._RF.pop()},{"./AudioGame":"AudioGame","./Game":"Game","./Hero/HeroGlobal":"HeroGlobal","./nativets/Global":"Global"}],BAItem:[function(t,e,n){"use strict";cc._RF.push(e,"abcefKKDIVCvZBUL/HLfL3l","BAItem");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./BizarreAdventure"),s=t("../TextureMgr"),r=cc._decorator,c=r.ccclass,l=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(){this.index=-1,this.icon=this.node.getChildByName("icon").getComponent(cc.Sprite),this.bg=this.node.getChildByName("bg").getComponent(cc.Sprite),this.nameLabel=this.node.getChildByName("name").getComponent(cc.Label),this.textLabel=this.node.getChildByName("text").getComponent(cc.Label),this.attLabel=this.node.getChildByName("att").getComponent(cc.Label)},e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.onBtnClick=function(){-1!=this.index&&a.default.instance.onReward(parseInt(this.node.name))},e.prototype.setItem=function(t,e,n,i,o){cc.log(t,e),this.index=t,this.icon.node.scale=t<4?1.2:1,this.bg.spriteFrame=t<4?s.default.instance.rewardBg:null,this.icon.spriteFrame=e,this.nameLabel.string=n,this.textLabel.string=i,this.attLabel.string=o},e=o([c],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../TextureMgr":"TextureMgr","./BizarreAdventure":"BizarreAdventure"}],BATips:[function(t,e,n){"use strict";cc._RF.push(e,"4def1CkBtZHJoZyp8YFzEFp","BATips");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Game"),s=t("./BizarreAdventure"),r=t("../TextureMgr"),c=t("../Tips"),l=t("../Hero/HeroGlobal"),u=t("../Ad/AdMgr"),d=t("../Ad/AdList"),p=t("../Audio"),h=t("../nativets/Config"),f=cc._decorator,g=f.ccclass,m=(f.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return i(e,t),n=e,e.prototype.init=function(){var t=this.node.getChildByName("box");this.icon=t.getChildByName("icon").getComponent(cc.Sprite),this.bg=t.getChildByName("bg").getComponent(cc.Sprite),this.nameLabel=t.getChildByName("name").getComponent(cc.Label),this.okBtn=t.getChildByName("ok"),this.doubleBtn=t.getChildByName("double"),this.closeBtn=t.getChildByName("close"),this.autoBtn=t.getChildByName("auto"),this.boxBtn=t.getChildByName("box"),this.autoLabel=this.autoBtn.getChildByName("text").getComponent(cc.Label)},e.prototype.onLoad=function(){n.instance=this,this.init(),this.node.active=!1},e.prototype.start=function(){},e.prototype.onOpen=function(){this.index=0,this.dataArrs=[];for(var t=s.default.instance.dataArrs,e=0;e<t.length;e++)this.dataArrs.push(t[e]);0!=this.dataArrs.length&&this.showTips()},e.prototype.onOpenSingle=function(t){var e=s.default.instance.dataArrs;this.index=0,this.dataArrs=[],this.dataArrs.push(e[t]),this.showTips()},e.prototype.showTips=function(){var t=this,e=this.dataArrs[this.index].index,n=this.dataArrs[this.index].id;if(this.bg.spriteFrame=3==e?r.default.instance.rewardBg:null,this.icon.spriteFrame=s.default.instance.getImgByJson(e,n),this.icon.node.setScale(1),this.nameLabel.string=s.default.instance.getNameByJson(e,n),5==e)this.bookId=n,c.default.instance.showSuccessInGame(this.oldCE+"\u4e0a"+(l.default.instance.HeroDataArrs[l.default.instance.MainHeroIndex].CE-this.oldCE)),this.setButtonState(1);else if(3==e)if(0!=h.getWhoId(n)&&h.getWhoId(n)!=l.default.instance.MainHeroIndex+1)this.setButtonState(0);else{var i=Math.floor(n/1e4);if(n%1e3<=Math.floor(l.default.instance.getMainHeroData().getDataByType(i)/1e4)%1e3)this.setButtonState(0);else{this.autoId=n,this.time=6,this.autoLabel.string="\u81ea\u52a8\u88c5\u59075";this.schedule(function(){t.time--,t.autoLabel.string="\u81ea\u52a8\u88c5\u5907"+t.time,t.time<=0&&t.autoSetEuipment()},1,5),this.setButtonState(2)}}else this.setButtonState(0),4!=e&&(this.icon.node.setScale(1.1),this.nameLabel.string=s.default.instance.getNameByJson(e,n)+" x "+n);this.node.active=!0},e.prototype.showBoxGiftReward=function(){this.bg.spriteFrame=null;var t=0,e=0;this.icon.node.setScale(1.1),Math.random()<.5?(t=0,e=40,l.default.instance.Jade+=e,l.default.instance.saveHeroGlobal()):(t=1,e=500,l.default.instance.Coins+=e,l.default.instance.saveHeroGlobal()),this.icon.spriteFrame=s.default.instance.getImgByJson(t,e),this.nameLabel.string=s.default.instance.getNameByJson(t,e)+" x "+e,this.setButtonState(9),this.node.active=!0},e.prototype.onBtnAuto=function(){p.default.instance.playAudio("BtnClick"),this.autoSetEuipment()},e.prototype.autoSetEuipment=function(){l.default.instance.getMainHeroData().setEquip(Math.floor(this.autoId/1e4),1e4*this.autoId),this.onNext()},e.prototype.setButtonState=function(t){var e=this,n=function(){e.closeBtn.active=1==t};this.unschedule(n),this.okBtn.active=0==t,this.doubleBtn.active=1==t,this.closeBtn.active=2==t,this.closeBtn.active||this.scheduleOnce(n,0),this.autoBtn.active=2==t,this.boxBtn.active=9==t},e.prototype.onBtnBoxClose=function(){p.default.instance.playAudio("BtnClick"),this.node.active=!1},e.prototype.onBtnDouble=function(){u.default.instance?u.default.instance.showRewardAd(d.default.WXVIDEOLIST2.\u79d8\u7c4d\u53cc\u500d):this.onDoubleReward()},e.prototype.onDoubleReward=function(){l.default.instance.pushEquipmentData(this.bookId),n.instance.oldCE=l.default.instance.HeroDataArrs[l.default.instance.MainHeroIndex].CE,l.default.instance.HeroDataArrs[l.default.instance.MainHeroIndex].updateAttribute(),c.default.instance.showSuccessInGame(this.oldCE+"\u4e0a"+(l.default.instance.HeroDataArrs[l.default.instance.MainHeroIndex].CE-this.oldCE)),this.onNext()},e.prototype.onBtnNext=function(){p.default.instance.playAudio("BtnClick"),this.onNext()},e.prototype.onNext=function(){this.index++,this.index==this.dataArrs.length?this.onClose():this.showTips()},e.prototype.onClose=function(){this.node.active=!1,a.default.instance.onEnd(!0)},e.instance=null,e=n=o([g],e)}(cc.Component));n.default=m,cc._RF.pop()},{"../Ad/AdList":"AdList","../Ad/AdMgr":"AdMgr","../Audio":"Audio","../Game":"Game","../Hero/HeroGlobal":"HeroGlobal","../TextureMgr":"TextureMgr","../Tips":"Tips","../nativets/Config":"Config","./BizarreAdventure":"BizarreAdventure"}],BgMgr:[function(t,e,n){"use strict";cc._RF.push(e,"1ff1c+K+u1A9oJ6X6cM71pR","BgMgr");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./Hero/Hero"),s=t("./Hero/HeroFSM"),r=t("./nativets/Global"),c=t("./Main"),l=t("./Game"),u=t("./Audio"),d=t("./Hero/HeroGlobal"),p=cc._decorator,h=p.ccclass,f=p.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nearBg=null,e.nearBg1=null,e.farBg=null,e.farBg1=null,e.midBg=null,e.midBg1=null,e.hero=null,e.farSpeed=30,e.nearSpeed=300,e.heroCamera=null,e}var n;return i(e,t),n=e,e.prototype.init=function(){n.instance=this,this.nearBg&&(this.hole=this.node.getChildByName("hole"),this.holeSprite=this.hole.getComponent(cc.Sprite),this.heroCamera=c.default.instance.heroCamera,cc.director.on("MapAction",this.MapAction,this),cc.director.on("MapActionHit",this.MapActionHit,this),cc.director.on("MapActionBase",this.MapActionBase,this))},e.prototype.reset=function(){this.heroCamera.position=cc.v2(0,0),this.nearBg.x=0,this.nearBg1.x=this.nearBg.width*this.nearBg.scaleX,this.farBg.x=0,this.farBg1.x=this.farBg.width*this.farBg.scaleX,this.midBg.x=0,this.midBg1.x=this.midBg.width*this.midBg.scaleX,r.default.getInstance().canScrollLeft=!1,r.default.getInstance().canScrollRight=!1},e.prototype.onGameStart=function(){this.reset()},e.prototype.setBg=function(t){this.nearBg.getComponent(cc.Sprite).spriteFrame=t?l.default.instance.holeNearSf:l.default.instance.nearSf,this.nearBg1.getComponent(cc.Sprite).spriteFrame=t?l.default.instance.holeNearSf:l.default.instance.nearSf,this.midBg.getComponent(cc.Sprite).spriteFrame=t?l.default.instance.holeMidSf:l.default.instance.midSf,this.midBg1.getComponent(cc.Sprite).spriteFrame=t?l.default.instance.holeMidSf:l.default.instance.midSf,this.farBg.getComponent(cc.Sprite).spriteFrame=t?l.default.instance.holeFarSf:l.default.instance.farSf,this.farBg1.getComponent(cc.Sprite).spriteFrame=t?l.default.instance.holeFarSf:l.default.instance.farSf},e.prototype.setMapByIndex=function(t){if(this.midBg.getChildByName("other").active=2==r.default.getInstance().BgIndex,this.midBg1.getChildByName("other").active=2==r.default.getInstance().BgIndex,t)switch(r.default.getInstance().MapLevelIndex){case 0:this.holeSprite.spriteFrame=l.default.instance.holeSf,this.hole.x=r.default.getInstance().MapSplitWidth+10,this.setBg(!1);break;case 1:this.hole.x=(r.default.getInstance().MapLevelIndex+1)*r.default.getInstance().MapSplitWidth+10,this.setBg(!0);break;case 2:this.reset(),this.hole.x=10,this.setBg(!1)}else this.holeSprite.spriteFrame=null,this.setBg(!1)},e.prototype.onBtnHome=function(){u.default.instance.playAudio("BtnClick"),c.default.instance.gameNode.active=!1,c.default.instance.menuNode.active=!0},e.prototype.MapAction=function(){var t=cc.sequence(cc.moveBy(.05,cc.v2(-10,12)),cc.moveBy(.05,cc.v2(10,-12))),e=cc.sequence(cc.moveBy(.1,cc.v2(-10,12)),cc.moveBy(.1,cc.v2(10,-12))),n=cc.sequence(cc.moveBy(.2,cc.v2(-10,12)),cc.moveBy(.2,cc.v2(10,-12))),i=cc.sequence(t,e,n);this.nearBg.runAction(i);var o=cc.sequence(cc.moveBy(.05,cc.v2(-10,12)),cc.moveBy(.05,cc.v2(10,-12))),a=cc.sequence(cc.moveBy(.1,cc.v2(-10,12)),cc.moveBy(.1,cc.v2(10,-12))),s=cc.sequence(cc.moveBy(.2,cc.v2(-10,12)),cc.moveBy(.2,cc.v2(10,-12))),r=cc.sequence(o,a,s);this.nearBg1.runAction(r);var c=cc.sequence(cc.moveBy(.05,cc.v2(-10,12)),cc.moveBy(.05,cc.v2(10,-12))),l=cc.sequence(cc.moveBy(.1,cc.v2(-10,12)),cc.moveBy(.1,cc.v2(10,-12))),u=cc.sequence(cc.moveBy(.2,cc.v2(-10,12)),cc.moveBy(.2,cc.v2(10,-12))),d=cc.sequence(c,l,u);this.midBg.runAction(d);var p=cc.sequence(cc.moveBy(.05,cc.v2(-10,12)),cc.moveBy(.05,cc.v2(10,-12))),h=cc.sequence(cc.moveBy(.1,cc.v2(-10,12)),cc.moveBy(.1,cc.v2(10,-12))),f=cc.sequence(cc.moveBy(.2,cc.v2(-10,12)),cc.moveBy(.2,cc.v2(10,-12))),g=cc.sequence(p,h,f);this.midBg1.runAction(g)},e.prototype.MapActionHit=function(){var t=cc.sequence(cc.moveBy(.02,cc.v2(-8,10)).easing(cc.easeBackInOut()),cc.moveBy(.04,cc.v2(8,-10)));this.nearBg.runAction(t);var e=cc.sequence(cc.moveBy(.02,cc.v2(-8,10)).easing(cc.easeBackInOut()),cc.moveBy(.04,cc.v2(8,-10)));this.nearBg1.runAction(e);var n=cc.sequence(cc.moveBy(.02,cc.v2(-8,10)).easing(cc.easeBackInOut()),cc.moveBy(.04,cc.v2(8,-10)));this.midBg.runAction(n);var i=cc.sequence(cc.moveBy(.02,cc.v2(-8,10)).easing(cc.easeBackInOut()),cc.moveBy(.04,cc.v2(8,-10)));this.midBg1.runAction(i)},e.prototype.MapActionBase=function(){var t=cc.sequence(cc.moveBy(.02,cc.v2(-3,12)).easing(cc.easeBackInOut()),cc.moveBy(.04,cc.v2(3,-12)));this.nearBg.runAction(t);var e=cc.sequence(cc.moveBy(.02,cc.v2(-3,12)).easing(cc.easeBackInOut()),cc.moveBy(.04,cc.v2(3,-12)));this.nearBg1.runAction(e);var n=cc.sequence(cc.moveBy(.02,cc.v2(-3,12)).easing(cc.easeBackInOut()),cc.moveBy(.04,cc.v2(3,-12)));this.midBg.runAction(n);var i=cc.sequence(cc.moveBy(.02,cc.v2(-3,12)).easing(cc.easeBackInOut()),cc.moveBy(.04,cc.v2(3,-12)));this.midBg1.runAction(i)},e.prototype.start=function(){this.init()},e.prototype.getLeftNearBg=function(){return this.nearBg.x<this.nearBg1.x?this.nearBg:this.nearBg1},e.prototype.getLeftFarBg=function(){return this.farBg.x<this.farBg1.x?this.farBg:this.farBg1},e.prototype.getLeftMidBg=function(){return this.midBg.x<this.midBg1.x?this.midBg:this.midBg1},e.prototype.getRightNearBg=function(){return this.nearBg.x>this.nearBg1.x?this.nearBg:this.nearBg1},e.prototype.getRightFarBg=function(){return this.farBg.x>this.farBg1.x?this.farBg:this.farBg1},e.prototype.getRightMidBg=function(){return this.midBg.x>this.midBg1.x?this.midBg:this.midBg1},e.prototype.extendLeft=function(t){var e=this.getLeftNearBg(),n=this.getRightNearBg(),i=cc.v2(0,0);if(this.heroCamera.getComponent(cc.Camera).getWorldToScreenPoint(n.position,i),i.x>cc.winSize.width&&(n.x=e.x-this.nearBg.width*this.nearBg.scaleX),r.default.getInstance().canScrollLeft&&(s.default.instance.fsm.is("state_move")||s.default.instance.fsm.is("state_jump")||s.default.instance.fsm.is("state_flash")||s.default.instance.fsm.is("state_jumpattack"))){var o=a.default.instance.SP;o||(o=300);var c=this.getLeftFarBg(),l=this.getRightFarBg(),u=Math.floor(o/2*t*100)/100;d.default.instance.MainHeroIndex>0&&s.default.instance.fsm.is("state_jumpattack")&&(u*=.1),"skill_guangbo"!=s.default.instance.sk.animation&&"skill_dipotianxing"!=s.default.instance.sk.animation||(u/=10),c.x+=-u,l.x+=-u;var p=cc.v2(0,0);this.heroCamera.getComponent(cc.Camera).getWorldToScreenPoint(l.position,p),p.x>cc.winSize.width&&(l.x=c.x-this.farBg.width*this.farBg.scaleX);var h=this.getLeftMidBg(),f=this.getRightMidBg(),g=Math.floor(o/4*t*100)/100;d.default.instance.MainHeroIndex>0&&s.default.instance.fsm.is("state_jumpattack")&&(g*=.1),"skill_guangbo"!=s.default.instance.sk.animation&&"skill_dipotianxing"!=s.default.instance.sk.animation||(g/=10),h.x+=-g,f.x+=-g;var m=cc.v2(0,0);this.heroCamera.getComponent(cc.Camera).getWorldToScreenPoint(f.position,m),m.x>cc.winSize.width&&(f.x=h.x-this.midBg.width*this.midBg.scaleX)}},e.prototype.extendRight=function(t){var e=this.getLeftNearBg(),n=this.getRightNearBg(),i=cc.v2(0,0);if(this.heroCamera.getComponent(cc.Camera).getWorldToScreenPoint(n.position,i),i.x<0&&(e.x=n.x+this.nearBg.width*this.nearBg.scaleX),r.default.getInstance().canScrollRight&&(s.default.instance.fsm.is("state_move")||s.default.instance.fsm.is("state_jump")||s.default.instance.fsm.is("state_flash")||s.default.instance.fsm.is("state_jumpattack"))){var o=a.default.instance.SP;o||(o=300);var c=this.getLeftFarBg(),l=this.getRightFarBg(),u=Math.floor(o/2*t*100)/100;d.default.instance.MainHeroIndex>0&&s.default.instance.fsm.is("state_jumpattack")&&(u*=.1),"skill_guangbo"!=s.default.instance.sk.animation&&"skill_dipotianxing"!=s.default.instance.sk.animation||(u/=10),c.x+=u,l.x+=u;var p=cc.v2(0,0);this.heroCamera.getComponent(cc.Camera).getWorldToScreenPoint(l.position,p),p.x<0&&(c.x=l.x+this.farBg.width*this.farBg.scaleX);var h=this.getLeftMidBg(),f=this.getRightMidBg(),g=Math.floor(o/4*t*100)/100;d.default.instance.MainHeroIndex>0&&s.default.instance.fsm.is("state_jumpattack")&&(g*=.1),"skill_guangbo"!=s.default.instance.sk.animation&&"skill_dipotianxing"!=s.default.instance.sk.animation||(g/=10),h.x+=g,f.x+=g;var m=cc.v2(0,0);this.heroCamera.getComponent(cc.Camera).getWorldToScreenPoint(f.position,m),m.x<0&&(h.x=f.x+this.midBg.width*this.midBg.scaleX)}},e.prototype.onBtnResume=function(){u.default.instance.playAudio("BtnClick"),cc.director.resume()},e.prototype.update=function(t){(r.default.getInstance().MoveState==r.default.getInstance().STATE.LEFT||r.default.getInstance().MoveState==r.default.getInstance().STATE.RIGHT||s.default.instance.fsm.is("state_flash")||s.default.instance.fsm.is("state_jumpattack")||r.default.getInstance().attackMove)&&(this.extendRight(t),this.extendLeft(t))},e.prototype.onEnable=function(){this.init()},e.prototype.onDestroy=function(){cc.director.off("MapAction",this.MapAction,this),cc.director.off("MapActionHit",this.MapActionHit,this),cc.director.off("MapActionBase",this.MapActionBase,this)},e.instance=null,o([f(cc.Node)],e.prototype,"nearBg",void 0),o([f(cc.Node)],e.prototype,"nearBg1",void 0),o([f(cc.Node)],e.prototype,"farBg",void 0),o([f(cc.Node)],e.prototype,"farBg1",void 0),o([f(cc.Node)],e.prototype,"midBg",void 0),o([f(cc.Node)],e.prototype,"midBg1",void 0),o([f(cc.Node)],e.prototype,"hero",void 0),e=n=o([h],e)}(cc.Component);n.default=g,cc._RF.pop()},{"./Audio":"Audio","./Game":"Game","./Hero/Hero":"Hero","./Hero/HeroFSM":"HeroFSM","./Hero/HeroGlobal":"HeroGlobal","./Main":"Main","./nativets/Global":"Global"}],BizarreAdventure:[function(t,e,n){"use strict";cc._RF.push(e,"413acToE/dJALUm8oxiMnzc","BizarreAdventure");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./BAItem"),s=t("../nativets/Config"),r=t("../nativets/Global"),c=t("../Hero/HeroGlobal"),l=t("../Game"),u=t("../i18n/Language"),d=t("../TextureMgr"),p=t("../Director"),h=t("../Audio"),f=t("../Ad/AdMgr"),g=t("./BATips"),m=t("../Ad/AdList"),y=cc._decorator,v=y.ccclass,b=y.property,A=["gem","gold","life","item","soul","book"],S=["\u53ef\u83b7\u5f97\u5b9d\u77f3","\u53ef\u83b7\u5f97\u91d1\u5e01","\u53ef\u83b7\u5f97\u519b\u7cae","\u53ef\u83b7\u5f97\u88c5\u5907","\u53ef\u4e0e\u88c5\u5907\u878d\u5408","\u6c38\u4e45\u63d0\u5347\u5c5e\u6027"],I=["atk","def","hp","ls","sp","cr","arp","bonus","cd","miss","exp","gold"],_=[u.default.equipmentAtk,u.default.equipmentDef,u.default.equipmentHp,u.default.equipmentLs,u.default.equipmentSp,u.default.equipmentCr,u.default.equipmentArp,u.default.equipmentBonus,u.default.equipmentCd,u.default.equipmentMiss,u.default.equipmentExp,u.default.equipmentGold],B=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.baItemPrefab=null,e}var n;return i(e,t),n=e,e.prototype.init=function(){this.boxNode=this.node.getChildByName("box"),this.initLayout(),this.node.active=!1},e.prototype.initLayout=function(){this.itemScripts=[];for(var t=0;t<3;t++){var e=cc.instantiate(this.baItemPrefab);e.name=""+t,e.parent=this.boxNode,e.position=cc.v2(300*(t-1),0),this.itemScripts.push(e.getComponent(a.default)),this.itemScripts[t].init()}},e.prototype.onLoad=function(){n.instance=this,this.init()},e.prototype.start=function(){},e.prototype.onOpen=function(t){if(!this.inOpen){this.inOpen=!0,this.isWin=t;var e=s.BizarreAdventureData[r.default.getInstance().nowLevel-1];if(!e)return this.onClose(),void l.default.instance.onEnd(!0);var n=parseInt(e.type),i=parseFloat(e.rate);if(Math.random()>i)return this.onClose(),void l.default.instance.onEnd(!0);if(1==i&&c.default.instance.MapData[r.default.getInstance().gameDifficulty][r.default.getInstance().nowLevel-40*r.default.getInstance().gameDifficulty-1]>0)return this.onClose(),void l.default.instance.onEnd(!0);p.default.instance.showType(n),this.getArrs(e)}},e.prototype.onBtnAll=function(){h.default.instance.playAudio("BtnClick"),f.default.instance?f.default.instance.showRewardAd(m.default.WXVIDEOLIST2.\u5168\u90fd\u8981):this.getAll()},e.prototype.getAll=function(){for(var t=0;t<this.dataArrs.length;t++)this.unlockReward(this.dataArrs[t]);c.default.instance.saveEquipmentArrs(),this.onClose(),g.default.instance.onOpen()},e.prototype.onReward=function(t){this.unlockReward(this.dataArrs[t]),c.default.instance.saveEquipmentArrs(),this.onClose(),g.default.instance.onOpenSingle(t)},e.prototype.onClose=function(){this.node.active=!1,this.inOpen=!1},e.prototype.getArrs=function(t){for(var e=[],n=0;n<A.length;n++)if(t[A[n]]){var i=t[A[n]].split(", "),o=parseInt(i[Math.floor(Math.random()*i.length)]);e.push({index:n,id:o})}console.log("DataArrs1",e),e.length>3&&e.splice(Math.floor(3*Math.random()),1),this.dataArrs=e,console.log("DataArrs2",e);for(var a=0;a<3;a++){var s=e[a].index,r=e[a].id,c=this.getImgByJson(s,r),l=this.getNameByJson(s,r),u=this.getAttInData(s,r);this.itemScripts[a].setItem(s,c,l,S[e[a].index],u)}},e.prototype.unlockReward=function(t){if(t){cc.log("reward",t);var e=parseInt(t.id);switch(t.index){case 0:c.default.instance.Jade+=e,c.default.instance.saveHeroGlobal();break;case 1:c.default.instance.Coins+=e,c.default.instance.saveHeroGlobal();break;case 2:c.default.instance.Life+=e,c.default.instance.saveHeroGlobal();break;case 3:c.default.instance.pushEquipmentData(1e4*e);break;case 4:c.default.instance.pushEquipmentData(e);break;case 5:c.default.instance.pushEquipmentData(e),g.default.instance.oldCE=c.default.instance.HeroDataArrs[c.default.instance.MainHeroIndex].CE,c.default.instance.HeroDataArrs[c.default.instance.MainHeroIndex].updateAttribute()}}},e.prototype.getNameByJson=function(t,e){switch(t){case 0:return"\u5b9d\u77f3";case 1:return"\u91d1\u5e01";case 2:return"\u519b\u7cae";case 3:return s.getDataById(e).name;case 4:return s.getDataById(e).name+"\xb7\u6b66\u9b42";case 5:return s.getDataById(e).name}return t+""+e},e.prototype.getImgByJson=function(t,e){switch(t){case 0:case 1:case 2:return d.default.instance.rewardSfInGame[t];case 3:return d.default.instance.getEquipmentIconById(e);case 4:return d.default.instance.getSoulIconById(e);case 5:return d.default.instance.rewardSfInGame[3]}},e.prototype.getAttInData=function(t,e){switch(t){case 0:return"\u5b9d\u77f3 x "+e;case 1:return"\u91d1\u5e01 x "+e;case 2:return"\u519b\u7cae x "+e;case 3:var n=s.getDataById(e);return this.getDetailByJson(n);case 4:var i=s.getDataById(e);return this.getDetailByJson(i);case 5:var o=s.getDataById(e);return this.getDetailByJson(o)}return t+""+e},e.prototype.getDetailByJson=function(t){for(var e=0,n="",i=0;i<I.length;i++){var o=I[i];t[o]&&(n+=_[i]+"+"+t[o],n+=++e%2==0?"\n":"  ")}return n},e.instance=null,o([b(cc.Prefab)],e.prototype,"baItemPrefab",void 0),e=n=o([v],e)}(cc.Component);n.default=B,cc._RF.pop()},{"../Ad/AdList":"AdList","../Ad/AdMgr":"AdMgr","../Audio":"Audio","../Director":"Director","../Game":"Game","../Hero/HeroGlobal":"HeroGlobal","../TextureMgr":"TextureMgr","../i18n/Language":"Language","../nativets/Config":"Config","../nativets/Global":"Global","./BAItem":"BAItem","./BATips":"BATips"}],BossShow:[function(t,e,n){"use strict";cc._RF.push(e,"f115872oeNM1ICrumTqkrF8","BossShow");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=["\u67aa","\u5251","\u9524"],s=["\u72ec\u773c\u662f\u7537\u4eba\u7684\u6d6a\u6f2b","\u5b81\u53eb\u6211\u8d1f\u5929\u4e0b\u4eba","\u8131\uff01"],r=["\u590f\n\u4faf\n\u60c7","\u66f9\n\u64cd","\u8bb8\n\u891a"],c=cc._decorator,l=c.ccclass,u=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rareSfArrs=[],e}return i(e,t),e.prototype.init=function(){var t=this.node.getChildByName("right");this.rareSf=t.getChildByName("S").getComponent(cc.Sprite),this.weaponLabel=t.getChildByName("weapon").getComponent(cc.Label),this.nameLabel=t.getChildByName("name").getComponent(cc.Label),this.textLabel=t.getChildByName("text").getComponent(cc.Label)},e.prototype.setType=function(t){this.rareSf||this.init();var e=t-97;this.rareSf.spriteFrame=this.rareSfArrs[e],this.weaponLabel.string=a[e],this.nameLabel.string=r[e],this.textLabel.string=s[e]},e.prototype.start=function(){},o([u([cc.SpriteFrame])],e.prototype,"rareSfArrs",void 0),e=o([l],e)}(cc.Component);n.default=d,cc._RF.pop()},{}],BoxGift:[function(t,e,n){"use strict";cc._RF.push(e,"e289ds5xq1KGbwwY0ogJFpO","BoxGift");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../Audio"),s=t("../../Ad/AdMgr"),r=t("../../Ad/AdList"),c=t("../../BizarreAdventure/BATips"),l=cc._decorator,u=l.ccclass,d=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boxSf=[],e.fingerSf=[],e}var n;return i(e,t),n=e,e.prototype.init=function(){this.progressBar=this.node.getChildByName("ProgressBar").getComponent(cc.ProgressBar),this.backBtn=this.node.getChildByName("back"),this.clickBtn=this.node.getChildByName("Btn"),this.boxSprite=this.node.getChildByName("box").getComponent(cc.Sprite),this.fingerSprite=this.node.getChildByName("finger").getComponent(cc.Sprite),this.space=.35,this.fingerIndex=0},e.prototype.onLoad=function(){n.instance=this,this.node.active=!1,this.init()},e.prototype.start=function(){},e.prototype.open=function(){var t=this;this.boxActive=!0,this.node.active=!0,this.progressBar.node.active=!0,this.fingerSprite.node.active=!0,this.backBtn.active=!1,s.default.instance&&s.default.instance.hideBanner(),this.boxSprite.spriteFrame=this.boxSf[0],this.progressBar.progress=0,this.scheduleOnce(function(){t.backBtn.active=!0},2.5)},e.prototype.onBtnClick=function(){CC_WECHATGAME&&wx.vibrateShort(null),this.progressBar.progress<=.9&&(console.log("click"),this.progressBar.progress+=.1)},e.prototype.onBtnClose=function(){a.default.instance.playAudio("BtnClick"),this.close()},e.prototype.close=function(){this.node.active=!1,s.default.instance&&s.default.instance.hideBanner()},e.prototype.openBox=function(){var t=this;this.boxActive&&(this.boxActive=!1,s.default.instance&&s.default.instance.showBannerAd(r.default.BANNERLIST.\u901a\u5173\u5b9d\u7bb1),this.scheduleOnce(function(){t.progressBar.progress=0,t.progressBar.node.active=!1,t.fingerSprite.node.active=!1;var e=5;t.schedule(function(){e++,cc.log("i",e),t.boxSprite.spriteFrame=t.boxSf[e]},.2,2)},.5),this.scheduleOnce(function(){t.close(),c.default.instance&&c.default.instance.showBoxGiftReward()},3))},e.prototype.update=function(t){if(this.boxActive){this.progressBar.progress>0?this.progressBar.progress-=.0015+.001*Math.floor(3*Math.random()):this.progressBar.progress=0;var e=Math.floor(this.progressBar.progress/.15);cc.log(e),e<0&&(e=0),this.boxSprite.spriteFrame=this.boxSf[e];var n=.3*Math.random()+.5;this.progressBar.progress>n&&this.openBox(),this.space-=t,this.space<=0&&(this.space=.35,this.fingerIndex=1==this.fingerIndex?0:1,this.fingerSprite.spriteFrame=this.fingerSf[this.fingerIndex])}},e.instance=null,o([d([cc.SpriteFrame])],e.prototype,"boxSf",void 0),o([d([cc.SpriteFrame])],e.prototype,"fingerSf",void 0),e=n=o([u],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../../Ad/AdList":"AdList","../../Ad/AdMgr":"AdMgr","../../Audio":"Audio","../../BizarreAdventure/BATips":"BATips"}],Box:[function(t,e,n){"use strict";cc._RF.push(e,"48067B7NV1JR6l0T+Ey2H0u","Box");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Reward/RewardMgr"),s=t("../Game"),r=cc._decorator,c=r.ccclass,l=r.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.normal=null,e.open=null,e}return i(e,t),e.prototype.init=function(){this.light=this.node.getChildByName("light"),this.sprite=this.node.getComponent(cc.Sprite),this.light.active=!1,this.sprite.spriteFrame=this.normal,this.life=1},e.prototype.onLoad=function(){this.init()},e.prototype.openBox=function(){var t=this;this.light.active=!0,this.sprite.spriteFrame=this.open,this.scheduleOnce(function(){t.hideBox()},.5),a.default.instance.createCoins(s.default.instance.mapdata.boxId,cc.v2(this.node.x,this.node.y+60))},e.prototype.onlyOpen=function(){this.light.active=!0,this.sprite.spriteFrame=this.open},e.prototype.hideBox=function(){this.light.active=!1,this.node.active=!1,this.node.destroy()},e.prototype.start=function(){},o([l(cc.SpriteFrame)],e.prototype,"normal",void 0),o([l(cc.SpriteFrame)],e.prototype,"open",void 0),e=o([c],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../Game":"Game","../Reward/RewardMgr":"RewardMgr"}],BulletItem:[function(t,e,n){"use strict";cc._RF.push(e,"11d86p4znxMzbFtZypa1BaG","BulletItem");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./BulletMgr"),s=cc._decorator,r=s.ccclass,c=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(t){this.direct=this.node.scaleX>0?1:-1,this.sp=1e3,this.life=3,this.use(),cc.director.on("GameStart",this.unuse,this)},e.prototype.start=function(){},e.prototype.use=function(){this.using=!0,this.life=3,this.node.opacity=255},e.prototype.unuse=function(){this.life=0,this.using=!1,a.default.instance.bulletPool&&a.default.instance.bulletPool.put(this.node)},e.prototype.update=function(t){if(this.using&&this.life>0){var e=300+this.sp/2.4*this.life;this.node.x+=this.direct*t*e,this.life-=t,this.life<=0&&this.unuse()}},e.prototype.onDestroy=function(){cc.director.off("GameStart",this.unuse,this)},e=o([r],e)}(cc.Component));n.default=c,cc._RF.pop()},{"./BulletMgr":"BulletMgr"}],BulletMgr:[function(t,e,n){"use strict";cc._RF.push(e,"bc10boXDKJG2Ji3lOlfkweY","BulletMgr");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./Game"),s=t("./BulletItem"),r=t("./nativets/NodePool"),c=t("./Monster/MonsterBulletItem"),l=cc._decorator,u=l.ccclass,d=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arrowPrefab=null,e.monsterArrowPrefab=null,e.monsterFirePrefab=null,e.monsterIcePrefab=null,e.towerArrowPrefab=null,e}var n;return i(e,t),n=e,e.prototype.init=function(){this.OUTY=cc.winSize.height,this.bulletPool=new r.default;for(var t=0;t<3;t++){var e=cc.instantiate(this.arrowPrefab);e.parent=a.default.instance.gameEffectNode,this.bulletPool.put(e)}this.monsterbulletPool=new r.default;for(var n=0;n<3;n++){var i=cc.instantiate(this.monsterArrowPrefab);i.parent=a.default.instance.gameEffectNode,this.monsterbulletPool.put(i)}},e.prototype.onLoad=function(){n.instance=this,this.init()},e.prototype.create=function(t,e,n){var i=this.bulletPool.get();i||((i=cc.instantiate(this.arrowPrefab)).parent=a.default.instance.gameEffectNode,this.bulletPool.put(i)),i.position=e,i.scaleX=.7*n,i.getComponent(s.default).init(t)},e.prototype.createForMonster=function(t,e,n,i){var o=this.monsterbulletPool.get();o||((o=cc.instantiate(this.monsterArrowPrefab)).parent=a.default.instance.gameEffectNode,this.monsterbulletPool.put(o)),o.position=e,o.scaleX=.5*n,o.getComponent(cc.BoxCollider).tag=i,o.getComponent(c.default).init(t)},e.prototype.createForMonsterFire=function(t,e){var n=cc.instantiate(this.monsterFirePrefab);n.getComponent(cc.CircleCollider).tag=e,n.parent=a.default.instance.gameEffectNode,n.x=t;var i=n.getComponent(cc.Animation);i.stop(),i.play(),i.on(cc.Animation.EventType.FINISHED,function(){n.destroy()})},e.prototype.createForMonsterIce=function(t,e){var n=cc.instantiate(this.monsterIcePrefab);n.getComponent(cc.CircleCollider).tag=e,n.parent=a.default.instance.gameEffectNode,n.x=t,n.y=-205;var i=n.getComponent(cc.Animation);i.stop(),i.play(),i.on(cc.Animation.EventType.FINISHED,function(){n.destroy()})},e.prototype.createForTower=function(t,e,n,i){var o=this.towerbulletPool.get();o||(o=cc.instantiate(this.towerArrowPrefab))},e.prototype.start=function(){},e.prototype.update=function(t){},e.instance=null,o([d(cc.Prefab)],e.prototype,"arrowPrefab",void 0),o([d(cc.Prefab)],e.prototype,"monsterArrowPrefab",void 0),o([d(cc.Prefab)],e.prototype,"monsterFirePrefab",void 0),o([d(cc.Prefab)],e.prototype,"monsterIcePrefab",void 0),o([d(cc.Prefab)],e.prototype,"towerArrowPrefab",void 0),e=n=o([u],e)}(cc.Component);n.default=p,cc._RF.pop()},{"./BulletItem":"BulletItem","./Game":"Game","./Monster/MonsterBulletItem":"MonsterBulletItem","./nativets/NodePool":"NodePool"}],ComboMgr:[function(t,e,n){"use strict";cc._RF.push(e,"8b422KGSm5EdIdRHkK3MxNQ","ComboMgr");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./Game"),s=cc._decorator,r=s.ccclass,c=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.comboTime=2,e}var n;return i(e,t),n=e,e.prototype.init=function(){a.default.instance.combo=0,this.comboSpace=0,this.text=this.node.getChildByName("combo").getComponent(cc.Label),this.node.active=!1},e.prototype.onLoad=function(){n.instance=this,this.init()},e.prototype.start=function(){},e.prototype.attack=function(){a.default.instance.combo++,a.default.instance.combo>a.default.instance.maxCombo&&(a.default.instance.maxCombo=a.default.instance.combo),this.time=this.comboTime,this.node.active=!0},e.prototype.update=function(t){a.default.instance.combo>0&&(this.time-=t,this.comboSpace-=t,this.time<=0?(a.default.instance.combo=0,this.text.string="0",this.node.active=!1):this.comboSpace<=0&&(this.comboSpace=.5,this.text.string=a.default.instance.combo+"",this.node.active=!0,this.text.node.runAction(cc.sequence(cc.scaleTo(.3,1.2),cc.scaleTo(.2,1)))))},e.instance=null,e=n=o([r],e)}(cc.Component));n.default=c,cc._RF.pop()},{"./Game":"Game"}],Config:[function(t,e,n){"use strict";cc._RF.push(e,"6497ed47A5CqplCsM9TObJf","Config"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../i18n/Language");n.MonsterATK=[[5,7,12,15,22,27,33,39,44,50,65,79,86,92,100,110,120,125,131,142,175,190,210,220,230,250,270,275,300,330,360,380,390,420,445,460,510,550,590,650],[59,64,74,82,94,104,116,127,137,149,173,195,208,219,234,251,268,278,289,307,357,381,412,422,439,470,501,511,549,594,639,670,687,732,770,794,867,926,985,1072],[195,206,223,238,257,274,294,312,329,348,382,414,434,452,475,501,526,543,561,588,653,687,729,746,771,814,856,873,923,982,1041,1084,1109,1168,1219,1252,1345,1421,1497,1606]];n.MonsterHP=[[180,240,300,360,460,640,750,860,950,1070,1220,1450,1620,1740,1900,2100,2150,2250,2350,2450,2500,2500,2550,2650,2650,2750,2850,2950,3e3,3100,3100,3200,3300,3400,3500,3600,3700,3850,4200,4400],[1196,1288,1380,1472,1612,1848,2e3,2152,2280,2444,2644,2940,3164,3328,3540,3800,3880,4020,4160,4200,4380,4400,4480,4620,4640,4780,4920,5060,5140,5280,5300,5440,5580,5720,5860,6e3,6140,6340,6780,7040],[2065,2205,2346,2486,2684,2997,3210,3422,3606,3832,4102,4488,4786,5013,5298,5640,5766,5964,6162,6240,6486,6540,6666,6864,6918,7116,7314,7512,7638,7836,7890,8088,8286,8484,8682,8880,9078,9348,9906,10248]];n.MonsterArmor=[[0,0,0,30,49,50,60,80,90,120,155,220,260,300,350,400,450,500,500,500,700,700,700,800,1e3,1100,1100,1100,1200,1500,1500,1600,1700,1800,2e3,2100,2200,2300,2400,3e3],[140,150,170,223,263.9,285,316,358,389,442,500.5,592,656,720,795,870,945,1020,1040,1060,1300,1320,1340,1470,1710,1840,1860,1880,2010,2360,2380,2510,2640,2770,3010,3140,3270,3400,3530,4210],[438,480,534,627,706,762,829,909,976,1070,1170,1310,1417,1524,1644,1764,1884,2004,2058,2112,2430,2484,2538,2724,3042,3228,3282,3336,3522,3972,4026,4212,4398,4584,4902,5088,5274,5460,5646,6492]];n.RewardCoins=[[20,25,35,50,80,85,95,105,150,140,145,165,175,195,235,215,225,245,265,335,320,330,340,355,435,420,435,450,465,500,525,550,575,600,620,645,670,695,720,800],[149,160,177,200,241,252,269,286,345,338,349,378,395,424,477,458,475,504,533,622,609,626,643,666,767,754,777,800,823,870,905,940,975,1010,1039,1074,1109,1144,1179,1280],[304,324,350,384,439,458,484,511,588,585,604,645,672,712,782,765,792,832,873,986,976,1003,1029,1063,1190,1180,1214,1248,1281,1344,1392,1440,1488,1536,1576,1624,1672,1720,1768,1896]];n.RewardExp=[[5,10,15,20,25,30,45,35,40,45,55,65,75,85,95,105,115,125,135,145,155,165,210,220,200,205,215,225,235,245,255,300,275,285,295,305,315,325,400,450],[64,74,84,94,104,114,136,128,138,148,164,180,196,212,228,244,260,276,292,308,324,340,398,414,394,404,420,436,452,468,484,542,516,532,548,564,580,596,690,754],[137,156,175,194,213,232,266,263,282,301,327,354,380,406,432,458,485,511,537,563,589,616,692,718,701,720,747,773,799,825,851,928,904,930,956,982,1009,1035,1155,1238]];n.Exp=[10,30,60,100,150,210,280,360,450,550,670,810,970,1150,1350,1570,1810,2070,2350,2650,2970,3310,3670,4050,4450,4870,5310,5770,6250,6750,7270,7810,8370,8950,9550,10170,10810,11470,12150,12850,13570,14310,15070,15850,16650,17470,18310,19170,20050,20950,21870,22810,23770,24750,25750,26770,27810,28870,29950,31050,32170,33310,34470,35650,36850,38070,39310,40570,41850,43150,44470,45810,47170,48550,49950,51370,52810,54270,55750,57250,58770,60310,61870,63450,65050,66670,68310,69970,71650,73350,75070,76810,78570,80350,82150,83970,85810,87670,89550,92050,94550,97050,99550,102050,104550,107050,109550,112050,114550,117050,119550,122050,124550,127050,129550,132050,134550,137050,139550,142050];n.TipString=["\u6b66\u9b42\u662f\u7279\u6b8a\u5b9d\u77f3\uff0c\u53ef\u4ee5\u7ed9\u88c5\u5907\u9644\u52a0\u989d\u5916\u5c5e\u6027","\u88c5\u5907\u53ef\u4ee5\u4f7f\u7528\u91d1\u5e01\u5347\u7ea7\uff0c\u63d0\u5347\u66f4\u591a\u6218\u6597\u529b","\u6280\u80fd\u53ef\u4ee5\u4f7f\u7528\u91d1\u5e01\u5347\u7ea7\uff0c\u5a01\u529b\u4f1a\u66f4\u5f3a\u5594","\u795e\u5ba0\u53ef\u4ee5\u4f7f\u7528\u94bb\u77f3\u5347\u7ea7\uff0c\u63d0\u5347\u66f4\u591a\u6218\u6597\u529b","\u5173\u5361\u6311\u6218\u7684\u661f\u661f\uff0c\u53ef\u4ee5\u89e3\u9501\u5730\u56fe\u5de6\u4e0b\u89d2\u7684\u5173\u5361\u5b9d\u7bb1","\u4e0d\u540c\u5173\u5361\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u4eba\u7269\u901a\u5173","\u8fdb\u5165\u6392\u884c\u699c\u524d100\u540d\uff0c\u53ef\u4ee5\u5728\u6210\u5c31\u4e2d\u9886\u53d6\u94bb\u77f3\u5594","\u67e5\u770b\u5e76\u5b8c\u6210\u6bcf\u65e5\u4efb\u52a1\uff0c\u53ef\u4ee5\u83b7\u5f97\u5927\u91cf\u94bb\u77f3\u798f\u5229\u5594","\u8fde\u7eed7\u5929\u7b7e\u5230\u5c31\u53ef\u4ee5\u83b7\u5f97\u7a00\u6709\u795e\u5ba0\uff01","\u4f4e\u7ea7\u6b66\u9b42\u53ef\u4ee5\u8fdb\u9636\u6210\u9ad8\u7ea7\u6b66\u9b42\uff08\u9700\u8981\u6d88\u8017\u5176\u4ed6\u6b66\u9b42\uff09","\u7b49\u7ea7\u63d0\u5347\u540e\uff0c\u53ef\u4ee5\u53bb\u6210\u5c31\u9886\u53d6\u5956\u52b1"];n.MapData=[{lv:1,soul:[[60100],[60200],[60300]],soulrate:[[60100],[60200],[60300]],item:[[40101],[40103],[40204]],itemrate:[[1],[.5],[.4]],cave:"",wave:1,monster:[[3100,3101]],boss:""},{lv:2,soul:[[60100],[60200],[60300]],soulrate:[[.1],[.2],[.3]],item:"",itemrate:"",cave:1,wave:1,monster:[[2101,1201,2103],[2101,1101,2203]],boss:""},{lv:3,soul:[[60100],[60200],[60300]],soulrate:[[.1],[.2],[.3]],item:"",itemrate:"",cave:"",wave:2,monster:[[1101,2101,2104]],boss:""},{lv:4,soul:[[60100],[60200],[60300]],soulrate:[[.1],[.2],[.3]],item:"",itemrate:"",cave:"",wave:1,monster:[[1101,3102,1104],[2105,1104,3107]],boss:""},{lv:5,soul:[[60100],[60200],[60300]],soulrate:[[.2],[.3],[.4]],item:[[30104],[30202],[30206]],itemrate:[[1],[.5],[.4]],cave:1,wave:1,monster:[[3105,3101,2107],[2107,1105,2100]],boss:1197},{lv:6,soul:[[60100],[60200],[60300]],soulrate:[[.1],[.2],[.3]],item:"",itemrate:"",cave:"",wave:1,monster:[[3101,2101,3108],[3101,2108,2106]],boss:""},{lv:7,soul:[[60100],[60200],[60300]],soulrate:[[.1],[.2],[.3]],item:[[40103],[40207],[40305]],itemrate:[[.5],[.4],[.4]],cave:"",wave:1,monster:[[3100,3101,1103],[3101,2105,3106]],boss:""},{lv:8,soul:[[60100],[60200],[60300]],soulrate:[[.1],[.2],[.3]],item:"",itemrate:"",cave:"",wave:1,monster:[[3101,3101,1108],[3101,2107,3106]],boss:""},{lv:9,soul:[[60100],[60200],[60300]],soulrate:[[.1],[.2],[.3]],item:"",itemrate:"",cave:"",wave:1,monster:[[3201,1101,3108],[4201,4105,2107]],boss:""},{lv:10,soul:[[60200],[60300],[60400]],soulrate:[[.2],[.3],[.3]],item:[[30105]],itemrate:[[.5]],cave:1,wave:1,monster:[[2205,2104,2103],[2208,3105,2108],[6107,1105]],boss:1197},{lv:11,soul:[[60200],[60300],[60400]],soulrate:[[.2],[.3],[.3]],item:[[21203]],itemrate:[[.35]],cave:"",wave:2,monster:[[3201,2201,1203],[1107,2106,2105]],boss:""},{lv:12,soul:[[60200],[60300],[60400]],soulrate:[[.2],[.3],[.3]],item:[[22205]],itemrate:[[.5]],cave:"",wave:2,monster:[[2200,2101,3203],[2107,2106,1105]],boss:""},{lv:13,soul:[[60200],[60300],[60400]],soulrate:[[.2],[.3],[.3]],item:[[12205]],itemrate:[[.3]],cave:1,wave:1,monster:[[3101,3201,3105],[3105,4103,2106],[2104,3108,3106]],boss:""},{lv:14,soul:[[60200],[60300],[60400]],soulrate:[[.2],[.3],[.3]],item:[[11202]],itemrate:[[.3]],cave:"",wave:1,monster:[[2201,4201,5103],[3101,3104,2106],[2107,3106,3105]],boss:""},{lv:15,soul:[[60200],[60300],[60400]],soulrate:[[.2],[.3],[.3]],item:[[30202],[30203],[30301]],itemrate:[[.3],[.4],[.4]],cave:1,wave:2,monster:[[2201,2200,1104],[2104,1105,2106],[1108,2106,2105]],boss:1199},{lv:16,soul:[[60200],[60300],[60400]],soulrate:[[.2],[.3],[.3]],item:[[40204],[40207],[40306]],itemrate:[[.3],[.4],[.4]],cave:"",wave:2,monster:[[3200,2201,1108],[2108,1105,2106],[5106]],boss:""},{lv:17,soul:[[60200],[60300],[60400]],soulrate:[[.2],[.3],[.3]],item:[[12205]],itemrate:[[.3]],cave:1,wave:2,monster:[[6108],[4103,1105],[2105,4104]],boss:""},{lv:18,soul:[[60200],[60300],[60400]],soulrate:[[.2],[.3],[.3]],item:[[22205]],itemrate:[[.3]],cave:1,wave:2,monster:[[2200,3106],[3104,3105],[6105]],boss:""},{lv:19,soul:[[60200],[60300],[60400]],soulrate:[[.2],[.3],[.3]],item:[[13208]],itemrate:[[.3]],cave:"",wave:2,monster:[[2201,4107],[2108,2105,1106],[3107,3106,1108]],boss:""},{lv:20,soul:[[60200],[60300],[60400]],soulrate:[[.2],[.3],[.3]],item:[[40204],[40207],[40306]],itemrate:[[.4],[.4],[.4]],cave:"",wave:2,monster:[[3201,3104,1108],[3201,2105,1106],[6106]],boss:1199},{lv:21,soul:[[60200],[60300],[60400]],soulrate:[[.2],[.3],[.3]],item:[[21203]],itemrate:[[.3]],cave:"",wave:3,monster:[[3301,2201,2207],[2301,2105,3106]],boss:""},{lv:22,soul:[[60200],[60300],[60400]],soulrate:[[.2],[.3],[.3]],item:[[23208]],itemrate:[[.3]],cave:"",wave:2,monster:[[2301,2101,2208],[3301,2105,2106],[3208,3106,2303]],boss:""},{lv:23,soul:[[60200],[60300],[60400]],soulrate:[[.2],[.3],[.3]],item:[[11303]],itemrate:[[.3]],cave:1,wave:2,monster:[[2107,2108,2208],[3301,2105,2106],[4107,2301,2301]],boss:""},{lv:24,soul:[[60200],[60308],[60400]],soulrate:[[.2],[.3],[.3]],item:"",itemrate:"",cave:1,wave:2,monster:[[4104,4301],[3105,3303],[3104,3105,2105]],boss:""},{lv:25,soul:[[60300],[60300],[60400]],soulrate:[[.2],[.3],[.3]],item:[[12306]],itemrate:[[.3]],cave:"",wave:2,monster:[[2108,2301,1303,1106],[3300,2105,2106],[4106,2108]],boss:1297},{lv:26,soul:[[60300],[60300],[60400]],soulrate:[[.2],[.3],[.3]],item:[[40306]],itemrate:[[.1]],cave:"",wave:2,monster:[[3301,2300,2104],[3107,3105,2106],[3107,3106,2108]],boss:""},{lv:27,soul:[[60300],[60300],[60400]],soulrate:[[.2],[.3],[.3]],item:"",itemrate:"",cave:"",wave:3,monster:[[3303,1201,3107],[1106,2105,1106],[1208,2106,2303]],boss:""},{lv:28,soul:[[60300],[60300],[60400]],soulrate:[[.2],[.3],[.3]],item:[[23309]],itemrate:[[.3]],cave:1,wave:3,monster:[[2106,2303,1203],[2107,2105,1106],[2108,2208,2104]],boss:""},{lv:29,soul:[[60300],[60300],[60400]],soulrate:[[.2],[.3],[.3]],item:[[13309]],itemrate:[[.3]],cave:1,wave:3,monster:[[2104,1105,2108],[2104,2107,2208],[2303,3208,1106]],boss:""},{lv:30,soul:[[60300],[60400],[60500]],soulrate:[[.2],[.3],[.3]],item:[[30301]],itemrate:[[.5]],cave:"",wave:2,monster:[[3301,3300,4106],[3301,3105,2108],[3107,3105,3203]],boss:1299},{lv:31,soul:[[60300],[60400],[60500]],soulrate:[[.2],[.3],[.3]],item:[[40306]],itemrate:[[.2]],cave:"",wave:3,monster:[[3104,2105],[3106,3107],[2104,3106,2105]],boss:""},{lv:32,soul:[[60300],[60400],[60500]],soulrate:[[.2],[.3],[.3]],item:[[12306]],itemrate:[[.3]],cave:1,wave:3,monster:[[3301,1302,3106],[2108,3105,1208],[2107,2106,2105]],boss:""},{lv:33,soul:[[60300],[60400],[60500]],soulrate:[[.2],[.3],[.3]],item:[[11303]],itemrate:[[.3]],cave:"",wave:3,monster:[[2303,3201,1105],[3105,2104,2106],[3104,3108]],boss:""},{lv:34,soul:[[60300],[60400],[60500]],soulrate:[[.2],[.3],[.3]],item:[[50306]],itemrate:[[.2]],cave:"",wave:3,monster:[[3106,2208,3108],[2302,2105,1106],[3107,3106,1105,1303]],boss:""},{lv:35,soul:[[60400],[60400],[60500]],soulrate:[[.2],[.3],[.3]],item:[[11303]],itemrate:[[.3]],cave:"",wave:3,monster:[[2303,3105,2108],[3105,4104],[3208,3108,2106]],boss:1198},{lv:36,soul:[[60400],[60400],[60500]],soulrate:[[.2],[.3],[.3]],item:"",itemrate:"",cave:1,wave:3,monster:[[2108,3301,1303,1106],[3106,2208,3108],[2106,3208,2104]],boss:""},{lv:37,soul:[[60400],[60400],[60500]],soulrate:[[.2],[.3],[.3]],item:[[30308]],itemrate:[[.5]],cave:1,wave:3,monster:[[2302,2104,1106,1303],[2307,3104,2106,1303],[3107,3106,3105]],boss:""},{lv:38,soul:[[60400],[60400],[60500]],soulrate:[[.2],[.3],[.3]],item:"",itemrate:"",cave:"",wave:3,monster:[[2303,2301,4106],[3301,3105,2106],[4106,4104]],boss:""},{lv:39,soul:[[60400],[60400],[60500]],soulrate:[[.2],[.3],[.3]],item:[[50306]],itemrate:[[.3]],cave:"",wave:3,monster:[[2302,2105,2106,1303],[3303,3105,3208],[4107,4106,1105]],boss:""},{lv:40,soul:[[60400],[60400],[60500]],soulrate:[[.2],[.3],[.3]],item:[[30308]],itemrate:[[.5]],cave:1,wave:4,monster:[[2303,2107,2106,1105,1104],[2303,2107,2108,1105,1104],[2203,3107,1106,1208,1104]],boss:1298}];n.HeroSkillName=[["skill_pd","skill_leidian","skill_leidongjiutian","skill_shunyi"],["skill_guangbo","skill_duochongjian","skill_shunyi+gongji","skill_jianyu"],["skill_yanlouzhan","skill_liuxingyu","skill_heidong","skill_dipotianxing"]];n.BgName=[["/\u7af9\u6797-\u8def\u9762","/\u7af9\u6797-\u4e2d\u666f","/\u7af9\u6797-\u80cc\u666f","/\u7af9\u6797-\u5c71\u6d1e","/\u7af9\u6797-\u8def\u9762","/\u7af9\u6797\u5c71\u6d1e-\u4e2d\u666f","/\u7af9\u6797\u5c71\u6d1e-\u80cc\u666f"],["/\u5b9a\u519b\u5c71-\u8def\u9762","/\u5b9a\u519b\u5c71-\u4e2d\u666f","/\u5b9a\u519b\u5c71-\u80cc\u666f","/\u5b9a\u519b\u5c71-\u6d1e","/\u5b9a\u519b\u5c71\u5c71\u6d1e-\u5730\u9762","/\u5b9a\u519b\u5c71\u5c71\u6d1e-\u4e2d\u666f","/\u5b9a\u519b\u5c71\u5c71\u6d1e-\u80cc\u666f"],["/\u96ea\u5c71-\u8def\u9762","/\u96ea\u5c71-\u4e2d\u666f","/\u96ea\u5c71-\u80cc\u666f","/\u96ea\u5c71-\u5c71\u6d1e","/\u96ea\u5c71-\u8def\u9762","/\u96ea\u5c71\u5c71\u6d1e-\u51b0\u5757","/\u96ea\u5c71\u5c71\u6d1e-\u80cc\u666f"],["/\u957f\u57ce-\u8def\u9762","/\u957f\u57ce-\u4e2d\u666f","/\u957f\u57ce-\u80cc\u666f","/\u957f\u57ce-\u95e8\u6d1e","/\u957f\u57ce-\u8def\u9762","/\u957f\u57ce-\u5e9f\u589f","/\u957f\u57ce-\u80cc\u666f"]];var o=[i.default.mapTitle1,i.default.mapTitle2,i.default.mapTitle3,i.default.mapTitle4];n.MapTitle=o;n.HeroSpName=["SP/0/xinzhaoyun","SP/1/diaochan_dongzuo","SP/2/daqiao_dongzuo"];n.PetSpName=["SP/pet/0/fenghuang","SP/pet/1/qinglong","SP/pet/2/youkun"];var a=[i.default.heroName0,i.default.heroName1,i.default.heroName2,i.default.bossName0,i.default.bossName1,i.default.bossName2];n.HeroName=a;var s=[i.default.petName0,i.default.petName1,i.default.petName2];n.PetName=s;var r=[[i.default.skillZY0,i.default.skillZY1,i.default.skillZY2,i.default.skillZY3,i.default.skillZY4,i.default.skillZY5,i.default.skillZY6],[i.default.skillDC0,i.default.skillDC1,i.default.skillDC2,i.default.skillDC3,i.default.skillDC4,i.default.skillDC5,i.default.skillDC6],[i.default.skillDQ0,i.default.skillDQ1,i.default.skillDQ2,i.default.skillDQ3,i.default.skillDQ4,i.default.skillDQ5,i.default.skillDQ6]];n.SkillNameArrs=r;n.AttArrs=["atk","def","hp","ls","sp","cr","arp","bonus","cd","miss","exp","gold"];n.Pet=[{name:"\u51e4\u51f0",text:"\u63cf\u8ff0",hp:"10",hpup:"0.5",arp:"500",arpup:"100",price:"10",priceup:"5",soul:"0,0,0,0,0,0,0,0,0,0"},{name:"\u9752\u9f99",text:"\u63cf\u8ff0",bonus:"5",bonusup:"0.5",sp:"10",spup:"1",price:"10",priceup:"5",soul:"0,0,0,0,0,0,0,0,0,0"},{name:"\u5e7c\u9cb2",text:"\u63cf\u8ff0",def:"5",defup:"0.5",gold:"10",goldup:"1",price:"10",priceup:"5",soul:"0,0,0,0,0,0,0,0,0,0"}];n.Skill=[{id:"skillZY0",name:"\u96f7\u706d\u65a9",unlock:0,price:200,priceup:80,cd:12,cdup:.1,wave:1,dmg:350,dmgup:10,text:"\u5bf9\u654c\u4eba\u9020\u6210wave*dmg\u4f24\u5bb3",description:"\u4e00\u67aa\u5f15\u96f7\u52a8\uff0c\u4e00\u65a9\u60ca\u82cd\u7a79"},{id:"skillZY1",name:"\u96f7\u52a8\u4e5d\u5929",unlock:5,price:300,priceup:100,cd:30,cdup:.5,wave:9,dmg:60,dmgup:2,text:"\u5bf9\u654c\u4eba\u9020\u6210wave*dmg\u4f24\u5bb3",description:"\u4e5d\u5929\u7384\u96f7\uff0c\u4ee5\u67aa\u5f15\u4e4b"},{id:"skillZY2",name:"\u96f7\u9f99\u77ac\u6740",unlock:10,price:300,priceup:120,cd:15,cdup:.2,wave:2,dmg:180,dmgup:6,text:"\u5bf9\u654c\u4eba\u9020\u6210wave*dmg\u4f24\u5bb3",description:"\u96f7\u5149\u5316\u9f99\uff0c\u4e00\u5f80\u65e0\u524d"},{id:"skillZY3",name:"\u795e\u738b\u5929\u5f81",unlock:15,price:400,priceup:150,cd:40,cdup:.4,wave:9,dmg:70,dmgup:3,text:"\u5bf9\u654c\u4eba\u9020\u6210wave*dmg\u4f24\u5bb3",description:"\u4ee5\u8eab\u4e3a\u96f7\uff0c\u4e07\u52ab\u4e0d\u590d"},{id:"skillZY4",name:"\u4e0d\u52a8\u5982\u5c71",unlock:10,price:300,priceup:100,cd:"",cdup:"",wave:"",dmg:5,dmgup:.5,text:"\u63d0\u5347\u9632\u5fa1\u529b\u603b\u503cdmg%",description:"\u63d0\u5347\u4eba\u7269\u9632\u5fa1\u529b"},{id:"skillZY5",name:"\u7075\u5149\u704c\u9876",unlock:15,price:300,priceup:150,cd:"",cdup:"",wave:"",dmg:5,dmgup:1,text:"\u63d0\u5347\u7ecf\u9a8c\u83b7\u53d6dmg%",description:"\u63d0\u5347\u4eba\u7269\u7ecf\u9a8c\u83b7\u53d6"},{id:"skillZY6",name:"\u65e0\u575a\u4e0d\u6467",unlock:15,price:400,priceup:200,cd:"",cdup:"",wave:"",dmg:5,dmgup:.5,text:"\u63d0\u5347\u653b\u51fb\u529bdmg%",description:"\u63d0\u5347\u4eba\u7269\u653b\u51fb\u529b"},{id:"skillDC0",name:"\u5ba1\u5224\u4e4b\u7bad",unlock:0,price:200,priceup:80,cd:12,cdup:.1,wave:1,dmg:360,dmgup:8,text:"\u5bf9\u654c\u4eba\u9020\u6210wave*dmg\u4f24\u5bb3",description:"\u4e00\u7bad\u5224\u751f\u6b7b\uff0c\u4e00\u7bad\u901a\u5e7d\u51a5"},{id:"skillDC1",name:"\u75be\u98ce\u5251\u96e8",unlock:0,price:300,priceup:100,cd:15,cdup:.1,wave:2,dmg:240,dmgup:6,text:"\u5bf9\u654c\u4eba\u9020\u6210wave*dmg\u4f24\u5bb3",description:"\u75be\u98ce\u7bad\u96e8\uff0c\u65e0\u575a\u4e0d\u7834"},{id:"skillDC2",name:"\u98ce\u795e\u8fde\u51fb",unlock:10,price:300,priceup:120,cd:25,cdup:.2,wave:4,dmg:100,dmgup:3,text:"\u5bf9\u654c\u4eba\u9020\u6210wave*dmg\u4f24\u5bb3",description:"\u9762\u5bf9\u75be\u98ce\u5427"},{id:"skillDC3",name:"\u5bd2\u51b0\u98ce\u66b4",unlock:15,price:400,priceup:150,cd:35,cdup:.4,wave:4,dmg:160,dmgup:4,text:"\u5bf9\u654c\u4eba\u9020\u6210wave*dmg\u4f24\u5bb3",description:"\u5bd2\u51b0\u98ce\u66b4\uff0c\u8840\u96e8\u98d8\u96f6"},{id:"skillDC4",name:"\u70b9\u77f3\u6210\u91d1",unlock:5,price:300,priceup:100,cd:"",cdup:"",wave:"",dmg:10,dmgup:1,text:"\u63d0\u5347\u91d1\u5e01\u83b7\u53d6dmg%",description:"\u63d0\u9ad8\u91d1\u5e01\u83b7\u53d6\u6548\u7387"},{id:"skillDC5",name:"\u75be\u6b65\u5982\u98de",unlock:15,price:300,priceup:150,cd:"",cdup:"",wave:"",dmg:10,dmgup:1,text:"\u63d0\u5347\u79fb\u52a8\u901f\u5ea6dmg%",description:"\u5927\u5e45\u63d0\u5347\u4eba\u7269\u4e00\u901f\u5ea6"},{id:"skillDC6",name:"\u767e\u6b65\u7a7f\u6768",unlock:20,price:400,priceup:200,cd:"",cdup:"",wave:"",dmg:5,dmgup:.2,text:"\u51cf\u5c11\u654c\u4eba\u9632\u5fa1\u529bdmg%",description:"\u51cf\u5c11\u654c\u4eba\u5927\u91cf\u9632\u5fa1\u503c"},{id:"skillDQ0",name:"\u708e\u843d\u65a9",unlock:0,price:200,priceup:80,cd:10,cdup:.5,wave:4,dmg:110,dmgup:2,text:"\u5bf9\u654c\u4eba\u9020\u6210wave*dmg\u4f24\u5bb3",description:"\u53ec\u5524\u7194\u5ca9\uff0c\u541e\u566c\u654c\u4eba"},{id:"skillDQ1",name:"\u6d41\u661f\u96e8",unlock:0,price:300,priceup:100,cd:30,cdup:.1,wave:9,dmg:60,dmgup:1.5,text:"\u5bf9\u654c\u4eba\u9020\u6210wave*dmg\u4f24\u5bb3",description:"\u53ec\u5524\u706b\u96e8\u98ce\u66b4"},{id:"skillDQ2",name:"\u9ed1\u6d1e",unlock:15,price:300,priceup:120,cd:35,cdup:.1,wave:15,dmg:40,dmgup:1,text:"\u5bf9\u654c\u4eba\u9020\u6210wave*dmg\u4f24\u5bb3",description:"\u541e\u566c\u4e07\u7269"},{id:"skillDQ3",name:"\u5730\u7206\u5929\u661f",unlock:25,price:400,priceup:150,cd:40,cdup:.2,wave:10,dmg:60,dmgup:1,text:"\u5bf9\u654c\u4eba\u9020\u6210wave*dmg\u4f24\u5bb3",description:"\u5730\u7206\u5929\u661f"},{id:"skillDQ4",name:"\u4f1a\u5fc3\u4e00\u51fb",unlock:5,price:300,priceup:100,cd:"",cdup:"",wave:"",dmg:5,dmgup:.1,text:"\u63d0\u5347\u66b4\u51fb\u51e0\u7387dmg%",description:"\u63d0\u9ad8\u653b\u51fb\u9020\u6210\u81f4\u547d\u4e00\u51fb\u7684\u6982\u7387"},{id:"skillDQ5",name:"\u75be\u6b65\u5982\u98de",unlock:15,price:300,priceup:150,cd:"",cdup:"",wave:"",dmg:10,dmgup:1,text:"\u63d0\u5347\u79fb\u52a8\u901f\u5ea6dmg%",description:"\u5927\u5e45\u63d0\u5347\u4eba\u7269\u4e00\u901f\u5ea6"},{id:"skillDQ6",name:"\u767e\u6b65\u7a7f\u6768",unlock:20,price:400,priceup:200,cd:"",cdup:"",wave:"",dmg:5,dmgup:.2,text:"\u51cf\u5c11\u654c\u4eba\u9632\u5fa1\u529bdmg%",description:"\u51cf\u5c11\u654c\u4eba\u5927\u91cf\u9632\u5fa1\u503c"}];var c=[{name:"\u5e7d\u51a5",id:"13309",text:"\u51a5\u754c\u81f3\u5b9d\uff0c\u5e7d\u51a5\u5b9d\u73e0",atk:"450",atkup:"14",sp:"15",spup:"0.5",cr:"4",crup:"0.2",bonus:"",bonusup:"",cd:"10",cdup:"0.3",miss:"",missup:"",arp:"1000",arpup:"30",def:"",defup:"",hp:"",hpup:"",ls:"",lsup:"",exp:"",expup:"",gold:"",goldup:"",price:"1030",priceup:"103"},{name:"\u9b3c\u706b",id:"13208",text:"\u9634\u5bd2\u900f\u9aa8",atk:"260",atkup:"8",sp:"10",spup:"0.3",cr:"4",crup:"0.2",bonus:"",bonusup:"",cd:"",cdup:"",miss:"5",missup:"0.2",arp:"",arpup:"",def:"",defup:"",hp:"",hpup:"",ls:"0.3",lsup:"0.1",exp:"",expup:"",gold:"",goldup:"",price:"610",priceup:"61"},{name:"\u8d64\u7389",id:"13107",text:"\u6781\u54c1\u7075\u77f3\u5236\u6210\uff0c\u53ef\u4ee5\u62b5\u5fa1\u4f24\u5bb3",atk:"155",atkup:"5",sp:"",spup:"",cr:"",crup:"",bonus:"3",bonusup:"0.1",cd:"",cdup:"",miss:"3",missup:"0.1",arp:"",arpup:"",def:"",defup:"",hp:"",hpup:"",ls:"",lsup:"",exp:"",expup:"",gold:"",goldup:"",price:"410",priceup:"41"},{name:"\u843d\u65e5",id:"12306",text:"\u540e\u88d4\u5c04\u65e5\u4e4b\u5f13\uff0c\u5929\u706b\u7206\u88c2",atk:"450",atkup:"14",sp:"10",spup:"0.3",cr:"5",crup:"0.2",bonus:"",bonusup:"",cd:"",cdup:"",miss:"",missup:"",arp:"1500",arpup:"45",def:"",defup:"",hp:"",hpup:"",ls:"",lsup:"",exp:"",expup:"",gold:"",goldup:"",price:"950",priceup:"95"},{name:"\u88c1\u51b3",id:"12205",text:"\u88c1\u51b3\u4e4b\u7bad\uff0c\u4e3b\u5bb0\u751f\u6b7b",atk:"240",atkup:"8",sp:"",spup:"",cr:"4",crup:"0.2",bonus:"",bonusup:"",cd:"",cdup:"",miss:"",missup:"",arp:"800",arpup:"24",def:"",defup:"",hp:"",hpup:"",ls:"",lsup:"",exp:"",expup:"",gold:"",goldup:"",price:"550",priceup:"55"},{name:"\u971c\u6708\u5f13",id:"12104",text:"\u5bd2\u971c\u6620\u6708\uff0c\u7bad\u8292\u51cc\u9704",atk:"115",atkup:"4",sp:"",spup:"",cr:"2",crup:"0.1",bonus:"",bonusup:"",cd:"",cdup:"",miss:"",missup:"",arp:"200",arpup:"6",def:"",defup:"",hp:"",hpup:"",ls:"",lsup:"",exp:"",expup:"",gold:"",goldup:"",price:"280",priceup:"28"},{name:"\u6bd2\u9f99\u67aa",id:"11202",text:"\u4e0a\u53e4\u6bd2\u9f99\u7684\u7360\u7259\u5236\u6210\uff0c\u65e0\u575a\u4e0d\u6467",atk:"220",atkup:"7",sp:"12",spup:"0.4",cr:"3",crup:"0.1",bonus:"",bonusup:"",cd:"",cdup:"",miss:"",missup:"",arp:"",arpup:"",def:"",defup:"",hp:"",hpup:"",ls:"0.2",lsup:"0.1",exp:"",expup:"",gold:"",goldup:"",price:"500",priceup:"50"},{name:"\u9752\u4e91\u67aa",id:"11101",text:"\u6709\u7a7f\u4e91\u88c2\u77f3\u4e4b\u529b",atk:"105",atkup:"4",sp:"10",spup:"0.3",cr:"2",crup:"0.1",bonus:"",bonusup:"",cd:"",cdup:"",miss:"",missup:"",arp:"",arpup:"",def:"",defup:"",hp:"",hpup:"",ls:"",lsup:"",exp:"",expup:"",gold:"",goldup:"",price:"280",priceup:"28"},{name:"\u9738\u738b\u67aa",id:"11303",text:"\u67aa\u4e2d\u9738\u738b",atk:"420",atkup:"13",sp:"",spup:"",cr:"4",crup:"0.2",bonus:"6",bonusup:"0.2",cd:"",cdup:"",miss:"",missup:"",arp:"",arpup:"",def:"500",defup:"15",hp:"",hpup:"",ls:"",lsup:"",exp:"",expup:"",gold:"",goldup:"",price:"1040",priceup:"104"}];n.Weapon=c;var l=[{name:"\u4e5d\u5f69\u9713\u88f3",id:"23309",text:"\u5973\u5a32\u5723\u8863\uff0c\u5999\u6cd5\u65e0\u7a77",atk:"300",atkup:"9",sp:"20",spup:"0.6",cr:"5",crup:"0.2",bonus:"",bonusup:"",cd:"",cdup:"",miss:"",missup:"",arp:"",arpup:"",def:"2000",defup:"60",hp:"700",hpup:"21",ls:"1.5",lsup:"0.1",exp:"",expup:"",gold:"",goldup:"",price:"950",priceup:"95"},{name:"\u7f20\u5929\u5e26",id:"23208",text:"\u8574\u542b\u98ce\u7075\u4e4b\u529b\uff0c\u52a0\u6210\u79fb\u901f",atk:"150",atkup:"5",sp:"15",spup:"0.5",cr:"6",crup:"0.2",bonus:"",bonusup:"",cd:"",cdup:"",miss:"",missup:"",arp:"",arpup:"",def:"600",defup:"18",hp:"450",hpup:"14",ls:"",lsup:"",exp:"",expup:"",gold:"",goldup:"",price:"540",priceup:"54"},{name:"\u6d51\u5929\u7eeb",id:"23107",text:"\u592a\u4e59\u771f\u4eba\u6cd5\u5b9d\u6539\u5236\u800c\u6210\uff0c\u53ef\u589e\u5e45\u653b\u51fb",atk:"35",atkup:"2",sp:"",spup:"",cr:"",crup:"",bonus:"",bonusup:"",cd:"",cdup:"",miss:"",missup:"",arp:"",arpup:"",def:"500",defup:"15",hp:"350",hpup:"11",ls:"",lsup:"",exp:"",expup:"",gold:"",goldup:"",price:"170",priceup:"17"},{name:"\u591c\u7409\u7483",id:"22306",text:"\u5982\u9b45\u5982\u591c\uff0c\u65e0\u6cd5\u9501\u5b9a",atk:"150",atkup:"5",sp:"30",spup:"0.9",cr:"",crup:"",bonus:"",bonusup:"",cd:"",cdup:"",miss:"4",missup:"0.2",arp:"",arpup:"",def:"2000",defup:"60",hp:"800",hpup:"24",ls:"",lsup:"",exp:"",expup:"",gold:"",goldup:"",price:"620",priceup:"62"},{name:"\u767d\u9e64\u7fbd",id:"22205",text:"\u52a8\u5982\u767d\u9e64\uff0c\u5f71\u60ca\u9e3f",atk:"45",atkup:"2",sp:"20",spup:"0.6",cr:"",crup:"",bonus:"",bonusup:"",cd:"",cdup:"",miss:"4",missup:"0.2",arp:"",arpup:"",def:"900",defup:"27",hp:"600",hpup:"18",ls:"",lsup:"",exp:"",expup:"",gold:"",goldup:"",price:"310",priceup:"31"},{name:"\u5bd2\u8749\u8863",id:"22104",text:"\u8584\u5165\u8749\u7ffc\uff0c\u6c34\u706b\u4e0d\u5165",atk:"",atkup:"",sp:"10",spup:"0.3",cr:"",crup:"",bonus:"",bonusup:"",cd:"",cdup:"",miss:"",missup:"",arp:"",arpup:"",def:"350",defup:"11",hp:"150",hpup:"5",ls:"",lsup:"",exp:"",expup:"",gold:"",goldup:"",price:"110",priceup:"11"},{name:"\u516b\u90e8\u5929\u9f99",id:"21302",text:"\u53ea\u6709\u795e\u9009\u4e4b\u4eba\u53ef\u4ee5\u9a7e\u9a6d\u516b\u90e8\u5929\u9f99\u4e4b\u529b",atk:"140",atkup:"5",sp:"",spup:"",cr:"",crup:"",bonus:"4",bonusup:"0.2",cd:"",cdup:"",miss:"3",missup:"0.1",arp:"",arpup:"",def:"2200",defup:"66",hp:"900",hpup:"27",ls:"",lsup:"",exp:"",expup:"",gold:"",goldup:"",price:"680",priceup:"68"},{name:"\u6bd2\u9f99\u94e0",id:"21203",text:"\u6bd2\u9f99\u4e4b\u529b\uff0c\u8150\u8680\u4e00\u5207",atk:"35",atkup:"2",sp:"",spup:"",cr:"",crup:"",bonus:"",bonusup:"",cd:"",cdup:"",miss:"",missup:"",arp:"400",arpup:"12",def:"1000",defup:"30",hp:"600",hpup:"18",ls:"0.5",lsup:"0.1",exp:"",expup:"",gold:"",goldup:"",price:"260",priceup:"26"},{name:"\u7075\u86c7\u7532",id:"21101",text:"\u5316\u86df\u4e4b\u86c7\u7684\u9cde\u7247\u7f1d\u5236\u800c\u6210\uff0c\u5200\u67aa\u4e0d\u5165",atk:"",atkup:"",sp:"",spup:"",cr:"",crup:"",bonus:"",bonusup:"",cd:"",cdup:"",miss:"3",missup:"0.1",arp:"",arpup:"",def:"390",defup:"12",hp:"120",hpup:"4",ls:"",lsup:"",exp:"",expup:"",gold:"",goldup:"",price:"110",priceup:"11"}];n.Armor=l;var u=[{name:"\u4f3c\u6c34\u6d41\u5e74",id:"30308",text:"",atk:"75",atkup:"3",sp:"16",spup:"0.5",cr:"5",crup:"0.2",bonus:"",bonusup:"",cd:"",cdup:"",miss:"4",missup:"0.2",arp:"",arpup:"",def:"",defup:"",hp:"",hpup:"",ls:"",lsup:"",exp:"",expup:"",gold:"",goldup:"",price:"350",priceup:"35"},{name:"\u60c5\u4eba\u6cea",id:"30301",text:"\u60c5\u4eba\u6cea\uff0c\u6700\u9500\u9b42",atk:"175",atkup:"6",sp:"",spup:"",cr:"3",crup:"0.1",bonus:"",bonusup:"",cd:"",cdup:"",miss:"",missup:"",arp:"",arpup:"",def:"",defup:"",hp:"",hpup:"",ls:"1",lsup:"0.1",exp:"",expup:"",gold:"",goldup:"",price:"410",priceup:"41"},{name:"\u5c06\u81e3",id:"30206",text:"",atk:"",atkup:"",sp:"",spup:"",cr:"4",crup:"0.2",bonus:"",bonusup:"",cd:"",cdup:"",miss:"",missup:"",arp:"",arpup:"",def:"",defup:"",hp:"500",hpup:"15",ls:"1",lsup:"0.1",exp:"",expup:"",gold:"",goldup:"",price:"220",priceup:"22"},{name:"\u5929\u8292",id:"30203",text:"",atk:"100",atkup:"3",sp:"10",spup:"0.3",cr:"",crup:"",bonus:"2",bonusup:"0.1",cd:"",cdup:"",miss:"",missup:"",arp:"",arpup:"",def:"",defup:"",hp:"",hpup:"",ls:"",lsup:"",exp:"",expup:"",gold:"",goldup:"",price:"290",priceup:"29"},{name:"\u5b88\u57ce",id:"30202",text:"",atk:"",atkup:"",sp:"",spup:"",cr:"",crup:"",bonus:"",bonusup:"",cd:"",cdup:"",miss:"3",missup:"0.1",arp:"",arpup:"",def:"800",defup:"24",hp:"700",hpup:"21",ls:"",lsup:"",exp:"",expup:"",gold:"",goldup:"",price:"180",priceup:"18"},{name:"\u78a7\u7389\u6212",id:"30107",text:"",atk:"15",atkup:"0.5",sp:"",spup:"",cr:"",crup:"",bonus:"",bonusup:"",cd:"",cdup:"",miss:"",missup:"",arp:"",arpup:"",def:"",defup:"",hp:"200",hpup:"6",ls:"1",lsup:"0.1",exp:"",expup:"",gold:"",goldup:"",price:"120",priceup:"12"},{name:"\u7d2b\u6676\u6212",id:"30105",text:"",atk:"",atkup:"",sp:"",spup:"",cr:"3",crup:"0.1",bonus:"",bonusup:"   ",cd:"",cdup:"",miss:"",missup:"",arp:"200",arpup:"6",def:"",defup:"",hp:"",hpup:"",ls:"",lsup:"",exp:"",expup:"",gold:"",goldup:"",price:"130",priceup:"13"},{name:"\u76d8\u9f99\u6212",id:"30104",text:"",atk:"30",atkup:"1",sp:"",spup:"",cr:"",crup:"",bonus:"",bonusup:"",cd:"",cdup:"",miss:"",missup:"",arp:"",arpup:"",def:"200",defup:"6",hp:"200",hpup:"6",ls:"",lsup:"",exp:"",expup:"",gold:"",goldup:"",price:"120",priceup:"12"}];n.Ring=u;var d=[{name:"\u7384\u94c1\u9879\u94fe",id:"40306",text:"",atk:"120",atkup:"4",sp:"",spup:"",cr:"4",crup:"0.2",bonus:"",bonusup:"",cd:"",cdup:"",miss:"",missup:"",arp:"",arpup:"",def:"1000",defup:"30",hp:"",hpup:"",ls:"",lsup:"",exp:"",expup:"",gold:"",goldup:"",price:"430",priceup:"43"},{name:"\u70db\u9f99\u4e4b\u77b3",id:"40305",text:"",atk:"100",atkup:"3",sp:"",spup:"",cr:"",crup:"",bonus:"5",bonusup:"0.2",cd:"",cdup:"",miss:"",missup:"",arp:"600",arpup:"18",def:"",defup:"",hp:"",hpup:"",ls:"1",lsup:"0.1",exp:"",expup:"",gold:"",goldup:"",price:"430",priceup:"43"},{name:"\u901a\u7075\u5b9d\u7389",id:"40207",text:"",atk:"",atkup:"",sp:"",spup:"",cr:"4",crup:"0.2",bonus:"",bonusup:"",cd:"",cdup:"",miss:"",missup:"",arp:"",arpup:"",def:"300",defup:"9",hp:"300",hpup:"9",ls:"",lsup:"",exp:"10",expup:"0.3",gold:"10",goldup:"0.3",price:"190",priceup:"19"},{name:"\u5343\u5e74\u7425\u73c0",id:"40204",text:"",atk:"",atkup:"",sp:"10",spup:"0.3",cr:"",crup:"",bonus:"",bonusup:"",cd:"",cdup:"",miss:"",missup:"",arp:"",arpup:"",def:"600",defup:"18",hp:"",hpup:"",ls:"1",lsup:"0.1",exp:"",expup:"",gold:"",goldup:"",price:"160",priceup:"16"},{name:"\u7075\u86c7\u7389",id:"40103",text:"",atk:"25",atkup:"1",sp:"",spup:"",cr:"2",crup:"0.1",bonus:"",bonusup:"",cd:"",cdup:"",miss:"",missup:"",arp:"",arpup:"",def:"",defup:"",hp:"",hpup:"",ls:"",lsup:"",exp:"",expup:"",gold:"10",goldup:"0.3",price:"130",priceup:"13"},{name:"\u91d1\u521a\u7b26",id:"40102",text:"",atk:"",atkup:"",sp:"",spup:"",cr:"",crup:"",bonus:"",bonusup:"",cd:"",cdup:"",miss:"",missup:"",arp:"",arpup:"",def:"250",defup:"8",hp:"150",hpup:"5",ls:"",lsup:"",exp:"",expup:"",gold:"",goldup:"",price:"80",priceup:"8"},{name:"\u795e\u884c\u7b26",id:"40101",text:"",atk:"",atkup:"",sp:"10",spup:"0.3",cr:"",crup:"",bonus:"",bonusup:"",cd:"",cdup:"",miss:"2",missup:"0.1",arp:"",arpup:"",def:"",defup:"",hp:"75",hpup:"3",ls:"",lsup:"",exp:"",expup:"",gold:"",goldup:"",price:"90",priceup:"9"}];n.Ornament=d;var p=[{name:"\u8840\u6d77\u5f7c\u5cb8\u82b1",id:"50306",text:"",atk:"165",atkup:"5",sp:"",spup:"",cr:"",crup:"",bonus:"3",bonusup:"0.1",cd:"",cdup:"",miss:"",missup:"",arp:"1500",arpup:"45",def:"",defup:"",hp:"",hpup:"",ls:"1",lsup:"0.1",exp:"",expup:"",gold:"",goldup:"",price:"520",priceup:"52"},{name:"\u6d85\u69c3\u795e\u51e4\u7ffc",id:"50303",text:"",atk:"150",atkup:"5",sp:"15",spup:"0.5",cr:"4",crup:"0.2",bonus:"",bonusup:"",cd:"",cdup:"",miss:"4",missup:"0.2",arp:"",arpup:"",def:"1500",defup:"45",hp:"",hpup:"",ls:"",lsup:"",exp:"",expup:"",gold:"",goldup:"",price:"590",priceup:"59"},{name:"\u4fee\u7f57\u9738\u738b\u7ffc",id:"50302",text:"",atk:"200",atkup:"6",sp:"",spup:"",cr:"6",crup:"0.2",bonus:"",bonusup:"",cd:"",cdup:"",miss:"",missup:"",arp:"",arpup:"",def:"",defup:"",hp:"",hpup:"",ls:"",lsup:"",exp:"",expup:"",gold:"",goldup:"",price:"500",priceup:"50"},{name:"\u8776\u604b\u82b1",id:"50204",text:"",atk:"",atkup:"",sp:"5",spup:"0.2",cr:"3",crup:"0.1",bonus:"",bonusup:"",cd:"",cdup:"",miss:"",missup:"",arp:"",arpup:"",def:"",defup:"",hp:"",hpup:"",ls:"0.5",lsup:"0.1",exp:"",expup:"",gold:"",goldup:"",price:"150",priceup:"15"},{name:"\u5e7b\u5f71\u65e0\u6781\u7ffc",id:"50105",text:"",atk:"",atkup:"",sp:"10",spup:"0.3",cr:"2",crup:"0.1",bonus:"",bonusup:"",cd:"",cdup:"",miss:"3",missup:"0.1",arp:"",arpup:"",def:"",defup:"",hp:"",hpup:"",ls:"",lsup:"",exp:"",expup:"",gold:"",goldup:"",price:"140",priceup:"14"},{name:"\u4e5d\u5e7d\u5bd2",id:"50101",text:"",atk:"45",atkup:"2",sp:"",spup:"",cr:"",crup:"",bonus:"",bonusup:"",cd:"",cdup:"",miss:"4",missup:"0.2",arp:"200",arpup:"6",def:"",defup:"",hp:"",hpup:"",ls:"",lsup:"",exp:"",expup:"",gold:"",goldup:"",price:"150",priceup:"15"}];n.Wing=p;var h=[{id:"71101",name:"\u6c34\u4e0a\u6f02",sp:"3.5"},{id:"71102",name:"\u8349\u4e0a\u98de",sp:"3.5"},{id:"71201",name:"\u91d1\u96c1\u529f",sp:"4.5"},{id:"71202",name:"\u68af\u4e91\u7eb5",sp:"4.5"},{id:"71301",name:"\u795e\u884c\u767e\u53d8",sp:"5.5"},{id:"71302",name:"\u51cc\u6ce2\u5fae\u6b65",sp:"5.5"},{id:"71303",name:"\u4e7e\u5764\u5927\u632a\u79fb",sp:"4.5",ls:"0.3"},{id:"72101",name:"\u91d1\u949f\u7f69",def:"50",hp:"35"},{id:"72102",name:"\u94c1\u5e03\u886b",def:"35",hp:"55"},{id:"72201",name:"\u91d1\u521a\u4e0d\u574f",def:"75",hp:"85"},{id:"72202",name:"\u4e0d\u52a8\u660e\u738b",def:"85",hp:"75"},{id:"73101",name:"\u5c0f\u65e0\u76f8\u529f",cr:"1"},{id:"73102",name:"\u7d2b\u971e\u795e\u529f",cr:"1.5"},{id:"73201",name:"\u9f99\u8c61\u822c\u82e5\u529f",cr:"2"},{id:"73202",name:"\u4e5d\u9634\u771f\u7ecf",atk:"10",cr:"2"},{id:"73203",name:"\u5316\u529f\u5927\u6cd5",ls:"0.5"},{id:"73301",name:"\u5438\u661f\u5927\u6cd5",ls:"0.7"},{id:"73302",name:"\u5148\u5929\u529f",def:"100",cr:"2"},{id:"73303",name:"\u4e5d\u9633\u795e\u529f",atk:"10",cr:"2"},{id:"73304",name:"\u6613\u7b4b\u7ecf",hp:"150",cr:"2"},{id:"75101",name:"\u738b\u516b\u62f3",atk:"8"},{id:"75102",name:"\u91ce\u7403\u62f3",atk:"12"},{id:"75201",name:"\u7a7a\u660e\u62f3",atk:"15"},{id:"75202",name:"\u592a\u6781\u62f3",atk:"17"},{id:"75301",name:"\u4e03\u4f24\u62f3",atk:"21"},{id:"74101",name:"\u5b59\u5b50\u5175\u6cd5",exp:"3"},{id:"74102",name:"\u5b5f\u5fb7\u65b0\u4e66",gold:"3"},{id:"74201",name:"\u592a\u5e73\u6e05\u9886\u9053",exp:"5"},{id:"74202",name:"\u592a\u5e73\u8981\u672f",gold:"5"},{id:"74301",name:"\u9041\u7532\u5929\u4e66",exp:"4",gold:"4"}];n.Book=h;var f=[{name:"\u9752\u72fc",id:"60101",cr:"2"},{name:"\u5929\u72fc",id:"60201",cr:"2.5",atk:"15"},{name:"\u767d\u6cfd",id:"60301",cr:"3.5",atk:"30"},{name:"\u6bd5\u65b9",id:"60401",cr:"4",atk:"120",sp:"4"},{name:"\u9e92\u9e9f",id:"60501",cr:"6",atk:"220",bonus:"2"},{name:"\u9955\u992e",id:"60601",cr:"7",atk:"350",bonus:"3"},{name:"\u767d\u86c7",id:"60102",miss:"3"},{name:"\u98de\u86c7",id:"60202",miss:"3.5",arp:"300"},{name:"\u86df\u9f99",id:"60302",atk:"30",miss:"4",arp:"500"},{name:"\u89d2\u9f99",id:"60402",atk:"150",miss:"4",arp:"600"},{name:"\u9752\u9f99",id:"60502",atk:"230",miss:"4",arp:"1200"},{name:"\u5e94\u9f99",id:"60602",atk:"275",miss:"5",arp:"1400"},{name:"\u9ec4\u9e64",id:"60103",arp:"250"},{name:"\u795e\u9e64",id:"60203",atk:"20",arp:"600"},{name:"\u91d1\u4e4c",id:"60303",atk:"35",arp:"800"},{name:"\u6bd5\u65b9",id:"60403",cr:"3",atk:"65",arp:"1000"},{name:"\u6731\u96c0",id:"60503",cr:"5",atk:"110",arp:"1800"},{name:"\u51e4\u51f0",id:"60603",atk:"180",arp:"2000",def:"1500"},{name:"\u77f3\u9f9f",id:"60104",def:"300"},{name:"\u7075\u9f9f",id:"60204",def:"600"},{name:"\u7384\u9f9f",id:"60304",cr:"2",def:"800"},{name:"\u9738\u4e0b",id:"60404",atk:"90",def:"900"},{name:"\u7384\u6b66",id:"60504",atk:"180",def:"1300",hp:"400"},{name:"\u6df7\u6c8c",id:"60604",atk:"200",def:"2000",hp:"800"},{name:"\u9ed1\u864e",id:"60105",atk:"26"},{name:"\u98de\u864e",id:"60205",atk:"55"},{name:"\u72f0\u7ae0",id:"60305",atk:"100"},{name:"\u9646\u5434",id:"60405",atk:"160",ls:"1"},{name:"\u767d\u864e",id:"60505",atk:"260",ls:"2"},{name:"\u7a77\u5947",id:"60605",atk:"300",ls:"3"},{name:"\u9752\u72d0",id:"60106",cd:"4"},{name:"\u7075\u72d0",id:"60206",miss:"3.5",cd:"4"},{name:"\u4ed9\u72d0",id:"60306",cr:"2.5",miss:"4",cd:"4"},{name:"\u9752\u4e18",id:"60406",cr:"3",miss:"5",ls:"1.5",cd:"4"},{name:"\u5fc3\u6708",id:"60506",cr:"4",atk:"150",miss:"5.5",ls:"2",cd:"4"},{name:"\u4e5d\u5c3e",id:"60606",cr:"5",bonus:"6",miss:"6",ls:"3.5",cd:"6"},{name:"\u4e4c\u9c7c",id:"60107",hp:"350"},{name:"\u5de8\u9cb8",id:"60207",cr:"1",hp:"700"},{name:"\u87ad\u543b",id:"60307",atk:"35",hp:"1100"},{name:"\u5de8\u9cb2",id:"60407",atk:"70",def:"500",hp:"1200"},{name:"\u9b54\u9cb2",id:"60507",atk:"140",def:"800",hp:"1400"},{name:"\u96c4\u9e70",id:"60108",sp:"8"},{name:"\u795e\u96d5",id:"60208",sp:"9",bonus:"1"},{name:"\u91cd\u660e",id:"60308",cr:"3",sp:"10"},{name:"\u5927\u9e4f",id:"60408",cr:"4",atk:"40",sp:"12",arp:"600"},{name:"\u91d1\u9e4f",id:"60508",cr:"4",atk:"60",sp:"14",bonus:"2",arp:"1500"},{name:"\u9cb2\u9e4f",id:"60609",cr:"4",atk:"150",sp:"15",bonus:"3.5",hp:"1500"}];n.Soul=f;n.SoulRate=[.95,.79,.66,.46,.22,0];n.SoulSubRate=[.05,.05,.1,.15,.2,.3];n.BizarreAdventureData=[{level:"1",type:"2",rate:"1",book:"73101",gem:"",gold:"150",life:"5",item:"",soul:""},{level:"2",type:"1",rate:"1",book:"75101",gem:"20",gold:"200",life:"",item:"",soul:""},{level:"3",type:"2",rate:"1",book:"71101, 72101, 73101",gem:"",gold:"100, 200, 300",life:"5, 7, 10",item:"",soul:""},{level:"4",type:"1",rate:"1",book:"75102",gem:"29",soul:"60101"},{level:"5",type:"3",rate:"1",book:"75102",gem:"",gold:"",life:"",item:"50105",soul:"60101"},{level:"6",type:"2",rate:"1",book:"",gem:"20",gold:"200, 250, 400",life:"",item:"",soul:"60102, 60103, 60104"},{level:"7",type:"1",rate:"1",book:"",gem:"",gold:"200, 250, 400",life:"",item:"30104",soul:"60105, 60106, 60107"},{level:"8",type:"2",rate:"1",book:"71101, 72101",gem:"",gold:"",life:"",item:"30105",soul:"60102, 60107, 60108"},{level:"9",type:"2",rate:"1",book:"72102, 73102, 75102",gem:"",gold:"",life:"5, 7, 10",item:"40102, 30107",soul:""},{level:"10",type:"3",rate:"1",book:"",gem:"20, 30 ,40",gold:"",life:"5",item:"22205",soul:""},{level:"11",type:"2",rate:"1",book:"75201",gem:"",gold:"400, 450, 600",life:"5",item:"21203",soul:"60202, 60207, 60208"},{level:"12",type:"1",rate:"1",book:"73201, 75202",gem:"",gold:"",life:"5, 7, 10",item:"",soul:"60201, 60203, 60204"},{level:"13",type:"2",rate:"1",book:"72202, 73202, 74202",gem:"",gold:"400, 450, 600",life:"",item:"50101",soul:""},{level:"14",type:"1",rate:"1",book:"",gem:"25, 30 ,40",gold:"400, 450, 600",life:"",item:"",soul:"60202, 60207, 60208"},{level:"15",type:"3",rate:"1",book:"",gem:"50",gold:"600, 750, 900",life:"",item:"11202, 12205",soul:""},{level:"16",type:"1",rate:"1",book:"71201",gem:"",gold:"600, 750, 900",life:"",item:"",soul:"60205, 60206, 60207"},{level:"17",type:"2",rate:"1",book:"",gem:"30, 35 ,45",gold:"",life:"",item:"40103",soul:"60205, 60206, 60207"},{level:"18",type:"1",rate:"1",book:"73201, 71201",gem:"",gold:"800, 950, 1000",life:"",item:"30203",soul:""},{level:"19",type:"2",rate:"1",book:"",gem:"",gold:"",life:"5, 7, 10",item:"40204",soul:"60203, 60205, 60201"},{level:"20",type:"3",rate:"1",book:"",gem:"",gold:"800, 950, 1200",life:"5",item:"23208",soul:""},{level:"21",type:"2",rate:"1",book:"",gem:"",gold:"800, 950, 1200",life:"",item:"21302",soul:"60202, 60307, 60308"},{level:"22",type:"1",rate:"1",book:"73301, 73202",gem:"30, 40 ,50",gold:"",life:"",item:"30202",soul:""},{level:"23",type:"2",rate:"1",book:"",gem:"",gold:"900, 950, 1300",life:"",item:"22306",soul:"60301, 60303, 60305"},{level:"24",type:"1",rate:"1",book:"73301, 71302",gem:"30, 40 ,50",gold:"",life:"",item:"50204",soul:""},{level:"25",type:"3",rate:"1",book:"",gem:"30, 40 ,50",gold:"1000, 1250, 1500",life:"",item:"11303",soul:""},{level:"26",type:"1",rate:"1",book:"",gem:"",gold:"1000, 1250, 1500",life:"",item:"12306",soul:"60404, 60306, 60407"},{level:"27",type:"2",rate:"1",book:"73202",gem:"40, 50 ,70",gold:"",life:"",item:"13309",soul:""},{level:"28",type:"1",rate:"1",book:"71301, 75301",gem:"",gold:"1000, 1250, 1500",life:"",item:"23309",soul:""},{level:"29",type:"2",rate:"1",book:"71303, 73202",gem:"40, 50 ,70",gold:"",life:"",item:"40306",soul:""},{level:"30",type:"3",rate:"1",book:"72202",gem:"40, 50 ,70",gold:"",life:"",item:"21302, 22205",soul:""},{level:"31",type:"2",rate:"1",book:"",gem:"",gold:"1300, 1450, 1700",life:"5, 7, 10",item:"11303, 12306",soul:"60402, 60407, 60508"},{level:"32",type:"1",rate:"1",book:"73301",gem:"60, 80, 90",gold:"",life:"",item:"50302",soul:""},{level:"33",type:"2",rate:"1",book:"",gem:"",gold:"1300, 1450, 1700",life:"",item:"40305",soul:"60401, 60503, 60405"},{level:"34",type:"1",rate:"1",book:"73301",gem:"",gold:"1300, 1450, 1700",life:"",item:"30308",soul:""},{level:"35",type:"3",rate:"1",book:"72304, 71301",gem:"60, 80, 90",gold:"",life:"",item:"30301",soul:""},{level:"36",type:"1",rate:"1",book:"",gem:"",gold:"1300, 1450, 1700",life:"5, 7, 10",item:"",soul:"60504, 60406, 60507"},{level:"37",type:"2",rate:"1",book:"73302",gem:"60, 80, 90",gold:"1300, 1450, 1700",life:"",item:"",soul:""},{level:"38",type:"1",rate:"1",book:"75301",gem:"",gold:"1300, 1450, 1700",life:"",item:"50303",soul:""},{level:"39",type:"2",rate:"1",book:"74202",gem:"60, 80, 90",gold:"",life:"",item:"50306",soul:""},{level:"40",type:"3",rate:"1",book:"72202",gem:"60, 80, 90",gold:"1300, 1450, 1700",life:"",item:"",soul:""}];n.MapBox=[{chapter:"1",type:"1",book:"73102",gem:"20",gold:"200"},{chapter:"1",type:"2",gem:"30",gold:"400",life:"4"},{chapter:"1",type:"3",gem:"40",gold:"600",soul:"60201"},{chapter:"2",type:"1",gem:"25",gold:"200",soul:"60202"},{chapter:"2",type:"2",gem:"35",gold:"500",soul:"60307"},{chapter:"2",type:"3",book:"71201",gem:"40",item:"30202"},{chapter:"3",type:"1",gem:"30",gold:"300",soul:"60309"},{chapter:"3",type:"2",book:"71302",gem:"50",gold:"600"},{chapter:"3",type:"3",gem:"60",gold:"800",item:"50204"},{chapter:"4",type:"1",book:"75201",gem:"35",gold:"450"},{chapter:"4",type:"2",gem:"55",gold:"750",soul:"60308"},{chapter:"4",type:"3",gem:"65",gold:"1000",item:"50303"},{chapter:"5",type:"1",book:"73202",gem:"40",gold:"400"},{chapter:"5",type:"2",gem:"60",gold:"600",soul:"60304"},{chapter:"5",type:"3",gem:"75",gold:"800",life:"5"},{chapter:"6",type:"1",gem:"50",gold:"500",soul:"60306"},{chapter:"6",type:"2",gem:"70",gold:"800",soul:"60405"},{chapter:"6",type:"3",book:"71301",gem:"80"},{chapter:"7",type:"1",gem:"60",gold:"300",soul:"60401"},{chapter:"7",type:"2",book:"71302",gem:"80",gold:"600"},{chapter:"7",type:"3",gem:"90",gold:"800",soul:"60403"},{chapter:"8",type:"1",book:"75301",gem:"70",gold:"450"},{chapter:"8",type:"2",gem:"90",gold:"750",life:"5"},{chapter:"8",type:"3",gem:"100",gold:"1000",soul:"60402"},{chapter:"9",type:"1",book:"73302",gem:"70",gold:"400"},{chapter:"9",type:"2",gem:"80",gold:"700",life:"5"},{chapter:"9",type:"3",gem:"100",gold:"800",soul:"60404"},{chapter:"10",type:"1",gem:"100",gold:"600",life:"5"},{chapter:"10",type:"2",gem:"110",gold:"800",soul:"60502"},{chapter:"10",type:"3",book:"71303",gem:"130",soul:"60503"},{chapter:"11",type:"1",gem:"120",gold:"600",life:"5"},{chapter:"11",type:"2",book:"73303",gem:"130",gold:"700"},{chapter:"11",type:"3",gem:"140",gold:"800",soul:"60505"},{chapter:"12",type:"1",book:"73203",gem:"150",gold:"900"},{chapter:"12",type:"2",gem:"160",gold:"750",soul:"60501"},{chapter:"12",type:"3",gem:"170",gold:"1000",item:"50303"}];n.Task=[{id:1,title:"\u767b\u5f55",name:"\u6bcf\u65e5\u767b\u5f55",unit:"\u6b21",amount:1,gold:200},{id:2,title:"\u901a\u5173",name:"\u5b8c\u6210\u5192\u9669",unit:"\u6b21",amount:5,gold:500},{id:3,title:"\u51fb\u6740",name:"\u51fb\u8d25\u654c\u4eba",unit:"\u4e2a",amount:60,gold:600},{id:4,title:"\u6311\u6218",name:"\u83b7\u5f97\u5173\u5361",unit:"\u661f",amount:8,dimond:15},{id:5,title:"\u6392\u884c",name:"\u67e5\u770b\u6392\u884c\u699c",unit:"\u6b21",amount:1,dimond:10},{id:6,title:"\u6280\u80fd",name:"\u5347\u7ea7\u6280\u80fd",unit:"\u6b21",amount:2,dimond:10},{id:7,title:"\u88c5\u5907",name:"\u5347\u7ea7\u88c5\u5907",unit:"\u6b21",amount:3,dimond:15},{id:8,title:"\u6b66\u9b42",name:"\u5408\u6210\u6b66\u9b42",unit:"\u6b21",amount:2,dimond:20},{id:9,title:"\u795e\u5ba0",name:"\u5347\u7ea7\u795e\u5ba0",unit:"\u6b21",amount:1,dimond:15}];n.Achieve=[{id:1,title:"\u767b\u5f55",name:"\u8fde\u7eed\u767b\u5f55",unit:"\u6b21",amount:[1,2,3,4,5,6,7],gold:[100,200,300,400,500,600,1e3]},{id:2,title:"\u901a\u5173",name:"\u5b8c\u6210\u5192\u9669",unit:"\u6b21",amount:[5,15,30,50,75,100],gold:[100,300,400,500,600,1e3]},{id:3,title:"\u51fb\u6740",name:"\u51fb\u8d25\u654c\u4eba",unit:"\u4e2a",amount:[50,100,300,500,1e3],gold:[300,500,600,1e3,1500]},{id:4,title:"\u6311\u6218",name:"\u83b7\u5f97",unit:"\u661f",amount:[10,30,50,90,120,180],dimond:[10,40,70,90,120,140]},{id:5,title:"\u6392\u884c",name:"\u6392\u884c\u699c\u4e0a",unit:"\u540d",amount:[100,50,40,30,20,10,5],dimond:[30,50,60,70,80,90,100]},{id:6,title:"\u6280\u80fd",name:"\u5347\u7ea7\u6280\u80fd",unit:"\u6b21",amount:[5,10,15,20,25,30,40],dimond:[10,20,30,40,50,60,70]},{id:7,title:"\u88c5\u5907",name:"\u5347\u7ea7\u88c5\u5907",unit:"\u6b21",amount:[4,8,12,16,20,24,30],dimond:[10,15,20,30,40,50,60]},{id:8,title:"\u6b66\u9b42",name:"\u5408\u6210\u6b66\u9b42",unit:"\u6b21",amount:[6,10,15,20,30],dimond:[20,40,60,80,100]},{id:9,title:"\u795e\u5ba0",name:"\u5347\u7ea7\u795e\u5ba0",unit:"\u6b21",amount:[2,5,10,20,30],dimond:[30,40,50,70,100]},{id:10,title:"\u7b49\u7ea7",name:"\u7b49\u7ea7\u8fbe\u5230",unit:"\u7ea7",amount:[5,10,20,30,50,70,100],gold:[100,200,400,600,800,1500,2e3],dimond:[10,15,25,30,45,65,100]}];n.Eight=[{id:1,name:"\u4e7e",rate:.25,factor:[10,13,17],book:"",gem:"",gold:[200,500,1e3],life:"",item:"",soul:""},{id:2,name:"\u5764",rate:.15,factor:[0,0,0],book:"",gem:[15,30,45],gold:"",life:"",item:"",soul:""},{id:3,name:"\u9707",rate:.1,factor:[.02,.05,.03],book:[1,1,2],gem:"",gold:"",life:"",item:"",soul:""},{id:4,name:"\u574e",rate:.1,factor:[.05,.05,.05],book:"",gem:"",gold:"",life:"",item:[1,1.2,1.5],soul:""},{id:5,name:"\u79bb",rate:.2,factor:[0,0,0],book:"",gem:"",gold:"",life:[5,8,12],item:"",soul:""},{id:6,name:"\u5151",rate:.25,factor:[0,0,0],book:"",gem:"",gold:"",life:"",item:"",soul:[1,2,3]}];n.getLevelCoins=function(t){return Math.floor(1.5*t+t*t/10+15)};n.getLevelExp=function(t){return Math.floor(8*t+t*t/5+10)};var g=function(t){if(console.log(t),-1!=t&&void 0!=t)return parseInt(t.toString().substr(0,1))};n.getTypeId=g;n.getWhoId=function(t){return parseInt(t.toString().substr(1,1))};n.getLvId=function(t){return parseInt(t.toString().substr(2,1))};n.getIndexId=function(t){if(-1!=t&&void 0!=t)return parseInt(t.toString().substr(3,2))};n.getSoulId=function(t){return parseInt(t.toString().substr(5,2))};n.getSoulIndexById=function(t){for(var e=0;e<f.length;e++)if(f[e].id==t)return e+1;return 0};n.getSoulDataById=function(t){return f[t]};n.getUpgradeId=function(t){return parseInt(t.toString().substr(7,2))};var m=function(t){return parseInt(t.toString().substr(0,5))};n.getJsonId=m;n.getDataById=function(t){var e=null;switch(g(t)){case 1:e=c;break;case 2:e=l;break;case 3:e=u;break;case 4:e=d;break;case 5:e=p;break;case 6:e=f;break;case 7:e=h}t=m(t);for(var n=0;n<e.length;n++){var i=e[n];if(i.id==t)return i}return null};n.getSoulIds=function(){var t=[];return f.forEach(function(e){t.push(e.id)}),t},cc._RF.pop()},{"../i18n/Language":"Language"}],DataMgr:[function(t,e,n){"use strict";cc._RF.push(e,"8b606xRa9FG1r76YEQK2b+W","DataMgr");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./nativets/SaveMgr"),s=t("./Hero/HeroGlobal"),r=t("./Tool/Statistics"),c=t("./Tool/TimeMgr"),l=t("./nativets/Platform"),u=t("./Ad/AdMgr"),d=cc._decorator,p=d.ccclass,h=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.needOpenSign=!1,e.winLimit=0,e.failLimit=0,e.limitCount=8,e}var n;return i(e,t),n=e,e.prototype.init=function(){this.coinsArrs=[200,300,400],this.lifeArrs=[5,7,10],this.jadeArrs=[20,30,40],this.loadUuid(),this.loadSetting(),this.loadMapData(),this.loadMapBox(),this.loadHeroGlobal(),this.loadHeroData(),this.loadTimeLimitData(),this.loadOPPOLimitData(),this.loadVIVOLimitData(),this.loadSaveDate(),this.loadWXMarkData()},e.prototype.onLoad=function(){n.instance=this,this.init()},e.prototype.start=function(){},e.prototype.loadUuid=function(){r.default.getInstance().reportEvent("\u8fdb\u5165\u6e38\u620f")},e.prototype.loadSetting=function(){var t=a.load("Setting");if(t){var e=JSON.parse(t);s.default.instance.BgmSwitch=e.bgm,s.default.instance.EffectSwitch=e.effect}else;},e.prototype.loadMapData=function(){var t=a.load("MapData");t?s.default.instance.setMapData(JSON.parse(t)):s.default.instance.initMapData()},e.prototype.loadMapBox=function(){var t=a.load("MapBox");t?s.default.instance.setMapBox(JSON.parse(t)):s.default.instance.initMapBox()},e.prototype.loadHeroGlobal=function(){var t=a.load("HeroGlobal");t||(t=JSON.stringify({Exp:0,Life:40,Coins:300,Jade:40,Unlock:1,MainHeroIndex:0,OtherHeroIndex:1,PetIndex:-1,MonsterKillCount:0,HighestCE:0,AchieveCountData:[0,0,0,0,0,0,0,0,0,0],AchieveGetCountData:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]})),s.default.instance.setHeroGlobal(JSON.parse(t))},e.prototype.LoadFirst=function(t){var e=this;if(this.node.getChildByName("Menu").getChildByName("Menu").getChildByName("FirstSelect"))this.node.getChildByName("Menu").getChildByName("Menu").getChildByName("FirstSelect").active=!0,t();else{if(this.loadingFirst)return;this.loadingFirst=!0,cc.loader.loadRes("FirstSelect",cc.Prefab,function(n,i){if(e.loadingFirst=!1,!n){var o=cc.instantiate(i);o.parent=e.node.getChildByName("Menu").getChildByName("Menu"),o.active=!0,t()}})}},e.prototype.loadHeroData=function(){for(var t=[11101e4,12104e4,13107e4],e=[21101e4,22104e4,23107e4],n=0;n<3;n++){var i=a.load("HeroData"+n);i||(i=JSON.stringify({Weapon:t[n],Armor:e[n],Wing:-1,Ring:-1,Ornament:-1,SkillArrs:[0,0,0,0,0,-1,-1]})),s.default.instance.setHeroData(n,JSON.parse(i))}},e.prototype.loadSaveDate=function(){var t=!1,e=a.load("saveDate");e||(t=!0,e=JSON.stringify({date:c.default.getFullYMDYesterday(),lifeCount:0,coinsCount:0,jadeCount:0,activityCount:0,taskCountData:[1,0,0,0,0,0,0,0,0],taskGetCountData:[0,0,0,0,0,0,0,0,0]}));var n=JSON.parse(e);if(c.default.getDelayNow(n.date)>0){t||(this.needOpenSign=!0);var i=JSON.stringify({date:c.default.getFullYMDToday(),lifeCount:0,coinsCount:0,jadeCount:0,activityCount:0,taskCountData:[1,0,0,0,0,0,0,0,0],taskGetCountData:[0,0,0,0,0,0,0,0,0]});a.save("saveDate",i),this.lifeCount=0,this.coinsCount=0,this.jadeCount=0,this.activityCount=0,this.taskCountData=[1,0,0,0,0,0,0,0,0],this.taskGetCountData=[0,0,0,0,0,0,0,0,0],this.timeLimitNum=3600,this.oppoLimitNum=7,this.vivoLimitNum=7,s.default.instance.AchieveCountData[0]++,s.default.instance.saveHeroGlobal(),u.default.instance&&(this.winLimit=u.default.instance.getBoxGiftLimit(!0),this.failLimit=u.default.instance.getBoxGiftLimit(!1),this.saveLimitData())}else s.default.instance.Life<20&&(s.default.instance.setLife(20),s.default.instance.saveHeroGlobal()),this.lifeCount=n.lifeCount,this.coinsCount=n.coinsCount,this.jadeCount=n.jadeCount,this.activityCount=n.activityCount,this.taskCountData=n.taskCountData?n.taskCountData:[1,0,0,0,0,0,0,0,0],this.taskGetCountData=n.taskGetCountData?n.taskGetCountData:[0,0,0,0,0,0,0,0,0],this.loadLimitData()},e.prototype.saveSaveDate=function(){var t=JSON.stringify({date:c.default.getFullYMDToday(),lifeCount:this.lifeCount,coinsCount:this.coinsCount,jadeCount:this.jadeCount,activityCount:this.activityCount,taskCountData:this.taskCountData,taskGetCountData:this.taskGetCountData});a.save("saveDate",t)},e.prototype.loadLimitData=function(){if(u.default.instance){var t=a.load("BoxLimit");if(t){var e=JSON.parse(t);this.winLimit=e.win,this.failLimit=e.fail,null==e.limitCount||void 0==e.limitCount||NaN==e.limitCount||(this.limitCount=e.limitCount)}else this.winLimit=u.default.instance.getBoxGiftLimit(!0),this.failLimit=u.default.instance.getBoxGiftLimit(!1),this.saveLimitData()}},e.prototype.saveLimitData=function(){u.default.instance&&a.save("BoxLimit",JSON.stringify({win:this.winLimit,fail:this.failLimit,limitCount:this.limitCount}))},e.prototype.loadTimeLimitData=function(){var t=a.load("TimeLimit");this.timeLimitNum=t?parseInt(t):3600},e.prototype.saveTimeLimitData=function(){a.save("TimeLimit",Math.floor(this.timeLimitNum)+"")},e.prototype.loadOPPOLimitData=function(){if(l.getPlatform()==l.Platform.OPPO){var t=a.load("OPPOLimit");this.oppoLimitNum=t?parseInt(t):7}},e.prototype.saveOPPOLimitData=function(){l.getPlatform()==l.Platform.OPPO&&a.save("OPPOLimit",this.oppoLimitNum+"")},e.prototype.loadVIVOLimitData=function(){if(l.getPlatform()==l.Platform.VIVO){var t=a.load("VIVOLimit");this.vivoLimitNum=t?parseInt(t):7}},e.prototype.saveVIVOLimitData=function(){l.getPlatform()==l.Platform.VIVO&&a.save("VIVOLimit",this.vivoLimitNum+"")},e.prototype.loadWXMarkData=function(){if(l.getPlatform()==l.Platform.WX||l.getPlatform()==l.Platform.QQ){var t=a.load("WXMark");this.needCheckMark=!t}},e.prototype.saveWXMarkData=function(){l.getPlatform()!=l.Platform.WX&&l.getPlatform()!=l.Platform.QQ||(this.needCheckMark=!1,a.save("WXMark","true"))},e.instance=null,e=n=o([p],e)}(cc.Component));n.default=h,cc._RF.pop()},{"./Ad/AdMgr":"AdMgr","./Hero/HeroGlobal":"HeroGlobal","./Tool/Statistics":"Statistics","./Tool/TimeMgr":"TimeMgr","./nativets/Platform":"Platform","./nativets/SaveMgr":"SaveMgr"}],Director:[function(t,e,n){"use strict";cc._RF.push(e,"8b9d93a4p1HMYjzD3ABxzJ7","Director");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s},a=this&&this.__generator||function(t,e){var n,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(t){return function(e){return c([t,e])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("./nativets/Global"),r=t("./TextureMgr"),c=t("./Hero/HeroFSM"),l=t("./Audio"),u=t("./Hero/HeroGlobal"),d=t("./Game"),p=t("./Main"),h=t("./Hero/Hero"),f=t("./Map/Box"),g=cc._decorator,m=g.ccclass,y=g.property,v=["\u8d75\u4e91","\u8c82\u8749","\u5927\u4e54","\u590f\u4faf\u60c7","\u66f9\u64cd","\u8bb8\u891a"],b=["\u6b65\u5175","\u67aa\u5175","\u72c2\u6218\u58eb","\u72c2\u6218\u58eb","\u65b9\u672f\u5e08","\u65b9\u672f\u5e08"],A=[{level:1,data1:[{isLeft:!0,iconIndex:0,text:"\u8fd9\u662f\u54ea\u91cc,\u53c8\u7a7f\u8d8a\u4e86\u4e48-_-"},{isLeft:!1,iconIndex:3,text:"\u5c06\u519b,\u6b22\u8fce\u6765\u5230\u706b\u67f4\u4eba\u4e09\u56fd,\u5149\u590d\u6c49\u5ba4\u9760\u60a8\u4e86^ ^"},{isLeft:!1,iconIndex:1,text:"\u524d\u65b9\u6709\u4e00\u6ce2\u9ec4\u5dfe\u8d3c\uff0c\u8bf7\u5c06\u519b\u5c0f\u5fc3"},{isLeft:!0,iconIndex:1,text:"\u597d\u5566\u597d\u5566\uff0c\u6211\u77e5\u9053\u4e86"},{isLeft:!0,iconIndex:1,text:"\uff08\u70b9\u51fb\u653b\u51fb\u6309\u94ae\u53ef\u4ee5\u653b\u51fb\u524d\u65b9\u654c\u4eba\uff0c\u957f\u6309\u653b\u51fb\u53ef\u4ee5\u8fde\u62db\uff0c\u5bf9\u654c\u4eba\u9020\u6210\u66f4\u591a\u4f24\u5bb3\uff09"}],data4:[{isLeft:!1,iconIndex:11,text:"\u5c06\u519b\u9976\u547d\uff0c\u6211\u53ea\u662f\u51fa\u6765\u6253\u9171\u6cb9\u7684"},{isLeft:!1,iconIndex:11,text:"\u8fd9\u662f\u6211\u591a\u5e74\u73cd\u85cf\uff0c\u5c06\u519b\u60a8\u6311\u4e00\u4ef6\uff0c\u653e\u8fc7\u6211\u5427>.<"},{isLeft:!0,iconIndex:0,text:"\u6211\u770b\u4e00\u770b\uff08\u5c0f\u5b69\u5b50\u624d\u505a\u9009\u62e9\u9898\uff01\uff09"}]},{level:2,data1:[{isLeft:!1,iconIndex:3,text:"\u524d\u65b9\u6709\u9ec4\u5dfe\u8d3c\u5f13\u7bad\u624b,\u8bf7\u5c06\u519b\u5c0f\u5fc3"},{isLeft:!0,iconIndex:1,text:"\u597d\u5566\u597d\u5566,\u6211\u4f1a\u7684"}],data2:[{isLeft:!0,iconIndex:3,text:"\u6d1e\u7a74\u5185\u4f1a\u6709\u5b9d\u7bb1\u548c\u66f4\u5f3a\u7684\u654c\u4eba,\u98ce\u9669\u548c\u673a\u9047\u5171\u5b58\u5594"},{isLeft:!1,iconIndex:1,text:"\u597d\u7684"}],data4:[{isLeft:!1,iconIndex:3,text:"\u771f\u7684\u6709\u5b9d\u7bb1\u6389\u843d\uff0c\u5feb\u9009\u4e00\u4ef6\u5427~"},{isLeft:!0,iconIndex:0,text:"\u5f31\u6c34\u4e09\u5343\uff0c\u6211\u53ea\u53d6\u4e00\u74e2"}]},{level:3,data1:[{isLeft:!0,iconIndex:3,text:"\u5c0f\u5fc3\u524d\u65b9\u7684\u5de8\u4eba,\u6ce8\u610f\u62c9\u5f00\u8ddd\u79bb\u5594"},{isLeft:!1,iconIndex:1,text:"\uff08\u4f7f\u7528\u6280\u80fd\u53ef\u4ee5\u8fdc\u7a0b\u6d88\u8017\u654c\u4eba\uff09"}],data4:[{isLeft:!1,iconIndex:12,text:"\u5c06\u519b\u5a01\u6b66\uff01\u8fd9\u4e9b\u90fd\u662f\u8425\u957f\u7684\u5b9d\u7269\uff0c\u5c06\u519b\u60a8\u770b\u4e0b"},{isLeft:!0,iconIndex:0,text:"(\u90fd\u62ff\u4e86\u4e0d\u592a\u597d\u5427\u3002\u3002\uff09"}]},{level:4,data2:[{isLeft:!0,iconIndex:3,text:"\u5c0f\u5fc3\u7a7a\u4e2d\u5355\u4f4d,\u8bd5\u8bd5\u8df3\u8dc3\u52a0\u653b\u51fb\u7684\u8fde\u62db\u5427"},{isLeft:!1,iconIndex:0,text:"\u542c\u8d77\u6765\u4e0d\u9519"}],data4:[{isLeft:!1,iconIndex:3,text:"\u53c8\u6709\u5b9d\u7bb1\u6389\u843d\uff0c\u5feb\u9009\u4e00\u4ef6\u5427~"},{isLeft:!0,iconIndex:0,text:"\uff08\u6ce8\u610f\u5f62\u8c61\uff0c\u4e0d\u80fd\u5168\u62ff\u4e86\uff09"}]},{level:5,data2:[{isLeft:!1,iconIndex:4,text:"\u9601\u4e0b\u4f55\u4eba,\u80c6\u6562\u95ef\u6211\u8425\u5730"},{isLeft:!0,iconIndex:0,text:"\u66f9\u64cd\u8352\u6deb\u65e0\u9053,\u5207\u52ff\u52a9\u7ea3\u4e3a\u8650\uff01"},{isLeft:!1,iconIndex:4,text:"\u5e9f\u8bdd\u5c11\u8bf4,\u5403\u6211\u4e00\u67aa\uff01"}],data4:[{isLeft:!1,iconIndex:4,text:"\u529f\u592b\u4e0d\u9519\uff0c\u8ddf\u968f\u4e3b\u516c\u5427\uff0c\u8fd9\u4e9b\u5168\u662f\u4f60\u7684"},{isLeft:!0,iconIndex:0,text:"\uff08\u6211\u624d\u4e0d\u8981\u5462\u3002\u3002\uff09"}]},{level:6,data4:[{isLeft:!1,iconIndex:16,text:"\u653e\u8fc7\u8001\u673d\u5427\uff0c\u6211\u53ea\u662f\u4e00\u4e2a\u6c5f\u6e56\u672f\u58eb"},{isLeft:!0,iconIndex:0,text:"\u52a9\u7ea3\u4e3a\u8650\uff0c\u8be5\u6b7b\uff01"},{isLeft:!1,iconIndex:11,text:"\u5c06\u519b\u9976\u547d\uff01\u6211\u5168\u90e8\u5bb6\u5f53\u5728\u6b64\uff01"},{isLeft:!0,iconIndex:0,text:"\uff08\u4e0d\u9a97\u4eba\uff0c\u90a3\u6709\u8fd9\u4e48\u591a\u5bb6\u5f53\u3002\u3002\uff09"}]},{level:7,data4:[{isLeft:!1,iconIndex:3,text:"\u5b9d\u7bb1\uff01"},{isLeft:!0,iconIndex:0,text:"\u55ef\u54fc"}]},{level:8,data4:[{isLeft:!1,iconIndex:16,text:"\u5c06\u519b\u5a01\u6b66\uff01\u5b9d\u7269\u5949\u4e0a\uff01"},{isLeft:!0,iconIndex:0,text:"\uff08\u6211\u5c31\u770b\u770b\u3002\u3002\uff09"}]},{level:9,data4:[{isLeft:!1,iconIndex:3,text:"\u5b9d\u7bb1\uff01\uff01"},{isLeft:!0,iconIndex:0,text:"\uff08\u8fd0\u6c14\u4e5f\u592a\u597d\u4e86\u5427\uff01\uff09"}]},{level:10,data3:[{isLeft:!1,iconIndex:4,text:"\u53c8\u662f\u4f60,\u53ef\u6562\u4e0e\u4ffa\u5927\u6218\u4e09\u767e\u56de\u5408\uff01\uff01"},{isLeft:!0,iconIndex:0,text:"\u9601\u4e0b\u7684\u9996\u7ea7,\u6211\u5c31\u6536\u4e0b\u4e86\uff01"}],data4:[{isLeft:!1,iconIndex:4,text:"\u597d\u6b66\u529f\uff01\u4f60\u518d\u8003\u8651\u4e00\u4e0b\uff01\uff01"},{isLeft:!0,iconIndex:0,text:"...."}]},{level:11,data2:[{isLeft:!1,iconIndex:3,text:"\u524d\u9762\u662f\u4ec0\u4e48\u52a8\u7269\uff01\u8fd9\u4e5f\u592a\u5927\u4e86"},{isLeft:!0,iconIndex:0,text:"\uff08...\u5c45\u7136\u6709\u5927\u8c61,\u5c0f\u5fc3\u70b9\uff09"}],data4:[{isLeft:!1,iconIndex:3,text:"\u54c7\uff01\uff01\u5b9d\u7bb1\uff01\uff01"},{isLeft:!0,iconIndex:0,text:"\uff08\u563f\u563f\uff01\uff09"}]},{level:12,data4:[{isLeft:!1,iconIndex:16,text:"\u5c06\u519b\u3002\u3002\u6211\u5176\u5b9e\u662f\u5367\u5e95"},{isLeft:!0,iconIndex:0,text:"\uff08\u600e\u4e48\u53c8\u662f\u4f60\uff09"},{isLeft:!1,iconIndex:11,text:"\u6211\u3002\u3002\u7ed9\u5b9d\u3002\u3002"},{isLeft:!0,iconIndex:0,text:"\uff08\u3002\u3002\u3002\u3002\u3002\uff09"}]},{level:13,data4:[{isLeft:!1,iconIndex:3,text:"\u54c7\uff01\uff01\u5b9d\u7bb1\uff01\uff01"},{isLeft:!0,iconIndex:0,text:"\uff08\u563f\u563f\uff01\uff09"}]},{level:14,data4:[{isLeft:!1,iconIndex:12,text:"\u6211\u4e0a\u6709\u8001\u4e0b\u6709\u5c0f\u3002\u3002"},{isLeft:!0,iconIndex:0,text:"\uff08\u6211\u5c31\u542c\u542c\u3002\u3002\uff09"}]},{level:15,data3:[{isLeft:!1,iconIndex:6,text:"\u4f60\u8fd9\u77ee\u5b50\uff0c\u5403\u4ffa\u4e00\u9524\uff01"},{isLeft:!0,iconIndex:0,text:"\u4f11\u5f97\u7316\u72c2\uff01"}],data4:[{isLeft:!1,iconIndex:6,text:"\u597d\u672c\u4e8b\uff0c\u4f60\u8fd9\u670b\u53cb\u4ffa\u4ea4\u4e86\uff01"},{isLeft:!0,iconIndex:0,text:"\uff08\u4e00\u8a00\u4e0d\u5408\u5c31\u9001\u88c5\u5907\uff1f\uff1f\uff09"}]},{level:16,data4:[{isLeft:!1,iconIndex:11,text:"\u5c06\u519b.\u4e0d\u8981\uff01"},{isLeft:!0,iconIndex:0,text:"\uff08\u3002\u3002\u3002\u3002\u3002\uff09"}]},{level:17,data4:[{isLeft:!1,iconIndex:3,text:"\u54c7\uff01\uff01\u5b9d\u7bb1\uff01\uff01"},{isLeft:!0,iconIndex:0,text:"\uff08\u6211\u679c\u7136\u662f\u4e3b\u89d2\uff01\uff09"}]},{level:18,data4:[{isLeft:!0,iconIndex:0,text:"\u5b9d\u7269\u5462"},{isLeft:!1,iconIndex:12,text:"-_-"}]},{level:19,data4:[{isLeft:!1,iconIndex:3,text:"(\u53c8\u662f\u5b9d\u7bb1\u3002\u3002)"},{isLeft:!0,iconIndex:0,text:"\uff08\u563f\u563f\uff09"}]},{level:20,data3:[{isLeft:!0,iconIndex:0,text:"\u8bb8\u891a\uff01\u83ab\u8981\u611a\u5fe0,\u66f9\u64cd\u5df2\u7ecf\u5165\u9b54\u4e86\uff01"},{isLeft:!1,iconIndex:6,text:"...,\u8a93\u6b7b\u8ffd\u968f\u4e3b\u516c\uff01"},{isLeft:!1,iconIndex:6,text:"\u6740\uff01\uff01"}],data4:[{isLeft:!1,iconIndex:6,text:"\u4f60\u4eec\u4e0d\u662f\u4e3b\u516c\u7684\u5bf9\u624b\uff0c\u62ff\u4e0a\u8fd9\u4e9b\u88c5\u5907\uff0c\u5feb\u70b9\u9003\u5427"},{isLeft:!0,iconIndex:0,text:"\u3002\u3002\u3002"}]},{level:21,data4:[{isLeft:!0,iconIndex:0,text:"^_^"}]},{level:22,data4:[{isLeft:!0,iconIndex:0,text:"\u5b9d\u7269"},{isLeft:!1,iconIndex:12,text:"-_-"}]},{level:23,data4:[{isLeft:!1,iconIndex:3,text:"(\u6709\u6bd2\u5427\u3002\u3002)"},{isLeft:!0,iconIndex:0,text:"-_-"}]},{level:24,data4:[{isLeft:!0,iconIndex:0,text:"\u5b9d!"},{isLeft:!1,iconIndex:12,text:"-_-"}]},{level:25,data4:[{isLeft:!1,iconIndex:4,text:"\u8bf7\u529d\u4e3b\u516c\u56de\u5934"},{isLeft:!0,iconIndex:0,text:"\u6211\u4f1a\u7684\uff01"}]},{level:26,data4:[{isLeft:!1,iconIndex:12,text:"\u592a\u5012\u9709\u4e86\uff0c\u6bcf\u6b21\u90fd\u9047\u5230\u8fd9\u4e2a\u707e\u661f"},{isLeft:!0,iconIndex:0,text:"\u563f\u563f"}]},{level:27,data4:[{isLeft:!1,iconIndex:3,text:"\u8fd9\u4e2a\u7bb1\u5b50\u8c8c\u4f3c\u8fd8\u4e0d\u9519"},{isLeft:!0,iconIndex:0,text:"\u563f"}]},{level:28,data4:[{isLeft:!0,iconIndex:0,text:"\u563f\u563f!"},{isLeft:!1,iconIndex:12,text:"\u6211\u81ea\u5df1\u6765"}]},{level:29,data4:[{isLeft:!0,iconIndex:0,text:"(\u51fa\u70b9\u597d\u8d27\u5427\uff01\uff09"}]},{level:30,data3:[{isLeft:!0,iconIndex:3,text:"\u590f\u4faf\u60c7\uff01\u90aa\u4e0d\u80dc\u6b63,\u505c\u624b\u5427\uff01"},{isLeft:!1,iconIndex:5,text:"\u5475\u5475\uff01"}],data4:[{isLeft:!1,iconIndex:5,text:"...\u53ea\u6709\u4f60\u4eec\u80fd\u963b\u6b62\u4e3b\u516c\u4e86.."},{isLeft:!1,iconIndex:1,text:"\u5b89\u606f\u5427\uff01"}]},{level:31,data4:[{isLeft:!1,iconIndex:3,text:"666"},{isLeft:!0,iconIndex:0,text:"\u563f\u563f"}]},{level:32,data4:[{isLeft:!0,iconIndex:0,text:"\u563f\u563f!"},{isLeft:!1,iconIndex:12,text:"\u6211\u81ea\u5df1\u6765"}]},{level:33,data4:[{isLeft:!0,iconIndex:0,text:"\uff08\u51fa\u70b9\u597d\u8d27\u5427\uff01\uff09"}]},{level:32,data4:[{isLeft:!1,iconIndex:12,text:"\u5c06\u519b\u5a01\u6b66\uff0c\u66f9\u8d3c\u5c31\u5728\u524d\u9762"},{isLeft:!0,iconIndex:0,text:"\uff08\u8981\u5c0f\u5fc3\u4e86\uff09"}]},{level:35,data3:[{isLeft:!1,iconIndex:5,text:"\u4e0d\u9519\uff01\u4f60\u4eec\u5c45\u7136\u80fd\u5230\u8fd9\u91cc\uff01"},{isLeft:!1,iconIndex:5,text:"\u6765\u52a9\u6211\u5427\uff01\u6715\u5c01\u4f60\u4eec\u4e00\u65b9\u8bf8\u4faf\uff01"},{isLeft:!0,iconIndex:0,text:"..."},{isLeft:!0,iconIndex:0,text:"..."}],data4:[{isLeft:!1,iconIndex:5,text:"\u5475\u5475\uff01\u5c45\u7136\u80fd\u63a5\u6211\u4e00\u62db,\u4f60\u4eec\u5728\u8003\u8651\u4e0b"},{isLeft:!0,iconIndex:0,text:"\u66f9\u8d3c\u4f11\u8d70"}]},{level:36,data4:[{isLeft:!0,iconIndex:0,text:"\uff08\u4eba\u54c1\u7206\u53d1\u5427\uff01\uff09"}]},{level:37,data4:[{isLeft:!1,iconIndex:17,text:"\u8001\u673d\u4e00\u70b9\u5fc3\u610f\uff0c\u5c06\u519b\u52a1\u5fc5\u7b11\u7eb3\uff01"},{isLeft:!0,iconIndex:0,text:"\uff08\u7ed9\u8001\u4eba\u5bb6\u7559\u70b9\u5427\uff09"}]},{level:38,data4:[{isLeft:!0,iconIndex:0,text:"\uff08\u8bd5\u8bd5\u65b0\u7684\u5f00\u7bb1\u5927\u6cd5\uff01\uff09"}]},{level:39,data4:[{isLeft:!1,iconIndex:16,text:"\u5c06\u519b\uff0c\u66f9\u64cd\u80cc\u540e\u7684\u9b54\u6c14\u50cf\u662f\u6709\u4eba\u64cd\u4f5c"},{isLeft:!1,iconIndex:16,text:"\u8001\u673d\u4e00\u70b9\u5fc3\u610f\uff0c\u5c06\u519b\u52a1\u5fc5\u7b11\u7eb3\uff01"},{isLeft:!0,iconIndex:0,text:"\uff08\u662f\u6709\u70b9\u53ef\u7591\uff09"}]},{level:40,data3:[{isLeft:!1,iconIndex:5,text:"\u5b50\u9f99,\u6715\u751a\u60dc\u624d\uff01\u968f\u6715,\u6574\u4e2a\u8700\u5730\u5c01\u4e8e\u4f60\uff01\uff01"},{isLeft:!0,iconIndex:0,text:"..."}],data4:[{isLeft:!0,iconIndex:0,text:"\u9b54\u6c14\u5df2\u7ecf\u6d88\u5931\uff01"},{isLeft:!1,iconIndex:5,text:"\u662f\u6211\u6267\u5ff5\u592a\u6df1,\u5c0f\u5fc3\u5de6\u6148\uff01"},{isLeft:!0,iconIndex:0,text:"\u4e0d\uff01\uff01"},{isLeft:!1,iconIndex:5,text:"..(\u66f9\u64cd\u5df2\u7ecf\u81ea\u5c3d\uff09"},{isLeft:!1,iconIndex:3,text:"\u8d70\u5427,\u5e55\u540e\u4e3b\u8c0b\u53e6\u6709\u5176\u4eba\uff01"}]}],S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.monsterPrefab=null,e.berserkerPrefab=null,e.fangshuPrefab=null,e.boxPrefab=null,e}var n;return i(e,t),n=e,e.prototype.init=function(){n.instance=this,this.left=this.node.getChildByName("left"),this.right=this.node.getChildByName("right"),this.leftIcon=this.left.getChildByName("icon").getComponent(cc.Sprite),this.rightIcon=this.right.getChildByName("icon").getComponent(cc.Sprite),this.leftLabel=this.left.getChildByName("text").getComponent(cc.Label),this.rightLabel=this.right.getChildByName("text").getComponent(cc.Label),this.leftName=this.left.getChildByName("name").getComponent(cc.Label),this.rightName=this.right.getChildByName("name").getComponent(cc.Label)},e.prototype.start=function(){},e.prototype.onOpen=function(t,e){this.openLv=t,this.openIndex=e,s.default.getInstance().MoveState=0,this.needWin=!1;var n=this.getDataByLv(t);if(!n)return s.default.getInstance().inGame||(s.default.getInstance().inGame=!0),void(3==e&&c.default.instance.fsm.can("win")&&c.default.instance.fsm.win());switch(this.data=null,e){case 0:n.data1&&(this.data=n.data1);break;case 1:n.data2&&(this.data=n.data2);break;case 2:n.data3&&(this.data=n.data3);break;case 3:n.data4?(this.data=n.data4,this.needWin=!0):c.default.instance.fsm.can("win")&&c.default.instance.fsm.win()}this.data?(s.default.getInstance().inGame=!1,this.index=0,this.count=this.data.length,this.showDialog(),this.node.active=!0):s.default.getInstance().inGame||(s.default.getInstance().inGame=!0)},e.prototype.showType=function(t){switch(t){case 2:var e=this.getDataByLv(s.default.getInstance().nowLevel).data4[0].iconIndex;this.showRewardMonster(e);break;case 1:this.showRewardBox();break;case 3:this.onOpen(s.default.getInstance().nowLevel,3)}},e.prototype.showRewardMonster=function(t){var e=this,n=null;switch(t){case 11:case 12:n=cc.instantiate(this.monsterPrefab);break;case 13:case 14:n=cc.instantiate(this.berserkerPrefab);break;case 17:case 16:n=cc.instantiate(this.fangshuPrefab);break;default:return void this.onOpen(s.default.getInstance().nowLevel,3)}n.parent=d.default.instance.gameEventNode,n.position=cc.v2(p.default.instance.heroCamera.x+.5*cc.winSize.width,-192),h.default.instance.node.x<n.x&&(n.scaleX*=-1);var i=n.getComponent(sp.Skeleton),o="";switch(t){case 11:o="sword_";break;case 12:o="spear_";break;case 13:i.setSkin("001_\u8fd1\u6218");break;case 14:i.setSkin("001_\u8fdc\u653b");break;case 17:i.setSkin("001_\u51b0");break;case 16:i.setSkin("002_\u706b")}var a=""==o?"\u8fdb\u573a":"show",r=""==o?"\u7ad9\u7acb":"stand";i.setAnimation(0,o+a,!1),i.setCompleteListener(function(){i.animation!=o+r&&(i.setAnimation(0,o+r,!0),e.onOpen(s.default.getInstance().nowLevel,3))})},e.prototype.showRewardBox=function(){var t=this,e=cc.instantiate(this.boxPrefab);e.parent=d.default.instance.gameEventNode,e.position=cc.v2(p.default.instance.heroCamera.x+.5*cc.winSize.width,200);var n=e.getComponent(f.default);n.init();var i=cc.sequence(cc.moveBy(.5,cc.v2(0,-392)),cc.callFunc(function(){n.onlyOpen(),t.onOpen(s.default.getInstance().nowLevel,3)}));e.runAction(i)},e.prototype.onClose=function(){this.left.active=!1,this.right.active=!1,this.node.active=!1,s.default.getInstance().inGame=!0,this.needWin&&c.default.instance.fsm.can("win")&&c.default.instance.fsm.win()},e.prototype.onBtnNext=function(){this.gen||(this.index++,this.index==this.count?(this.onClose(),1==this.openLv&&0==this.openIndex&&(d.default.instance.skillHalo.active=!0,this.scheduleOnce(function(){d.default.instance.skillHalo.active=!1},3))):this.showDialog())},e.prototype.showActionText=function(t,e){var n=this;this.textLength=e.length,this.tindex=0,this.originText=e,this.tLabel=t,this.subText="",this.gen=this.generateText(),this.schedule(function(){n.gen.next().done&&(cc.log("isDone"),n.gen=null)},.04,this.textLength)},e.prototype.generateText=function(){var t;return a(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.textLength?[4,this.getSubText()]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},e.prototype.getSubText=function(){this.tindex++,this.subText=this.originText.substr(0,this.tindex),this.tindex%12==1&&l.default.instance.playAudio("Typing"),this.tLabel.string=this.subText},e.prototype.showDialog=function(){var t=this.data[this.index];cc.log(this.index,t),t&&(!this.left.active&&t.isLeft&&(this.leftIcon.spriteFrame=this.getIcon(t.iconIndex),this.leftName.string=this.getName(t.iconIndex),this.left.active=!0),this.right.active||t.isLeft||(this.rightIcon.spriteFrame=this.getIcon(t.iconIndex),this.rightIcon.node.scaleX=1,t.iconIndex>3&&t.iconIndex<7&&(this.rightIcon.node.scaleX=-1),t.iconIndex>10&&(this.rightIcon.node.scaleX=-1),this.rightName.string=this.getName(t.iconIndex),this.right.active=!0),t.isLeft?(this.leftLabel.string="",this.showActionText(this.leftLabel,t.text)):(this.rightLabel.string="",this.showActionText(this.rightLabel,t.text)))},e.prototype.getName=function(t){return 0==t?v[u.default.instance.MainHeroIndex]:t>10&&t<15?b[t-=11]:t>15?b[t-=12]:v[t-1]},e.prototype.getIcon=function(t){return 0==t?r.default.instance.heroIconGameSf[u.default.instance.MainHeroIndex]:t>3&&t<7?r.default.instance.bossIconGameSf[t-4]:t>10&&t<15?(t-=11,r.default.instance.monsterIconGameSf[t]):t>15?(t-=12,r.default.instance.monsterIconGameSf[t]):r.default.instance.heroIconGameSf[t-1]},e.prototype.getDataByLv=function(t){for(var e=0;e<A.length;e++)if(A[e].level==t)return A[e];return null},e.instance=null,o([y(cc.Prefab)],e.prototype,"monsterPrefab",void 0),o([y(cc.Prefab)],e.prototype,"berserkerPrefab",void 0),o([y(cc.Prefab)],e.prototype,"fangshuPrefab",void 0),o([y(cc.Prefab)],e.prototype,"boxPrefab",void 0),e=n=o([m],e)}(cc.Component);n.default=S,cc._RF.pop()},{"./Audio":"Audio","./Game":"Game","./Hero/Hero":"Hero","./Hero/HeroFSM":"HeroFSM","./Hero/HeroGlobal":"HeroGlobal","./Main":"Main","./Map/Box":"Box","./TextureMgr":"TextureMgr","./nativets/Global":"Global"}],DmgMgr:[function(t,e,n){"use strict";cc._RF.push(e,"d3108XB2NtEdobVkz4jN97G","DmgMgr");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,r=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dmgPrefab=null,e.normFont=null,e.CRFont=null,e.dmgEvent=null,e.count=10,e}return i(e,t),e.prototype.start=function(){this.dmgPool=new cc.NodePool;for(var t=0;t<this.count;t++){var e=cc.instantiate(this.dmgPrefab);this.dmgPool.put(e)}cc.director.on("dmgGC",this.GCAll,this),cc.director.on("showdmg",this.showDmg,this)},e.prototype.showDmg=function(t,e,n,i,o){var a=this,s=this.create();s.parent=this.dmgEvent;var r=s.getComponent(cc.Label),c=30*Math.random()-30;if(r.fontSize=40,r.font=this.normFont,s.scale=.3,n&&(c=40+60*Math.random(),r.fontSize=45,r.font=this.CRFont),i&&(c=0),s.position=cc.v2(e,c),n){r.string="\u66b4"+2*t;var l=cc.moveBy(.5,cc.v2(0,90)),u=cc.sequence(cc.scaleTo(.3,1.1),cc.delayTime(.2)),d=cc.spawn(l,u);s.runAction(cc.sequence(d,cc.delayTime(0),cc.callFunc(function(){r.string="",a.recycle(s)})))}else{r.string="-"+t;var p=cc.moveBy(.3,cc.v2(0,70)),h=cc.sequence(cc.scaleTo(.1,1.2),cc.delayTime(.2),cc.scaleTo(.1,0)),f=cc.spawn(p,h);s.runAction(cc.sequence(f,cc.delayTime(0),cc.callFunc(function(){r.string="",a.recycle(s)})))}},e.prototype.create=function(){return this.dmgPool.size()>0?this.dmgPool.get():cc.instantiate(this.dmgPrefab)},e.prototype.GCAll=function(){for(var t=this.dmgEvent.children,e=t.length-1;e>=0;e--)this.recycle(t[e])},e.prototype.recycle=function(t){this.dmgPool.put(t)},e.prototype.update=function(t){this.startDate=Date.now()},e.prototype.onDestroy=function(){cc.director.off("dmgGC",this.GCAll,this),cc.director.off("showdmg",this.showDmg,this)},o([r(cc.Prefab)],e.prototype,"dmgPrefab",void 0),o([r(cc.Font)],e.prototype,"normFont",void 0),o([r(cc.Font)],e.prototype,"CRFont",void 0),o([r(cc.Node)],e.prototype,"dmgEvent",void 0),e=o([s],e)}(cc.Component);n.default=c,cc._RF.pop()},{}],EN:[function(t,e,n){"use strict";cc._RF.push(e,"38f0fO59LJN67DxzSuT9t2I","EN"),Object.defineProperty(n,"__esModule",{value:!0});n.default={endHome:"Home"},cc._RF.pop()},{}],EquipmentDialog:[function(t,e,n){"use strict";cc._RF.push(e,"b36adnybMlAqaSxIynHjHhW","EquipmentDialog");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./TextureMgr"),s=t("./nativets/Config"),r=t("./i18n/Language"),c=t("./Hero/HeroGlobal"),l=t("./MenuSelect"),u=t("./Equipment"),d=t("./Menu"),p=t("./Audio"),h=t("./Message"),f=t("./Tool/Statistics"),g=t("./DataMgr"),m=cc._decorator,y=m.ccclass,v=(m.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return i(e,t),n=e,e.prototype.init=function(){n.instance=this,this.icon=this.node.getChildByName("icon").getComponent(cc.Sprite),this.lvBg=this.node.getChildByName("lvbg").getComponent(cc.Sprite),this.soulIcon=this.node.getChildByName("soulicon").getComponent(cc.Sprite),this.nameLabel=this.node.getChildByName("name").getComponent(cc.Label),this.lvLabel=this.node.getChildByName("lv").getComponent(cc.Label),this.equipLabel=this.node.getChildByName("textequip").getComponent(cc.Label),this.textlabel0=this.node.getChildByName("text0").getComponent(cc.Label),this.textlabel1=this.node.getChildByName("text1").getComponent(cc.Label),this.textlabel2=this.node.getChildByName("text2").getComponent(cc.Label),this.upBtn=this.node.getChildByName("up").getComponent(cc.Button),this.priceLabel=this.upBtn.node.getChildByName("coins").getComponent(cc.Label),this.recycleBtn=this.node.getChildByName("recycle").getComponent(cc.Button),this.equipBtn=this.node.getChildByName("equip").getComponent(cc.Button),this.unequipBtn=this.node.getChildByName("unequip").getComponent(cc.Button)},e.prototype.setButtonState=function(t){this.equipBtn.node.active=!t,this.equipBtn.node.active=t},e.prototype.onOpen=function(t){cc.log(t),this.typeIndex=u.default.instance.titleIndex+1,this.id=t,this.icon.spriteFrame=a.default.instance.getEquipmentIconById(t),this.lvBg.spriteFrame=a.default.instance.getLvIconById(t),-1!=u.default.instance.equipedArrs.indexOf(t)?this.setEquipState(!0):this.setEquipState(!1);var e=s.getDataById(t);this.nameLabel.string=e.name;var n=s.getUpgradeId(t);this.lvLabel.string=r.default.lv+(n+1),this.equipPrice=parseFloat(e.price)+n*parseFloat(e.priceup),this.priceLabel.string=this.equipPrice+"";var i="";e.atk&&(i+=r.default.equipmentAtk+"+"+(parseFloat(e.atk)+n*parseFloat(e.atkup))+"\n"),e.def&&(i+=r.default.equipmentDef+"+"+(parseFloat(e.def)+n*parseFloat(e.defup))),this.textlabel0.string=i;var o="";e.hp&&(o+=r.default.equipmentHp+"+"+(parseFloat(e.hp)+n*parseFloat(e.hpup)).toFixed(1)+"        "),e.ls&&(o+=r.default.equipmentLs+"+"+(parseFloat(e.ls)+n*parseFloat(e.lsup)).toFixed(1)+"%        "),e.sp&&(o+=r.default.equipmentSp+"+"+(parseFloat(e.sp)+n*parseFloat(e.spup)).toFixed(1)+"%        "),e.cr&&(o+=r.default.equipmentCr+"+"+(parseFloat(e.cr)+n*parseFloat(e.crup)).toFixed(1)+"%        "),e.arp&&(o+=r.default.equipmentArp+"+"+(parseFloat(e.arp)+n*parseFloat(e.arpup)).toFixed(1)+"        "),e.bonus&&(o+=r.default.equipmentBonus+"+"+(parseFloat(e.bonus)+n*parseFloat(e.bonusup)).toFixed(1)+"%        "),e.cd&&(o+=r.default.equipmentCd+"-"+(parseFloat(e.cd)+n*parseFloat(e.cdup)).toFixed(1)+"%        "),e.miss&&(o+=r.default.equipmentMiss+"+"+(parseFloat(e.miss)+n*parseFloat(e.missup)).toFixed(1)+"%        "),e.exp&&(o+=r.default.equipmentExp+"+"+(parseFloat(e.exp)+n*parseFloat(e.expup)).toFixed(1)+"%        "),e.gold&&(o+=r.default.equipmentGold+"+"+(parseFloat(e.gold)+n*parseFloat(e.goldup)).toFixed(1)+"%        "),this.textlabel1.string=o;var c="",l=s.getSoulId(t);if(0==l)c=r.default.textNull,this.soulIcon.spriteFrame=null;else{var d=s.getSoulDataById(l-1);this.nameLabel.string=d.name+"\xb7"+this.nameLabel.string,this.soulIcon.spriteFrame=a.default.instance.getSoulIconById(d.id),d.atk&&(c+=r.default.equipmentAtk+"+"+d.atk+"        "),d.def&&(c+=r.default.equipmentDef+"+"+d.def+"        "),d.hp&&(c+=r.default.equipmentHp+"+"+d.hp+"        "),d.ls&&(c+=r.default.equipmentLs+"+"+d.ls+"%        "),d.sp&&(c+=r.default.equipmentSp+"+"+d.sp+"%        "),d.cr&&(c+=r.default.equipmentCr+"+"+d.cr+"%        "),d.arp&&(c+=r.default.equipmentArp+"+"+d.arp+"        "),d.bonus&&(c+=r.default.equipmentBonus+"+"+d.bonus+"%        "),d.cd&&(c+=r.default.equipmentCd+"-"+d.cd+"%        "),d.miss&&(c+=r.default.equipmentMiss+"+"+d.miss+"%        "),d.exp&&(c+=r.default.equipmentExp+"+"+d.exp+"%        "),d.gold&&(c+=r.default.equipmentGold+"+"+d.gold+"%        ")}this.textlabel2.string=c,this.node.active=!0},e.prototype.onBtnEquip=function(){p.default.instance.playAudio("BtnClick"),this.onEquip()},e.prototype.onEquip=function(){c.default.instance.getDataArrsByIndex(this.typeIndex).indexOf(this.id);var t=c.default.instance.HeroDataArrs[l.default.instance.selectIndex];cc.log(this.typeIndex),t.setEquip(this.typeIndex,this.id),this.setEquipState(!0),u.default.instance.refreshTitle(),cc.log("equipmentarrs",u.default.instance.equipedArrs)},e.prototype.onBtnUneuquip=function(){p.default.instance.playAudio("BtnClick"),this.onUnequip()},e.prototype.onUnequip=function(){var t=c.default.instance.HeroDataArrs[l.default.instance.selectIndex];cc.log(this.typeIndex),t.setEquip(this.typeIndex,-1),this.setEquipState(!1),u.default.instance.refreshTitle()},e.prototype.setEquipState=function(t){this.isEquiped=t,this.equipIndex=c.default.instance.getDataArrsByIndex(this.typeIndex).indexOf(this.id),this.equipLabel.string=1==t?r.default.equiped:r.default.notEquip,this.equipBtn.node.active=!t,this.unequipBtn.node.active=t,t&&(this.unequipBtn.interactable=this.typeIndex>2)},e.prototype.onBtnWeaponToSoul=function(){p.default.instance.playAudio("BtnClick"),u.default.instance.equipmentNode.active=!1,u.default.instance.listIndex=3,u.default.instance.soulNode.active=!0,u.default.instance.soulDialog.active=!1,u.default.instance.soulHC.active=!1,u.default.instance.soulFM.active=!0,u.default.instance.soulEnchantArrs[0]=this.id,u.default.instance.fmIcon0.spriteFrame=this.icon.spriteFrame,u.default.instance.fmlv.spriteFrame=this.lvBg.spriteFrame,l.default.instance.node.active=!1,d.default.instance.LeftNode.active=!1},e.prototype.onBtnSoulMain=function(){},e.prototype.onBtnSoulSub=function(){},e.prototype.onBtnRecycle=function(){},e.prototype.onBtnUpgrade=function(){p.default.instance.playAudio("BtnClick"),s.getUpgradeId(this.id)>=19||(c.default.instance.Coins>this.equipPrice?(c.default.instance.Coins-=this.equipPrice,c.default.instance.setCoins(c.default.instance.Coins),this.onUpgrade(),d.default.instance.refreshTopLabel(),c.default.instance.saveHeroGlobal(),f.default.getInstance().reportEvent("\u5347\u7ea7\u88c5\u5907")):h.default.instance.showLack("coins"))},e.prototype.onUpgrade=function(){g.default.instance.taskCountData[6]++,g.default.instance.saveSaveDate(),c.default.instance.AchieveCountData[6]++;var t=s.getUpgradeId(this.id);if(!(t>=19)){var e=++t>9?""+t:"0"+t,n=parseInt(this.id.toString().substr(0,7)+e);cc.log(t,e,n,"TITLEINDEX",u.default.instance.titleIndex);var i=c.default.instance.getDataArrsByIndex(this.typeIndex).indexOf(this.id);switch(u.default.instance.titleIndex){case 0:c.default.instance.WeaponArrs[i]=n;break;case 1:c.default.instance.ArmorArrs[i]=n;break;case 2:c.default.instance.RingArrs[i]=n;break;case 3:c.default.instance.OrnamentArrs[i]=n;break;case 4:c.default.instance.WingArrs[i]=n}if(c.default.instance.saveEquipmentArrs(),this.isEquiped)c.default.instance.HeroDataArrs[l.default.instance.selectIndex].setEquip(this.typeIndex,n);this.onOpen(n)}},e.prototype.start=function(){},e.instance=null,e=n=o([y],e)}(cc.Component));n.default=v,cc._RF.pop()},{"./Audio":"Audio","./DataMgr":"DataMgr","./Equipment":"Equipment","./Hero/HeroGlobal":"HeroGlobal","./Menu":"Menu","./MenuSelect":"MenuSelect","./Message":"Message","./TextureMgr":"TextureMgr","./Tool/Statistics":"Statistics","./i18n/Language":"Language","./nativets/Config":"Config"}],Equipment:[function(t,e,n){"use strict";cc._RF.push(e,"cd38dudBPhMzKi4HueOskWZ","Equipment");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./Hero/HeroGlobal"),s=t("./nativets/Config"),r=t("./TextureMgr"),c=t("./EquipmentDialog"),l=t("./MenuSelect"),u=t("./SoulDialog"),d=t("./Menu"),p=t("./Message"),h=t("./Audio"),f=t("./i18n/Language"),g=t("./Tool/Statistics"),m=t("./DataMgr"),y=t("./Tips"),v=t("./Ad/AdMgr"),b=t("./nativets/Global"),A=t("./Ad/AdList"),S=cc._decorator,I=S.ccclass,_=S.property,B=["Weapon","Armor","Wing","Ornament","Ring"],C=["atk","def","hp","ls","sp","cr","arp","bonus","cd","miss","exp","gold"],w=["","","","%","%","%","","%","%","%","%","%"],x=[f.default.equipmentAtk,f.default.equipmentDef,f.default.equipmentHp,f.default.equipmentLs,f.default.equipmentSp,f.default.equipmentCr,f.default.equipmentArp,f.default.equipmentBonus,f.default.equipmentCd,f.default.equipmentMiss,f.default.equipmentExp,f.default.equipmentGold],k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemPrefab=null,e.leftSf=[],e.listIndex=-1,e.titleSelects=[],e.boxLvArrs=[],e.boxIconsArrs=[],e.soulBoxLvArrs=[],e.soulBoxIconsArrs=[],e.extJade=0,e}var n;return i(e,t),n=e,e.prototype.init=function(){this.listSelect=this.node.getChildByName("list").getChildByName("select"),this.leftNode=this.node.getChildByName("Left"),this.rightNode=this.node.getChildByName("Right"),this.equipmentNode=this.node.getChildByName("Equipment"),this.equipmentLeft=this.equipmentNode.getChildByName("Left"),this.skillNode=this.node.getChildByName("Skill"),this.soulNode=this.node.getChildByName("Soul"),this.petNode=this.node.getChildByName("Pet"),this.listLayoutArrs=[this.equipmentNode,this.skillNode,this.soulNode,this.petNode],this.initEquipment(),this.initSkill(),this.initPet(),this.initSoul(),this.titleIndex=0,this.refreshTitle(),this.soulTitleIndex=0,this.refreshSoulTitle(),cc.loader.setAutoRelease(this.itemPrefab,!0),cc.director.on("RefreshSelect",this.refreshOnSelect,this),cc.director.on("RefreshSp",this.onRefreshSp,this)},e.prototype.onRefreshSp=function(t){this.heroIndex!=t&&(this.heroIndex=t,this.equipmentDialog.active&&(this.equipmentRight.active=!0,this.equipmentDialog.active=!1)),this.refreshEquipmentIcon(t)},e.prototype.initEquipment=function(){this.DetailNode=this.equipmentLeft.getChildByName("Detail"),this.detailName=this.DetailNode.getChildByName("name").getComponent(cc.Label),this.detailHp=this.DetailNode.getChildByName("hp").getComponent(cc.Label),this.detailDef=this.DetailNode.getChildByName("def").getComponent(cc.Label),this.detailAtk=this.DetailNode.getChildByName("atk").getComponent(cc.Label),this.detailBouns=this.DetailNode.getChildByName("bonus").getComponent(cc.Label),this.detailCr=this.DetailNode.getChildByName("cr").getComponent(cc.Label),this.detailMiss=this.DetailNode.getChildByName("miss").getComponent(cc.Label),this.equipmentRight=this.equipmentNode.getChildByName("Right"),this.equipmentDialog=this.equipmentNode.getChildByName("Dialog"),this.equipmentDialog.getComponent(c.default).init(),this.equipmentLayout=this.equipmentRight.getChildByName("Layout"),this.boxSelect=this.equipmentLayout.getChildByName("select");for(var t=0;t<5;t++)this.titleSelects.push(this.equipmentRight.getChildByName(""+t).getChildByName("select"));this.equipmentIconArrs=[],this.equipmentBgArrs=[],this.equipmentLockArrs=[];for(var e=0;e<5;e++){var n=this.equipmentLeft.getChildByName(B[e]);this.equipmentIconArrs.push(n.getChildByName("icon").getComponent(cc.Sprite)),this.equipmentBgArrs.push(n.getChildByName("bg").getComponent(cc.Sprite)),this.equipmentLockArrs.push(n.getChildByName("lock"))}this.createLayout()},e.prototype.initSoul=function(){this.soulLeft=this.soulNode.getChildByName("Left"),this.soulRight=this.soulNode.getChildByName("Right"),this.soulBg=this.soulNode.getChildByName("bg"),this.soulHC=this.soulLeft.getChildByName("hc"),this.soulFM=this.soulLeft.getChildByName("fm"),this.soulEffect=this.soulHC.getChildByName("effect"),this.soulLayout=this.soulRight.getChildByName("Layout"),this.soulBoxSelect=this.soulLayout.getChildByName("select"),this.soulRateVideo=-1,this.soulCompressArrs=[0,0,0],this.soulEnchantArrs=[0,0],this.soulTitleSelects=[];for(var t=0;t<6;t++)this.soulTitleSelects.push(this.soulRight.getChildByName(""+t).getChildByName("select"));this.soulIconArrs=[],this.icon0=this.soulHC.getChildByName("0").getComponent(cc.Sprite),this.icon1=this.soulHC.getChildByName("1").getComponent(cc.Sprite),this.icon2=this.soulHC.getChildByName("2").getComponent(cc.Sprite),this.soulHCTitle=this.soulHC.getChildByName("title").getComponent(cc.Label),this.soulHCText=this.soulHC.getChildByName("text").getComponent(cc.Label),this.soulHCJade=this.soulHC.getChildByName("compress").getChildByName("jade").getComponent(cc.Label),this.soulHCRate=this.soulHC.getChildByName("rate").getComponent(cc.Label),this.soulCheck0=this.soulHC.getChildByName("check0").getComponent(cc.Toggle),this.soulCheck1=this.soulHC.getChildByName("check1").getComponent(cc.Toggle),this.soulIconArrs=[this.icon0,this.icon1,this.icon2],this.fmIcon0=this.soulFM.getChildByName("0").getComponent(cc.Sprite),this.fmIcon1=this.soulFM.getChildByName("1").getComponent(cc.Sprite),this.soulFMTitle=this.soulFM.getChildByName("title").getComponent(cc.Label),this.soulFMText=this.soulFM.getChildByName("text").getComponent(cc.Label),this.fmlv=this.soulFM.getChildByName("lv").getComponent(cc.Sprite),this.createSoulLayout(),this.soulDialog=this.soulNode.getChildByName("Dialog"),this.soulDialog.getComponent(u.default).init()},e.prototype.initSkill=function(){this.skillRight=this.skillNode.getChildByName("Right"),this.skillName=this.skillRight.getChildByName("name").getComponent(cc.Label),this.skillIcon=this.skillRight.getChildByName("icon").getComponent(cc.Sprite),this.skillLv=this.skillRight.getChildByName("lv").getComponent(cc.Label),this.skillCd=this.skillRight.getChildByName("cd").getComponent(cc.Label),this.skillUp=this.skillRight.getChildByName("up"),this.skillCionsLabel=this.skillUp.getChildByName("coins").getComponent(cc.Label),this.skillDmg=this.skillRight.getChildByName("dmgLabel").getComponent(cc.Label),this.skillDes=this.skillRight.getChildByName("desLabel").getComponent(cc.Label);var t=this.skillRight.getChildByName("0");this.skillStarArrs=[t.getComponent(cc.Sprite)];for(var e=1;e<20;e++){var n=cc.instantiate(t),i=e<10?0:1,o=0==i?e:e-10;n.parent=this.skillRight,n.x=35*o-157.5,n.y=-112-32*i,this.skillStarArrs.push(n.getComponent(cc.Sprite))}this.setStar(1),this.skillSelect=this.skillNode.getChildByName("select"),this.skillIconArrs=[],this.skillLvArrs=[],this.skillNameArrs=[],this.skillBgArrs=[];for(var a=0;a<7;a++)this.skillIconArrs.push(this.skillNode.getChildByName(""+a).getComponent(cc.Sprite)),this.skillLvArrs.push(this.skillNode.getChildByName("lv"+a).getComponent(cc.Label)),this.skillBgArrs.push(this.skillNode.getChildByName("c"+a)),this.skillNameArrs.push(this.skillNode.getChildByName("name"+a).getComponent(cc.Label))},e.prototype.initPet=function(){this.petRight=this.petNode.getChildByName("Right"),this.petIcon=this.petRight.getChildByName("icon").getComponent(cc.Sprite),this.petName=this.petRight.getChildByName("name").getComponent(cc.Label),this.petLv=this.petRight.getChildByName("lv").getComponent(cc.Label),this.petLvnow=this.petRight.getChildByName("lvnow").getComponent(cc.Label),this.petLvnext=this.petRight.getChildByName("lvnext").getComponent(cc.Label),this.petHpnow=this.petRight.getChildByName("hpnow").getComponent(cc.Label),this.petHpnext=this.petRight.getChildByName("hpnext").getComponent(cc.Label),this.petDescription0=this.petRight.getChildByName("d0").getComponent(cc.Label),this.petDescription1=this.petRight.getChildByName("d1").getComponent(cc.Label),this.petJade=this.petRight.getChildByName("coins").getComponent(cc.Label),this.petItem=this.petRight.getChildByName("item").getComponent(cc.Sprite),this.petUpgrade=this.petRight.getChildByName("upgrade"),this.petItem.spriteFrame=r.default.instance.rewardSfInGame[0],this.petLeftName=this.petNode.getChildByName("name").getComponent(cc.Label),this.petLeftValue0=this.petNode.getChildByName("v0").getComponent(cc.Label),this.petLeftValue1=this.petNode.getChildByName("v1").getComponent(cc.Label),this.petLeftText0=this.petNode.getChildByName("t0").getComponent(cc.Label),this.petleftText1=this.petNode.getChildByName("t1").getComponent(cc.Label)},e.prototype.createLayout=function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="Equipment",t.handler="onBtnBoxSelect";this.boxLvArrs=[],this.boxIconsArrs=[];for(var e=0;e<5;e++)for(var n=0;n<4;n++){var i=4*e+n,o=cc.instantiate(this.itemPrefab);o.name=i+"",o.getComponent(cc.Button).clickEvents.push(t),o.parent=this.equipmentLayout,o.position=cc.v2(110*n-165,192.5-107*e),this.boxLvArrs.push(o.getChildByName("lv").getComponent(cc.Sprite)),this.boxIconsArrs.push(o.getChildByName("icon").getComponent(cc.Sprite))}this.boxSelect.parent=null,this.boxSelect.parent=this.equipmentLayout},e.prototype.createSoulLayout=function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="Equipment",t.handler="onBtnSoulBoxSelect";for(var e=0;e<5;e++)for(var n=0;n<4;n++){var i=4*e+n,o=cc.instantiate(this.itemPrefab);o.name=i+"",o.getComponent(cc.Button).clickEvents.push(t),o.parent=this.soulLayout,o.position=cc.v2(110*n-165,192.5-107*e),this.soulBoxLvArrs.push(o.getChildByName("lv").getComponent(cc.Sprite)),this.soulBoxIconsArrs.push(o.getChildByName("icon").getComponent(cc.Sprite))}this.soulBoxSelect.parent=null,this.soulBoxSelect.parent=this.soulLayout},e.prototype.onLoad=function(){n.instance=this,this.init()},e.prototype.start=function(){},e.prototype.onBtnTitleSelect=function(t){h.default.instance.playAudio("BtnClick");var e=parseInt(t.target.name);this.titleIndex!=e&&(this.titleIndex=e,this.refreshTitle())},e.prototype.onBtnEquipmentLeftSelect=function(t){h.default.instance.playAudio("BtnClick");var e=parseInt(t.target.name),n=this.equipedArrs[[0,1,3,4,2][e]];cc.log(this.equipedArrs,n),n?(this.titleIndex!=e&&(this.titleIndex=e,this.refreshTitle()),c.default.instance.onOpen(n),this.equipmentRight.active=!1):(this.equipmentRight.active=!0,this.equipmentDialog.active=!1,this.titleIndex!=e&&(this.titleIndex=e,this.refreshTitle()))},e.prototype.onBtnSoulTitleSelect=function(t){h.default.instance.playAudio("BtnClick");var e=parseInt(t.target.name);this.soulTitleIndex!=e&&(this.soulTitleIndex=e,this.refreshSoulTitle())},e.prototype.setSoulTitleIndex=function(t){this.soulTitleIndex=t,this.refreshSoulTitle()},e.prototype.onBtnListSelect=function(t){h.default.instance.playAudio("BtnClick");var e=parseInt(t.target.name);this.onListSelect(e)},e.prototype.onListSelect=function(t){n.instance.listIndex=t;for(var e=0;e<4;e++)this.listLayoutArrs[e].active=e==t;this.soulHC.active=!0,this.soulFM.active=!1,this.soulRight.active=!this.soulDialog.active,this.equipmentLeft.active=!0,l.default.instance.node.active=2!=t,cc.director.emit("RefreshIcon"),this.refreshList()},e.prototype.onBtnBoxSelect=function(t){if(h.default.instance.playAudio("BtnClick"),this.equipmentLeft.active){var e=parseInt(t.target.name);this.boxSelect.position=cc.v2(t.target.x,t.target.y+2),this.dataArrs&&this.dataArrs[e]&&(c.default.instance.onOpen(this.dataArrs[e]),this.equipmentRight.active=!1)}else{var n=t.target.getChildByName("icon").getComponent(cc.Sprite).spriteFrame,i=t.target.getChildByName("lv").getComponent(cc.Sprite).spriteFrame;this.fmIcon1.spriteFrame=n,this.fmlv.spriteFrame=i}},e.prototype.onBtnSoulBoxSelect=function(t){h.default.instance.playAudio("BtnClick");var e=parseInt(t.target.name);if(this.soulBoxSelect.position=cc.v2(t.target.x,t.target.y+2),this.soulHC.active)this.soulDataArrs&&this.soulDataArrs[e]&&(u.default.instance.onOpen(this.soulDataArrs[e]),this.soulRight.active=!1);else{this.soulEnchantArrs[1]=this.soulDataArrs[e];var n=t.target.getChildByName("icon").getComponent(cc.Sprite).spriteFrame;this.fmIcon1.spriteFrame=n;var i=s.getDataById(this.soulDataArrs[e]);this.soulFMTitle.string=i.name;var o=this.getDetailByJson(i);this.soulFMText.string=o}},e.prototype.getDetailByJson=function(t){for(var e=0,n="",i=0;i<C.length;i++){var o=C[i];t[o]&&(n+=x[i]+"+"+t[o]+w[i],n+=++e%2==0?"\n":"  ")}return n},e.prototype.refreshSoulCompressRate=function(){if(this.soulCompressArrs[0])if(this.soulCompressArrs[1]||this.soulCompressArrs[2]){var t=s.getLvId(this.soulCompressArrs[0]),e=s.SoulRate[t-1],n=0;this.soulCheck0.isChecked&&(e+=.15,n+=20),this.soulCheck1.isChecked&&(e+=.3,n+=40);var i=0;this.soulCompressArrs[1]&&(i+=s.SoulSubRate[s.getLvId(this.soulCompressArrs[1])-1]),this.soulCompressArrs[2]&&(i+=s.SoulSubRate[s.getLvId(this.soulCompressArrs[2])-1]),cc.log(t,n,e,i),this.extJade=10*t+n,this.extRate=e+i,1==this.soulRateVideo&&(this.extRate+=.3),this.extRate>1&&(this.extRate=1),this.soulHCJade.string=this.extJade+"",this.soulHCRate.string="(\u8fdb\u9636\u6210\u529f\u7387: "+(100*this.extRate).toFixed(0)+"%)"}else this.soulHCRate.string="";else this.soulHCRate.string=""},e.prototype.onBtnSoulCheck=function(){this.refreshSoulCompressRate()},e.prototype.onBtnSoulCompress=function(){var t=this;if(h.default.instance.playAudio("BtnClick"),this.soulCompressArrs[0]&&(this.soulCompressArrs[1]||this.soulCompressArrs[2])){var e=a.default.instance.SoulArrs.indexOf(this.soulCompressArrs[1]);-1!=e&&a.default.instance.SoulArrs.splice(e,1);var n=a.default.instance.SoulArrs.indexOf(this.soulCompressArrs[2]);if(-1!=n&&a.default.instance.SoulArrs.splice(n,1),-1==this.soulRateVideo&&this.extRate<=.7){return void p.default.instance.show("\u63d0\u793a","\u672c\u6b21\u8fdb\u9636\u6210\u529f\u7387\u4f4e\uff0c\u662f\u5426\u89c2\u770b\u89c6\u9891\u63d0\u534730%\u6210\u529f\u51e0\u7387?",function(){v.default.instance?(b.default.getInstance().inGame=!1,v.default.instance.showRewardAd(A.default.WXVIDEOLIST2.\u6b66\u9b42\u5408\u6210)):(t.soulRateVideo=1,t.refreshSoulCompressRate())},!0,function(){t.soulRateVideo=0})}a.default.instance.Jade>=this.extJade?(a.default.instance.Jade-=this.extJade,d.default.instance.refreshTopLabel(),this.soulRateVideo=-1,Math.random()<this.extRate?(m.default.instance.taskCountData[7]++,m.default.instance.saveSaveDate(),a.default.instance.AchieveCountData[7]++,a.default.instance.saveHeroGlobal(),this.soulBg.runAction(cc.sequence(cc.rotateBy(1,360),cc.callFunc(function(){var e=parseInt(t.soulCompressArrs[0]),n=s.getLvId(e);if(n<6){60508==e||60507==e?e=60609:e+=100;var i=a.default.instance.SoulArrs.indexOf(t.soulCompressArrs[0]);a.default.instance.SoulArrs[i]=e,cc.log(a.default.instance.SoulArrs),t.icon1.spriteFrame=null,t.icon2.spriteFrame=null,t.soulCompressArrs[1]=0,t.soulCompressArrs[2]=0,t.icon0.spriteFrame=r.default.instance.getSoulIconById(e),t.soulCompressArrs[0]=e,t.setSoulHCDialog(e),t.setSoulTitleIndex(n),t.showSoulEffect(),a.default.instance.saveEquipmentArrs()}}))),y.default.instance.showRankUp(!0),g.default.getInstance().reportEvent("\u5347\u7ea7\u6b66\u9b42")):(this.showSoulEffect(),this.icon1.spriteFrame=null,this.icon2.spriteFrame=null,this.soulCompressArrs[1]=0,this.soulCompressArrs[2]=0,this.refreshSoulCompressRate(),this.setSoulTitleIndex(this.soulTitleIndex),y.default.instance.showRankUp(!1),a.default.instance.saveHeroGlobal())):p.default.instance.showLack("jade")}},e.prototype.showSoulEffect=function(){var t=this;this.soulEffect.active=!0;var e=this.soulEffect.getComponent(cc.Animation);e.play(),e.on(cc.Animation.EventType.LASTFRAME,function(){t.soulEffect.active=!1})},e.prototype.onBtnSoulEnchant=function(){var t=this;h.default.instance.playAudio("BtnClick"),this.soulBg.runAction(cc.sequence(cc.rotateBy(1,360),cc.callFunc(function(){var e=a.default.instance.getDataArrsByIndex(t.titleIndex+1).indexOf(t.soulEnchantArrs[0]),n=s.getSoulIndexById(t.soulEnchantArrs[1]),i=n>9?""+n:"0"+n,o=t.soulEnchantArrs[0]+"",r=o.split("");r[5]=i[0],r[6]=i[1],o=r.join("");var u=a.default.instance.SoulArrs.indexOf(t.soulEnchantArrs[1]);switch(a.default.instance.SoulArrs.splice(u,1),t.titleIndex){case 0:a.default.instance.WeaponArrs[e]=parseInt(o);break;case 1:a.default.instance.ArmorArrs[e]=parseInt(o);break;case 2:a.default.instance.RingArrs[e]=parseInt(o);break;case 3:a.default.instance.OrnamentArrs[e]=parseInt(o);break;case 4:a.default.instance.WingArrs[e]=parseInt(o)}a.default.instance.saveEquipmentArrs();var d=t.equipedArrs.indexOf(t.soulEnchantArrs[0]);-1!=d&&(t.equipedArrs[d]=parseInt(o),a.default.instance.HeroDataArrs[l.default.instance.selectIndex].setEquip(t.titleIndex+1,parseInt(o)));t.fmIcon0.spriteFrame=null,t.fmIcon1.spriteFrame=null,t.fmlv.spriteFrame=null,t.equipmentNode.active=!1,t.soulRight.active=!0,t.onListSelect(0),c.default.instance.onOpen(parseInt(o)),t.equipmentRight.active=!1,a.default.instance.HeroDataArrs[l.default.instance.selectIndex].updateAttribute(),t.refreshEquipmentIcon(l.default.instance.selectIndex),g.default.getInstance().reportEvent("\u70b9\u51fb\u9576\u5d4c\u6b66\u9b42")})))},e.prototype.showSoulBgRotate=function(){var t=this;this.soulBg.runAction(cc.sequence(cc.rotateBy(1,360).easing(cc.easeBackIn()),cc.callFunc(function(){t.fmIcon0.spriteFrame=null,t.fmIcon1.spriteFrame=null,t.fmlv.spriteFrame=null,t.equipmentNode.active=!1,t.soulRight.active=!0})))},e.prototype.onBtnSoulIconCancel=function(t){h.default.instance.playAudio("BtnClick");var e=parseInt(t.target.name);this.soulCompressArrs[e]=0,0==e&&this.setSoulHCDialog(null),this.soulIconArrs[e].spriteFrame=null,this.refreshSoulCompressRate()},e.prototype.onBtnSkillSelect=function(t){h.default.instance.playAudio("BtnClick");var e=parseInt(t.target.name);this.setSkillByIndex(e)},e.prototype.onBtnClose=function(t){h.default.instance.playAudio("BtnClick"),this.node.active=!1,cc.director.emit("CloseEquipment")},e.prototype.onBtnDialogClose=function(){h.default.instance.playAudio("BtnClick"),this.equipmentRight.active=!0,this.equipmentDialog.active=!1},e.prototype.onBtnSoulDialogClose=function(){h.default.instance.playAudio("BtnClick"),this.onSoulDialogClose()},e.prototype.onSoulDialogClose=function(){this.soulRight.active=!0,this.soulDialog.active=!1},e.prototype.setSoulHCDialog=function(t){if(t){this.refreshSoulCompressRate();var e=s.getLvId(t);t=parseInt(t),e<6&&(60508==t||60507==t?t=60609:t+=100);var n=s.getDataById(t);this.soulHCTitle.string=""+n.name;var i=this.getDetailByJson(n);this.soulHCText.string=i}else this.soulHCJade.string="10",this.soulHCTitle.string="",this.soulHCText.string=""},e.prototype.setStar=function(t){for(var e=0;e<20;e++)e<t?this.skillStarArrs[e].setMaterial(0,cc.MaterialVariant.createWithBuiltin("2d-sprite",this.skillStarArrs[e])):this.skillStarArrs[e].setMaterial(0,cc.MaterialVariant.createWithBuiltin("2d-gray-sprite",this.skillStarArrs[e]))},e.prototype.setSkillLv=function(){for(var t=0;t<this.heroSkillArrs.length;t++){this.heroSkillArrs[t]>-1&&(this.skillLvArrs[t].string=this.heroSkillArrs[t]+1+"");var e=s.Skill[7*l.default.instance.selectIndex+t];a.default.instance.Level<parseInt(e.unlock)?(this.skillNameArrs[t].string=e.unlock+"\u7ea7\u89e3\u9501",this.skillBgArrs[t].active=!1,this.skillIconArrs[t].spriteFrame=r.default.instance.lockSf,this.skillLvArrs[t].string=""):(this.skillBgArrs[t].active=!0,this.skillLvArrs[t].string=this.heroSkillArrs[t]+1+"")}},e.prototype.setSkillByIndex=function(t){this.skillIndex=t,this.skillSelect.position=this.skillIconArrs[t].node.position,this.skillName.string=s.SkillNameArrs[l.default.instance.selectIndex][t];var e=s.Skill[7*l.default.instance.selectIndex+t],n=a.default.instance.HeroDataArrs[l.default.instance.selectIndex].SkillArrs;this.heroSkillArrs=n;var i=n[t]+1;this.skillUp.active=a.default.instance.Level>=parseInt(e.unlock),this.setStar(i),this.setSkillLv(),this.skillLv.string="LV."+i;var o="\u65e0",c=n[t];if(-1==c&&(c=0),this.skillPrice=parseFloat(e.price)+parseFloat(e.priceup)*(c+Math.floor(c/3)),this.skillCionsLabel.string=this.skillPrice+"",e.cd){o=parseFloat(e.cd)-parseFloat(e.cdup)*c+"";var u=e.text;this.skillDmg.string=u.replace("wave*dmg",parseFloat(e.wave)*(parseFloat(e.dmg)+parseFloat(e.dmgup)*c)+"%")}else{var d=e.text;this.skillDmg.string=d.replace("dmg",parseFloat(e.dmg)+parseFloat(e.dmgup)*c+"")}this.skillCd.string=o,this.skillDes.string=e.description,t>3&&(t+=2),this.skillIcon.spriteFrame=r.default.instance.skillArrs[l.default.instance.selectIndex][t]},e.prototype.onBtnSKillUpgrade=function(){h.default.instance.playAudio("BtnClick"),this.heroSkillArrs[this.skillIndex]<19&&(a.default.instance.Coins>this.skillPrice?(a.default.instance.Coins-=this.skillPrice,a.default.instance.setCoins(a.default.instance.Coins),this.onSkillUpgrade(),d.default.instance.refreshTopLabel(),a.default.instance.saveHeroGlobal(),g.default.getInstance().reportEvent("\u5347\u7ea7\u6280\u80fd")):p.default.instance.showLack("coins"))},e.prototype.onSkillUpgrade=function(){m.default.instance.taskCountData[5]++,m.default.instance.saveSaveDate(),a.default.instance.AchieveCountData[5]++;var t=this.heroSkillArrs[this.skillIndex];t<19&&t++,this.heroSkillArrs[this.skillIndex]=t,this.setSkillByIndex(this.skillIndex),a.default.instance.HeroDataArrs[l.default.instance.selectIndex].setSkillArrs(this.heroSkillArrs)},e.prototype.refreshOnSelect=function(t){3==this.listIndex&&this.refreshPet(t),1==this.listIndex&&this.refreshSkill(t)},e.prototype.refreshPet=function(t){t<0&&(t=0),this.petIndex=t,this.petIcon.spriteFrame=r.default.instance.petIconBoxSf[t];var e=s.Pet[t];this.petName.string=s.PetName[t],this.petLeftName.string=s.PetName[t];var n=a.default.instance.PetLvArrs[t];-1==n&&(n=0),0==n?(this.petLv.string="20\u5173\u89e3\u9501",0==t?this.petLv.string="\u7b7e\u5230\u89e3\u9501":1==t&&(this.petLv.string="\u9650\u65f6\u9886\u53d6"),this.petUpgrade.active=!1,this.petJade.string="",this.petItem.node.active=!1):(this.petUpgrade.active=!0,this.petLv.string="LV."+n,this.petPrice=parseFloat(e.price)+parseFloat(e.priceup)*n,this.petJade.string="x"+this.petPrice,this.petItem.node.active=!0),this.petLevel=n;var i=this.getPetDetailByJson(e,n);this.petLvnow.string=i[0].value,this.petLvnext.string=i[0].valueNext,this.petHpnow.string=i[1].value,this.petHpnext.string=i[1].valueNext,this.petLeftText0.string=i[0].text,this.petleftText1.string=i[1].text,this.petLeftValue0.string=i[0].value,this.petLeftValue1.string=i[1].value,this.petDescription0.string=i[0].text+"\u63d0\u5347",this.petDescription1.string=i[1].text+"\u63d0\u5347"},e.prototype.getPetDetailByJson=function(t,e){for(var n=[],i=0;i<C.length;i++){var o=C[i];if(t[o]){var a=parseFloat(t[o])+e*parseFloat(t[o+"up"]),s=a;e<19&&(s=parseFloat(t[o])+(e+1)*parseFloat(t[o+"up"]));var r={text:x[i],value:a+w[i],valueNext:s+w[i]};n.push(r),0}}return n},e.prototype.onBtnPetUpgrade=function(){h.default.instance.playAudio("BtnClick"),this.petLevel<20&&(a.default.instance.Jade>this.petPrice?(m.default.instance.taskCountData[8]++,m.default.instance.saveSaveDate(),a.default.instance.AchieveCountData[8]++,a.default.instance.Jade-=this.petPrice,a.default.instance.setJade(a.default.instance.Jade),d.default.instance.refreshTopLabel(),a.default.instance.saveHeroGlobal(),a.default.instance.PetLvArrs[this.petIndex]=this.petLevel+1,a.default.instance.saveEquipmentArrs(),this.refreshPet(this.petIndex)):p.default.instance.showLack("jade"))},e.prototype.refreshSkill=function(t){for(var e=0;e<4;e++)this.skillIconArrs[e].spriteFrame=r.default.instance.skillArrs[t][e],this.skillNameArrs[e].string=s.SkillNameArrs[t][e];for(var n=4;n<7;n++)this.skillIconArrs[n].spriteFrame=r.default.instance.skillArrs[t][n+2],this.skillNameArrs[n].string=s.SkillNameArrs[t][n];this.setSkillByIndex(0)},e.prototype.refreshList=function(){this.listSelect.y=-40-80*this.listIndex},e.prototype.refreshTitle=function(){for(var t=0;t<this.titleSelects.length;t++)this.titleSelects[t].active=this.titleIndex==t;for(var e=0;e<this.boxLvArrs.length;e++)this.boxLvArrs[e].spriteFrame=null,this.boxIconsArrs[e].spriteFrame=null;var n=a.default.instance.getDataArrsByIndex(this.titleIndex+1),i=[],o=a.default.instance.MainHeroIndex;l.default.instance&&(o=l.default.instance.selectIndex);for(var c=0;c<n.length;c++){var u=s.getWhoId(n[c]);0!=u&&u!=o+1||this.checkEquiped(n[c])||i.push(n[c])}this.dataArrs=i;for(var d=0;d<i.length;d++)this.boxLvArrs[d].spriteFrame=r.default.instance.getLvIconById(i[d]),this.boxIconsArrs[d].spriteFrame=r.default.instance.getEquipmentIconById(i[d])},e.prototype.inBlackList=function(t){return-1!=[12205e4,13107e4,11202e4,11303e4,12306e4,13208e4,13309e4,22205e4,23107e4,21203e4,21302e4,22306e4,23208e4,23309e4].indexOf(t)},e.prototype.checkEquiped=function(t){for(var e=0;e<3;e++)if(a.default.instance.HeroDataArrs[e].equipedArrs&&-1!=a.default.instance.HeroDataArrs[e].equipedArrs.indexOf(t))return!0;return!1},e.prototype.refreshSoulTitle=function(){for(var t=0;t<this.soulTitleSelects.length;t++)this.soulTitleSelects[t].active=this.soulTitleIndex==t;for(var e=0;e<this.soulBoxLvArrs.length;e++)this.soulBoxLvArrs[e].spriteFrame=null,this.soulBoxIconsArrs[e].spriteFrame=null;for(var n=a.default.instance.SoulArrs,i=[],o=0;o<n.length;o++){s.getLvId(n[o])==this.soulTitleIndex+1&&i.push(n[o])}this.soulDataArrs=i;for(var c=0;c<i.length;c++)this.soulBoxIconsArrs[c].spriteFrame=r.default.instance.getSoulIconById(i[c])},e.prototype.refreshDetail=function(t){if(this.detailName){this.detailName.string=s.HeroName[t];var e=a.default.instance.HeroDataArrs[t];this.detailHp.string=e.HP+"",this.detailAtk.string=e.ATK+"",this.detailDef.string=e.DEF+"",this.detailBouns.string=(e.BONUS+100|0)+"%",this.detailCr.string=(0|e.CR)+"%",this.detailMiss.string=(0|e.MISS)+"%"}},e.prototype.refreshEquipmentIcon=function(t){this.equipedArrs=[];var e=a.default.instance.HeroDataArrs[t];this.equipmentIconArrs[0].spriteFrame=r.default.instance.getEquipmentIconById(e.Weapon),this.equipmentBgArrs[0].spriteFrame=r.default.instance.getLvIconById(e.Weapon),this.equipmentLockArrs[0].active=-1==e.Weapon,this.equipmentIconArrs[1].spriteFrame=r.default.instance.getEquipmentIconById(e.Armor),this.equipmentBgArrs[1].spriteFrame=r.default.instance.getLvIconById(e.Armor),this.equipmentLockArrs[1].active=-1==e.Armor,this.equipedArrs=[e.Weapon,e.Armor],this.reSizeEquipmentIcon(),e.Wing>-1?(this.equipmentIconArrs[2].spriteFrame=r.default.instance.getEquipmentIconById(e.Wing),this.equipmentBgArrs[2].spriteFrame=r.default.instance.getLvIconById(e.Wing),this.equipmentLockArrs[2].active=!1,this.equipedArrs.push(e.Wing),this.equipmentIconArrs[2].node.setContentSize(84,84),this.equipmentBgArrs[2].node.setContentSize(84,84)):(this.equipedArrs.push(null),this.equipmentIconArrs[2].spriteFrame=this.leftSf[0],this.equipmentBgArrs[2].spriteFrame=null),e.Ring>-1?(this.equipmentIconArrs[4].spriteFrame=r.default.instance.getEquipmentIconById(e.Ring),this.equipmentBgArrs[4].spriteFrame=r.default.instance.getLvIconById(e.Ring),this.equipedArrs.push(e.Ring),this.equipmentIconArrs[4].node.setContentSize(84,84),this.equipmentBgArrs[4].node.setContentSize(84,84)):(this.equipedArrs.push(null),this.equipmentIconArrs[4].spriteFrame=this.leftSf[2],this.equipmentBgArrs[4].spriteFrame=null),this.equipmentLockArrs[4].active=!1,e.Ornament>-1?(this.equipmentIconArrs[3].spriteFrame=r.default.instance.getEquipmentIconById(e.Ornament),this.equipmentBgArrs[3].spriteFrame=r.default.instance.getLvIconById(e.Ornament),this.equipedArrs.push(e.Ornament),this.equipmentIconArrs[3].node.setContentSize(84,84),this.equipmentBgArrs[3].node.setContentSize(84,84)):(this.equipedArrs.push(null),this.equipmentIconArrs[3].spriteFrame=this.leftSf[1],this.equipmentBgArrs[3].spriteFrame=null),this.equipmentLockArrs[3].active=!1,this.refreshTitle(),this.refreshDetail(t),d.default.instance.ceLabel.string=a.default.instance.HeroDataArrs[t].CE+"",a.default.instance.HeroDataArrs[t].equipedArrs=this.equipedArrs},e.prototype.reSizeEquipmentIcon=function(){for(var t=0;t<2;t++)this.equipmentIconArrs[t].node.setContentSize(84,84),this.equipmentBgArrs[t].node.setContentSize(84,84)},e.prototype.onDestroy=function(){cc.director.off("RefreshSelect",this.refreshOnSelect,this)},e.instance=null,o([_(cc.Prefab)],e.prototype,"itemPrefab",void 0),o([_([cc.SpriteFrame])],e.prototype,"leftSf",void 0),e=n=o([I],e)}(cc.Component);n.default=k,cc._RF.pop()},{"./Ad/AdList":"AdList","./Ad/AdMgr":"AdMgr","./Audio":"Audio","./DataMgr":"DataMgr","./EquipmentDialog":"EquipmentDialog","./Hero/HeroGlobal":"HeroGlobal","./Menu":"Menu","./MenuSelect":"MenuSelect","./Message":"Message","./SoulDialog":"SoulDialog","./TextureMgr":"TextureMgr","./Tips":"Tips","./Tool/Statistics":"Statistics","./i18n/Language":"Language","./nativets/Config":"Config","./nativets/Global":"Global"}],FirstSelect:[function(t,e,n){"use strict";cc._RF.push(e,"d1d2cLImQlD3pw9pV77EGNr","FirstSelect");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Menu"),s=t("../TextureMgr"),r=t("../i18n/Language"),c=t("../Audio"),l=t("../nativets/Global"),u=t("../Hero/HeroGlobal"),d=t("../Tool/Statistics"),p=t("../Main"),h=t("../nativets/SaveMgr"),f=t("../Ad/AdMgr"),g=cc._decorator,m=g.ccclass,y=(g.property,[[230,250,250,200],[240,230,220,250]]),v=[[r.default.skillZY0,r.default.skillZY1,r.default.skillZY2,r.default.skillZY3,r.default.skillZY4,r.default.skillZY5,r.default.skillZY6],[r.default.skillDC0,r.default.skillDC1,r.default.skillDC2,r.default.skillDC3,r.default.skillDC4,r.default.skillDC5,r.default.skillDC6],[r.default.skillDQ0,r.default.skillDQ1,r.default.skillDQ2,r.default.skillDQ3,r.default.skillDQ4,r.default.skillDQ5,r.default.skillDQ6]],b=["\u8d75\u4e91","\u8c82\u8749"],A=[l.default.getInstance().ZYAudio.\u51fa\u573a,l.default.getInstance().DCAudio.\u51fa\u573a],S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return i(e,t),n=e,e.prototype.init=function(){this.heroName=this.node.getChildByName("name").getComponent(cc.Label);var t=this.node.getChildByName("Left"),e=this.node.getChildByName("Right");this.arrs1=[],this.arrs2=[],this.arrs3=[];for(var n=0;n<4;n++)this.arrs1.push(e.getChildByName(""+n)),this.arrs2.push(t.getChildByName(""+n).getComponent(cc.Sprite)),this.arrs3.push(t.getChildByName("t"+n).getComponent(cc.Label));this.initIcon(),cc.director.on("RefreshSelect",this.onSelect,this)},e.prototype.initIcon=function(){for(var t=this.node.getChildByName("select"),e=0;e<3;e++)t.getChildByName(""+e).getComponent(cc.Sprite).spriteFrame=s.default.instance.heroIconSf[e];t.getChildByName("2").getComponent(cc.Sprite).spriteFrame=s.default.instance.lockSf},e.prototype.onLoad=function(){n.instance=this,this.init(),this.onOpen()},e.prototype.start=function(){this.onSelect(0)},e.prototype.setLength=function(){},e.prototype.onSelect=function(t){cc.log(t),c.default.instance.playFirst(A[t]),this.heroName.string=b[t];for(var e=0;e<4;e++)this.arrs1[e].width=y[t][e],this.arrs2[e].spriteFrame=s.default.instance.skillArrs[t][e],this.arrs3[e].string=v[t][e];u.default.instance.MainHeroIndex=t},e.prototype.onBtnCLose=function(){p.default.instance.loadingNode.active=!0,this.onClose(),d.default.getInstance().reportEvent("\u8fdb\u5165\u6e38\u620f"),l.default.getInstance().gameDifficulty=0,l.default.getInstance().BgIndex=l.default.getInstance().gameDifficulty,l.default.getInstance().nowLevel=1,p.default.instance.loadGame(function(){})},e.prototype.onOpen=function(){a.default.instance.BottomNode.active=!1,a.default.instance.RightNode.active=!1,a.default.instance.LeftRoot.x=0},e.prototype.onClose=function(){cc.director.off("RefreshSelect",this.onSelect,this),a.default.instance.BottomNode.active=!0,a.default.instance.RightNode.active=!0,this.node.active=!1,a.default.instance.LeftRoot.x=-330,h.save("FirstSelect","true"),this.hideBanner()},e.prototype.hideBanner=function(){f.default.instance&&f.default.instance.hideBanner()},e.instance=null,e=n=o([m],e)}(cc.Component);n.default=S,cc._RF.pop()},{"../Ad/AdMgr":"AdMgr","../Audio":"Audio","../Hero/HeroGlobal":"HeroGlobal","../Main":"Main","../Menu":"Menu","../TextureMgr":"TextureMgr","../Tool/Statistics":"Statistics","../i18n/Language":"Language","../nativets/Global":"Global","../nativets/SaveMgr":"SaveMgr"}],Game:[function(t,e,n){"use strict";cc._RF.push(e,"5a20c9zCUBCJr0+QkGMAPEN","Game");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,a){function s(t){try{c(i.next(t))}catch(t){a(t)}}function r(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,r)}c((i=i.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(t){return function(e){return c([t,e])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./Hero/Hero"),c=t("./Main"),l=t("./nativets/Global"),u=t("./Hero/HeroGlobal"),d=t("./Hero/HeroFSM"),p=t("./Monster/MonsterNodePool"),h=t("./BgMgr"),f=t("./nativets/Config"),g=t("./i18n/Language"),m=t("./TextureMgr"),y=t("./Audio"),v=t("./Director"),b=t("./Reward/RewardMgr"),A=t("./Hero/SkillProgress"),S=t("./Ad/AdMgr"),I=t("./Tool/Statistics"),_=t("./Ad/AdList"),B=t("./Shader/Gradient"),C=t("./DataMgr"),w=t("./Reward/RewardAuto"),x=t("./Message"),k=t("./nativets/Platform"),M=t("./Ad/OPPOAdMgr"),P=t("./Ad/VIVOAdMgr"),O=t("./Tool/LoadPromise"),L=t("./Others/BoxGift/BoxGift"),N=t("./Ad/TTAdMgr"),R=t("./Ad/QQAdMgr"),D=cc._decorator,H=D.ccclass,T=D.property,F=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.heroSpArrs=[],e.bossHpSf=[],e.flashMaterial=null,e.boxPrefab=null,e.pauseDate=0,e.combo=0,e.maxCombo=0,e.onceNative=!1,e}var n;return i(e,t),n=e,e.prototype.init=function(){this.gameEventNode=this.node.getChildByName("GameEvent"),this.gameEffectNode=this.node.getChildByName("GameEffect"),this.dmgEventNode=this.node.getChildByName("DmgEvent"),this.rewardEventNode=this.node.getChildByName("RewardEvent"),this.uiNode=this.node.getChildByName("UI"),this.hudNode=this.uiNode.getChildByName("HUD"),this.initSkillIcon(),this.gamePauseNode=this.uiNode.getChildByName("GamePause");var t=this.gamePauseNode.getChildByName("box");this.gamePauseTask1=t.getChildByName("task1").getComponent(cc.Label),this.gamePauseTask2=t.getChildByName("task2").getComponent(cc.Label),this.gameEndNode=this.uiNode.getChildByName("GameEnd"),this.nextArrow=this.hudNode.getChildByName("next"),this.bossHp=this.hudNode.getChildByName("bossHp"),this.bossIcon=this.bossHp.getChildByName("icon").getComponent(cc.Sprite),this.bossName=this.bossHp.getChildByName("name").getComponent(cc.Label),this.mapProgress=this.hudNode.getChildByName("progress"),this.mapP1=[this.mapProgress.getChildByName("1"),this.mapProgress.getChildByName("11")],this.mapP2=[this.mapProgress.getChildByName("2"),this.mapProgress.getChildByName("22")];var e=this.gameEndNode.getChildByName("box");this.gameEndBg=this.gameEndNode.getChildByName("bg"),this.gameEndBox=e,this.gameEndWin=e.getChildByName("win"),this.gameEndLose=e.getChildByName("lose"),this.gameEndBase=e.getChildByName("Base"),this.gameEndLayout=this.gameEndWin.getChildByName("layout"),this.ttShareBtn=this.gameEndWin.getChildByName("share").getComponent(cc.Button),this.ttShareBtn.node.active=k.getPlatform()==k.Platform.TT,this.gameEndProgress=this.gameEndBase.getChildByName("ProgressBar").getComponent(cc.ProgressBar),this.gameEndTask1=this.gameEndBase.getChildByName("task1").getComponent(cc.Label),this.gameEndTask2=this.gameEndBase.getChildByName("task2").getComponent(cc.Label),this.gameEndExp=this.gameEndBase.getChildByName("exp").getComponent(cc.Label),this.gameEndLv=this.gameEndBase.getChildByName("lv").getComponent(cc.Label),this.reviveNode=this.uiNode.getChildByName("Revive"),this.reviveLabel=this.reviveNode.getChildByName("box").getChildByName("cancel").getChildByName("text").getComponent(cc.Label),this.hero=this.node.getChildByName("HeroRoot").getChildByName("Hero"),this.heroSk=this.hero.getComponent(sp.Skeleton),this.heroScript=this.hero.getComponent(r.default),this.heroScript.initInstance(),this.heroScript.init(),cc.log("Main Other",u.default.instance.MainHeroIndex,u.default.instance.OtherHeroIndex),this.heroIcon0=this.ctrlNode.getChildByName("0").getComponent(cc.Sprite),this.heroIcon1=this.ctrlNode.getChildByName("1").getComponent(cc.Sprite);var n=this.hudNode.getChildByName("icon");this.hudLv=n.getChildByName("lv").getComponent(cc.Label),this.hudLv.string="LV"+u.default.instance.Level,this.heroName0=n.getChildByName("name0").getComponent(cc.Label),this.heroName1=n.getChildByName("name1").getComponent(cc.Label),this.heroIcon0.spriteFrame=m.default.instance.heroIconGameSf[u.default.instance.MainHeroIndex],this.heroIcon1.spriteFrame=m.default.instance.heroIconGameSf[u.default.instance.OtherHeroIndex],this.heroName0.string=f.HeroName[u.default.instance.MainHeroIndex],this.heroName1.string=f.HeroName[u.default.instance.OtherHeroIndex],this.pet=this.node.getChildByName("HeroRoot").getChildByName("pet"),this.petSk=this.pet.getComponent(sp.Skeleton),this.directorNode=this.node.getChildByName("Director"),this.directorNode.getComponent(v.default).init(),this.bgMgr=this.node.getChildByName("BgRoot").getComponent(h.default),this.bgMgr.init()},e.prototype.initSkillIcon=function(){this.ctrlNode=this.uiNode.getChildByName("Ctrl"),this.skillHalo=this.ctrlNode.getChildByName("attack").getChildByName("halo"),this.lifeLable=this.ctrlNode.getChildByName("skill4").getChildByName("life").getComponent(cc.Label),this.refreshLife(),this.skillIconArrs=[],this.skillProgressArrs=[],this.skillTextArrs=[null];for(var t=["skill0","skill1","skill2","skill3","jump","attack"],e=0;e<t.length;e++)e<4&&(this.skillProgressArrs.push(this.ctrlNode.getChildByName(t[e]).getComponent(A.default)),this.skillProgressArrs[e].init(),0!=e&&this.skillTextArrs.push(this.ctrlNode.getChildByName("t"+e).getComponent(cc.Label))),this.skillIconArrs.push(this.ctrlNode.getChildByName(t[e]).getComponent(cc.Sprite));var n=this.ctrlNode.getChildByName("skill4").getComponent(A.default);n.init(),n.setSkill(4,8,m.default.instance.addHpSf)},e.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0,n.instance=this,this.init(),this.setHeroSp(),this.loadBgAsync(l.default.getInstance().BgIndex),this.loadHeroSpArrs(),this.onGameStart()},e.prototype.start=function(){var t=cc.loader.getDependsRecursively(this.heroSpArrs[0]);cc.log("uuids",t)},e.prototype.resetCD=function(){for(var t=0;t<this.skillProgressArrs.length;t++)this.skillProgressArrs[t].resetCD();this.ctrlNode.getChildByName("skill4").getComponent(A.default).resetCD()},e.prototype.onGameStart=function(){var t=this;I.default.getInstance().reportStage(l.default.getInstance().nowLevel,!0,!0),this.bossWarnOnce=!1,this.gamePauseNode.active=!1,this.gameEndNode.active=!1,this.bossHp.active=!1,this.monsterCount=0,this.ttShareBtn.interactable=!0,p.default.instance.GCAll(),b.default.instance&&b.default.instance.GCAll(),cc.director.emit("GameStart"),l.default.getInstance().inGame=!0,this.resetCD(),this.refreshLife(),this.startDate=Date.now(),this.setLevelTask(),this.unscheduleAllCallbacks(),l.default.getInstance().MapLevelIndex=0;var e=l.default.getInstance().nowLevel%40-1;-1==e&&(e=39);var n=f.MapData[e];this.mapdata=n,this.getRewardItemArrs(),l.default.getInstance().MapLevelCount=this.mapdata.monster.length-1;var i=parseInt(n.wave);this.mult=i,this.multIndex=0,this.monsterTypeArrs=[];for(var o=0;o<n.monster[l.default.getInstance().MapLevelIndex].length;o++)for(var a=this.getMonsterNum(n.monster[l.default.getInstance().MapLevelIndex][o]),s=0;s<a;s++)this.monsterTypeArrs.push(n.monster[l.default.getInstance().MapLevelIndex][o]);l.default.getInstance().monsterCount=this.getMonsterCount(n.monster[l.default.getInstance().MapLevelIndex])*i,this.monsterCount+=l.default.getInstance().monsterCount,this.scheduleOnce(function(){t.gen=t.generateMonster(),t.createMonsterTime=0,t.createMonsterIndex=-1},5),this.scheduleOnce(function(){cc.log("OnOpen"),v.default.instance.onOpen(l.default.getInstance().nowLevel,0)},3.5),u.default.instance.onGameStart(),this.heroScript.onGameStart(),h.default.instance.onGameStart(),this.setMapProgress(0),this.loadOVShortcut(),this.loadQQShortcut(),N.default.instance&&this.scheduleOnce(function(){N.default.instance.startRecoder()},1)},e.prototype.loadOVShortcut=function(){var t=this;if((k.getPlatform()==k.Platform.OPPO||k.getPlatform()==k.Platform.VIVO&&1==l.default.getInstance().nowLevel)&&!this.node.getChildByName("Shortcut")){if(this.loadingShortcut)return;this.loadingShortcut=!0,cc.loader.loadRes("OV/Shortcut",cc.Prefab,function(e,n){(t.loadingShortcut=!1,e)||(cc.instantiate(n).parent=t.node)})}},e.prototype.loadQQShortcut=function(){var t=this;if(k.getPlatform()==k.Platform.QQ&&cc.sys.os==cc.sys.OS_ANDROID&&1==l.default.getInstance().nowLevel&&!this.node.getChildByName("Shortcut")){if(this.loadingShortcut)return;this.loadingShortcut=!0,cc.loader.loadRes("OV/Shortcut",cc.Prefab,function(e,n){(t.loadingShortcut=!1,e)||(cc.instantiate(n).parent=t.node)})}},e.prototype.createNext=function(){var t=this;l.default.getInstance().MapLevelIndex++,this.setMapProgress(l.default.getInstance().MapLevelIndex),h.default.instance.setMapByIndex(this.isHole);var e=this.mapdata,i=e.wave;this.mult=i,this.multIndex=0,this.monsterTypeArrs=[];for(var o=0;o<e.monster[l.default.getInstance().MapLevelIndex].length;o++)for(var a=this.getMonsterNum(e.monster[l.default.getInstance().MapLevelIndex][o]),s=0;s<a;s++)this.monsterTypeArrs.push(e.monster[l.default.getInstance().MapLevelIndex][o]);l.default.getInstance().monsterCount=this.getMonsterCount(e.monster[l.default.getInstance().MapLevelIndex])*i,this.monsterCount+=l.default.getInstance().monsterCount,this.scheduleOnce(function(){t.gen=t.generateMonster(),t.createMonsterTime=0,t.createMonsterIndex=-1},5),l.default.getInstance().MapLevelIndex==l.default.getInstance().MapLevelCount?(2==l.default.getInstance().MapLevelIndex&&r.default.instance.onExitHole(),l.default.getInstance().nowLevel%5==0?this.showBossWarn():this.scheduleOnce(function(){cc.log("OnOpen"),v.default.instance.onOpen(l.default.getInstance().nowLevel,l.default.getInstance().MapLevelIndex)},2)):this.scheduleOnce(function(){cc.log("OnOpen"),v.default.instance.onOpen(l.default.getInstance().nowLevel,l.default.getInstance().MapLevelIndex)},2),l.default.getInstance().canMove=!1,l.default.getInstance().MapLevelIndex==l.default.getInstance().MapLevelCount?(l.default.getInstance().levelNext=!1,n.instance.nextArrow.active=!1,l.default.getInstance().canMove=!0):c.default.instance.heroCamera.runAction(cc.sequence(cc.moveBy(.3,cc.v2(.25*cc.winSize.width,0)),cc.callFunc(function(){l.default.getInstance().levelNext=!1,n.instance.nextArrow.active=!1,l.default.getInstance().canMove=!0})))},e.prototype.showBossWarn=function(){var t=this,e=this.hudNode.getChildByName("boss");e.active=!0;for(var n=[],i=[],o=0;o<4;o++)n.push(e.getChildByName(""+o)),n[o].active=!1,i.push(n[o].getComponent(cc.Animation)),i[o].stop();y.default.instance.playAudio("BossWarn"),n[0].active=!0,i[0].play(),i[0].on(cc.Animation.EventType.FINISHED,function(){n[1].active=!0,i[1].play(),i[1].on(cc.Animation.EventType.FINISHED,function(){n[2].active=!0,i[2].play(),i[2].on(cc.Animation.EventType.FINISHED,function(){n[3].active=!0,i[3].play(),i[3].on(cc.Animation.EventType.FINISHED,function(){if(e.active){e.active=!1,l.default.getInstance().inGame=!0,l.default.getInstance().monsterCount++,t.monsterCount++;var n=parseInt(t.mapdata.boss.toString().substr(2,2));t.setBossHp(n),t.bossHp.active=!0,p.default.instance.create(1100+n,cc.v2(c.default.instance.heroCamera.x+2*cc.winSize.width/4,-192))}})})})})},e.prototype.setBossHp=function(t){var e=t-97;this.bossName.string=["\u590f\u4faf\u60c7","\u66f9\u64cd","\u8bb8\u891a"][e],this.bossIcon.spriteFrame=m.default.instance.bossIconGameSf[e]},e.prototype.generateMonster=function(){var t;return s(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.monsterTypeArrs.length?[4,this.createMonster()]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},e.prototype.createMonster=function(){var t=this.monsterTypeArrs[this.createMonsterIndex],e=-192;7==this.getMonsterIndex(t)&&(e=160);var n=l.default.getInstance().MapLevelIndex;2==n&&(n=0);var i=n*l.default.getInstance().MapSplitWidth+[-400,1e3,1600][Math.floor(3*Math.random())]-25+50*Math.random();p.default.instance.create(t,cc.v2(i,e))},e.prototype.onEnd=function(t){l.default.getInstance().inGame=!1,this.gameEndNode.active||(N.default.instance&&N.default.instance.stopRecoder(),this.gameEndNode.active=!0,this.gameEndTask1.string=this.getTaskString(this.LevelArrs[0]),this.gameEndTask2.string=this.getTaskString(this.LevelArrs[1]),this.gameEndBg.active=t,this.gameEndBox.active=t,this.showGameEnd(t),I.default.getInstance().reportStage(l.default.getInstance().nowLevel,t))},e.prototype.showGameEnd=function(t){if(this.gameEndWin.active=t,this.gameEndLose.active=!t,k.getPlatform()==k.Platform.OPPO||k.getPlatform()==k.Platform.VIVO){var e=.8;t&&(k.getPlatform()==k.Platform.OPPO?e=M.default.instance.OPPOIntersitialRate:(e=P.default.instance.VIVOIntersitialRate,console.log("\u63d2\u5c4f\u51e0\u7387",e))),Math.random()<e&&S.default.instance&&S.default.instance.showInterstitial()}if(t&&1==l.default.getInstance().nowLevel&&C.default.instance.needCheckMark&&(k.getPlatform()!=k.Platform.WX&&k.getPlatform()!=k.Platform.QQ||S.default.instance.showShortcut()),(k.getPlatform()==k.Platform.QQ||k.getPlatform()==k.Platform.WX)&&l.default.getInstance().nowLevel>1&&R.default.instance&&(t?R.default.instance.winLimit>0&&Math.random()<S.default.instance.getBoxGiftRate(t)&&(R.default.instance.winLimit=parseInt(R.default.instance.winLimit)-1,L.default.instance.open()):R.default.instance.failLimit>0&&Math.random()<S.default.instance.getBoxGiftRate(t)&&(R.default.instance.failLimit=parseInt(C.default.instance.failLimit)-1,L.default.instance.open())),t){var n=this.getLevelTaskBool(this.LevelArrs[0]),i=this.getLevelTaskBool(this.LevelArrs[1]),o=1;n&&o++,i&&o++,this.setEndStar(o),this.showTask(!0,n,i),this.showRewardItem();var a=f.getLevelCoins(l.default.getInstance().nowLevel),s=f.getLevelExp(l.default.getInstance().nowLevel);u.default.instance.setExp(u.default.instance.Exp+s),u.default.instance.setCoins(u.default.instance.Coins+a),u.default.instance.setLife(u.default.instance.Life+1),l.default.getInstance().nowLevel==u.default.instance.Unlock&&(u.default.instance.Unlock++,u.default.instance.setUnlock(u.default.instance.Unlock)),u.default.instance.MonsterKillCount+=this.monsterCount,I.default.getInstance().reportRank(I.default.RANKLIST.\u6740\u622e\u699c,u.default.instance.MonsterKillCount),C.default.instance.taskCountData[1]++,C.default.instance.taskCountData[2]+=this.monsterCount,u.default.instance.AchieveCountData[1]++,u.default.instance.AchieveCountData[2]+=this.monsterCount,C.default.instance.saveSaveDate();var c=u.default.instance.getProgress(0),d=u.default.instance.getProgress(s),p=u.default.instance.Level-u.default.instance.getIndex(u.default.instance.Exp-s,f.Exp);this.gameEndExp.string=u.default.instance.Exp+"/"+f.Exp[u.default.instance.Level-1],this.showProgress(d,c,p),u.default.instance.Life+=5,u.default.instance.saveHeroGlobal()}else y.default.instance.playAudio(r.default.instance.failAudioArrs[u.default.instance.MainHeroIndex]),this.showProgress(u.default.instance.getProgress(0),u.default.instance.getProgress(0),0),this.gameEndExp.string=u.default.instance.Exp+"/"+f.Exp[u.default.instance.Level-1],this.setEndStar(0),this.showTask(!1,!1,!1)},e.prototype.getRewardItemArrs=function(){for(var t=this.mapdata.soul[l.default.getInstance().gameDifficulty],e=this.mapdata.soulrate[l.default.getInstance().gameDifficulty],n=[],i=0;i<t.length;i++)Math.random()<e[r]&&n.push(e[r]);if(this.rewardSoulArrs=n,this.mapdata.item)if(1!=l.default.getInstance().nowLevel||0==u.default.instance.MapData[0][0]){var o=this.mapdata.item[l.default.getInstance().gameDifficulty],a=this.mapdata.itemrate[l.default.getInstance().gameDifficulty],s=[];if(o)for(var r=0;r<o.length;r++)Math.random()<a[r]&&s.push(o[r]);this.rewardItmeArrs=s}else this.rewardItmeArrs=[];else this.rewardItmeArrs=[]},e.prototype.showRewardItem=function(){this.gameEndLayout.removeAllChildren();for(var t=0;t<this.rewardItmeArrs.length;t++)u.default.instance.pushEquipmentData(1e4*this.rewardItmeArrs[t]),b.default.instance.createRewardEnd(this.rewardItmeArrs[t]);this.rewardItmeArrs[0]&&w.default.instance.open(this.rewardItmeArrs[0]);for(var e=0;e<this.rewardSoulArrs.length;e++){var n=1+Math.floor(8*Math.random());u.default.instance.pushEquipmentData(this.rewardSoulArrs[e]+n),b.default.instance.createRewardEnd(this.rewardSoulArrs[e]+n)}},e.prototype.showProgress=function(t,e,n){var i=this;cc.log(t,e,n);var o=this.gameEndProgress;o.progress=t;var a=(e+n-t)/30;this.schedule(function(){var t=o.progress+a;t>1&&(t-=1,i.gameEndLv.string="Lv"+u.default.instance.Level),o.progress=t},.03,29)},e.prototype.showTask=function(t,e,n){this.gameEndBase.getChildByName("s0").active=t,this.gameEndBase.getChildByName("s1").active=e,this.gameEndBase.getChildByName("s2").active=n},e.prototype.showReward=function(){},e.prototype.setMapProgress=function(t){switch(t){case 0:this.mapP1[0].active=!1,this.mapP1[1].active=!1,this.mapP2[0].active=!1,this.mapP2[1].active=!1;break;case 1:this.mapP1[0].active=!0,this.mapP1[1].active=!0,this.mapP2[0].active=!1,this.mapP2[1].active=!1;break;case 2:this.mapP1[0].active=!0,this.mapP1[1].active=!0,this.mapP2[0].active=!0,this.mapP2[1].active=!0}},e.prototype.setEndStar=function(t){var e=this,n=u.default.instance.MapData[l.default.getInstance().gameDifficulty][l.default.getInstance().nowLevel-40*l.default.getInstance().gameDifficulty-1];t>n&&(u.default.instance.MapData[l.default.getInstance().gameDifficulty][l.default.getInstance().nowLevel-40*l.default.getInstance().gameDifficulty-1]=t,u.default.instance.setMapData(u.default.instance.MapData),C.default.instance.taskCountData[3]+=t-n,u.default.instance.AchieveCountData[3]+=t-n);for(var i=0;i<3;i++)this.gameEndBase.getChildByName(i+"").active=!1;var o=0;this.schedule(function(){var t=e.gameEndBase.getChildByName(o+"");t.stopAllActions(),t.scale=1,t.active=!0,t.runAction(cc.sequence(cc.scaleTo(.1,1.55),cc.scaleTo(.1,1))),o++},.6,t-1)},e.prototype.setLevelTask=function(){this.LevelArrs=[Math.floor(2*Math.random()),2+Math.floor(2*Math.random())],this.LevelHelpSkill=!1,this.LevelTime=Math.floor(3*l.default.getInstance().MapSplitWidth/100),this.ComboCount=3+5*Math.floor(.25*l.default.getInstance().nowLevel)},e.prototype.getLevelTaskBool=function(t){var e=!1;switch(t){case 0:e=Date.now()-this.startDate-this.pauseDate<=1e3*this.LevelTime;break;case 1:e=!this.LevelHelpSkill;break;case 2:e=this.maxCombo>=this.ComboCount;break;case 3:e=l.default.getInstance().HP>80}return e},e.prototype.getTaskString=function(t){var e="";switch(t){case 0:e=g.default.Task1.replace("${time}",""+this.LevelTime);break;case 1:e=g.default.Task2;break;case 2:e=g.default.Task3.replace("${combo}",""+this.ComboCount);break;case 3:e=g.default.Task4.replace("${hp}","60")}return e},e.prototype.setHeroSp=function(){return a(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return t=this.heroSk,this.setSkillIcon(u.default.instance.MainHeroIndex),this.heroSpArrs[u.default.instance.MainHeroIndex]?[3,2]:[4,this.loadHeroSpArrs()];case 1:e.sent(),e.label=2;case 2:return t.skeletonData=this.heroSpArrs[u.default.instance.MainHeroIndex],t.animation="stay",t._updateSkeletonData(),t.setSkin("001"),this.heroScript.initHeroData(),[2]}})})},e.prototype.setSkillIcon=function(t){for(var e=0;e<this.skillIconArrs.length;e++)this.skillIconArrs[e].spriteFrame=m.default.instance.skillArrs[t][e];for(var n=0;n<this.skillProgressArrs.length;n++){var i=m.default.instance.skillArrs[t][n],o=f.Skill[7*t+n],a=u.default.instance.HeroDataArrs[t].SkillArrs[n];-1==a&&(a=0);var s=parseFloat(o.cd)-parseFloat(o.cdup)*a;u.default.instance.Level<parseInt(o.unlock)?(i=m.default.instance.lockSf,s=-1,this.skillTextArrs[n].string=o.unlock+"\u7ea7\u89e3\u9501"):this.skillTextArrs[n]&&(this.skillTextArrs[n].string=""),this.skillProgressArrs[n].setSkill(n,s,i)}},e.prototype.onBtnExchange=function(t){y.default.instance.playAudio("BtnClick");var e=this.hero.getComponent(sp.Skeleton),n=parseInt(t.target.name);u.default.instance.MainHeroIndex!=n&&d.default.instance.fsm.is("state_stand")&&(u.default.instance.OtherHeroIndex=u.default.instance.MainHeroIndex,u.default.instance.MainHeroIndex=n,this.heroIcon0.spriteFrame=m.default.instance.heroIconGameSf[u.default.instance.MainHeroIndex],this.heroIcon1.spriteFrame=m.default.instance.heroIconGameSf[u.default.instance.OtherHeroIndex],this.heroName0.string=f.HeroName[u.default.instance.MainHeroIndex],this.heroName1.string=f.HeroName[u.default.instance.OtherHeroIndex],e.skeletonData=this.heroSpArrs[n],e.animation="stay",e._updateSkeletonData(),e.setMaterial(0,this.flashMaterial),e.setSkin("001"),this.setSkillIcon(n),this.heroScript.initHeroData())},e.prototype.loadPet=function(t){return a(this,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return t<0?[2]:u.default.instance.PetLvArrs[t]>0?[4,O.loadSpinePromise(f.PetSpName[t])]:[3,2];case 1:e=n.sent(),this.petSk.skeletonData=e,this.petSk.animation="fly",this.petSk._updateSkeletonData(),this.petSk.setSkin("default"),n.label=2;case 2:return[2]}})})},e.prototype.onBtnHome=function(){var t=this;y.default.instance.playAudio("BtnClick"),c.default.instance.loadMenu(function(){t.heroIcon0.spriteFrame=null,t.heroIcon1.spriteFrame=null,c.default.instance.ReleaseGame()}),N.default.instance&&N.default.instance.stopRecoder()},e.prototype.onBtnShareVideo=function(){N.default.instance&&N.default.instance.TTVideoShare()},e.prototype.onBtnNextLevel=function(){var t=this;if(y.default.instance.playAudio("BtnClick"),c.default.instance.loadingNode.active=!0,!(u.default.instance.Life<5)){u.default.instance.Life-=5,u.default.instance.saveHeroGlobal(),l.default.getInstance().nowLevel<120&&l.default.getInstance().nowLevel++,l.default.getInstance().gameDifficulty=Math.floor((l.default.getInstance().nowLevel-1)/40);var e=Math.floor((l.default.getInstance().nowLevel-40*l.default.getInstance().gameDifficulty-1)/10);if((k.getPlatform()==k.Platform.WX||k.getPlatform()==k.Platform.QQ)&&l.default.getInstance().nowLevel>9)wx.loadSubpackage({name:"sub3",success:function(n){t.loadBgAsync(e),t.hudLv.string="LV"+u.default.instance.Level,t.setSkillIcon(u.default.instance.MainHeroIndex),t.onGameStart()},fail:function(t){}}).onProgressUpdate(function(t){});else this.loadBgAsync(e),this.hudLv.string="LV"+u.default.instance.Level,this.setSkillIcon(u.default.instance.MainHeroIndex),this.onGameStart()}},e.prototype.onBtnPause=function(){y.default.instance.playAudio("BtnClick"),l.default.getInstance().inGame=!1,this.gamePauseNode.active||(this.gamePauseNode.active=!0,this.gamePauseTask1.string=this.getTaskString(this.LevelArrs[0]),this.gamePauseTask2.string=this.getTaskString(this.LevelArrs[1]),this.pauseStartDate=Date.now(),N.default.instance&&N.default.instance.pauseRecoder())},e.prototype.onBtnResume=function(){y.default.instance.playAudio("BtnClick"),this.gamePauseNode.active=!1,l.default.getInstance().inGame=!0,this.pauseStartDate&&(this.pauseDate+=Date.now()-this.pauseStartDate,this.pauseStartDate=null),N.default.instance&&N.default.instance.resumeRecoder()},e.prototype.onBtnRestart=function(){y.default.instance.playAudio("BtnClick"),N.default.instance&&N.default.instance.stopRecoder(),this.onGameStart(),this.gamePauseNode.active=!1,l.default.getInstance().inGame=!0},e.prototype.onBtnRevive=function(){y.default.instance.playAudio("BtnClick"),S.default.instance?(I.default.getInstance().reportEvent("\u89c2\u770b \u590d\u6d3b \u89c6\u9891"),l.default.getInstance().inGame=!1,S.default.instance.showRewardAd(_.default.WXVIDEOLIST1.\u590d\u6d3b)):this.onRevive()},e.prototype.onBtnReviveByVideo=function(){this.onBtnRevive(),this.reviveNode.active=!1},e.prototype.onBtnReviveByJade=function(){var t=1==r.default.instance.reviveCount?20:25;u.default.instance.Jade<t?x.default.instance.showLack("jade"):(u.default.instance.Jade-=t,u.default.instance.saveHeroGlobal(),this.onRevive(),this.reviveNode.active=!1)},e.prototype.onBtnReviveCancel=function(){y.default.instance.playAudio("BtnClick"),this.reviveNode.active=!1,this.onEnd(!1)},e.prototype.onRevive=function(){this.heroScript.revive(),this.gameEndNode.active=!1,l.default.getInstance().inGame=!0},e.prototype.onBtnCreateMonster=function(){y.default.instance.playAudio("BtnClick"),this.onGameStart()},e.prototype.getGameTime=function(){return Date.now()-this.startDate-this.pauseDate},e.prototype.ReleaseGame=function(){for(var t=cc.loader.getDependsRecursively("Game"),e=0;e<t.length;e++)cc.loader.release(t[e])},e.prototype.loadHeroSpArrs=function(){return a(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:this.heroSpArrs=[null,null,null],t=0,e.label=1;case 1:return t<3?t!=u.default.instance.MainHeroIndex?[3,3]:[4,this.loadGameHeroSp(t)]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},e.prototype.loadHeroSp=function(t,e){var n=this;cc.loader.loadRes(t,sp.SkeletonData,function(t,i){t?cc.log(t):n.heroSpArrs[e]=i})},e.prototype.loadGameHeroSp=function(t){return a(this,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return k.getPlatform()!=k.Platform.WX&&k.getPlatform()!=k.Platform.QQ?[3,2]:[4,O.loadWXSubPromise("hero"+t)];case 1:n.sent(),n.label=2;case 2:return[4,O.loadSpinePromise(f.HeroSpName[t])];case 3:return e=n.sent(),cc.log("sp",e),this.heroSpArrs[t]=e,[2]}})})},e.prototype.loadBgAsync=function(t){return a(this,void 0,void 0,function(){var e,n,i,o,a,r,c,d,p,g;return s(this,function(s){switch(s.label){case 0:return e="BG/bg"+(t+1),n=this,[4,this.loadSpriteFrame(e+f.BgName[t][0])];case 1:return n.nearSf=s.sent(),i=this,[4,this.loadSpriteFrame(e+f.BgName[t][1])];case 2:return i.midSf=s.sent(),o=this,[4,this.loadSpriteFrame(e+f.BgName[t][2])];case 3:return o.farSf=s.sent(),a=this,[4,this.loadSpriteFrame(e+f.BgName[t][3])];case 4:return a.holeSf=s.sent(),-1==(r=l.default.getInstance().nowLevel%40-1)&&(r=39),c=f.MapData[r],B.default.instance.canClose?(B.default.instance.node.active=!1,cc.director.emit("HeroShow")):B.default.instance.canClose=!0,l.default.getInstance().inGame=!0,this.isHole=!1,this.isHole=!!c.cave,this.createBox(),h.default.instance.setMapByIndex(this.isHole),d=this,[4,this.loadSpriteFrame(e+f.BgName[t][4])];case 5:return d.holeNearSf=s.sent(),p=this,[4,this.loadSpriteFrame(e+f.BgName[t][5])];case 6:return p.holeMidSf=s.sent(),g=this,[4,this.loadSpriteFrame(e+f.BgName[t][6])];case 7:return g.holeFarSf=s.sent(),this.loadPet(u.default.instance.PetIndex),[2]}})})},e.prototype.createBox=function(){},e.prototype.loadSpriteFrame=function(t){return new Promise(function(e,n){cc.loader.loadRes(t,cc.SpriteFrame,function(i,o){i?n(i):(cc.log(t+"\u52a0\u8f7d\u5b8c\u6210"),e(o))})})},e.prototype.releaseHeroSp=function(){this.heroSk.skeletonData=null;for(var t=0;t<this.heroSpArrs.length;t++)for(var e=cc.loader.getDependsRecursively(this.heroSpArrs[t]),n=0;n<e.length;n++)cc.loader.release(e[n])},e.prototype.getMonsterCount=function(t){for(var e=0,n=0;n<t.length;n++)e+=this.getMonsterNum(t[n]);return e},e.prototype.getMonsterNum=function(t){return parseInt(t.toString().substr(0,1))},e.prototype.getMonsterColor=function(t){return parseInt(t.toString().substr(1,1))},e.prototype.getMonsterIndex=function(t){return parseInt(t.toString().substr(2,2))},e.prototype.refreshLife=function(){this.lifeLable.string=u.default.instance.Life+""},e.prototype.onDestroy=function(){y.default.instance.stopBgm("game")},e.prototype.update=function(t){var e=this;l.default.getInstance().inGame&&this.gen&&(this.createMonsterTime+=t,this.createMonsterTime>.2&&(this.createMonsterTime=0,this.createMonsterIndex++,this.gen.next().done&&(this.gen=null,this.multIndex++,this.multIndex<this.mult&&this.scheduleOnce(function(){e.gen=e.generateMonster(),e.createMonsterTime=0,e.createMonsterIndex=-1},5))))},e.instance=null,o([T([cc.SpriteFrame])],e.prototype,"bossHpSf",void 0),o([T(cc.Material)],e.prototype,"flashMaterial",void 0),o([T(cc.Prefab)],e.prototype,"boxPrefab",void 0),e=n=o([H],e)}(cc.Component);n.default=F,cc._RF.pop()},{"./Ad/AdList":"AdList","./Ad/AdMgr":"AdMgr","./Ad/OPPOAdMgr":"OPPOAdMgr","./Ad/QQAdMgr":"QQAdMgr","./Ad/TTAdMgr":"TTAdMgr","./Ad/VIVOAdMgr":"VIVOAdMgr","./Audio":"Audio","./BgMgr":"BgMgr","./DataMgr":"DataMgr","./Director":"Director","./Hero/Hero":"Hero","./Hero/HeroFSM":"HeroFSM","./Hero/HeroGlobal":"HeroGlobal","./Hero/SkillProgress":"SkillProgress","./Main":"Main","./Message":"Message","./Monster/MonsterNodePool":"MonsterNodePool","./Others/BoxGift/BoxGift":"BoxGift","./Reward/RewardAuto":"RewardAuto","./Reward/RewardMgr":"RewardMgr","./Shader/Gradient":"Gradient","./TextureMgr":"TextureMgr","./Tool/LoadPromise":"LoadPromise","./Tool/Statistics":"Statistics","./i18n/Language":"Language","./nativets/Config":"Config","./nativets/Global":"Global","./nativets/Platform":"Platform"}],GetJsonData:[function(t,e,n){"use strict";cc._RF.push(e,"759ad3tH5BA/JzTovFnJWQd","GetJsonData"),Object.defineProperty(n,"__esModule",{value:!0});var i=["hp","ls","sp","cr","arp","bonus","cd","miss","exp","gold"];n.default=function(t,e,n){for(var o=0;o<i.length;o++)t[i[o]];return str},cc._RF.pop()},{}],Global:[function(t,e,n){"use strict";cc._RF.push(e,"a6eec4GnJ5GE7SHs3oYU20C","Global"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){this.inGame=!1,this.STATE=cc.Enum({LEFT:3,RIGHT:4,STOP:0}),this.MonsterAudio=cc.Enum({"\u5200":"monsterSword","\u67aa":"monsterLancer","\u7bad":"monsterArrow","\u9b54\u6cd5":"monsterSkill","\u5927\u8c61\u653b\u51fb":"Eleplantattack","\u5927\u8c61\u6b7b\u4ea1":"Eleplantdead","\u706b":"Monsterfire","\u51b0":"Monsterice","\u5de8\u4eba\u653b\u51fb":"Giantstone","\u5de8\u4eba\u6b7b\u4ea1":"Giantdead","\u5de8\u4eba\u6eda\u77f3":"Giantroll","\u8001\u9e70\u653b\u51fb":"Eagleattack","\u8001\u9e70\u6b7b\u4ea1":"Eagledead"}),this.ZYAudio=cc.Enum({"\u653b\u51fb1":"ZYattack1","\u653b\u51fb2":"ZYattack2","\u653b\u51fb3\u4e0a\u6311":"ZYattack3up","\u653b\u51fb3\u591a\u6bb5":"ZYattackmulti","\u77ac\u79fb":"ZYfalsh","\u96f7\u51fb":"ZYthunder","\u88c2\u5730":"ZYsplitground","\u884c\u8d70":"walk","\u51fa\u573a":"ZYshow","\u5931\u8d25":"ZYfail","\u5927\u62db":"ZYultimate","\u5288\u5730":"ZYpd","\u96f7\u52a8\u4e5d\u5929":"ZYleidong"}),this.DCAudio=cc.Enum({"\u5bd2\u51b0\u98ce\u66b4":"DCjianyu","\u591a\u91cd\u7bad":"DCmulti","\u5ba1\u5224":"DCjudge","\u51fa\u573a":"DCshow","\u5931\u8d25":"DCfail","\u5927\u62db":"DCultimate","\u7bad":"DCArrow","\u8df3\u653b":"DCjumpattack","\u4e09\u6bb5":"DCattack3"}),this.DQAudio=cc.Enum({"\u653b\u51fb1":"DQattack1","\u653b\u51fb2":"DQattack2","\u653b\u51fb3":"DQattack3","\u8df3\u653b":"DQjumpattack","\u708e\u843d\u65a9":"DQyanluo","\u6d41\u661f\u96e8":"DQliuxingyu","\u9ed1\u6d1e":"DQheidong","\u5730\u7206\u5929\u661f":"DQdibaotianxing","\u51fa\u573a":"DQshow","\u5931\u8d25":"DQfail","\u5927\u62db":"DQultimate"}),this.MoveState=0,this.canMove=!0,this.deltaX=0,this.comboFlag=!0,this.attackMove=!1,this.MapSplitWidth=2160,this.MapLevelIndex=0,this.MapLevelCount=2,this.levelNext=!1,this.monsterCount=0,this.isMapFocus=!0,this.gameDifficulty=0,this.unlockDifficulty=0,this.nowLevel=1,this.gravity=4e3,this.uuid="",this.wxHead="",this.wxName="",this.wxOpenId="",this.vivoHead="",this.vivoName="",this.registerName="",this.registerHead="",this.preBuff=!1,this.ttAuthor=!1}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.instance=null,t}();n.default=i,cc._RF.pop()},{}],God:[function(t,e,n){"use strict";cc._RF.push(e,"32dc9PPaEVCzKi6cleFSQPL","God");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Menu"),s=t("../Hero/HeroGlobal"),r=cc._decorator,c=r.ccclass,l=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onEnable=function(){this.count=0},e.prototype.onBtnClick=function(){this.count++,20==this.count&&(a.default.instance.addLife(99),s.default.instance.isGod=!0)},e=o([c],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../Hero/HeroGlobal":"HeroGlobal","../Menu":"Menu"}],Gradient:[function(t,e,n){"use strict";cc._RF.push(e,"34198S8mTxAwJ2Yu5eiE9i0","Gradient");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../nativets/Global"),s=t("../Audio"),r=t("../nativets/Config"),c=t("../Ad/AdMgr"),l=t("../nativets/Platform"),u=cc._decorator,d=u.ccclass,p=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.time=0,e}var n;return i(e,t),n=e,e.prototype.onLoad=function(){n.instance=this,this.material=this.node.getComponent(cc.Sprite).getMaterial(0)},e.prototype.start=function(){},e.prototype.effect=function(){this.schedule(this.upd,0,cc.macro.REPEAT_FOREVER,1)},e.prototype.upd=function(){this.time+=.01,this.material.effect.setProperty("time",this.time),this.time>1.2&&(this.unschedule(this.upd),this.material.effect.setProperty("time",0),this.time=0,this.node.active=!1,a.default.getInstance().inGame=!0)},e.prototype.setTips=function(){this.setTipsLocation();var t=r.TipString[Math.floor(Math.random()*r.TipString.length)];this.textLabel.string=t},e.prototype.setTipsLocation=function(){l.getPlatform()==l.Platform.OPPO||l.getPlatform()==l.Platform.VIVO?this.textLabel.node.y=-105:this.textLabel.node.y=-290},e.prototype.hideBanner=function(){c.default.instance&&c.default.instance.hideBanner()},e.prototype.onEnable=function(){s.default.instance.playBgm("loading"),this.textLabel||(this.textLabel=this.node.getChildByName("text").getComponent(cc.Label)),this.setTips(),this.time=1.5,this.canClose=!1},e.prototype.onDisable=function(){s.default.instance.stopBgm("loading")},e.prototype.update=function(t){this.time>0&&(this.time-=t,this.time<=0&&(this.canClose&&(this.node.active=!1,cc.director.emit("HeroShow")),this.canClose=!0))},e.instance=null,e=n=o([d],e)}(cc.Component));n.default=p,cc._RF.pop()},{"../Ad/AdMgr":"AdMgr","../Audio":"Audio","../nativets/Config":"Config","../nativets/Global":"Global","../nativets/Platform":"Platform"}],HeroBody:[function(t,e,n){"use strict";cc._RF.push(e,"ef46b2BXWNHvr0udRw0bqPy","HeroBody");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./HeroFSM"),s=t("./Hero"),r=t("../nativets/Global"),c=cc._decorator,l=c.ccclass,u=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){},e.prototype.onCollisionEnter=function(t,e){a.default.instance.fsm.can("hit")&&r.default.getInstance().inGame&&s.default.instance.onHit(t.tag)},e=o([l],e)}(cc.Component));n.default=u,cc._RF.pop()},{"../nativets/Global":"Global","./Hero":"Hero","./HeroFSM":"HeroFSM"}],HeroData:[function(t,e,n){"use strict";cc._RF.push(e,"49019wPCmpIBa82u3cPWXLF","HeroData"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../nativets/SaveMgr"),o=t("./HeroGlobal"),a=t("../MenuSelect"),s=t("../nativets/Config"),r=t("../Tips"),c=t("./Hero"),l=t("../Tool/Statistics"),u=t("../nativets/Platform"),d=t("../Others/Rank/RankWX"),p=function(){function t(t,e){this.Type=t,this.Armor=e.Armor,this.Wing=e.Wing,this.Ornament=e.Ornament,this.Weapon=e.Weapon,this.Ring=e.Ring,this.SkillArrs=e.SkillArrs;for(var n=0;n<this.SkillArrs.length;n++)-1==this.SkillArrs[n]&&(this.SkillArrs[n]=0);this.Armor<10&&(this.Armor=[21101e4,22104e4,23208e4][t]),this.Weapon<10&&(this.Weapon=[11101e4,12104e4,13107e4][t]),this.Wing>-1&&this.Wing<10&&(this.Wing=-1),this.Ornament>-1&&this.Ornament<10&&(this.Ornament=-1),this.Ring>-1&&this.Ring<10&&(this.Ring=-1),this.updateAttribute()}return t.prototype.init=function(){this.Armor=-1,this.Wing=-1,this.Ornament=-1,this.ATK=10,this.DEF=0,this.CR=10,this.SP=440,this.LS=0,this.Weapon=0,this.SkillCount=1,this.SkillArrs=[1],this.ARP=0,this.BONUS=0,this.CD=0,this.MISS=0},t.prototype.getBaseAttribute=function(){this.ATK=10+3*(o.default.instance.Level-1),this.HP=400+35*(o.default.instance.Level-1),this.DEF=5,this.LS=0,this.CR=5,this.SP=770,this.ARP=0,this.BONUS=0,this.CD=0,this.MISS=0,this.EXP=0,this.GOLD=0},t.prototype.updateAttribute=function(t){this.getBaseAttribute();var e=this.Weapon,n=this.Armor,i=null;this.Wing>-1&&(i=this.Wing);var a=null;this.Ornament>-1&&(a=this.Ornament);var r=null;this.Ring>-1&&(r=this.Ring);var c=[e,n,i,a,r],l=new Array(this.ATK,this.DEF,this.HP,this.LS,this.SP,this.CR,this.ARP,this.BONUS,this.CD,this.MISS,this.EXP,this.GOLD);cc.log("arrrrrrs",l);for(var u=0;u<6;u++){var d=null,p=0;if(u<5){if(null==c[u])continue;d=s.getDataById(s.getJsonId(c[u])),p=s.getUpgradeId(c[u])}else o.default.instance.PetIndex>-1&&(d=s.Pet[o.default.instance.PetIndex],p=o.default.instance.PetLvArrs[o.default.instance.PetIndex]);if(d&&(d.atk&&(this.ATK+=parseFloat(d.atk)+p*parseFloat(d.atkup)),d.def&&(this.DEF+=parseFloat(d.def)+p*parseFloat(d.defup)),d.hp&&(this.HP+=parseFloat(d.hp)+p*parseFloat(d.hpup)),d.ls&&(this.LS+=parseFloat(d.ls)+p*parseFloat(d.lsup)),d.sp&&(this.SP+=parseFloat(d.sp)+p*parseFloat(d.spup)),d.cr&&(this.CR+=parseFloat(d.cr)+p*parseFloat(d.crup)),d.arp&&(this.ARP+=parseFloat(d.arp)+p*parseFloat(d.arpup)),d.Bonus&&(this.BONUS+=parseFloat(d.bonus)+p*parseFloat(d.bonusup)),d.cd&&(this.CD+=parseFloat(d.cd)+p*parseFloat(d.cdup)),d.miss&&(this.MISS+=parseFloat(d.miss)+p*parseFloat(d.missup)),d.exp&&(this.EXP+=parseFloat(d.exp)+p*parseFloat(d.expup)),d.gold&&(this.GOLD+=parseFloat(d.gold)+p*parseFloat(d.goldup)),u<5)){var h=s.getSoulId(c[u]);if(0!=h){var f=s.getSoulDataById(h-1);f.atk&&(this.ATK+=parseFloat(f.atk)),f.def&&(this.DEF+=parseFloat(f.def)),f.hp&&(this.HP+=parseFloat(f.hp)),f.ls&&(this.LS+=parseFloat(f.ls)),f.sp&&(this.SP+=parseFloat(f.sp)),f.cr&&(this.CR+=parseFloat(f.cr)),f.arp&&(this.ARP+=parseFloat(f.arp)),f.Bonus&&(this.BONUS+=parseFloat(f.bonus)),f.cd&&(this.CD+=parseFloat(f.cd)),f.miss&&(this.MISS+=parseFloat(f.miss)),f.exp&&(this.EXP+=parseFloat(f.exp)),f.gold&&(this.GOLD+=parseFloat(f.gold))}}}for(u=0;u<o.default.instance.BookArrs.length;u++){var g=s.getDataById(o.default.instance.BookArrs[u]);g.atk&&(this.ATK+=parseFloat(g.atk)),g.def&&(this.DEF+=parseFloat(g.def)),g.hp&&(this.HP+=parseFloat(g.hp)),g.ls&&(this.LS+=parseFloat(g.ls)),g.sp&&(this.SP+=parseFloat(g.sp)),g.cr&&(this.CR+=parseFloat(g.cr)),g.arp&&(this.ARP+=parseFloat(g.arp)),g.Bonus&&(this.BONUS+=parseFloat(g.bonus)),g.cd&&(this.CD+=parseFloat(g.cd)),g.miss&&(this.MISS+=parseFloat(g.miss)),g.exp&&(this.EXP+=parseFloat(g.exp)),g.gold&&(this.GOLD+=parseFloat(g.gold))}this.CE=this.getCE()},t.prototype.buff=function(){this.updateAttribute(),c.default.instance&&(this.ATK*=1.2*c.default.instance.reviveCount,this.DEF*=1.2*c.default.instance.reviveCount,cc.log(this.ATK,this.DEF))},t.prototype.setTempHP=function(){this.tempHP=200+35*(o.default.instance.Level-1)},t.prototype.setArmor=function(t){0!=s.getWhoId(t)&&s.getWhoId(t)!=this.Type+1||(this.Armor=t,this.saveData())},t.prototype.setWing=function(t){this.Wing=t,this.saveData()},t.prototype.setOrnament=function(t){this.Ornament=t,this.saveData()},t.prototype.setWeapon=function(t){0!=s.getWhoId(t)&&s.getWhoId(t)!=this.Type+1||(this.Weapon=t,this.saveData())},t.prototype.setRing=function(t){this.Ring=t,this.saveData()},t.prototype.setEquip=function(t,e){switch(t){case 1:this.setWeapon(e);break;case 2:this.setArmor(e);break;case 3:this.setRing(e);break;case 4:this.setOrnament(e);break;case 5:this.setWing(e)}},t.prototype.getDataByType=function(t){switch(t){case 1:return this.Weapon;case 2:return this.Armor;case 3:return this.Ring;case 4:return this.Ornament;case 5:return this.Wing}},t.prototype.setSkillArrs=function(t){this.SkillArrs=t,this.saveData()},t.prototype.getType=function(){return this.Type},t.prototype.getCE=function(){var t;if((t=30*this.ATK+50*this.SP+500*this.CR+700*this.BONUS+150*this.CD+100*this.MISS+2*this.DEF+this.HP+600*this.LS)>this.CE){var e=this.CE+"\u4e0a"+(t-this.CE);r.default.instance.showSuccess(e)}return t>o.default.instance.HighestCE&&(o.default.instance.setHighestCE(t),o.default.instance.saveHeroGlobal(),l.default.getInstance().reportRank(l.default.RANKLIST.\u6218\u529b\u699c,t),u.getPlatform()!=u.Platform.WX&&u.getPlatform()!=u.Platform.QQ||d.default.uploadWXKill(t)),Math.floor(t)},t.prototype.saveData=function(){if(this.updateAttribute(),a.default.instance&&null!=a.default.instance.selectIndex&&void 0!=a.default.instance.selectIndex?cc.director.emit("RefreshSp",a.default.instance.selectIndex):cc.director.emit("RefreshSp",o.default.instance.MainHeroIndex),null!=this.Type){var t={Armor:this.Armor,Wing:this.Wing,Ring:this.Ring,Ornament:this.Ornament,Weapon:this.Weapon,SkillArrs:this.SkillArrs};i.save("HeroData"+this.Type,JSON.stringify(t))}},t}();n.default=p,cc._RF.pop()},{"../MenuSelect":"MenuSelect","../Others/Rank/RankWX":"RankWX","../Tips":"Tips","../Tool/Statistics":"Statistics","../nativets/Config":"Config","../nativets/Platform":"Platform","../nativets/SaveMgr":"SaveMgr","./Hero":"Hero","./HeroGlobal":"HeroGlobal"}],HeroFSM:[function(t,e,n){"use strict";cc._RF.push(e,"d798anw0gNAhYMbwahbp3FO","HeroFSM");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../lib/state-machine.min.js"),s=t("../nativets/Global"),r=t("./Hero"),c=t("../Audio"),l=t("../SkillMgr"),u=t("./HeroGlobal"),d=t("../BizarreAdventure/BizarreAdventure"),p=cc._decorator,h=p.ccclass,f=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jumpRotateCount=4,e.jumpCount=1,e.finalList=0,e}var n;return i(e,t),n=e,e.prototype.initInstance=function(){n.instance=this},e.prototype.init=function(){var t=this;this.sk=this.node.getComponent(sp.Skeleton),this.sk.setCompleteListener(function(){if(!t.fsm.is("state_move")&&!t.fsm.is("state_stand")){if(t.fsm.is("state_jumpattack")){if(t.jumpRotateCount>0)return t.jumpRotateCount--,r.default.instance.attackRotate(),0==u.default.instance.MainHeroIndex&&c.default.instance.playAudio(s.default.getInstance().ZYAudio.\u653b\u51fb1),void(1==u.default.instance.MainHeroIndex&&(t.sk.setAnimation(0,"jump_middle_attack",!0),l.default.instance.create("jump_middle_attack"),c.default.instance.playAudio(s.default.getInstance().DCAudio.\u8df3\u653b)));s.default.getInstance().gravity=4e3,cc.director.emit("MapActionBase")}if(t.fsm.is("state_jump")&&t.jumpCount>0)return t.jumpCount--,void t.sk.setAnimation(0,"jump_middle",!1);t.sk.animation,"skill_shunyi+gongji"==t.sk.animation&&(r.default.instance.node.scaleX=-r.default.instance.node.scaleX),t.sk.animation,"win"==t.sk.animation&&(d.default.instance.node.active=!0),t.fsm.can("stop")&&t.fsm.stop()}}),this.sk.setEventListener(function(e,n){var i=n.data.name;"gongji1"==i&&(s.default.getInstance().comboFlag=!1,r.default.instance.attack()),"gongji2"==i&&(s.default.getInstance().comboFlag=!1,s.default.getInstance().attackMove=!1,r.default.instance.attack()),"gongji4"!=i&&"gongji5"!=i&&"gongji6"!=i||(s.default.getInstance().attackMove=!1,cc.director.emit("MapAction"),"gongji5"==i&&0==u.default.instance.MainHeroIndex&&r.default.instance.attackZYFinal(),"gongji6"==i&&(r.default.instance.attackZYFinal(),c.default.instance.playAudio(s.default.getInstance().ZYAudio.\u88c2\u5730))),"gongji_jianyu"==i&&(cc.log("\u5bd2\u51b0\u98ce\u66b4"),t.scheduleOnce(function(){c.default.instance.playAudio(s.default.getInstance().DCAudio.\u5bd2\u51b0\u98ce\u66b4)},.06),t.scheduleOnce(function(){l.default.instance.create("texiao_jianyu")},.2))}),this.fsm=new a({init:"state_stand",transitions:[{name:"reset",from:"*",to:"state_stand"},{name:"move",from:"state_stand",to:"state_move"},{name:"jump",from:["state_stand","state_move","state_attack","state_attack1","state_attack2"],to:"state_jump"},{name:"attack",from:"state_jump",to:"state_jumpattack"},{name:"attack",from:["state_stand","state_move"],to:"state_attack"},{name:"attack",from:["state_attack"],to:"state_attack1"},{name:"attack",from:["state_attack1"],to:"state_attack2"},{name:"attack",from:["state_attack2"],to:"state_attack"},{name:"heavy",from:["state_stand","state_move"],to:"state_heavy"},{name:"spin",from:["state_stand","state_move"],to:"state_spin"},{name:"double",from:["state_stand","state_move"],to:"state_double"},{name:"ten",from:["state_stand","state_move"],to:"state_ten"},{name:"skill",from:["state_stand","state_move","state_flash"],to:"state_skill"},{name:"skill1",from:["state_stand","state_move"],to:"state_skill1"},{name:"skill2",from:["state_stand","state_move"],to:"state_skill2"},{name:"flash",from:["state_stand","state_move","state_attack","state_attack1","state_attack2","state_skill","state_skill1","state_skill2"],to:"state_flash"},{name:"block",from:["state_stand","state_move","state_attack","state_attack1","state_attack2","state_skill","state_skill1","state_skill2"],to:"state_block"},{name:"stop",from:["state_attack","state_attack1","state_attack2","state_heavy","state_spin","state_double","state_skill","state_skill1","state_skill2","state_ten","state_move","state_hit","state_flash","state_jump","state_jumpattack","state_show","state_win"],to:"state_stand"},{name:"hit",from:["state_attack","state_attack1","state_attack2","state_heavy","state_spin","state_double","state_skill1","state_skill2","state_ten","state_move","state_stand","state_jump","state_jumpattack"],to:"state_hit"},{name:"dead",from:["state_hit"],to:"state_dead"},{name:"show",from:"*",to:"state_show"},{name:"win",from:"*",to:"state_win"}],methods:{onLeaveStateAttack:function(){s.default.getInstance().comboFlag=!1},onLeaveStateAttack1:function(){s.default.getInstance().comboFlag=!1,s.default.getInstance().attackMove=!1},onLeaveStateAttack2:function(){s.default.getInstance().comboFlag=!1,s.default.getInstance().attackMove=!1},onShow:function(){t.sk.setAnimation(0,"show",!1)},onWin:function(){t.sk.setAnimation(0,"win",!0),c.default.instance.stopBgm("game"),c.default.instance.playAudio("Win")},onReset:function(){t.sk.setAnimation(0,"stay",!0),c.default.instance.stopAudio(s.default.getInstance().ZYAudio.\u884c\u8d70)},onMove:function(){t.sk.setAnimation(0,"run",!0),t.finalList=0,c.default.instance.playAudio(s.default.getInstance().ZYAudio.\u884c\u8d70)},onJump:function(){t.sk.setAnimation(0,"jump_start",!1),t.jumpCount=1},onAttack:function(){if(c.default.instance.stopAudio(s.default.getInstance().ZYAudio.\u884c\u8d70),s.default.getInstance().comboFlag=!0,t.fsm.is("state_attack")){var e="";t.sk.setAnimation(0,"attack_a"+e,!1),2==u.default.instance.MainHeroIndex&&l.default.instance.create("attack_a"),0==u.default.instance.MainHeroIndex&&c.default.instance.playAudio(s.default.getInstance().ZYAudio.\u653b\u51fb1)}else if(t.fsm.is("state_attack1")){e="";t.sk.setAnimation(0,"attack_b"+e,!1),2==u.default.instance.MainHeroIndex&&l.default.instance.create("attack_b"),0==u.default.instance.MainHeroIndex&&c.default.instance.playAudio(s.default.getInstance().ZYAudio.\u653b\u51fb2),s.default.getInstance().attackMove=!0}else if(t.fsm.is("state_attack2")){e="attack_e";switch(Math.random()<.5&&(e="attack_f"),Math.floor(3*Math.random())){case 0:e="attack_e",0==u.default.instance.MainHeroIndex&&c.default.instance.playAudio(s.default.getInstance().ZYAudio.\u653b\u51fb3\u591a\u6bb5);break;case 1:e="attack_f",0==u.default.instance.MainHeroIndex&&c.default.instance.playAudio(s.default.getInstance().ZYAudio.\u653b\u51fb3\u4e0a\u6311);break;case 2:e="attack_g"}if(t.finalList++,0==u.default.instance.MainHeroIndex?t.sk.setAnimation(0,e,!1):t.sk.setAnimation(0,"attack_e",!1),2==u.default.instance.MainHeroIndex){var n="attack_e";Math.random()<.5&&(n="attack_c"),l.default.instance.create(n)}s.default.getInstance().attackMove=!0,r.default.instance.attackFinal()}else if(t.fsm.is("state_jumpattack"))if(t.sk.setAnimation(0,"jump_middle_attack",!0),l.default.instance.create("jump_middle_attack"),0==u.default.instance.MainHeroIndex)c.default.instance.playAudio(s.default.getInstance().ZYAudio.\u653b\u51fb1),t.jumpRotateCount=3;else if(1==u.default.instance.MainHeroIndex){var i=.1;t.node.y<-100&&(i=.3),cc.log("actTime",i);var o=cc.sequence(cc.moveTo(i,cc.v2(t.node.x,60)),cc.callFunc(function(){c.default.instance.playAudio(s.default.getInstance().DCAudio.\u8df3\u653b),t.jumpRotateCount=1}));t.node.runAction(o)}},onHeavy:function(){cc.log("heavy")},onSpin:function(){cc.log("spin")},onDouble:function(){cc.log("double")},onFlash:function(){cc.log("flash"),t.scheduleOnce(function(){n.instance.fsm.can("skill")&&"skill_shunyi+gongji"==t.sk.animation&&(n.instance.fsm.skill(),l.default.instance.create("skill_shunyi+gongji"))},.8)},onBlock:function(){cc.log("block")},onSkill1:function(){},onSkill2:function(){},onStop:function(){s.default.getInstance().comboFlag=!1,t.sk.setAnimation(0,"stay",!0),c.default.instance.stopAudio(s.default.getInstance().ZYAudio.\u884c\u8d70)},onHit:function(){t.sk.setAnimation(0,"hurt",!0),c.default.instance.stopAudio(s.default.getInstance().ZYAudio.\u884c\u8d70)},onDead:function(){t.sk.setAnimation(0,"lose",!0),c.default.instance.stopAudio(s.default.getInstance().ZYAudio.\u884c\u8d70),r.default.instance.afterDead()}}})},e.prototype.start=function(){this.init()},e.prototype.canJump=function(){return!(!this.fsm.is("state_stand")&&!this.fsm.is("state_move"))},e.prototype.canPushAway=function(){return!!(this.fsm.is("state_attack1")||this.fsm.is("state_attack2")||this.fsm.is("state_heavy")||this.fsm.is("state_spin"))},e.prototype.isAttack=function(){return!!(this.fsm.is("state_attack")||this.fsm.is("state_attack1")||this.fsm.is("state_attack2"))},e.prototype.isHyperArmor=function(){return!!(this.fsm.is("state_heavy")||this.fsm.is("state_ten")||this.fsm.is("state_attack2"))},e.prototype.isMulti=function(){return!(!this.fsm.is("state_double")&&!this.fsm.is("state_ten"))},e.prototype.isWin=function(){return!!this.fsm.is("state_win")},e.prototype.update=function(t){},e.instance=null,e=n=o([h],e)}(cc.Component));n.default=f,cc._RF.pop()},{"../Audio":"Audio","../BizarreAdventure/BizarreAdventure":"BizarreAdventure","../SkillMgr":"SkillMgr","../lib/state-machine.min.js":"state-machine.min","../nativets/Global":"Global","./Hero":"Hero","./HeroGlobal":"HeroGlobal"}],HeroGlobal:[function(t,e,n){"use strict";cc._RF.push(e,"63436gcd41F2b7kG58jupZM","HeroGlobal");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../nativets/Config"),s=t("../nativets/SaveMgr"),r=t("./HeroData"),c=t("../nativets/Global"),l=t("../Tool/Sort"),u=t("../Tool/Statistics"),d=cc._decorator,p=d.ccclass,h=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.MonsterKillCount=0,e.HeroDataArrs=[],e.EffectSwitch=!0,e.BgmSwitch=!0,e.Level=0,e.StarCount=0,e.isGod=!1,e}var n;return i(e,t),n=e,e.prototype.init=function(){this.loadEquipmentArrs()},e.prototype.onLoad=function(){n.instance=this,this.init()},e.prototype.start=function(){},e.prototype.onGameStart=function(){for(var t=0;t<3;t++)this.HeroDataArrs[t].setTempHP()},e.prototype.loadEquipmentArrs=function(){var t=s.load("EquipmentArrs");t?this.setEquipmentArrs(JSON.parse(t)):this.setEquipmentArrs(null)},e.prototype.setEquipmentArrs=function(t){t?(this.WeaponArrs=t.WeaponArrs,this.ArmorArrs=t.ArmorArrs,this.RingArrs=t.RingArrs,this.OrnamentArrs=t.OrnamentArrs,this.WingArrs=t.WingArrs,this.PetLvArrs=t.PetLvArrs,this.SoulArrs=t.SoulArrs,t.BookArrs?this.BookArrs=t.BookArrs:this.BookArrs=[]):(this.WeaponArrs=[11101e4,12104e4,13107e4],this.ArmorArrs=[21101e4,22104e4,23107e4],this.RingArrs=[],this.OrnamentArrs=[],this.WingArrs=[],this.PetLvArrs=[0,0,0],this.BookArrs=[],this.SoulArrs=[60108],this.WeaponArrs.sort(l.default),cc.log(this.WeaponArrs),this.ArmorArrs.sort(l.default),this.RingArrs.sort(l.default),this.OrnamentArrs.sort(l.default),this.WingArrs.sort(l.default),this.SoulArrs.sort(l.default))},e.prototype.saveEquipmentArrs=function(){var t={WeaponArrs:this.WeaponArrs,ArmorArrs:this.ArmorArrs,RingArrs:this.RingArrs,SoulArrs:this.SoulArrs,OrnamentArrs:this.OrnamentArrs,WingArrs:this.WingArrs,PetLvArrs:this.PetLvArrs,BookArrs:this.BookArrs};s.save("EquipmentArrs",JSON.stringify(t))},e.prototype.setExp=function(t){this.Exp=t;var e=this.getIndex(t,a.Exp);this.AchieveCountData&&(this.AchieveCountData[9]=e),this.Level=e,e>=2&&(this.SkillCount=2),e>=5&&(this.SkillCount=3),e>=10&&(this.SkillCount=4),e>=15&&(this.SkillCount=5)},e.prototype.setCoins=function(t){this.Coins=t,this.refreshCoins()},e.prototype.setLife=function(t){this.Life=t},e.prototype.setJade=function(t){t||(t=20),this.Jade=t},e.prototype.setUnlock=function(t){this.PetLvArrs[0]<1&&t>19&&this.unlockPet(2),this.Unlock=t,c.default.getInstance().unlockDifficulty=Math.floor((t-1)/40),c.default.getInstance().gameDifficulty=c.default.getInstance().unlockDifficulty},e.prototype.setHeroIndex=function(t,e){this.MainHeroIndex=t,this.OtherHeroIndex=e},e.prototype.setPetIndex=function(t){this.PetIndex=t},e.prototype.setHeroData=function(t,e){this.HeroDataArrs[t]=new r.default(t,e)},e.prototype.setMonsterKillCount=function(t){this.MonsterKillCount=t},e.prototype.setHighestCE=function(t){this.HighestCE=t},e.prototype.setAchieveCountData=function(t){this.AchieveCountData=t},e.prototype.setAchieveGetCountData=function(t){this.AchieveGetCountData=t},e.prototype.pushEquipmentData=function(t){var e=a.getTypeId(t),n=this.getDataArrsByIndex(e);n.push(t),n.sort(l.default)},e.prototype.setHeroGlobal=function(t){this.setExp(t.Exp),this.setCoins(t.Coins),this.setLife(t.Life),this.setJade(t.Jade),this.setUnlock(t.Unlock),this.setHeroIndex(t.MainHeroIndex,t.OtherHeroIndex),this.setPetIndex(t.PetIndex),t.MonsterKillCount?this.setMonsterKillCount(t.MonsterKillCount):this.setMonsterKillCount(0),t.HighestCE?this.setHighestCE(t.HighestCE):this.setHighestCE(0),t.AchieveCountData?this.setAchieveCountData(t.AchieveCountData):this.setAchieveCountData([1,0,0,0,0,0,0,0,0,0]),t.AchieveGetCountData?this.setAchieveGetCountData(t.AchieveGetCountData):this.setAchieveGetCountData([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])},e.prototype.initMapBox=function(){this.MapBox=[];for(var t=0;t<12;t++){this.MapBox[t]=[];for(var e=0;e<3;e++)this.MapBox[t].push(0)}},e.prototype.setMapBox=function(t){this.MapBox=t,s.save("MapBox",JSON.stringify(t))},e.prototype.initMapData=function(){this.MapData=[[],[],[]];for(var t=0;t<3;t++)for(var e=0;e<40;e++)this.MapData[t].push(0)},e.prototype.setMapData=function(t){this.MapData=t;for(var e=0,n=0;n<3;n++)for(var i=0;i<this.MapData[n].length;i++){var o=this.MapData[n][i];if(0==o)break;e+=o}this.StarCount=e,u.default.getInstance().reportRank(u.default.RANKLIST.\u901a\u5173\u699c,e),s.save("MapData",JSON.stringify(t))},e.prototype.saveHeroGlobal=function(){var t={Exp:this.Exp,Life:this.Life,Coins:this.Coins,Jade:this.Jade,Unlock:this.Unlock,MainHeroIndex:this.MainHeroIndex,OtherHeroIndex:this.OtherHeroIndex,PetIndex:this.PetIndex,MonsterKillCount:this.MonsterKillCount,HighestCE:this.HighestCE,AchieveCountData:this.AchieveCountData,AchieveGetCountData:this.AchieveGetCountData};s.save("HeroGlobal",JSON.stringify(t))},e.prototype.saveMapData=function(){s.save("MapData",JSON.stringify({data:this.MapData}))},e.prototype.refreshCoins=function(){cc.director.emit("RefreshCoins")},e.prototype.refreshLife=function(){cc.director.emit("RefreshLife")},e.prototype.getMainHeroData=function(){return this.HeroDataArrs[this.MainHeroIndex]},e.prototype.getOtherHeroData=function(){return this.HeroDataArrs[this.OtherHeroIndex]},e.prototype.unlockPet=function(t){this.PetLvArrs[t]<1&&(this.PetLvArrs[t]=1,this.saveEquipmentArrs(),this.PetIndex<0&&(this.PetIndex=t,this.saveHeroGlobal()))},e.prototype.getDataArrsByIndex=function(t){switch(t){case 1:return this.WeaponArrs;case 2:return this.ArmorArrs;case 3:return this.RingArrs;case 4:return this.OrnamentArrs;case 5:return this.WingArrs;case 6:return this.SoulArrs;case 7:return this.BookArrs}},e.prototype.getIndex=function(t,e){for(var n=e.length-1;n>=0;n--)if(t>=e[n])return n+2;return 1},e.prototype.getProgress=function(t){var e=0;return this.getIndex(this.Exp-t,a.Exp)<this.Level&&(e=this.Level-this.getIndex(this.Exp-t,a.Exp)),this.Level-e==1?(this.Exp-t)/a.Exp[0]:this.Level-e>1&&this.Level-e<100?(this.Exp-t-a.Exp[this.Level-e-2])/(a.Exp[this.Level-e-1]-a.Exp[this.Level-e-2]):this.Level-e==100?1:void 0},e.instance=null,e=n=o([p],e)}(cc.Component));n.default=h,cc._RF.pop()},{"../Tool/Sort":"Sort","../Tool/Statistics":"Statistics","../nativets/Config":"Config","../nativets/Global":"Global","../nativets/SaveMgr":"SaveMgr","./HeroData":"HeroData"}],HeroHit:[function(t,e,n){"use strict";cc._RF.push(e,"9e580pn7KdFzoille/JRgRE","HeroHit");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./Hero"),s=t("./HeroFSM"),r=t("../BulletItem"),c=t("../Map/Box"),l=t("../ComboMgr"),u=cc._decorator,d=u.ccclass,p=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){},e.prototype.onCollisionEnter=function(t,e){var n=a.default.instance.ATK-Math.floor(5*Math.random());0!=e.tag&&(cc.log("SKILLDMG"),n=e.tag*a.default.instance.ATK*.01);var i=a.default.instance.isCR;i=Math.random()<.2;s.default.instance.canPushAway();if(t.node.emit("Hit",n,i,!1),a.default.instance.onBS(n,i),this.node.getComponent(r.default)&&this.node.getComponent(r.default).unuse(),"box"!=t.node.parent.name){if("tower"==t.node.parent.name)return t.node.parent.destroy(),void cc.director.emit("TowerDestroy");a.default.instance.bloodAnim.node.x=t.node.parent.x,a.default.instance.bloodAnim.play(),l.default.instance.attack()}else t.node.parent.getComponent(c.default).openBox()},e=o([d],e)}(cc.Component));n.default=p,cc._RF.pop()},{"../BulletItem":"BulletItem","../ComboMgr":"ComboMgr","../Map/Box":"Box","./Hero":"Hero","./HeroFSM":"HeroFSM"}],HeroPet:[function(t,e,n){"use strict";cc._RF.push(e,"b7ab4Nk1M5KUahGDev10vAB","HeroPet");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../nativets/Global"),s=t("./Hero"),r=t("../Reward/RewardMgr"),c=t("../Audio"),l=cc._decorator,u=l.ccclass,d=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.updateCount=0,e.move=0,e.speed=500,e.followDistance=170,e}var n;return i(e,t),n=e,e.prototype.init=function(){var t=this;n.instance=this,this.petSk=this.node.getComponent(sp.Skeleton),this.petSk.setCompleteListener(function(){"claim"==t.petSk.animation&&t.petSk.setAnimation(0,"fly",!0)})},e.prototype.pickup=function(){c.default.instance.playAudio("GetCoins"),s.default.instance.showCoins(1),this.petSk.setAnimation(0,"claim",!1)},e.prototype.onLoad=function(){this.init()},e.prototype.start=function(){},e.prototype.getCloseCoin=function(){for(var t=9e3,e=-1,n=0;n<r.default.instance.unColleted.length;n++){var i=r.default.instance.unColleted[n],o=this.getDistance(i);o<t&&(t=o,e=n)}return-1!=e?r.default.instance.unColleted[e]:null},e.prototype.getDistance=function(t){return Math.abs(this.node.x-t.x)},e.prototype.petUpdate=function(){if(r.default.instance.unColleted.length>0){var t=this.getCloseCoin();t&&(this.node.x<t.x?this.node.scaleX=.56:this.node.scaleX=-.56,this.getDistance(t)>10?this.node.scaleX<0?this.move=-1:this.move=1:this.move=0)}else this.node.x<s.default.instance.node.x?this.node.scaleX=.56:this.node.scaleX=-.56,this.getDistance(s.default.instance.node)>this.followDistance?this.node.scaleX<0?this.move=-1:this.move=1:this.move=0},e.prototype.emitEvent=function(t){this.lastX==this.node.x&&0==r.default.instance.unColleted.length||(this.lastX=this.node.x,t&&(this.lastX=s.default.instance.node.x),cc.director.emit("PetMove",this.lastX))},e.prototype.update=function(t){if(a.default.getInstance().inGame){if(!this.petSk.skeletonData)return this.updateCount++,void(10==this.updateCount&&(this.updateCount=0,this.emitEvent(!0)));switch(this.petUpdate(),this.updateCount++,10==this.updateCount&&(this.updateCount=0,this.emitEvent()),this.move){case-1:this.node.x-=this.speed*t;break;case 1:this.node.x+=this.speed*t}}},e.instance=null,e=n=o([u],e)}(cc.Component));n.default=d,cc._RF.pop()},{"../Audio":"Audio","../Reward/RewardMgr":"RewardMgr","../nativets/Global":"Global","./Hero":"Hero"}],HeroSPSet:[function(t,e,n){"use strict";cc._RF.push(e,"ad304WygPNB/pGp846R6g0r","HeroSPSet");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./HeroGlobal"),s=t("../nativets/Config"),r=cc._decorator,c=r.ccclass,l=(r.property,[["AF","AE","BX","BW","GY","CY","OY","KY","CYY","HY","EY","OX","KX","P","B"],["AF","AE","BX","BY","GY","HY","EY","OX","KX","P","PH","PHH"],["AF","AQF","AHF","AE","AFS","BY","BOY","BKY","BYY","GY","HY","EY","OY","KY","OX","KX"]]),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(){this.sk=this.node.getComponent(sp.Skeleton),cc.director.on("RefreshSp",this.onRefresh,this)},e.prototype.start=function(){this.init()},e.prototype.setWeaponSlot=function(t){this.Weapon!=t&&this.sk.setSkin("00"+(s.getLvId(t)+0))},e.prototype.setArmorSlot=function(t,e){if(this.Armor!=e)for(var n=l[t],i="00"+(s.getLvId(e)+0),o=0;o<n.length;o++)this.setSpineSLot(i,n[o])},e.prototype.setWingSlot=function(t){if(cc.log("WIng",t),this.Wing!=t)if(-1==t)this.sk.findSlot("chibang_zuo").setAttachment(null),this.sk.findSlot("chibang_you").setAttachment(null);else{var e=t,n=s.getIndexId(e);this.sk.findSlot("chibang_zuo").setAttachment(this.getAttachment("00"+n,"chibang_zuo")),this.sk.findSlot("chibang_you").setAttachment(this.getAttachment("00"+n,"chibang_you"))}},e.prototype.setSpineSLot=function(t,e){this.sk&&this.sk.findSlot(e)&&this.sk.findSlot(e).setAttachment(this.getAttachment(t,e))},e.prototype.getAttachment=function(t,e){this.skData=this.sk.skeletonData.getRuntimeData();var n=this.skData.findSkin(t),i=this.skData.findSlotIndex(e);return n.getAttachment(i,e)},e.prototype.onRefresh=function(t){var e=a.default.instance.HeroDataArrs[t];this.setWeaponSlot(e.Weapon),this.setWingSlot(e.Wing),this.setArmorSlot(t,e.Armor)},e.prototype.onDestroy=function(){cc.director.off("RefreshSp",this.onRefresh,this)},e=o([c],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../nativets/Config":"Config","./HeroGlobal":"HeroGlobal"}],HeroSkill:[function(t,e,n){"use strict";cc._RF.push(e,"802d63GFl5EeK9fNRpBMbsu","HeroSkill");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../SkillMgr"),s=t("./Hero"),r=t("./HeroFSM"),c=t("./HeroGlobal"),l=t("../Game"),u=t("../Audio"),d=t("../nativets/Global"),p=t("../nativets/Config"),h=cc._decorator,f=h.ccclass,g=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playing=!1,e}return i(e,t),e.prototype.init=function(){var t=this;this.sk=this.node.getComponent(sp.Skeleton),this.hit=this.node.getChildByName("hit"),this.hitBox=this.hit.getComponent(cc.BoxCollider),this.hitBox||(this.hitBox=this.hit.getComponent(cc.CircleCollider)),this.hitaoe=this.node.getChildByName("hitaoe"),this.hitaoeBox=this.hitaoe.getComponent(cc.BoxCollider),this.hitaoeBox||(this.hitaoeBox=this.hitaoe.getComponent(cc.CircleCollider)),this.hitall=this.node.getChildByName("hitall"),this.hitall&&(this.hitallBox=this.hitall.getComponent(cc.BoxCollider)),this.hitjump=this.node.getChildByName("hitjump"),this.sk&&this.sk.setCompleteListener(function(){"skill_guangbo"==t.sk.animation&&(t.hit.active=!1),t.stop()}),this.isFollowHero=!1,cc.director.on("GameStart",this.stop,this)},e.prototype.onLoad=function(){this.init()},e.prototype.play=function(t){var e=this;switch(this.node.opacity=255,this.sk&&this.sk.setAnimation(0,t,!1),this.playing=!0,t){case"skill_guangbo":this.hitBox.tag=this.getDmgByIndex(p.HeroSkillName[c.default.instance.MainHeroIndex].indexOf(t)),u.default.instance.playAudio(d.default.getInstance().DCAudio.\u5ba1\u5224),this.scheduleOnce(function(){e.hit.active=!0,e.bone=e.sk.findSlot("guangbo").bone,e.hit.y=e.bone.worldY},.5);break;case"attack_a":case"attack_b":2==c.default.instance.MainHeroIndex&&(u.default.instance.playAudio(d.default.getInstance().DQAudio.\u653b\u51fb1),this.node.y+=20,this.hit.active=!0,this.bone=this.sk.findBone("qiou"),this.bone&&this.bone.worldY&&(this.hit.y=this.bone.worldY));break;case"attack_c":2==c.default.instance.MainHeroIndex&&(this.hit.active=!0,this.bone=this.sk.findBone("fenghuang"),u.default.instance.playAudio(d.default.getInstance().DQAudio.\u653b\u51fb3),this.bone&&this.bone.worldY&&(this.hit.y=this.bone.worldY));break;case"attack_e":this.hitBox.tag=this.getDmgByIndex(p.HeroSkillName[c.default.instance.MainHeroIndex].indexOf(t)),2!=c.default.instance.MainHeroIndex?this.scheduleOnce(function(){e.hit.active=!0,e.bone=e.sk.findSlot("arrow").bone,e.hit.y=e.bone.worldY},.1):(u.default.instance.playAudio(d.default.getInstance().DQAudio.\u653b\u51fb2),this.hit.active=!0,this.bone=this.sk.findBone("acttack_guangqiou"),this.bone&&this.bone.worldY&&(this.hit.y=this.bone.worldY));break;case"texiao_jianyu":this.hitaoeBox.tag=this.getDmgByIndex(p.HeroSkillName[c.default.instance.MainHeroIndex].indexOf(t)),this.scheduleOnce(function(){e.hitaoe.active=!0},.3);break;case"skill_duochongjian":this.hitBox.tag=this.getDmgByIndex(p.HeroSkillName[c.default.instance.MainHeroIndex].indexOf(t)),u.default.instance.playAudio(d.default.getInstance().DCAudio.\u591a\u91cd\u7bad),this.hit.active=!0,this.bone=this.sk.findBone("jianqi2");break;case"skill_shunyi+gongji":this.hitBox.tag=this.getDmgByIndex(p.HeroSkillName[c.default.instance.MainHeroIndex].indexOf(t)),this.node.opacity=0,this.hit.active=!0,this.hit.y=20,this.heroBone=r.default.instance.sk.findBone("jianqi");break;case"jump_middle_attack":1==c.default.instance.MainHeroIndex?(this.hit.active=!0,this.hit.y=20,this.bone=this.sk.findBone("jianqi2")):2==c.default.instance.MainHeroIndex?(u.default.instance.playAudio(d.default.getInstance().DQAudio.\u8df3\u653b),this.hitjump.active=!0,this.isFollowHero=!0):this.stop();break;case"skill_leidian":this.hitaoeBox.tag=this.getDmgByIndex(p.HeroSkillName[c.default.instance.MainHeroIndex].indexOf(t)),this.schedule(function(){e.hitaoe.active=!0,e.scheduleOnce(function(){e.hitaoe.active=!1})},.2,4,.7),this.schedule(function(){u.default.instance.playAudio(d.default.getInstance().ZYAudio.\u96f7\u51fb)},.2,4,.9),this.scheduleOnce(function(){e.stop()},1.6);break;case"skill_leidongjiutian":this.hitaoeBox.tag=this.getDmgByIndex(p.HeroSkillName[c.default.instance.MainHeroIndex].indexOf(t)),this.schedule(function(){e.hitaoe.active=!0,e.scheduleOnce(function(){e.hitaoe.active=!1})},.2,4,1.5),this.scheduleOnce(function(){u.default.instance.playAudio(d.default.getInstance().ZYAudio.\u96f7\u52a8\u4e5d\u5929)},1),this.scheduleOnce(function(){e.stop()},1.6);break;case"skill_pd":this.hitBox.tag=this.getDmgByIndex(p.HeroSkillName[c.default.instance.MainHeroIndex].indexOf(t)),u.default.instance.playAudio(d.default.getInstance().ZYAudio.\u5288\u5730),this.scheduleOnce(function(){e.hit.active=!0},.7),this.scheduleOnce(function(){e.stop()},.72);break;case"skill_shunyi":this.hitBox.tag=this.getDmgByIndex(p.HeroSkillName[c.default.instance.MainHeroIndex].indexOf(t)),u.default.instance.playAudio(d.default.getInstance().ZYAudio.\u77ac\u79fb),s.default.instance.hitbody.active=!0,this.scheduleOnce(function(){s.default.instance.hitbody.active=!1,e.stop()},.8);break;case"skill_dipotianxing":u.default.instance.playAudio(d.default.getInstance().DQAudio.\u5730\u7206\u5929\u661f),this.hitallBox.tag=this.getDmgByIndex(p.HeroSkillName[c.default.instance.MainHeroIndex].indexOf(t)),this.node.y=-200,this.schedule(function(){e.hitall.active=!0,e.scheduleOnce(function(){e.hitall.active=!1})},.2,8,1.2),this.scheduleOnce(function(){l.default.instance.node.getChildByName("bg").x=cc.find("Canvas").getChildByName("heroCamera").x,l.default.instance.node.getChildByName("bg").active=!0,e.scheduleOnce(function(){l.default.instance.node.getChildByName("bg").active=!1},2)},1.5);break;case"skill_heidong":u.default.instance.playAudio(d.default.getInstance().DQAudio.\u9ed1\u6d1e),this.hitallBox.tag=this.getDmgByIndex(p.HeroSkillName[c.default.instance.MainHeroIndex].indexOf(t)),this.node.y=-200,this.schedule(function(){e.hitall.active=!0,e.scheduleOnce(function(){e.hitall.active=!1})},.2,4,1.5),this.scheduleOnce(function(){l.default.instance.node.getChildByName("bg").x=cc.find("Canvas").getChildByName("heroCamera").x,l.default.instance.node.getChildByName("bg").active=!0,e.scheduleOnce(function(){l.default.instance.node.getChildByName("bg").active=!1},1)},1.2);break;case"skill_liuxingyu":u.default.instance.playAudio(d.default.getInstance().DQAudio.\u6d41\u661f\u96e8),this.hitaoeBox.tag=this.getDmgByIndex(p.HeroSkillName[c.default.instance.MainHeroIndex].indexOf(t)),this.node.y=-200,this.schedule(function(){e.hitaoe.active=!0,e.scheduleOnce(function(){e.hitaoe.active=!1})},.15,7,1.1);break;case"skill_yanlouzhan":this.scheduleOnce(function(){u.default.instance.playAudio(d.default.getInstance().DQAudio.\u708e\u843d\u65a9)},.5),this.hitaoeBox.tag=this.getDmgByIndex(p.HeroSkillName[c.default.instance.MainHeroIndex].indexOf(t)),this.node.y=-200,this.scheduleOnce(function(){e.hitaoe.active=!0,e.scheduleOnce(function(){e.stop()})},.7)}},e.prototype.stop=function(){this.hit&&(this.hit.active=!1,this.hitaoe.active=!1,this.isFollowHero=!1,this.hitjump&&(this.hitjump.active=!1),this.hitall&&(this.hitall.active=!1),this.playing=!1,this.hitBox.tag=0,this.hitaoeBox.tag=0,this.bone=null,this.heroBone=null,"dceffect"==this.node.name?a.default.instance.getSkillPool(1).put(this.node):"zyeffect"==this.node.name?a.default.instance.getSkillPool(0).put(this.node):a.default.instance.getSkillPool(2).put(this.node))},e.prototype.start=function(){},e.prototype.getDmgByIndex=function(t){var e=p.Skill[7*c.default.instance.MainHeroIndex+t],n=c.default.instance.HeroDataArrs[c.default.instance.MainHeroIndex].SkillArrs[t],i=parseFloat(e.dmg)+parseFloat(e.dmgup)*n;return i||0},e.prototype.update=function(t){this.playing&&(this.bone&&(this.hit.x=this.bone.worldX,this.hit.y=this.bone.worldY),this.heroBone&&(this.hit.x=this.heroBone.worldX,this.hit.x<-1500&&this.stop()),this.isFollowHero&&(this.node.x=s.default.instance.node.x+(s.default.instance.node.scaleX>0?200:-200)))},e.prototype.onDestroy=function(){cc.director.off("GameStart",this.stop,this)},e=o([f],e)}(cc.Component));n.default=g,cc._RF.pop()},{"../Audio":"Audio","../Game":"Game","../SkillMgr":"SkillMgr","../nativets/Config":"Config","../nativets/Global":"Global","./Hero":"Hero","./HeroFSM":"HeroFSM","./HeroGlobal":"HeroGlobal"}],Hero:[function(t,e,n){"use strict";cc._RF.push(e,"8f8b1gA5h5MO7Ysr3i2eAHv","Hero");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./HeroFSM"),s=t("../nativets/Global"),r=t("../Main"),c=t("../Audio"),l=t("../BulletMgr"),u=t("../SkillMgr"),d=t("./HeroGlobal"),p=t("../nativets/Config"),h=t("../Game"),f=t("../LifeProgress"),g=t("./HeroPet"),m=t("../BgMgr"),y=t("../Map/ArrowRain"),v=t("../Monster/Monster"),b=cc._decorator,A=b.ccclass,S=(b.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=400,e.NodeWidth=160,e.dmg=999,e.isCR=!1,e.nextFlag=!1,e.hurtSpace=0,e.checkPassSpace=0,e.checkPassCount=0,e}var n;return i(e,t),n=e,e.prototype.initInstance=function(){n.instance=this,this.node.getComponent(a.default).initInstance()},e.prototype.init=function(){this.hit=this.node.getChildByName("hit"),this.hitrotate=this.node.getChildByName("hitrotate"),this.hitfinal=this.node.getChildByName("hitfinal"),this.hitbody=this.node.getChildByName("hitbody"),this.hitbox=this.hit.getComponent(cc.BoxCollider),this.lifeProgress=h.default.instance.hudNode.getChildByName("icon").getChildByName("lifeProgress").getComponent(f.default),this.dmgNode=this.node.getChildByName("dmg"),this.dmgLabel=this.dmgNode.getComponent(cc.Label),this.bsNode=this.node.getChildByName("bs"),this.bsLabel=this.bsNode.getComponent(cc.Label),this.missNode=this.node.getChildByName("miss"),this.coinsNode=this.node.getChildByName("coins"),this.coinsLabel=this.coinsNode.getComponent(cc.Label),this.missNode.active=!1,this.material=this.node.getComponent(sp.Skeleton).getMaterial(0),this.showAudioArrs=[s.default.getInstance().ZYAudio.\u51fa\u573a,s.default.getInstance().DCAudio.\u51fa\u573a,s.default.getInstance().DQAudio.\u51fa\u573a],this.failAudioArrs=[s.default.getInstance().ZYAudio.\u5931\u8d25,s.default.getInstance().DCAudio.\u5931\u8d25,s.default.getInstance().DQAudio.\u5931\u8d25],this.bloodAnim=this.node.parent.getChildByName("blood").getComponent(cc.Animation),a.default.instance.init(),cc.director.on("HeroShow",this.onShow,this)},e.prototype.reset=function(){var t=this;this.checkPassSpace=0,this.checkPassCount=0,a.default.instance.fsm.reset(),this.node.x=-300,this.arrowTime=5,s.default.getInstance().deltaX=-300,this.node.y=-200,this.canJump=!0,setTimeout(function(){t.node.x=300,s.default.getInstance().deltaX=300,a.default.instance.fsm.show(),c.default.instance.playAudio(t.showAudioArrs[d.default.instance.MainHeroIndex])},500),this.initHeroData(),this.reviveCount=0},e.prototype.onChangeHero=function(){},e.prototype.onGameStart=function(){var t=this;this.reset(),s.default.getInstance().HP=this.HP,this.lifeProgress.setHP(100),this.scheduleOnce(function(){d.default.instance.isGod&&(t.HP=5e5,s.default.getInstance().HP=t.HP,d.default.instance.Unlock=30)},1),s.default.getInstance().preBuff&&this.scheduleOnce(function(){t.ATK*=1.25,s.default.getInstance().preBuff=!1},1),s.default.getInstance().deltaX=300,this.leftDistance=0},e.prototype.onExitHole=function(){this.node.x=300,m.default.instance.reset(),g.default.instance.node.x=130,s.default.getInstance().deltaX=300,this.leftDistance=300},e.prototype.initHeroData=function(){var t=d.default.instance.getMainHeroData();t.updateAttribute(),cc.director.emit("RefreshSp",d.default.instance.MainHeroIndex),this.ATK=t.ATK,this.DEF=t.DEF,this.SP=t.SP,this.CR=t.CR,this.LS=t.LS,this.MISS=t.MISS,this.HP=t.HP,s.default.getInstance().HP=this.HP,this.lifeProgress.setHP(100),this.skillNameArrs=p.HeroSkillName[d.default.instance.MainHeroIndex],this.setHitBox()},e.prototype.buff=function(){this.ATK*=1+.2*n.instance.reviveCount,this.DEF*=1+.15*n.instance.reviveCount},e.prototype.onShow=function(){this.node&&(this.node.x=300,s.default.getInstance().deltaX=300,a.default.instance.fsm.show())},e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.onBS=function(t,e){var n=t*this.LS*.01*(e?2:1);this.showBS(n),n=100*n/this.HP,this.onAddHp(n)},e.prototype.showBS=function(t,e){if(0!=(t=Math.ceil(t))){var n=this.bsNode;n.stopAllActions(),this.bsLabel.string="+"+t,n.active=!0,n.position=cc.v2(0,250),n.runAction(cc.sequence(cc.moveBy(.3,cc.v2(0,50)),cc.delayTime(.3),cc.callFunc(function(){n.active=!1})))}},e.prototype.showCoins=function(t){var e=this;this.coinsLabel.string="\u91d1+"+t,this.coinsNode.stopAllActions(),this.coinsNode.y=220,this.coinsNode.active=!0;var n=cc.moveBy(.3,cc.v2(0,70)),i=cc.sequence(cc.scaleTo(.1,1.2),cc.delayTime(.3),cc.scaleTo(.1,0)),o=cc.spawn(n,i);this.coinsNode.runAction(cc.sequence(o,cc.delayTime(0),cc.callFunc(function(){e.coinsNode.active=!1})))},e.prototype.showDmg=function(t){if(0!=(t=Math.ceil(t))){var e=this.dmgNode;e.stopAllActions(),this.dmgLabel.string="-"+t,e.active=!0,e.position=cc.v2(0,250),e.runAction(cc.sequence(cc.moveBy(.3,cc.v2(0,50)),cc.delayTime(.3),cc.callFunc(function(){e.active=!1})))}},e.prototype.onBtnAttack=function(){s.default.getInstance().inGame&&a.default.instance.fsm.can("attack")&&(s.default.getInstance().comboFlag||a.default.instance.fsm.attack())},e.prototype.attack=function(){var t=this;if(0==d.default.instance.MainHeroIndex)this.hit.active=!0,this.scheduleOnce(function(){t.hit.active=!1});else if(1==d.default.instance.MainHeroIndex){var e=this.node.scaleX>0?1:-1,n=this.node.x+50*e,i=this.node.y+85;l.default.instance.create(0,cc.v2(n,i),e),c.default.instance.playAudio(s.default.getInstance().DCAudio.\u7bad)}},e.prototype.attackFinal=function(){var t=this;0==d.default.instance.MainHeroIndex?this.schedule(function(){t.hit.active=!0,t.scheduleOnce(function(){t.hit.active=!1})},.2,2):1==d.default.instance.MainHeroIndex&&(u.default.instance.create("attack_e"),c.default.instance.playAudio(s.default.getInstance().DCAudio.\u4e09\u6bb5))},e.prototype.attackZYFinal=function(){var t=this;this.hitfinal.active=!0,this.scheduleOnce(function(){t.hitfinal.active=!1})},e.prototype.attackRotate=function(){var t=this;this.hitrotate.active=!0,this.scheduleOnce(function(){t.hitrotate.active=!1})},e.prototype.showMiss=function(){var t=this;this.missNode.stopAllActions(),this.missNode.y=220,this.missNode.active=!0;var e=cc.moveBy(.3,cc.v2(0,70)),n=cc.sequence(cc.scaleTo(.1,1.2),cc.delayTime(.3),cc.scaleTo(.1,0)),i=cc.spawn(e,n);this.missNode.runAction(cc.sequence(i,cc.delayTime(0),cc.callFunc(function(){t.missNode.active=!1})))},e.prototype.onHit=function(t){var e=this;if(100*Math.random()<this.MISS)this.showMiss();else{var n=t*(1-this.DEF/(this.DEF+2500));this.showDmg(n);var i=100*n/this.HP;if(this.lifeProgress.damage(i),s.default.getInstance().HP-=n,s.default.getInstance().HP<=0&&(a.default.instance.fsm.can("hit")&&a.default.instance.fsm.hit(),this.dead()),Math.random()<1){var o=["ZY","DC","DQ"][d.default.instance.MainHeroIndex]+"hurt"+Math.floor(3*Math.random());0==this.hurtSpace&&(this.hurtSpace=1.5,c.default.instance.playAudio(o)),this.material.effect.setProperty("isFlash",1.1),this.scheduleOnce(function(){e.material.effect.setProperty("isFlash",.5)},.15)}}},e.prototype.dead=function(){a.default.instance.fsm.can("dead")&&a.default.instance.fsm.dead()},e.prototype.afterDead=function(){2==this.reviveCount?h.default.instance.onEnd(!1):(h.default.instance.reviveNode.active=!0,s.default.getInstance().inGame=!1,this.reviveCount++,h.default.instance.reviveLabel.string="x "+(1==this.reviveCount?20:25))},e.prototype.revive=function(){s.default.getInstance().HP=100,this.buff(),this.lifeProgress.setHP(60),a.default.instance.fsm.show()},e.prototype.onBtnJump=function(){this.canJump&&a.default.instance.fsm.can("jump")&&(a.default.instance.fsm.jump(),this.speedY=1700,this.jumping=!0,this.canJump=!1)},e.prototype.onBtnFlash=function(){c.default.instance.playAudio("BtnClick"),a.default.instance.fsm.can("flash")&&a.default.instance.fsm.flash()},e.prototype.onBtnSkill1=function(){this.onSkill(0)},e.prototype.onBtnSkill2=function(){this.onSkill(1)},e.prototype.onBtnSkill3=function(){this.onSkill(2)},e.prototype.onBtnSkill4=function(){this.onSkill(3)},e.prototype.onBtnSkillAddHp=function(){c.default.instance.playAudio("addHp"),d.default.instance.Life<1||(d.default.instance.Life-=1,d.default.instance.saveHeroGlobal(),h.default.instance.refreshLife(),this.onAddHp(40))},e.prototype.onAddHp=function(t){this.lifeProgress.addHP(t)},e.prototype.onSkill=function(t){if(4!=t){if(!(this.node.y>-200)){var e=this.skillNameArrs[t];if("skill_shunyi+gongji"==e||"skill_shunyi"==e){if(!a.default.instance.fsm.can("flash"))return;a.default.instance.fsm.flash()}else{if(!a.default.instance.fsm.can("skill"))return;a.default.instance.fsm.skill()}switch(a.default.instance.sk.setAnimation(0,e,!1),e){case"skill_guangbo":u.default.instance.create(e),this.scheduleOnce(function(){a.default.instance.fsm.can("flash")&&a.default.instance.fsm.flash()},.8);break;case"skill_duochongjian":u.default.instance.create(e);break;case"skill_leidian":c.default.instance.playAudio(s.default.getInstance().ZYAudio.\u5927\u62db),u.default.instance.create(e);break;case"skill_leidongjiutian":case"skill_shunyi":case"skill_pd":u.default.instance.create(e);break;case"skill_dipotianxing":this.scheduleOnce(function(){a.default.instance.fsm.can("flash")&&a.default.instance.fsm.flash()},2.2),c.default.instance.playAudio(s.default.getInstance().DQAudio.\u5927\u62db),u.default.instance.create(e);break;case"skill_heidong":case"skill_liuxingyu":case"skill_yanlouzhan":u.default.instance.create(e);break;case"skill_jianyu":c.default.instance.playAudio(s.default.getInstance().DCAudio.\u5927\u62db)}}}else this.onBtnSkillAddHp()},e.prototype.setHitBox=function(){var t=0;0==d.default.instance.MainHeroIndex?t=370:2==d.default.instance.MainHeroIndex&&(t=750),this.hitbox.size=new cc.Size(t,40),this.hitbox.offset=cc.v2(t/2,0)},e.prototype.resetNumber=function(){for(var t=this.dmgNode,e=this.missNode,n=this.coinsNode,i=[t,this.bsNode,e,n],o=0;o<i.length;o++)i[o].active&&(this.node.scaleX>0?i[o].scaleX=1:i[o].scaleX=-1)},e.prototype.dealHurtSpace=function(t){this.hurtSpace-=t,this.hurtSpace<=0&&(this.hurtSpace=0)},e.prototype.arrowRainUpdate=function(t){if(1!=s.default.getInstance().nowLevel){this.arrowTime-=t;var e=.15;s.default.getInstance().nowLevel>=15&&s.default.getInstance().nowLevel<=40&&(e=.25),s.default.getInstance().nowLevel>40&&(e=.35),this.arrowTime<=0&&(Math.random()<e&&y.default.instance.use(),this.arrowTime=3+2*Math.random())}},e.prototype.checkPass=function(t){this.checkPassSpace++,s.default.getInstance().monsterCount>0&&this.checkPassSpace>120&&(this.checkPassSpace=0,h.default.instance.gameEventNode.getComponentInChildren(v.default)?this.checkPassCount=0:(this.checkPassCount++,cc.log("PassCount",this.checkPassCount),8==this.checkPassCount&&h.default.instance.onEnd(!0)))},e.prototype.update=function(t){if(s.default.getInstance().inGame){if(this.checkPass(t),this.dealHurtSpace(t),this.arrowRainUpdate(t),!a.default.instance.fsm.is("state_jumpattack")&&!a.default.instance.fsm.is("state_flash")&&!a.default.instance.fsm.is("state_skill"))switch(s.default.getInstance().MoveState){case s.default.getInstance().STATE.LEFT:this.node.scaleX=-.7;break;case s.default.getInstance().STATE.RIGHT:this.node.scaleX=.7}if(this.resetNumber(),this.jumping&&(this.speedY-=t*s.default.getInstance().gravity,this.node.y+=this.speedY*t,r.default.instance.heroCamera.y+=this.speedY*t*.12,this.node.y<-200&&(this.node.y=-200,r.default.instance.heroCamera.y=0,this.jumping=!1,this.canJump=!0,a.default.instance.fsm.can("stop")&&(a.default.instance.isWin()||a.default.instance.fsm.stop()))),a.default.instance.fsm.is("state_flash"))if("skill_guangbo"==a.default.instance.sk.animation||"skill_dipotianxing"==a.default.instance.sk.animation){var e=Math.floor(.3*this.speed*t*100)/100;this.node.scaleX<0?(this.node.x+=e,s.default.getInstance().deltaX+=e):this.node.scaleX>=0&&(this.node.x+=-e,s.default.getInstance().deltaX+=-e)}else{e=Math.floor(3*this.speed*t*100)/100;this.node.scaleX<0?(this.node.x+=-e,s.default.getInstance().deltaX+=-e):this.node.scaleX>=0&&(this.node.x+=e,s.default.getInstance().deltaX+=e)}else if(a.default.instance.fsm.is("state_jumpattack")){e=Math.floor(this.speed*t*2*100)/100;d.default.instance.MainHeroIndex>0&&(e*=.3),this.node.scaleX<0?(this.node.x+=-e,s.default.getInstance().deltaX+=-e):this.node.scaleX>=0&&(this.node.x+=e,s.default.getInstance().deltaX+=e)}else if(s.default.getInstance().canMove)switch(s.default.getInstance().MoveState){case s.default.getInstance().STATE.LEFT:if(a.default.instance.fsm.is("state_move")||a.default.instance.fsm.is("state_jump")){var n=Math.floor(this.SP*t*100)/100;this.node.x+=-n,this.node.scaleX=-.7,s.default.getInstance().deltaX+=-n}a.default.instance.fsm.can("move")&&a.default.instance.fsm.move();break;case s.default.getInstance().STATE.RIGHT:if(a.default.instance.fsm.is("state_move")||a.default.instance.fsm.is("state_jump")){var i=Math.floor(this.SP*t*100)/100;this.node.x+=i,this.node.scaleX=.7,s.default.getInstance().deltaX+=i}a.default.instance.fsm.can("move")&&a.default.instance.fsm.move();break;case s.default.getInstance().STATE.STOP:return void(a.default.instance.fsm.is("state_move")&&a.default.instance.fsm.stop())}s.default.getInstance().canScrollLeft=!1,s.default.getInstance().canScrollRight=!1;var o=cc.find("Canvas").getChildByName("heroCamera"),c=cc.v2(0,0);o.getComponent(cc.Camera).getWorldToScreenPoint(this.node.position,c),s.default.getInstance().canMove&&(2!=s.default.getInstance().MapLevelIndex&&c.x>.75*cc.winSize.width&&s.default.getInstance().deltaX<s.default.getInstance().MapSplitWidth*(s.default.getInstance().MapLevelIndex+1)-.25*cc.winSize.width&&(o.x=this.node.x-.75*cc.winSize.width,s.default.getInstance().canScrollRight=!0),2==s.default.getInstance().MapLevelIndex&&c.x>.75*cc.winSize.width&&s.default.getInstance().deltaX<s.default.getInstance().MapSplitWidth-.25*cc.winSize.width&&(o.x=this.node.x-.75*cc.winSize.width,s.default.getInstance().canScrollRight=!0)),1==s.default.getInstance().MapLevelIndex?c.x<.25*cc.winSize.width&&s.default.getInstance().deltaX>s.default.getInstance().MapSplitWidth*s.default.getInstance().MapLevelIndex-.5*cc.winSize.width&&(o.x=this.node.x-.25*cc.winSize.width,s.default.getInstance().canScrollLeft=!0):c.x<.25*cc.winSize.width&&s.default.getInstance().deltaX>.25*cc.winSize.width&&(o.x=this.node.x-.25*cc.winSize.width,s.default.getInstance().canScrollLeft=!0);var l=this.NodeWidth*Math.abs(this.node.scaleX)/2;s.default.getInstance().deltaX<l+this.leftDistance&&(this.node.x=l+this.leftDistance,s.default.getInstance().deltaX=l+this.leftDistance),s.default.getInstance().MapLevelIndex>0&&s.default.getInstance().MapLevelIndex<2&&s.default.getInstance().deltaX<s.default.getInstance().MapSplitWidth*s.default.getInstance().MapLevelIndex-.75*cc.winSize.width+l&&(this.node.x=s.default.getInstance().MapSplitWidth*s.default.getInstance().MapLevelIndex-.75*cc.winSize.width+l,s.default.getInstance().deltaX=s.default.getInstance().MapSplitWidth*s.default.getInstance().MapLevelIndex-.75*cc.winSize.width+l),2==s.default.getInstance().MapLevelIndex?s.default.getInstance().deltaX>s.default.getInstance().MapSplitWidth-l&&(this.node.x=s.default.getInstance().MapSplitWidth-l,s.default.getInstance().deltaX=s.default.getInstance().MapSplitWidth-l):s.default.getInstance().deltaX>s.default.getInstance().MapSplitWidth*(s.default.getInstance().MapLevelIndex+1)-l&&(s.default.getInstance().levelNext?h.default.instance.createNext():(this.node.x=s.default.getInstance().MapSplitWidth*(s.default.getInstance().MapLevelIndex+1)-l,s.default.getInstance().deltaX=s.default.getInstance().MapSplitWidth*(s.default.getInstance().MapLevelIndex+1)-l))}},e.prototype.onEnable=function(){},e.prototype.onDestroy=function(){cc.director.off("HeroShow",this.onShow,this)},e.instance=null,e=n=o([A],e)}(cc.Component));n.default=S,cc._RF.pop()},{"../Audio":"Audio","../BgMgr":"BgMgr","../BulletMgr":"BulletMgr","../Game":"Game","../LifeProgress":"LifeProgress","../Main":"Main","../Map/ArrowRain":"ArrowRain","../Monster/Monster":"Monster","../SkillMgr":"SkillMgr","../nativets/Config":"Config","../nativets/Global":"Global","./HeroFSM":"HeroFSM","./HeroGlobal":"HeroGlobal","./HeroPet":"HeroPet"}],Http:[function(t,e,n){"use strict";cc._RF.push(e,"c4d35iWaZ5KTKwKGm5oOp0M","Http"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.newGetRequest=function(t){return new Promise(function(e,n){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState)if(cc.log("\u8bf7\u6c42 "+t.host+"\uff1a\u7ed3\u675f\uff0c\u8fd4\u56de\u7ed3\u679c\u5982\u4e0b\uff1a"),cc.log("code: "+i.status),cc.log("codestatus: "+i.statusText),cc.log("resposeStr: "+i.responseText),i.status>=200&&i.status<400)try{var o=JSON.parse(i.responseText);e(o)}catch(t){n(t)}else n(new Error("Error! Http Code: "+i.status))};var o,a=t.host;if(null!=t.body&&(o=Object.keys(t.body)).length>0){a+="?"+o[0]+"="+t.body[o[0]];for(var s=1;s<o.length;s++)a+="&"+o[s]+"="+t.body[o[s]]}if((cc.log("\u8bf7\u6c42 "+t.host+"\uff1a\u5f00\u59cb"),cc.log("\u8bf7\u6c42\u53c2\u6570:"),cc.log(t),cc.log("\u8bf7\u6c42\u5730\u5740: "+a),i.open("GET",a,!0),null!=t.header)&&(o=Object.keys(t.header)).length>0)for(s=0;s<o.length;s++)i.setRequestHeader(o[s],t.header[o[s]]);i.send()})},t.newPostRequest=function(t){return new Promise(function(e,n){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState)if(i.status>=200&&i.status<400)try{var t=JSON.parse(i.responseText);e(t)}catch(t){n(t)}else n(new Error("Error! Http Code: "+i.status))};var o=null;if(null!=t.body&&(o=JSON.stringify(t.body)),i.open("POST",t.host,!0),null!=t.header){var a=Object.keys(t.header);if(a.length>0)for(var s=0;s<a.length;s++)i.setRequestHeader(a[s],t.header[a[s]])}null==o?i.send():i.send(o)})},t}();n.HttpRequest=i,cc._RF.pop()},{}],Joystick:[function(t,e,n){"use strict";cc._RF.push(e,"51a90lmI6FG85J+k6IIIDvM","Joystick");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./nativets/Global"),s=t("./Hero/Hero"),r=t("./Director"),c=cc._decorator,l=c.ccclass,u=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.AttackBtn=null,e.State=0,e}return i(e,t),e.prototype.init=function(){a.default.getInstance().MoveState=this.State,this.joybg=this.node,this.canTouch=!0,this.joytouch=this.node.getChildByName("joytouch"),this.radius=this.node.width/2,this.originPos=cc.v2(-71,-266),this.node.position=this.originPos,this.AttackState=!1,this.AttackSpace=0},e.prototype.start=function(){this.init(),this.node.parent.on("touchstart",this.touchs,this),this.node.parent.on("touchmove",this.touchm,this),this.node.parent.on("touchend",this.touche,this),this.node.parent.on("touchcancel",this.touche,this),this.AttackBtn.on("touchstart",this.onAttack,this),this.AttackBtn.on("touchend",this.onAttackC,this),this.AttackBtn.on("touchcancel",this.onAttackC,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.onAttack=function(){s.default.instance.onBtnAttack(),this.AttackState=!0,this.AttackSpace=0},e.prototype.onAttackC=function(){this.AttackState=!1},e.prototype.touchs=function(t){var e=this.node.parent.convertToNodeSpaceAR(t.getLocation());this.canTouch=!0,this.joybg.opacity=120,this.node.position=e},e.prototype.touchm=function(t){if(!r.default.instance.node.active){var e=this.joybg.convertToNodeSpaceAR(t.getLocation()).x,n=this.joybg.convertToNodeSpaceAR(t.getLocation()).y,i=Math.atan2(e,n),o=cc.v2(e,n).mag();o>this.radius&&(o=this.radius),this.joytouch.setPosition(cc.v2(Math.sin(i)).x*o,cc.v2(Math.cos(i)).x*o),e>this.node.width/2&&(e=this.node.width/2),e<-this.node.width/2&&(e=-this.node.width/2),n>this.node.height/2&&(n=this.node.height/2),n<-this.node.height/2&&(n=-this.node.height/2),this.joytouch.setPosition(e,n);var s=Math.atan2(0,1);Math.atan2(0,-1);this.State=i>s?a.default.getInstance().STATE.RIGHT:a.default.getInstance().STATE.LEFT,a.default.getInstance().MoveState=this.State}},e.prototype.touche=function(t){this.node.position=this.originPos,this.joytouch.setPosition(0,0),this.State=a.default.getInstance().STATE.STOP,this.joybg.opacity=255,a.default.getInstance().MoveState=this.State},e.prototype.onKeyDown=function(t){if(a.default.getInstance().inGame)switch(t.keyCode){case cc.macro.KEY.a:case cc.macro.KEY.left:a.default.getInstance().MoveState|=a.default.getInstance().STATE.LEFT;break;case cc.macro.KEY.d:case cc.macro.KEY.right:a.default.getInstance().MoveState|=a.default.getInstance().STATE.RIGHT;break;case cc.macro.KEY.w:case cc.macro.KEY.j:case cc.macro.KEY.space:s.default.instance.onBtnJump()}},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.a:case cc.macro.KEY.left:a.default.getInstance().MoveState&=~a.default.getInstance().STATE.LEFT;break;case cc.macro.KEY.d:case cc.macro.KEY.right:a.default.getInstance().MoveState&=~a.default.getInstance().STATE.RIGHT;break;case cc.macro.KEY.j:case cc.macro.KEY.space:}},e.prototype.update=function(t){this.AttackState&&(0==this.AttackSpace&&s.default.instance.onBtnAttack(),this.AttackSpace++,this.AttackSpace>7&&(this.AttackSpace=0))},e.prototype.onDestroy=function(){this.node.parent.off("touchstart",this.touchs,this),this.node.parent.off("touchmove",this.touchm,this),this.node.parent.off("touchend",this.touche,this),this.node.parent.off("touchcancel",this.touche,this),this.AttackBtn.off("touchstart",this.onAttack,this),this.AttackBtn.off("touchend",this.onAttackC,this),this.AttackBtn.off("touchcancel",this.onAttackC,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},o([u(cc.Node)],e.prototype,"AttackBtn",void 0),e=o([l],e)}(cc.Component);n.default=d,cc._RF.pop()},{"./Director":"Director","./Hero/Hero":"Hero","./nativets/Global":"Global"}],Language:[function(t,e,n){"use strict";cc._RF.push(e,"fa2cakak0JEi6XcSuqI5Px7","Language"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./ZH").default;n.default=i,cc._RF.pop()},{"./ZH":"ZH"}],LifeMgr:[function(t,e,n){"use strict";cc._RF.push(e,"3a1f4PWKiZMaKM++Ob/SEdf","LifeMgr");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Hero/HeroGlobal"),s=t("../Menu"),r=cc._decorator,c=r.ccclass,l=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return i(e,t),n=e,e.prototype.init=function(){this.time=300},e.prototype.onLoad=function(){n.instance=this,this.init(),this.onHideShow()},e.prototype.start=function(){},e.prototype.onHideShow=function(){cc.game.on(cc.game.EVENT_HIDE,this.onHide,this),cc.game.on(cc.game.EVENT_SHOW,this.onShow,this)},e.prototype.onHide=function(){this.startTime=Date.now()},e.prototype.onShow=function(){if(this.startTime){var t=Math.floor((Date.now()-this.startTime)/6e5);if(this.startTime=null,a.default.instance.Life<40){var e=a.default.instance.Life+t;e>40&&(e=40),a.default.instance.Life=e,a.default.instance.saveHeroGlobal(),s.default.instance&&s.default.instance.refreshTopLabel()}}},e.prototype.onDestroy=function(){cc.game.off(cc.game.EVENT_HIDE,this.onHide,this),cc.game.off(cc.game.EVENT_SHOW,this.onShow,this)},e.prototype.update=function(t){this.time>0?this.time-=t:(this.time=300,a.default.instance.Life<40&&(a.default.instance.Life+=1,a.default.instance.saveHeroGlobal(),s.default.instance&&s.default.instance.refreshTopLabel()))},e.instance=null,e=n=o([c],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../Hero/HeroGlobal":"HeroGlobal","../Menu":"Menu"}],LifeProgress:[function(t,e,n){"use strict";cc._RF.push(e,"647c7Ma4gJM1JUF4hOrGWpS","LifeProgress");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./nativets/Global"),s=t("./Game"),r=t("./Hero/Hero"),c=cc._decorator,l=c.ccclass,u=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bar1=null,e.bar2=null,e.delay=300,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.init=function(t){if(this.bar1.progress=1,this.bar2.progress=1,t){this.isBoss=!0,this.HPCount=4,this.CountLabel=this.node.getChildByName("count").getComponent(cc.Label),this.CountLabel.string="x4",this.bar2.node.getChildByName("bar").getComponent(cc.Sprite).spriteFrame=s.default.instance.bossHpSf[this.HPCount-1];for(var e=0;e<4;e++);this.node.getChildByName("bg"+(this.HPCount-1)).active=!0}},e.prototype.start=function(){this.init()},e.prototype.setHP=function(t){var e=t/100;a.default.getInstance().HP=r.default.instance.HP*e,this.bar1.progress=e,this.bar2.progress=e},e.prototype.addHP=function(t){this.unscheduleAllCallbacks();var e=t/100;a.default.getInstance().HP+=r.default.instance.HP*e,a.default.getInstance().HP>r.default.instance.HP&&(a.default.getInstance().HP=r.default.instance.HP);var n=this.bar2.progress+e;n>1&&(n=1),this.bar1.progress=n,this.bar2.progress=n},e.prototype.damage=function(t){var e=this,n=t/100,i=this.bar2.progress;if(this.unscheduleAllCallbacks(),this.bar1.progress=i,this.isBoss)if(n>i){var o=Math.ceil(n-i);if(this.HPCount-=o,this.CountLabel.string="x"+this.HPCount,this.HPCount>0){this.bar2.node.getChildByName("bar").getComponent(cc.Sprite).spriteFrame=s.default.instance.bossHpSf[this.HPCount-1];for(var a=0;a<4;a++)this.node.getChildByName("bg"+a).active=!1;this.node.getChildByName("bg"+(this.HPCount-1)).active=!0}var r=(i+o-n)%1;this.HPCount<1&&(r=0),cc.log(this.HPCount,t),this.bar1.progress=1,this.bar2.progress=r,this.scheduleOnce(function(){e.bar1.progress=r,e.HPCount<1&&(e.node.active=!1)},this.delay/1e3)}else this.bar2.progress=i-n,this.scheduleOnce(function(){e.bar1.progress=i-n},this.delay/1e3);else this.bar2.progress=i-n,this.scheduleOnce(function(){e.bar1.progress=i-n},this.delay/1e3)},e.prototype.move=function(t,e){this.node.x!=t&&(this.node.x=t),e&&this.node.y!=e&&(this.node.y=e+200)},o([u(cc.ProgressBar)],e.prototype,"bar1",void 0),o([u(cc.ProgressBar)],e.prototype,"bar2",void 0),o([u],e.prototype,"delay",void 0),e=o([l],e)}(cc.Component);n.default=d,cc._RF.pop()},{"./Game":"Game","./Hero/Hero":"Hero","./nativets/Global":"Global"}],LoadPromise:[function(t,e,n){"use strict";cc._RF.push(e,"fd1f0wubt5CXLnFa4UuOaGA","LoadPromise"),Object.defineProperty(n,"__esModule",{value:!0});n.loadSpinePromise=function(t){return new Promise(function(e,n){cc.loader.loadRes(t,sp.SkeletonData,function(t,i){t?n(t):e(i)})})};n.loadSpritePromise=function(t){return new Promise(function(e,n){cc.loader.loadRes(t,cc.SpriteFrame,function(t,i){t?n(t):e(i)})})};n.loadWXSubPromise=function(t){return new Promise(function(e,n){wx.loadSubpackage({name:t,success:function(t){e(t)},fail:function(t){n(t)}})})},cc._RF.pop()},{}],Loading:[function(t,e,n){"use strict";cc._RF.push(e,"4f3bcL/ittAn7h42vx/LzOW","Loading");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./Ad/AdMgr"),s=t("./nativets/Platform"),r=t("./Tool/Statistics"),c=t("./nativets/Global"),l=t("./nativets/SaveMgr"),u=t("./lib/md5"),d=cc._decorator,p=d.ccclass,h=(d.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.loadUuid()},e.prototype.loadUuid=function(){if(l.load("openId")?c.default.getInstance().uuid=l.load("openId"):(c.default.getInstance().uuid=u(Date.now()+""),l.save("openId",c.default.getInstance().uuid),console.log("uuid= "+c.default.getInstance().uuid)),CC_WECHATGAME){var t=wx.getLaunchOptionsSync(),e=cc.sys.localStorage.getItem("game_scene");null!=e&&""!=e||(e=t.scene,cc.sys.localStorage.setItem("game_scene",t.scene),console.log("scene:"+e)),r.default.getInstance().register(c.default.getInstance().wxName,c.default.getInstance().wxHead,wx.getLaunchOptionsSync().scene,"",function(t){console.log("\u6ce8\u518c\u8fd4\u56de\uff1a",t),1==t.code&&(c.default.getInstance().registerName=t.name,c.default.getInstance().registerHead=t.headpic,console.log("\u5f53\u524d\u5730\u533a\uff1a"+t.city),cc.sys.localStorage.setItem("city",t.city))})}s.getPlatform()!=s.Platform.OPPO&&s.getPlatform()!=s.Platform.VIVO||r.default.getInstance().register(c.default.getInstance().vivoName,c.default.getInstance().vivoHead,"","",function(t){console.log("\u6ce8\u518c\u8fd4\u56de\uff1a",t),1==t.code&&(c.default.getInstance().registerName=t.name,c.default.getInstance().registerHead=t.headpic,console.log("\u5f53\u524d\u5730\u533a\uff1a"+t.city),cc.sys.localStorage.setItem("city",t.city))})},e.prototype.init=function(){this.progress=this.node.getChildByName("Progress"),this.btnStart=this.node.getChildByName("Start"),this.progressbar=this.progress.getChildByName("ProgressBar").getComponent(cc.ProgressBar);var t=new cc.Node;t.parent=cc.director.getScene(),t.addComponent(a.default)},e.prototype.start=function(){this.chechUpdate(),this.init(),this.OVLoad(),this.WXLoad()},e.prototype.chechUpdate=function(){if(window.wx){var t=wx.getUpdateManager();console.log("\u662f\u5426\u8fdb\u5165\u6a21\u62df\u66f4\u65b0"),t.onCheckForUpdate(function(e){console.log("\u662f\u5426\u83b7\u53d6\u7248\u672c"),e.hasUpdate&&(t.onUpdateReady(function(){t.applyUpdate()}),t.onUpdateFailed(function(){wx.showModal({title:"\u5df2\u7ecf\u6709\u65b0\u7248\u672c\u55bd~",content:"\u8bf7\u60a8\u5220\u9664\u5f53\u524d\u5c0f\u7a0b\u5e8f\uff0c\u5230\u5fae\u4fe1 \u201c\u53d1\u73b0-\u5c0f\u7a0b\u5e8f\u201d \u9875\uff0c\u91cd\u65b0\u641c\u7d22\u6253\u5f00\u54e6~"})}))})}},e.prototype.onBtnStart=function(){this.progress2>=1?cc.director.loadScene("game"):(this.progress.active=!0,this.btnStart.active=!1)},e.prototype.onBtnClean=function(){wx&&(console.log("clean"),wxDownloader.cleanAllAssets())},e.prototype.WXSplitLoad=function(){var t=this;console.log("WXSplitLoad"),this.progress2=0;var e=0,n=!0,i=!0;cc.director.preloadScene("game",function(o,a){var s=o/a;(e=0+3*s%1)>t.progressbar.progress&&(t.progressbar.progress=e),s>1/3&&s<2/3?n&&(t.progressbar.progress=0,n=!1):s>=2/3&&i&&(t.progressbar.progress=0,i=!1)},function(){t.progress2=1,t.progressbar.progress=1,cc.director.loadScene("game")})},e.prototype.OVLoad=function(){if(s.getPlatform()==s.Platform.OPPO||s.getPlatform()==s.Platform.VIVO){var t=this;qg.loadSubpackage({name:"sub",success:function(){console.log("sub1 \u5b50\u5305\u52a0\u8f7d\u6210\u529f"),t.WXSplitLoad()}}).onProgressUpdate(function(t){var e=t.progress,n=(t.totalBytesWritten,t.totalBytesExpectedToWrite,e/100);this.progressbar&&(this.progressbar.progress=n)})}},e.prototype.WXLoad=function(){var t=this;s.getPlatform()==s.Platform.WX||s.getPlatform()==s.Platform.QQ?wx.loadSubpackage({name:"sub",success:function(e){t.progressbar.progress=0,wx.loadSubpackage({name:"sub1",success:function(e){t.progressbar.progress=0,t.WXSplitLoad()},fail:function(t){}}).onProgressUpdate(function(e){cc.log("\u4e0b\u8f7d\u8fdb\u5ea6",e.progress),cc.log("\u5df2\u7ecf\u4e0b\u8f7d\u7684\u6570\u636e\u957f\u5ea6",e.totalBytesWritten),cc.log("\u9884\u671f\u9700\u8981\u4e0b\u8f7d\u7684\u6570\u636e\u603b\u957f\u5ea6",e.totalBytesExpectedToWrite);var n=e.progress/100;t.progressbar.progress=n})},fail:function(t){}}).onProgressUpdate(function(e){cc.log("\u4e0b\u8f7d\u8fdb\u5ea6",e.progress),cc.log("\u5df2\u7ecf\u4e0b\u8f7d\u7684\u6570\u636e\u957f\u5ea6",e.totalBytesWritten),cc.log("\u9884\u671f\u9700\u8981\u4e0b\u8f7d\u7684\u6570\u636e\u603b\u957f\u5ea6",e.totalBytesExpectedToWrite);var n=e.progress/100;t.progressbar.progress=n}):this.WXSplitLoad()},e=o([p],e)}(cc.Component));n.default=h,cc._RF.pop()},{"./Ad/AdMgr":"AdMgr","./Tool/Statistics":"Statistics","./lib/md5":"md5","./nativets/Global":"Global","./nativets/Platform":"Platform","./nativets/SaveMgr":"SaveMgr"}],Main:[function(t,e,n){"use strict";cc._RF.push(e,"e3fd9hrMd5Nw5p/x2QIeJtb","Main");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./nativets/Platform"),s=t("./nativets/Global"),r=t("./nativets/ReleaseMgr"),c=t("./nativets/SaveMgr"),l=t("./Menu"),u=t("./Others/TimeLimit/TimeLimit"),d=t("./Others/Qimen/Qimen"),p=t("./Tool/Statistics"),h=(t("./Map/MapSelect"),t("./Ad/AdMgr")),f=t("./Ad/AdList"),g=cc._decorator,m=g.ccclass,y=g.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.menuNode=null,e.mapNode=null,e.gameNode=null,e.loadingNode=null,e.loadingMap=!1,e.menuCount=0,e}var n;return i(e,t),n=e,e.prototype.init=function(){this.heroCamera=this.node.getChildByName("heroCamera")},e.prototype.onLoad=function(){n.instance=this,this.init(),c.load("FirstSelect")?this.menuNode.getChildByName("Menu").getChildByName("FirstSelect")&&(this.menuNode.getChildByName("Menu").getChildByName("FirstSelect").active=!1):this.LoadFirst(function(){})},e.prototype.start=function(){this.loadOVNative()},e.prototype.loadOVNative=function(){if(a.getPlatform()==a.Platform.OPPO||a.getPlatform()==a.Platform.VIVO)for(var t=["NativeAd","NativeBanner","NativeBanner2","NativeBanner3","NativeBanner4"],e=0;e<t.length;e++)this.loadOVRes(t[e])},e.prototype.loadOVRes=function(t){var e=this;this.node.getChildByName(t)||cc.loader.loadRes("OV/"+t,cc.Prefab,function(t,n){t||(cc.instantiate(n).parent=e.node)})},e.prototype.loadMenu=function(t){var e=this;if(0==n.instance.menuNode.children.length){if(this.loadingMenu)return;this.loadingMenu=!0,cc.loader.loadRes("Menu",cc.Prefab,function(i,o){(e.loadingMenu=!1,i)||(cc.instantiate(o).parent=n.instance.menuNode,e.menuCount++,t(),n.instance.menuNode.active=!0,e.scheduleOnce(function(){2==e.menuCount&&l.default.instance.OpenSign(),2==e.menuCount&&(u.default.instance.open(!1),p.default.getInstance().reportEvent("\u9650\u65f6\u795e\u7fc5")),3==e.menuCount&&d.default.instance.open()},.5))})}else cc.log("LOADMENU"),t(),n.instance.menuNode.active=!0},e.prototype.loadMap=function(t){var e=this;if(0==n.instance.mapNode.children.length){if(this.loadingMap)return;this.loadingMap=!0,cc.loader.loadRes("Map",cc.Prefab,function(i,o){(e.loadingMap=!1,i)||(cc.instantiate(o).parent=n.instance.mapNode,n.instance.mapNode.active=!0,t())})}else n.instance.mapNode.active=!0,t()},e.prototype.loadGame=function(t){var e=this;if(this.loadingNode.active=!0,a.getPlatform()==a.Platform.WX||a.getPlatform()==a.Platform.QQ)wx.loadSubpackage({name:"subMusic",success:function(n){wx.loadSubpackage({name:"sub2",success:function(n){s.default.getInstance().nowLevel>9?wx.loadSubpackage({name:"sub3",success:function(n){e.toGame(t)},fail:function(t){}}).onProgressUpdate(function(t){}):e.toGame(t)},fail:function(t){}}).onProgressUpdate(function(t){})},fail:function(t){}}).onProgressUpdate(function(t){});else if(a.getPlatform()==a.Platform.OPPO||a.getPlatform()==a.Platform.VIVO){qg.loadSubpackage({name:"subMusic",success:function(n){qg.loadSubpackage({name:"sub2",success:function(n){e.toGame(t)},fail:function(t){}}).onProgressUpdate(function(t){})},fail:function(t){}}).onProgressUpdate(function(t){})}else this.toGame(t)},e.prototype.toGame=function(t){var e=this;if(n.instance.ReleaseMap(),n.instance.ReleaseMenu(),h.default.instance&&h.default.instance.showBannerAd(f.default.BANNERLIST.\u52a0\u8f7d\u53f3\u4e0b),0==n.instance.gameNode.children.length){if(this.loadingGame)return;this.loadingGame=!0,cc.loader.loadRes("Game",cc.Prefab,function(i,o){(e.loadingGame=!1,i)||(cc.instantiate(o).parent=n.instance.gameNode,t(),n.instance.gameNode.active=!0)})}else t(),n.instance.gameNode.active=!0},e.prototype.LoadEquipment=function(t){var e=this;if(this.menuNode.getChildByName("Menu").getChildByName("Equipment"))this.menuNode.getChildByName("Menu").getChildByName("Equipment").active=!0,t();else{if(this.loadingEquipment)return;this.loadingEquipment=!0,cc.loader.loadRes("Equipment",cc.Prefab,function(n,i){if(e.loadingEquipment=!1,!n){var o=cc.instantiate(i);o.parent=e.menuNode.getChildByName("Menu"),o.active=!0,t()}})}},e.prototype.PreLoadEquipment=function(){cc.loader.loadRes("Equipment",cc.Prefab,function(t,e){})},e.prototype.LoadFirst=function(t){var e=this;if(this.menuNode.getChildByName("Menu").getChildByName("FirstSelect"))this.menuNode.getChildByName("Menu").getChildByName("FirstSelect").active=!0,t();else{if(this.loadingFirst)return;this.loadingFirst=!0,cc.loader.loadRes("FirstSelect",cc.Prefab,function(n,i){if(e.loadingFirst=!1,!n){var o=cc.instantiate(i);o.parent=e.menuNode.getChildByName("Menu"),o.active=!0,t()}})}},e.prototype.LoadOthers=function(t){var e=this;if(this.menuNode.getChildByName("Menu").getChildByName("Others"))this.menuNode.getChildByName("Menu").getChildByName("Others").active=!0,t();else{if(this.loadingOthers)return;this.loadingOthers=!0,cc.loader.loadRes("Others",cc.Prefab,function(n,i){if(e.loadingOthers=!1,!n){var o=cc.instantiate(i);o.parent=e.menuNode.getChildByName("Menu"),o.active=!0,t()}})}},e.prototype.ReleaseMenu=function(){this.menuNode.active=!1,this.ReleaseEquipment(),this.menuNode.children[0]&&this.menuNode.children[0].destroy();for(var t=cc.loader.getDependsRecursively("Menu"),e=0;e<t.length;e++)r.default(t[e])},e.prototype.ReleaseEquipment=function(){if(this.menuNode.getChildByName("Menu").getChildByName("Equipment")){this.menuNode.getChildByName("Menu").getChildByName("Equipment").destroy();for(var t=cc.loader.getDependsRecursively("Equipment"),e=0;e<t.length;e++)r.default(t[e])}},e.prototype.ReleaseMap=function(){this.mapNode.active=!1,this.mapNode.children[0]&&this.mapNode.children[0].destroy();for(var t=cc.loader.getDependsRecursively("Map"),e=0;e<t.length;e++)r.default(t[e])},e.prototype.ReleaseGame=function(){this.gameNode.active=!1,this.gameNode.children[0]&&this.gameNode.children[0].destroy();for(var t=cc.loader.getDependsRecursively("Game"),e=0;e<t.length;e++)r.default(t[e])},e.prototype.createNext=function(){},e.prototype.update=function(t){},e.instance=null,o([y(cc.Node)],e.prototype,"menuNode",void 0),o([y(cc.Node)],e.prototype,"mapNode",void 0),o([y(cc.Node)],e.prototype,"gameNode",void 0),o([y(cc.Node)],e.prototype,"loadingNode",void 0),e=n=o([m],e)}(cc.Component);n.default=v,cc._RF.pop()},{"./Ad/AdList":"AdList","./Ad/AdMgr":"AdMgr","./Map/MapSelect":"MapSelect","./Menu":"Menu","./Others/Qimen/Qimen":"Qimen","./Others/TimeLimit/TimeLimit":"TimeLimit","./Tool/Statistics":"Statistics","./nativets/Global":"Global","./nativets/Platform":"Platform","./nativets/ReleaseMgr":"ReleaseMgr","./nativets/SaveMgr":"SaveMgr"}],MapBoxItem:[function(t,e,n){"use strict";cc._RF.push(e,"af1f2KOuLFPWJjg8gHumcU3","MapBoxItem");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../TextureMgr"),s=cc._decorator,r=s.ccclass,c=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(){this.index=-1,this.icon=this.node.getChildByName("icon").getComponent(cc.Sprite),this.bg=this.node.getChildByName("bg").getComponent(cc.Sprite),this.nameLabel=this.node.getChildByName("name").getComponent(cc.Label),this.textLabel=this.node.getChildByName("text").getComponent(cc.Label),this.attLabel=this.node.getChildByName("att").getComponent(cc.Label)},e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.setItem=function(t,e,n,i,o){cc.log(t,e),this.index=t,this.icon.node.scale=t<4?1.2:1,this.bg.spriteFrame=t<4?a.default.instance.rewardBg:null,this.icon.spriteFrame=e,this.nameLabel.string=n,this.textLabel.string=i,this.attLabel.string=o},e=o([r],e)}(cc.Component));n.default=c,cc._RF.pop()},{"../TextureMgr":"TextureMgr"}],MapBox:[function(t,e,n){"use strict";cc._RF.push(e,"1455aS7IipK/q1C3/8USQ50","MapBox");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../i18n/Language"),s=t("./MapBoxItem"),r=t("../Audio"),c=t("../nativets/Config"),l=t("../TextureMgr"),u=t("../Hero/HeroGlobal"),d=t("../Ad/AdMgr"),p=t("../Ad/AdList"),h=t("../Map"),f=cc._decorator,g=f.ccclass,m=f.property,y=["gem","gold","life","item","soul","book"],v=["\u53ef\u83b7\u5f97\u5b9d\u77f3","\u53ef\u83b7\u5f97\u91d1\u5e01","\u53ef\u83b7\u5f97\u519b\u7cae","\u53ef\u83b7\u5f97\u88c5\u5907","\u53ef\u4e0e\u88c5\u5907\u878d\u5408","\u6c38\u4e45\u63d0\u5347\u5c5e\u6027"],b=["atk","def","hp","ls","sp","cr","arp","bonus","cd","miss","exp","gold"],A=[a.default.equipmentAtk,a.default.equipmentDef,a.default.equipmentHp,a.default.equipmentLs,a.default.equipmentSp,a.default.equipmentCr,a.default.equipmentArp,a.default.equipmentBonus,a.default.equipmentCd,a.default.equipmentMiss,a.default.equipmentExp,a.default.equipmentGold],S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mbItemPrefab=null,e}var n;return i(e,t),n=e,e.prototype.init=function(){this.boxNode=this.node.getChildByName("box"),this.titleLabel=this.boxNode.getChildByName("title").getComponent(cc.Label),this.doubleBtn=this.boxNode.getChildByName("double"),this.closeBtn=this.boxNode.getChildByName("btnclose"),this.closeLabel=this.boxNode.getChildByName("close"),this.initLayout(),this.node.active=!1},e.prototype.initLayout=function(){this.itemScripts=[];for(var t=0;t<3;t++){var e=cc.instantiate(this.mbItemPrefab);e.name=""+t,e.parent=this.boxNode,e.position=cc.v2(210*(t-1),0),this.itemScripts.push(e.getComponent(s.default)),this.itemScripts[t].init()}},e.prototype.onLoad=function(){n.instance=this,this.init()},e.prototype.onOpen=function(t,e,n,i){this.getArrs(t),this.setState(e,n,i),this.node.active=!0},e.prototype.setState=function(t,e,n){switch(t){case-1:this.titleLabel.string="\u672a\u89e3\u9501",this.doubleBtn.active=!1,this.closeBtn.active=!0,this.closeLabel.active=!1;break;case 0:this.titleLabel.string="\u9886\u53d6\u6210\u529f",this.doubleBtn.active=!0,this.closeBtn.active=!1,this.closeBtn.active=!0,this.getAll(),u.default.instance.MapBox[e][n]=1,u.default.instance.setMapBox(u.default.instance.MapBox);break;case 1:this.titleLabel.string="\u5df2\u9886\u53d6",this.doubleBtn.active=!1,this.closeBtn.active=!0,this.closeBtn.active=!1}},e.prototype.unlockReward=function(t){if(t){cc.log("reward",t);var e=parseInt(t.id);switch(t.index){case 0:u.default.instance.Jade+=e,u.default.instance.saveHeroGlobal();break;case 1:u.default.instance.Coins+=e,u.default.instance.saveHeroGlobal();break;case 2:u.default.instance.Life+=e,u.default.instance.saveHeroGlobal();break;case 3:u.default.instance.pushEquipmentData(1e4*e);break;case 4:u.default.instance.pushEquipmentData(e);break;case 5:u.default.instance.pushEquipmentData(e),u.default.instance.HeroDataArrs[u.default.instance.MainHeroIndex].updateAttribute()}}},e.prototype.onBtnAll=function(){r.default.instance.playAudio("BtnClick"),d.default.instance?d.default.instance.showRewardAd(p.default.WXVIDEOLIST2.\u53cc\u500d\u9886\u53d6):this.getAll()},e.prototype.getAll=function(){for(var t=0;t<this.dataArrs.length;t++)this.unlockReward(this.dataArrs[t]);u.default.instance.saveEquipmentArrs(),this.onClose()},e.prototype.getArrs=function(t){for(var e=[],n=0;n<y.length;n++)if(t[y[n]]){var i=t[y[n]].split(", "),o=parseInt(i[Math.floor(Math.random()*i.length)]);e.push({index:n,id:o})}this.dataArrs=e;for(var a=0;a<e.length;a++){var s=e[a].index,r=e[a].id,c=this.getImgByJson(s,r),l=this.getNameByJson(s,r),u=this.getAttInData(s,r);this.itemScripts[a].setItem(s,c,l,v[e[a].index],u)}},e.prototype.getNameByJson=function(t,e){switch(t){case 0:return"\u5b9d\u77f3";case 1:return"\u91d1\u5e01";case 2:return"\u519b\u7cae";case 3:return c.getDataById(e).name;case 4:return c.getDataById(e).name+"\xb7\u6b66\u9b42";case 5:return c.getDataById(e).name}return t+""+e},e.prototype.getImgByJson=function(t,e){switch(t){case 0:case 1:case 2:return l.default.instance.rewardSfInGame[t];case 3:return l.default.instance.getEquipmentIconById(e);case 4:return l.default.instance.getSoulIconById(e);case 5:return l.default.instance.rewardSfInGame[3]}},e.prototype.getAttInData=function(t,e){switch(t){case 0:return"\u5b9d\u77f3 x "+e;case 1:return"\u91d1\u5e01 x "+e;case 2:return"\u519b\u7cae x "+e;case 3:var n=c.getDataById(e);return this.getDetailByJson(n);case 4:var i=c.getDataById(e);return this.getDetailByJson(i);case 5:var o=c.getDataById(e);return this.getDetailByJson(o)}return t+""+e},e.prototype.getDetailByJson=function(t){for(var e=0,n="",i=0;i<b.length;i++){var o=b[i];t[o]&&(n+=A[i]+"+"+t[o],n+=++e%2==0?"\n":"  ")}return n},e.prototype.onBtnClose=function(){r.default.instance.playAudio("BtnClick"),this.onClose()},e.prototype.onClose=function(){this.node.active=!1,h.default.instance.refreshMapBoxState(h.default.instance.curStar)},e.prototype.start=function(){},e.instance=null,o([m(cc.Prefab)],e.prototype,"mbItemPrefab",void 0),e=n=o([g],e)}(cc.Component);n.default=S,cc._RF.pop()},{"../Ad/AdList":"AdList","../Ad/AdMgr":"AdMgr","../Audio":"Audio","../Hero/HeroGlobal":"HeroGlobal","../Map":"Map","../TextureMgr":"TextureMgr","../i18n/Language":"Language","../nativets/Config":"Config","./MapBoxItem":"MapBoxItem"}],MapItem:[function(t,e,n){"use strict";cc._RF.push(e,"4debeWHX6RJwby7y9Mb5ln0","MapItem");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Map"),s=t("../Audio"),r=cc._decorator,c=r.ccclass,l=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(){this.bossNode=this.node.getChildByName("boss"),this.normalLight=this.node.getChildByName("light"),this.bossLight=this.bossNode.getChildByName("bosslight"),this.light=this.normalLight,this.lock=this.node.getChildByName("lock"),this.levelText=this.node.getChildByName("level").getComponent(cc.Label),this.starArrs=[];for(var t=0;t<3;t++)this.starArrs.push(this.node.getChildByName(""+t))},e.prototype.setLevel=function(t){this.level=t,this.levelText.string=""+t},e.prototype.setLockState=function(t){this.lock.active=t},e.prototype.setStar=function(t){for(var e=0;e<3;e++)this.starArrs[e].active=e<t},e.prototype.setIsBoss=function(t){this.light=t?this.bossLight:this.normalLight,this.bossNode.active=t,this.light.active=!1},e.prototype.setSelect=function(t){this.light.active=t},e.prototype.start=function(){},e.prototype.onBtnLevel=function(t){s.default.instance.playAudio("BtnClick"),this.lock.active||a.default.instance.onBtnOpenHeroSelect(t)},e=o([c],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../Audio":"Audio","../Map":"Map"}],MapSelect:[function(t,e,n){"use strict";cc._RF.push(e,"c5bd5h/r7JAHrTCNb5fyeeh","MapSelect");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Map"),s=t("../nativets/Global"),r=t("../Main"),c=t("../Menu"),l=t("../i18n/Language"),u=t("../TextureMgr"),d=t("../Hero/HeroGlobal"),p=t("../Audio"),h=t("../nativets/Config"),f=t("../Reward/RewardMapMgr"),g=t("../Ad/AdMgr"),m=t("../Ad/AdList"),y=cc._decorator,v=y.ccclass,b=y.property,A=[-110.5,0,110.5],S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.miniMaps=[],e.icons=[],e}var n;return i(e,t),n=e,e.prototype.init=function(){n.instance=this,this.rightNode=this.node.getChildByName("Right"),this.leftNode=this.node.getChildByName("Left"),this.preFight=this.leftNode.getChildByName("PreFight"),this.preFightLight=this.preFight.getChildByName("light"),this.buffNode=this.preFight.getChildByName("3"),this.buffLabel=this.buffNode.getChildByName("text").getComponent(cc.Label),this.buffLight=this.buffNode.getChildByName("light"),this.rightLayout=this.rightNode.getChildByName("Layout"),this.titleLabel=this.rightNode.getChildByName("title").getComponent(cc.Label),this.miniMap=this.rightNode.getChildByName("minimap").getComponent(cc.Sprite),this.ceLabel=this.preFight.getChildByName("ce").getComponent(cc.Label),this.selectNode=this.node.getChildByName("select"),this.selectLight=this.selectNode.getChildByName("select"),this.lockNode=this.selectNode.getChildByName("lock"),this.lockNode.getComponent(cc.Sprite).spriteFrame=u.default.instance.lockSf,this.lockNode.active=!1,this.nameLabelArrs=[],this.iconPreFightArrs=[];for(var t=0;t<3;t++){this.icons.push(this.selectNode.getChildByName(""+t).getComponent(cc.Sprite));var e=this.preFight.getChildByName(""+t);this.nameLabelArrs.push(e.getChildByName("name").getComponent(cc.Label)),this.iconPreFightArrs.push(e.getChildByName("icon").getComponent(cc.Sprite))}},e.prototype.open=function(t){this.lv=t,c.default.instance.hideRight(),r.default.instance.menuNode.active=!0,a.default.instance.base.active=!1,this.node.active=!0,this.refreshTitle(),this.refreshMiniMap(),this.setPreFight(0),this.refreshBuff()},e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.refreshCE=function(){this.ceLabel.string=""+d.default.instance.HeroDataArrs[d.default.instance.MainHeroIndex].CE},e.prototype.refreshTitle=function(){var t=a.default.instance.index+1,e=this.lv%10;0==e&&(e=10);var n=l.default.mapSelectMission.replace("${x}",l.default[t])+"  "+l.default.mapSelectTurn.replace("${x}",l.default[e]);this.titleLabel.string=n,this.getRewardItemArrs()},e.prototype.getRewardItemArrs=function(){this.mapdata=h.MapData[this.lv-1],this.rightLayout.removeAllChildren();for(var t=this.mapdata.soul[s.default.getInstance().gameDifficulty],e=(this.mapdata.soulrate[s.default.getInstance().gameDifficulty],0);e<t.length;e++)f.default.instance.createRewardMap(t[e]+1+Math.floor(8*Math.random()));if(this.mapdata.item){var n=this.mapdata.item[s.default.getInstance().gameDifficulty];this.mapdata.itemrate[s.default.getInstance().gameDifficulty];if(n)for(var i=0;i<n.length;i++)f.default.instance.createRewardMap(n[i])}else this.rewardItmeArrs=[]},e.prototype.refreshMiniMap=function(){this.miniMap.spriteFrame=this.miniMaps[a.default.instance.index]},e.prototype.onBtnStart=function(){p.default.instance.playAudio("BtnClick");var t=40*s.default.getInstance().gameDifficulty+this.lv;a.default.instance.onBtnLevel(t)},e.prototype.onBtnClose=function(){p.default.instance.playAudio("BtnClick"),this.node.active=!1,a.default.instance.base.active=!0,r.default.instance.menuNode.active=!1,c.default.instance.showRight()},e.prototype.setIcons=function(t){if(this.isPet!=t){this.isPet=t;for(var e=0==t?u.default.instance.heroIconSf:u.default.instance.petIconSf,n=0;n<3;n++)this.icons[n].spriteFrame=e[n];this.lockNode.active=0==t&&d.default.instance.Level<10,this.lockNode.active&&(this.icons[2].spriteFrame=null)}},e.prototype.setSelect=function(t){(this.selectIndex=t,this.selectLight.x=A[t],1==this.isPet)?(d.default.instance.PetLvArrs[t]>0?(d.default.instance.PetIndex=t,this.nameLabelArrs[2].string=h.PetName[t],this.iconPreFightArrs[2].spriteFrame=u.default.instance.petIconBoxMapselectSf[t]):(d.default.instance.PetIndex=-1,this.nameLabelArrs[2].string="\u672a\u89e3\u9501",this.iconPreFightArrs[2].spriteFrame=null),d.default.instance.getMainHeroData().updateAttribute()):(d.default.instance.OtherHeroIndex=d.default.instance.MainHeroIndex,d.default.instance.MainHeroIndex=t,this.nameLabelArrs[0].string=h.HeroName[t],this.iconPreFightArrs[0].spriteFrame=u.default.instance.heroIconRectMapselectSf[t]);cc.director.emit("RefreshMapSelect",this.selectIndex,this.preFightIndex),this.refreshCE()},e.prototype.onBtnSelect=function(t){p.default.instance.playAudio("BtnClick");var e=parseInt(t.target.name);2==e&&0==this.isPet&&d.default.instance.Level<10||this.setSelect(e)},e.prototype.setPreFight=function(t){switch(this.preFightIndex=t,this.preFightLight.x=100*t-485,t){case 0:this.setIcons(0),this.setSelect(d.default.instance.MainHeroIndex);break;case 1:this.setIcons(0),this.setSelect(d.default.instance.OtherHeroIndex);break;case 2:this.setIcons(1);var e=d.default.instance.PetIndex;e<0&&(e=0),this.setSelect(e)}},e.prototype.onBtnVideoBuff=function(){s.default.getInstance().preBuff||(g.default.instance?g.default.instance.showRewardAd(m.default.WXVIDEOLIST1.\u5f00\u5c40Buff):(s.default.getInstance().preBuff=!0,this.refreshBuff()))},e.prototype.refreshBuff=function(){this.buffLight.active=s.default.getInstance().preBuff,this.buffLabel.string=s.default.getInstance().preBuff?"BUFF":"\u89c2\u770b\u89c6\u9891"},e.prototype.onBtnPreFight=function(t){p.default.instance.playAudio("BtnClick");var e=parseInt(t.target.name);this.setPreFight(e)},e.instance=null,o([b([cc.SpriteFrame])],e.prototype,"miniMaps",void 0),e=n=o([v],e)}(cc.Component);n.default=S,cc._RF.pop()},{"../Ad/AdList":"AdList","../Ad/AdMgr":"AdMgr","../Audio":"Audio","../Hero/HeroGlobal":"HeroGlobal","../Main":"Main","../Map":"Map","../Menu":"Menu","../Reward/RewardMapMgr":"RewardMapMgr","../TextureMgr":"TextureMgr","../i18n/Language":"Language","../nativets/Config":"Config","../nativets/Global":"Global"}],Map:[function(t,e,n){"use strict";cc._RF.push(e,"d9854K9/Z9HJJi6lWAg5HjN","Map");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./Main"),s=t("./nativets/Global"),r=t("./Map/MapItem"),c=t("./Hero/HeroGlobal"),l=t("./nativets/Config"),u=t("./Map/MapSelect"),d=t("./Audio"),p=t("./Message"),h=t("./Tool/Statistics"),f=t("./Map/MapBox"),g=t("./Ad/AdMgr"),m=t("./nativets/Platform"),y=cc._decorator,v=y.ccclass,b=y.property,A=[cc.v2(-450,200),cc.v2(-450,30),cc.v2(-450,-140),cc.v2(-150,-60),cc.v2(-150,110),cc.v2(150,200),cc.v2(150,30),cc.v2(150,-140),cc.v2(450,-60),cc.v2(450,110)],S=[cc.v2(-450,-140),cc.v2(-450,30),cc.v2(-450,200),cc.v2(-150,110),cc.v2(-150,-60),cc.v2(150,-140),cc.v2(150,30),cc.v2(150,200),cc.v2(450,110),cc.v2(450,-60)],I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dotsf=null,e.lightsf=null,e.mapItem=null,e.MapItemArrs=[],e.difficultyButton=[],e.boxArrs=[],e.boxLightArrs=[],e.boxBtnArrs=[],e}var n;return i(e,t),n=e,e.prototype.init=function(){n.instance=this,this.index=0,this.base=this.node.getChildByName("base"),this.mapSelect=this.node.getChildByName("mapSelect"),this.layout=this.base.getChildByName("Layout"),this.line=this.base.getChildByName("line"),this.btnLeft=this.base.getChildByName("Left"),this.btnRight=this.base.getChildByName("Right"),this.titleLabel=this.base.getChildByName("titleText").getComponent(cc.Label),this.bottom=this.base.getChildByName("bottom"),this.moreBtn=this.bottom.getChildByName("more"),this.moreBtn.active=m.getPlatform()==m.Platform.WX||m.getPlatform()==m.Platform.QQ,this.starLabel=this.bottom.getChildByName("text").getComponent(cc.Label);for(var t=0;t<3;t++)this.difficultyButton.push(this.bottom.getChildByName(""+t).getComponent(cc.Button)),this.boxArrs.push(this.bottom.getChildByName("box"+t).getComponent(cc.Sprite)),this.boxBtnArrs.push(this.bottom.getChildByName("box"+t).getComponent(cc.Button)),this.boxLightArrs.push(this.bottom.getChildByName("light"+t));this.mapSelect.getComponent(u.default).init(),this.initLayout()},e.prototype.initLayout=function(){for(var t=1;t<11;t++){var e=cc.instantiate(this.mapItem);e.name=t+"",e.parent=this.layout,e.position=S[t-1];var n=e.getComponent(r.default);this.MapItemArrs.push(n),n.init(),n.setLevel(t),n.setIsBoss(t%5==0),n.setLockState(!1)}},e.prototype.start=function(){},e.prototype.onBtnOpenHeroSelect=function(t){var e=parseInt(t.target.name);e=10*this.index+parseInt(t.target.name),u.default.instance.open(e)},e.prototype.onBtnLevel=function(t){d.default.instance.playAudio("BtnClick"),c.default.instance.Life<5?p.default.instance.showLack("life"):(c.default.instance.Life-=5,c.default.instance.saveHeroGlobal(),h.default.getInstance().reportEvent("\u8fdb\u5165\u6e38\u620f"),s.default.getInstance().nowLevel=t,a.default.instance.loadGame(function(){}))},e.prototype.onBtnMode=function(t){d.default.instance.playAudio("BtnClick");var e=parseInt(t.target.name);s.default.getInstance().gameDifficulty=e,this.refreshDifficulty(),this.refreshLayout()},e.prototype.onBtnMoreGame=function(){d.default.instance.playAudio("BtnClick"),g.default.instance&&g.default.instance.showGamePortal()},e.prototype.onBtnHome=function(){d.default.instance.playAudio("BtnClick"),a.default.instance.mapNode.active=!1,a.default.instance.menuNode.active=!0},e.prototype.onBtnLeft=function(){d.default.instance.playAudio("BtnClick"),this.index--,this.refreshLayout()},e.prototype.onBtnRight=function(){d.default.instance.playAudio("BtnClick"),this.index++,this.refreshLayout()},e.prototype.loadGame=function(){var t=this;0==a.default.instance.gameNode.children.length?cc.loader.loadRes("Game",cc.Prefab,function(e,n){e||(cc.instantiate(n).parent=a.default.instance.gameNode,a.default.instance.gameNode.active=!0,t.node.parent.active=!1)}):(a.default.instance.gameNode.active=!0,this.node.parent.active=!1)},e.prototype.ReleaseMap=function(){for(var t=cc.loader.getDependsRecursively("Map"),e=0;e<t.length;e++)cc.loader.release(t[e])},e.prototype.refreshLayout=function(){s.default.getInstance().BgIndex=this.index,this.index%2==1?this.reverse(!0):this.reverse(!1),this.btnLeft.active=0!=this.index,this.btnRight.active=3!=this.index;for(var t=10*this.index,e=c.default.instance.MapData[s.default.getInstance().gameDifficulty].slice(t,t+10),n=0,i=0;i<10;i++){var o=this.MapItemArrs[i];o.setSelect(!1),o.setStar(e[i]),n+=e[i],i+t<c.default.instance.Unlock-40*s.default.getInstance().gameDifficulty?(i+t==c.default.instance.Unlock-1-40*s.default.getInstance().gameDifficulty&&o.setSelect(!0),o.setLockState(!1)):o.setLockState(!0)}this.curStar=n,this.refreshMapBoxState(n),this.refreshTitle()},e.prototype.refreshMapBoxState=function(t){this.starLabel.string=t+"/30";var e=[9,18,30],n=4*s.default.getInstance().gameDifficulty+this.index,i=c.default.instance.MapBox[n];cc.log("MapBox",n,i),this.boxStateArrs=[];for(var o=0;o<i.length;o++)0==i[o]?(this.boxBtnArrs[o].interactable=!0,this.boxLightArrs[o].active=t>=e[o],t>=e[o]?this.boxStateArrs.push(0):this.boxStateArrs.push(-1)):(this.boxLightArrs[o].active=!1,this.boxBtnArrs[o].interactable=!1,this.boxStateArrs.push(1))},e.prototype.onBtnBox=function(t){var e=parseInt(t.target.name[3]),n=4*s.default.getInstance().gameDifficulty+this.index,i=(c.default.instance.MapBox[n],l.MapBox[e]),o=this.boxStateArrs[e];cc.log("BOXCLICK",i,o),f.default.instance.onOpen(i,o,n,e)},e.prototype.refreshTitle=function(){this.titleLabel.string=l.MapTitle[this.index]},e.prototype.refreshDifficulty=function(){for(var t=0;t<3;t++){s.default.getInstance().gameDifficulty==t?this.difficultyButton[t].interactable=!1:this.difficultyButton[t].interactable=!0;var e=this.difficultyButton[t].node.getComponent(cc.Sprite);s.default.getInstance().unlockDifficulty>=t?e.setMaterial(0,cc.MaterialVariant.createWithBuiltin("2d-sprite",e)):(this.difficultyButton[t].interactable=!1,e.setMaterial(0,cc.MaterialVariant.createWithBuiltin("2d-gray-sprite",e)))}},e.prototype.reverse=function(t){this.line.scaleY=t?1:-1;for(var e=t?S:A,n=0;n<10;n++)this.MapItemArrs[n].node.position=e[n]},e.prototype.onEnable=function(){this.layout||this.init(),s.default.getInstance().isMapFocus&&(this.index=Math.floor((c.default.instance.Unlock-40*s.default.getInstance().unlockDifficulty-1)/10)),this.refreshDifficulty(),this.refreshLayout()},e.instance=null,o([b(cc.Sprite)],e.prototype,"dotsf",void 0),o([b(cc.Sprite)],e.prototype,"lightsf",void 0),o([b(cc.Prefab)],e.prototype,"mapItem",void 0),e=n=o([v],e)}(cc.Component);n.default=I,cc._RF.pop()},{"./Ad/AdMgr":"AdMgr","./Audio":"Audio","./Hero/HeroGlobal":"HeroGlobal","./Main":"Main","./Map/MapBox":"MapBox","./Map/MapItem":"MapItem","./Map/MapSelect":"MapSelect","./Message":"Message","./Tool/Statistics":"Statistics","./nativets/Config":"Config","./nativets/Global":"Global","./nativets/Platform":"Platform"}],MenuSelect:[function(t,e,n){"use strict";cc._RF.push(e,"ebcccwmSHtAPL4Af5Gz+ybU","MenuSelect");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./TextureMgr"),s=t("./Equipment"),r=t("./Hero/HeroGlobal"),c=t("./Audio"),l=cc._decorator,u=l.ccclass,d=(l.property,[-110.5,0,110.5]),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icons=[],e.isPet=0,e}var n;return i(e,t),n=e,e.prototype.init=function(){this.selectNode=this.node.getChildByName("select");for(var t=0;t<3;t++)this.icons.push(this.node.getChildByName(""+t).getComponent(cc.Sprite));this.lockNode=this.node.getChildByName("lock"),this.lockNode.getComponent(cc.Sprite).spriteFrame=a.default.instance.lockSf,this.lockNode.active=!1,cc.director.on("RefreshIcon",this.refreshIcon,this)},e.prototype.onLoad=function(){n.instance=this,this.init()},e.prototype.start=function(){},e.prototype.refreshIcon=function(){s.default.instance&&3==s.default.instance.listIndex?this.setIcons(1):this.setIcons(0)},e.prototype.setIcons=function(t){this.isPet=t,cc.log("ispetMenus",n.instance.isPet);for(var e=0==t?a.default.instance.heroIconSf:a.default.instance.petIconSf,i=0;i<3;i++)this.icons[i].spriteFrame=e[i];this.lockNode.active=0==t&&r.default.instance.Level<10,this.lockNode.active&&(this.icons[2].spriteFrame=null)},e.prototype.setSelect=function(t){this.selectIndex=t,this.selectNode.x=d[t],cc.director.emit("RefreshSelect",t)},e.prototype.onBtnSelect=function(t){c.default.instance.playAudio("BtnClick");var e=parseInt(t.target.name);0==this.isPet&&2==e&&r.default.instance.Level<10||this.setSelect(e)},e.prototype.onEnable=function(){},e.prototype.onDestroy=function(){cc.director.off("RefreshIcon",this.refreshIcon,this)},e.instance=null,e=n=o([u],e)}(cc.Component);n.default=p,cc._RF.pop()},{"./Audio":"Audio","./Equipment":"Equipment","./Hero/HeroGlobal":"HeroGlobal","./TextureMgr":"TextureMgr"}],Menu:[function(t,e,n){"use strict";cc._RF.push(e,"376486RjD1GKZ8HvrDo94HM","Menu");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,a){function s(t){try{c(i.next(t))}catch(t){a(t)}}function r(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,r)}c((i=i.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(t){return function(e){return c([t,e])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./Main"),c=t("./Equipment"),l=t("./nativets/Config"),u=t("./Tool/LoadPromise"),d=t("./MenuSelect"),p=t("./Hero/HeroGlobal"),h=t("./TextureMgr"),f=t("./Audio"),g=t("./Others/Others"),m=t("./Ad/AdMgr"),y=t("./Message"),v=t("./Ad/WXAdMgr"),b=t("./Tool/TimeMgr"),A=t("./DataMgr"),S=t("./nativets/Platform"),I=t("./Others/TimeLimit/TimeLimit"),_=t("./Ad/AdList"),B=t("./Others/Qimen/Qimen"),C=t("./Tool/Statistics"),w=t("./nativets/Global"),x=t("./Ad/TTAdMgr"),k=cc._decorator,M=k.ccclass,P=(k.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timeLimitSaveCount=0,e.onceNative=!1,e}var n;return i(e,t),n=e,e.prototype.init=function(){this.LeftNode=this.node.getChildByName("Left"),this.LeftRoot=this.LeftNode.getChildByName("root"),this.hero=this.LeftRoot.getChildByName("Hero"),this.heroSk=this.hero.getComponent(sp.Skeleton),this.BottomNode=this.node.getChildByName("Bottom"),this.RightNode=this.node.getChildByName("Right"),this.timeLimitBtn=this.RightNode.getChildByName("TimeLimit"),this.timeLimitLabel=this.timeLimitBtn.getChildByName("text").getComponent(cc.Label),this.timeLimitNode=cc.find("Canvas").getChildByName("TimeLimit"),S.getPlatform()!=S.Platform.WX&&S.getPlatform()!=S.Platform.QQ||(this.RightNode.getChildByName("More").active=!0),this.TopNode=this.node.getChildByName("Top"),this.TopIconNode=this.TopNode.getChildByName("icon"),this.lvLabel=this.TopIconNode.getChildByName("lv").getComponent(cc.Label),this.ceLabel=this.TopIconNode.getChildByName("ce").getComponent(cc.Label),this.nameLabel=this.TopIconNode.getChildByName("name").getComponent(cc.Label),this.heroIcon=this.TopIconNode.getChildByName("icon").getComponent(cc.Sprite),this.jadeLabel=this.TopNode.getChildByName("jade").getComponent(cc.Label),this.lifeLabel=this.TopNode.getChildByName("life").getComponent(cc.Label),this.coinsLabel=this.TopNode.getChildByName("coins").getComponent(cc.Label),cc.director.on("CloseEquipment",this.showRight,this),cc.director.on("RefreshSelect",this.refreshSpine,this),cc.director.on("RefreshMapSelect",this.refreshMapSelect,this),cc.director.on("RefreshIcon",this.refreshSelect,this)},e.prototype.onLoad=function(){n.instance=this,this.init(),this.setTimeLimitState(),this.loadDefaultHeroSpAsync()},e.prototype.start=function(){A.default.instance.needOpenSign&&(A.default.instance.needOpenSign=!1,this.OpenSign()),this.checkLaunch()},e.prototype.checkLaunch=function(){var t=this;if(A.default.instance.needCheckMark){var e=function(){m.default.instance?m.default.instance.showRewardAd(_.default.WXVIDEOLIST2.\u6536\u85cf\u793c\u5305):t.addCoins(1e3)};S.getPlatform()==S.Platform.WX&&1089==wx.getLaunchOptionsSync().scene&&(n.instance.addCoins(1e3),A.default.instance.saveWXMarkData(),y.default.instance.show("\u6536\u85cf\u793c\u5305","\u606d\u559c\u83b7\u5f97\u6536\u85cf\u793c\u53051000\u91d1\u5e01\uff0c\u662f\u5426\u89c2\u770b\u89c6\u9891\u7ffb\u500d",e)),S.getPlatform()!=S.Platform.QQ||3003!=wx.getLaunchOptionsSync().scene&&1023!=wx.getLaunchOptionsSync().scene&&1131!=wx.getLaunchOptionsSync().scene||(n.instance.addCoins(1e3),A.default.instance.saveWXMarkData(),y.default.instance.show("\u6536\u85cf\u793c\u5305","\u606d\u559c\u83b7\u5f97\u6536\u85cf\u793c\u53051000\u91d1\u5e01\uff0c\u662f\u5426\u89c2\u770b\u89c6\u9891\u7ffb\u500d",e))}},e.prototype.loadDefaultHeroSpAsync=function(){this.loadMenuHeroSp(p.default.instance.MainHeroIndex),this.refreshHero(p.default.instance.MainHeroIndex)},e.prototype.loadMenuHeroSp=function(t){return a(this,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return S.getPlatform()!=S.Platform.WX&&S.getPlatform()!=S.Platform.QQ?[3,2]:[4,u.loadWXSubPromise("hero"+t)];case 1:n.sent(),n.label=2;case 2:return[4,u.loadSpinePromise(l.HeroSpName[t])];case 3:return e=n.sent(),this.hero.y=-210,this.heroSk.skeletonData=e,this.heroSk.animation="stay",this.heroSk._updateSkeletonData(),this.heroSk.setSkin("001"),cc.director.emit("RefreshSp",t),console.log("loadHero","hero"+t),[2]}})})},e.prototype.loadMenuPetSp=function(t){return a(this,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return[4,u.loadSpinePromise(l.PetSpName[t])];case 1:return e=n.sent(),console.log("loadPet",l.PetSpName[t]),this.hero.y=-20,this.heroSk.skeletonData=e,this.heroSk.animation="fly",this.heroSk._updateSkeletonData(),this.heroSk.setSkin("default"),[2]}})})},e.prototype.refreshSelect=function(t){if(console.log("RefreshSelect"),this.LeftNode.active=0==c.default.instance.listIndex||3==c.default.instance.listIndex,3==c.default.instance.listIndex){var e=p.default.instance.PetIndex;e<0&&(e=0),d.default.instance.setSelect(e),this.loadMenuPetSp(e)}else d.default.instance.setSelect(p.default.instance.MainHeroIndex),this.loadMenuHeroSp(p.default.instance.MainHeroIndex)},e.prototype.refreshMapSelect=function(t,e){2==e?this.loadMenuPetSp(t):this.loadMenuHeroSp(t)},e.prototype.refreshSpine=function(t){c.default.instance&&3==c.default.instance.listIndex?(this.refreshPet(t),p.default.instance.setPetIndex(t)):this.refreshHero(t)},e.prototype.refreshHero=function(t){console.log("refreshHero"),c.default.instance&&c.default.instance.refreshDetail(t),this.loadMenuHeroSp(t),this.heroIcon.spriteFrame=h.default.instance.heroIconRectSf[t],this.nameLabel.string=l.HeroName[t],this.ceLabel.string=p.default.instance.HeroDataArrs[t].CE+""},e.prototype.refreshPet=function(t){this.loadMenuPetSp(t)},e.prototype.refreshTopLabel=function(t){this.lvLabel&&(this.lvLabel.string="Lv."+p.default.instance.Level,t?(this.jadeLabel.string=""+p.default.instance.Jade,this.coinsLabel.string=""+p.default.instance.Coins,this.lifeLabel.string=""+p.default.instance.Life):(this.setTopLabel("jade"),this.setTopLabel("coins"),this.setTopLabel("life")))},e.prototype.setTopLabel=function(t){var e=this,n=null,i=0;switch(t){case"jade":n=this.jadeLabel,i=p.default.instance.Jade;break;case"coins":n=this.coinsLabel,i=p.default.instance.Coins;break;case"life":n=this.lifeLabel,i=p.default.instance.Life}var o=parseInt(n.string);n.string.length;if(i>o){this.isScrolling||(f.default.instance.playAudio("TopScroll"),this.isScrolling=!0);var a=this.generateRandomString(t);this.schedule(function(){a.next().done&&(a=null,n.string=""+i,e.isScrolling=!1)},.05,15)}else n.string=""+i},e.prototype.generateRandomString=function(t){var e;return s(this,function(n){switch(n.label){case 0:e=0,n.label=1;case 1:return e<15?[4,this.setTopLabel2(t)]:[3,4];case 2:n.sent(),n.label=3;case 3:return e++,[3,1];case 4:return[2]}})},e.prototype.setTopLabel2=function(t){var e=null;switch(t){case"jade":e=this.jadeLabel,p.default.instance.Jade;break;case"coins":e=this.coinsLabel,p.default.instance.Coins;break;case"life":e=this.lifeLabel,p.default.instance.Life}var n=e.string.length;e.string=this.getRandomStr(n)},e.prototype.getRandomStr=function(t){for(var e="",n=0;n<t;n++)e+=Math.floor(10*Math.random())+"";return e},e.prototype.preLoadMap=function(){cc.loader.loadRes("Map",cc.Prefab,function(t,e){if(!t){var n=cc.instantiate(e);r.default.instance.mapNode.active=!1,n.parent=r.default.instance.mapNode}})},e.prototype.onBtnStart=function(){f.default.instance.playAudio("BtnClick"),this.loadMap()},e.prototype.onBtnOthers=function(t){f.default.instance.playAudio("BtnClick");parseInt(t.target.name)},e.prototype.onBtnSetting=function(){f.default.instance.playAudio("BtnClick"),cc.find("Canvas").getChildByName("Setting").active=!0},e.prototype.onBtnAddLife=function(){f.default.instance.playAudio("BtnClick"),y.default.instance.showLack("life")},e.prototype.addLife=function(t){p.default.instance.Life+=t,p.default.instance.saveHeroGlobal(),this.refreshTopLabel()},e.prototype.onBtnAddCoins=function(){f.default.instance.playAudio("BtnClick"),y.default.instance.showLack("coins")},e.prototype.addCoins=function(t){p.default.instance.Coins+=t,p.default.instance.saveHeroGlobal(),this.refreshTopLabel()},e.prototype.onBtnAddJade=function(){f.default.instance.playAudio("BtnClick"),y.default.instance.showLack("jade")},e.prototype.addJade=function(t){p.default.instance.Jade+=t,p.default.instance.saveHeroGlobal(),this.refreshTopLabel()},e.prototype.onBtnMoreGame=function(){f.default.instance.playAudio("BtnClick"),m.default.instance&&m.default.instance.showGamePortal()},e.prototype.onBtnOpenTimeLimit=function(){f.default.instance.playAudio("BtnClick"),I.default.instance.open(!0),C.default.getInstance().reportEvent("\u9650\u65f6\u795e\u5ba0")},e.prototype.onBtnOpenQimen=function(){f.default.instance.playAudio("BtnClick"),B.default.instance.open(),C.default.getInstance().reportEvent("\u5947\u95e8\u62bd\u5956")},e.prototype.setTimeLimitState=function(){this.timeLimitBtn.active=p.default.instance.PetLvArrs[1]<1},e.prototype.refreshTimeLimit=function(){var t=Math.floor(A.default.instance.timeLimitNum);t<=0&&(this.timeLimitBtn.active=!1,this.timeLimitSaveCount=0,A.default.instance.saveTimeLimitData());var e=b.default.formatTime(t);this.timeLimitLabel.string!=e&&(this.timeLimitLabel.string=e,this.timeLimitSaveCount++,this.timeLimitSaveCount>20&&(this.timeLimitSaveCount=0,A.default.instance.saveTimeLimitData()))},e.prototype.Test=function(){},e.prototype.onBtnTestSubs=function(){v.default.instance.WXSubscribe(0)},e.prototype.onBtnTestSubs1=function(){v.default.instance.WXSubscribe(1)},e.prototype.loadMap=function(){var t=this;r.default.instance.loadMap(function(){t.node.parent.active=!1,m.default.instance&&m.default.instance.showBannerAd(_.default.BANNERLIST.\u5730\u56fe\u53f3\u4e0a)})},e.prototype.loadMapSafe=function(){},e.prototype.showBase=function(t){},e.prototype.showRight=function(){this.LeftNode.active=!0,this.BottomNode.active=!0,this.RightNode.active=!0,this.loadMenuHeroSp(p.default.instance.MainHeroIndex)},e.prototype.hideRight=function(){this.BottomNode.active=!1,this.RightNode.active=!1},e.prototype.ReleaseMenu=function(){for(var t=cc.loader.getDependsRecursively("Menu"),e=0;e<t.length;e++)cc.loader.release(t[e])},e.prototype.onBtnListSelect=function(t){var e=this;r.default.instance.LoadEquipment(function(){e.hideRight(),c.default.instance.onBtnListSelect(t)})},e.prototype.onBtnOthersSelect=function(t){var e=this;S.getPlatform()==S.Platform.TT&&"1"==t.target.name?w.default.getInstance().ttAuthor?(console.log("AuthorOpenRank"),this.OpenRank()):wx.login({success:function(t){tt.authorize({scope:"scope.userInfo",success:function(){console.log("AuthorSuccess"),x.default.instance&&x.default.instance.getUserInfo(),w.default.getInstance().ttAuthor=!0},fail:function(){console.log("AuthorFail"),x.default.instance&&x.default.instance.guideActive()}})}}):(r.default.instance.LoadOthers(function(){e.LeftNode.active=!1,e.RightNode.active=!1,e.BottomNode.active=!1,g.default.instance.onBtnListSelect(t)}),m.default.instance&&Math.random()<.6&&(this.onceNative?m.default.instance.showInterstitial():(m.default.instance.showNativeAd(),this.onceNative=!0)))},e.prototype.OpenRank=function(){f.default.instance.playAudio("BtnClick"),this.OpenOthers(1)},e.prototype.OpenFriend=function(){this.OpenOthers(9)},e.prototype.OpenSign=function(){this.OpenOthers(0)},e.prototype.OpenOthers=function(t){var e=this;r.default.instance.LoadOthers(function(){e.LeftNode.active=!1,e.RightNode.active=!1,e.BottomNode.active=!1,g.default.instance.open(t)})},e.prototype.onEnable=function(){this.refreshTopLabel(!0),f.default.instance&&f.default.instance.stopBgm("game"),this.scheduleOnce(function(){f.default.instance.playBgm("menu")},2)},e.prototype.onDestroy=function(){f.default.instance.stopBgm("menu"),cc.director.off("CloseEquipment",this.showRight,this),cc.director.off("RefreshSelect",this.refreshSelect,this),cc.director.off("RefreshIcon",this.refreshSelect,this),cc.director.off("RefreshMapSelect",this.refreshMapSelect,this)},e.prototype.update=function(t){this.timeLimitBtn.active&&(A.default.instance.timeLimitNum-=t,this.refreshTimeLimit())},e.instance=null,e=n=o([M],e)}(cc.Component));n.default=P,cc._RF.pop()},{"./Ad/AdList":"AdList","./Ad/AdMgr":"AdMgr","./Ad/TTAdMgr":"TTAdMgr","./Ad/WXAdMgr":"WXAdMgr","./Audio":"Audio","./DataMgr":"DataMgr","./Equipment":"Equipment","./Hero/HeroGlobal":"HeroGlobal","./Main":"Main","./MenuSelect":"MenuSelect","./Message":"Message","./Others/Others":"Others","./Others/Qimen/Qimen":"Qimen","./Others/TimeLimit/TimeLimit":"TimeLimit","./TextureMgr":"TextureMgr","./Tool/LoadPromise":"LoadPromise","./Tool/Statistics":"Statistics","./Tool/TimeMgr":"TimeMgr","./nativets/Config":"Config","./nativets/Global":"Global","./nativets/Platform":"Platform"}],Message:[function(t,e,n){"use strict";cc._RF.push(e,"6993ddtWOlJc4G+EYpY6pmO","Message");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./Audio"),s=t("./DataMgr"),r=t("./Ad/AdMgr"),c=t("./Ad/AdList"),l=t("./Hero/HeroGlobal"),u=cc._decorator,d=u.ccclass,p=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return i(e,t),n=e,e.prototype.init=function(){this.box=this.node.getChildByName("box"),this.title=this.box.getChildByName("title").getComponent(cc.Label),this.text=this.box.getChildByName("text").getComponent(cc.Label),this.node.active=!1},e.prototype.onLoad=function(){n.instance=this,this.init()},e.prototype.start=function(){},e.prototype.onBtnOk=function(){a.default.instance.playAudio("BtnClick"),this.callback&&this.callback(),this.onClose()},e.prototype.onBtnClose=function(){a.default.instance.playAudio("BtnClick"),this.cancekCallback&&this.cancekCallback(),this.onClose()},e.prototype.onClose=function(){this.node.active=!1},e.prototype.show=function(t,e,n,i,o){this.title.string=t,this.text.string=e,this.node.active=!0,this.callback=n,this.cancekCallback=o},e.prototype.showLack=function(t){this.title.string="\u6bcf\u65e5\u798f\u5229";var e="",n="";switch(t){case"life":n="\u519b\u7cae";var i=s.default.instance.lifeCount;i<3?(e="\u4eca\u65e5\u53ef\u4ee5\u9886\u53d6"+s.default.instance.lifeArrs[i]+n,this.callback=function(){r.default.instance&&r.default.instance.showRewardAd(c.default.WXVIDEOLIST2.\u52a0\u4f53\u529b)}):(e="\u4eca\u5929\u5df2\u7ecf\u8fbe\u5230\u6700\u5927\u9886\u53d6\u6b21\u6570\uff0c\u8bf7\u660e\u5929\u518d\u8bd5^^",this.callback=function(){});break;case"coins":n="\u91d1\u5e01",s.default.instance.coinsCount<3?(e="\u4eca\u65e5\u53ef\u4ee5\u9886\u53d6"+(300+10*l.default.instance.Level)+n,this.callback=function(){r.default.instance&&r.default.instance.showRewardAd(c.default.WXVIDEOLIST2.\u52a0\u91d1\u5e01)}):(e="\u4eca\u5929\u5df2\u7ecf\u8fbe\u5230\u6700\u5927\u9886\u53d6\u6b21\u6570\uff0c\u8bf7\u660e\u5929\u518d\u8bd5^^",this.callback=function(){});break;case"jade":n="\u94bb\u77f3";var o=s.default.instance.jadeCount;o<3?(e="\u4eca\u65e5\u53ef\u4ee5\u9886\u53d6"+s.default.instance.jadeArrs[o]+n,this.callback=function(){r.default.instance&&r.default.instance.showRewardAd(c.default.WXVIDEOLIST2.\u52a0\u4ed9\u7389)}):(e="\u4eca\u5929\u5df2\u7ecf\u8fbe\u5230\u6700\u5927\u9886\u53d6\u6b21\u6570\uff0c\u8bf7\u660e\u5929\u518d\u8bd5^^",this.callback=function(){})}this.text.string=e,this.node.active=!0},e.instance=null,e=n=o([d],e)}(cc.Component));n.default=p,cc._RF.pop()},{"./Ad/AdList":"AdList","./Ad/AdMgr":"AdMgr","./Audio":"Audio","./DataMgr":"DataMgr","./Hero/HeroGlobal":"HeroGlobal"}],MonsterAnimState:[function(t,e,n){"use strict";cc._RF.push(e,"9189eMWX0RPBqCGJUjkzKU7","MonsterAnimState");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,r=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(){},e.prototype.start=function(){},e.prototype.showCollision=function(){this.node.group="default"},e.prototype.hideCollision=function(){this.node.group="monsterhit"},e=o([s],e)}(cc.Component));n.default=r,cc._RF.pop()},{}],MonsterBulletItem:[function(t,e,n){"use strict";cc._RF.push(e,"2cc9euh1hZM/qL2ViEqrbjv","MonsterBulletItem");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../BulletMgr"),s=t("../Hero/Hero"),r=cc._decorator,c=r.ccclass,l=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(t){this.index=t,this.direct=this.node.scaleX>0?1:-1,this.sp=500,this.life=3,this.use(),cc.director.on("GameStart",this.unuse,this)},e.prototype.start=function(){},e.prototype.use=function(){this.node.angle=0,this.using=!0,this.life=3,this.node.opacity=255},e.prototype.unuse=function(){this.node&&(this.life=0,this.using=!1,a.default.instance.monsterbulletPool.put(this.node))},e.prototype.update=function(t){if(this.using&&this.life>0){this.node.x+=this.direct*t*600,this.life-=t,this.life<=0&&this.unuse()}},e.prototype.updateFollow=function(t){if(this.using&&this.life>0){var e,n=cc.v2(s.default.instance.node.x,s.default.instance.node.y+100).sub(this.node.position).normalize();if(this.node.scaleX>0)(e=Math.atan2(n.y,n.x)/Math.PI*180)<this.lastAngle&&(this.node.angle-=1),this.node.x+=Math.cos(this.node.angle/180*Math.PI)*t*600,this.node.y+=Math.sin(this.node.angle/180*Math.PI)*t*400;else(e=Math.atan2(n.y,n.x)/Math.PI*180-180)>this.lastAngle&&(this.node.angle+=2),this.node.x-=Math.cos(this.node.angle/180*Math.PI)*t*600,this.node.y-=Math.sin(this.node.angle/180*Math.PI)*t*400;this.node.angle,Math.PI;this.lastAngle=e,this.node.angle>90&&this.unuse(),this.node.angle<-90&&this.unuse(),this.life-=t,this.life<=0&&this.unuse()}},e.prototype.onDestroy=function(){cc.director.off("GameStart",this.unuse,this)},e=o([c],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../BulletMgr":"BulletMgr","../Hero/Hero":"Hero"}],MonsterFSM:[function(t,e,n){"use strict";cc._RF.push(e,"402e9iDWsBDlKxAhNuOgt43","MonsterFSM");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../lib/state-machine.min.js"),s=t("./Monster"),r=t("../Audio"),c=t("../nativets/Global"),l=cc._decorator,u=l.ccclass,d=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.skColor=[{a:1,r:0,g:0,b:0},{a:1,r:.4,g:.4,b:.4},{a:1,r:.4,g:0,b:0},{a:1,r:.25,g:.31,b:.43},{a:1,r:.4,g:0,b:.2},{a:1,r:1,g:1,b:1}],e.hitTime=.25,e}return i(e,t),e.prototype.init=function(){var t=this;this.MonsterScript=this.node.getComponent(s.default),this.sk=this.node.getComponent(sp.Skeleton),this.material=this.node.getComponent(sp.Skeleton).getMaterial(0),this.sk.setCompleteListener(function(){t.fsm.is("state_move")||t.fsm.is("state_stand")||(t.fsm.is("state_bossmagic")&&t.MonsterScript.bossMagicEnd(),t.fsm.can("stop")&&t.fsm.stop(),t.fsm.is("state_dead")&&t.MonsterScript.recycle())}),this.sk.setEventListener(function(e,n){var i=n.data.name;t.MonsterScript.isBoss&&cc.log("Monsterskevent",i),"gongji_dao"!=i&&"gongji_qiang"!=i&&"gongji_shejian"!=i&&"gongji2"!=i&&"gongji_jingong"!=i&&"gongji"!=i&&"gongji1"!=i&&"\u653b\u51fb"!=i||t.MonsterScript.attack(),98==t.MonsterScript.type&&"gongji2"==i&&r.default.instance.playAudio("CCSkill2"),99==t.MonsterScript.type&&"gongji3"==i&&r.default.instance.playAudio("XXSkill3"),99==t.MonsterScript.type&&"gongji2"==i&&r.default.instance.playAudio("XXSkill2"),"gongji_yuangong"==i&&t.MonsterScript.berserkerAttack(),"gongji3"==i&&(1==t.DoubleIndex?(t.DoubleIndex--,t.MonsterScript.hitaoe.scaleX=1,r.default.instance.playAudio("CCSkill3")):0==t.DoubleIndex&&(t.MonsterScript.hitaoe.scaleX=-1,t.DoubleIndex=null,r.default.instance.playAudio("CCSkill3")),t.MonsterScript.bossAttack())}),this.fsm=new a({init:"state_stand",transitions:[{name:"reset",from:"*",to:"state_stand"},{name:"move",from:"state_stand",to:"state_move"},{name:"attack",from:["state_stand","state_move"],to:"state_attack"},{name:"bossAttack",from:["state_stand","state_move"],to:"state_bossattack"},{name:"bossDouble",from:["state_stand","state_move"],to:"state_bossdouble"},{name:"bossMagic",from:["state_stand","state_move"],to:"state_bossmagic"},{name:"lancerDash",from:["state_stand","state_move"],to:"state_lancerdash"},{name:"dragonAttack",from:["state_stand","state_move"],to:"state_dragonattack"},{name:"stop",from:["state_attack","state_bossattack","state_bossdouble","state_bossmagic","state_lancerdash","state_dragonattack","state_move","state_hit","state_fall","state_show"],to:"state_stand"},{name:"hit",from:["state_attack","state_bossattack","state_bossdouble","state_bossmagic","state_lancerdash","state_dragonattack","state_move","state_stand","state_hit","state_fall","state_show"],to:"state_hit"},{name:"fall",from:"state_hit",to:"state_fall"},{name:"dead",from:"state_hit",to:"state_dead"},{name:"show",from:"*",to:"state_show"}],methods:{onShow:function(){t.playAuto("\u8fdb\u573a",0)},onReset:function(){t.playAuto("\u7ad9\u7acb",0)},onMove:function(){t.playAuto("\u8dd1",0)},onAttack:function(){t.playAuto("\u653b\u51fb",1)},onBossDouble:function(){t.playAuto("\u653b\u51fb3",1),t.DoubleIndex=1},onBossMagic:function(){t.playAuto("\u6280\u80fd1",1)},onStop:function(){t.playAuto("\u7ad9\u7acb",0)},onHit:function(){t.playAuto("\u88ab\u653b\u51fb",1)},onFall:function(){t.playAuto("\u51fb\u98de",1)},onDead:function(){t.playAuto("\u6b7b\u4ea1",1)}}})},e.prototype.playAuto=function(t,e){if(this.MonsterScript.isBoss)switch(t){case"\u8fdb\u573a":t="\u51fa\u573a";break;case"\u653b\u51fb":t="\u653b\u51fb2",Math.random()<.2&&(99==this.MonsterScript.type&&(t="\u653b\u51fb3"),98==this.MonsterScript.type&&(t="\u653b\u51fb")),97==this.MonsterScript.type&&(r.default.instance.playAudio("XHDSkill1"),Math.random()<.2&&(t="\u653b\u51fb1",r.default.instance.playAudio("XHDSkill1")),Math.random()>.8&&(t="\u653b\u51fb3",r.default.instance.playAudio("XHDSkill2")));break;case"\u8dd1":t="\u884c\u8d70"}else if(4==this.MonsterScript.type||5==this.MonsterScript.type)switch(t){case"\u653b\u51fb":t=4==this.MonsterScript.type?"\u8fd1\u6218":"\u8fdc\u653b",4==this.MonsterScript.type?this.scheduleOnce(function(){r.default.instance.playAudio(c.default.getInstance().MonsterAudio.\u5de8\u4eba\u653b\u51fb)},1.2):r.default.instance.playAudio(c.default.getInstance().MonsterAudio.\u5de8\u4eba\u6eda\u77f3);break;case"\u6b7b\u4ea1":r.default.instance.playAudio(c.default.getInstance().MonsterAudio.\u5de8\u4eba\u6b7b\u4ea1);break;case"\u8dd1":t="\u8d70"}else if(6==this.MonsterScript.type)switch(t){case"\u653b\u51fb":t="attack",r.default.instance.playAudio(c.default.getInstance().MonsterAudio.\u5927\u8c61\u653b\u51fb);break;case"\u8dd1":t="run";break;case"\u8fdb\u573a":return;case"\u7ad9\u7acb":t="idle";break;case"\u6b7b\u4ea1":t="die",r.default.instance.playAudio(c.default.getInstance().MonsterAudio.\u5927\u8c61\u6b7b\u4ea1);break;case"\u88ab\u653b\u51fb":t="get_hurt"}else if(7==this.MonsterScript.type)switch(t){case"\u653b\u51fb":t="\u653b\u51fb1",r.default.instance.playAudio(c.default.getInstance().MonsterAudio.\u8001\u9e70\u653b\u51fb);break;case"\u6b7b\u4ea1":r.default.instance.playAudio(c.default.getInstance().MonsterAudio.\u8001\u9e70\u6b7b\u4ea1);break;case"\u8dd1":t="\u98de\u884c1";break;case"\u8fdb\u573a":return;case"\u7ad9\u7acb":t="\u98de\u884c2"}else if(8==this.MonsterScript.type);else{switch(t){case"\u653b\u51fb":t="attack";break;case"\u6b7b\u4ea1":t="dead";break;case"\u8dd1":t="run";break;case"\u8fdb\u573a":t="show";break;case"\u7ad9\u7acb":t="stand";break;case"\u88ab\u653b\u51fb":t="hit"}"sword_attack"==(t=this.MonsterScript.skstr+t)?r.default.instance.playAudio(c.default.getInstance().MonsterAudio.\u5200):"spear_attack"==t?r.default.instance.playAudio(c.default.getInstance().MonsterAudio.\u67aa):"bow_attack"==t&&r.default.instance.playAudio(c.default.getInstance().MonsterAudio.\u7bad)}this.sk.setAnimation(0,t,0==e)},e.prototype.setSkin=function(t){this.sk.setSkin(t)},e.prototype.start=function(){},e=o([u],e)}(cc.Component));n.default=d,cc._RF.pop()},{"../Audio":"Audio","../lib/state-machine.min.js":"state-machine.min","../nativets/Global":"Global","./Monster":"Monster"}],MonsterFactory:[function(t,e,n){"use strict";cc._RF.push(e,"bc16fx8N2dG1J3zBvWOjQLA","MonsterFactory");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../nativets/NodePool"),s=t("../Game"),r=cc._decorator,c=r.ccclass,l=r.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.monsterPrefab=null,e}var n;return i(e,t),n=e,e.prototype.init=function(){this.monsterPool=new a.default;for(var t=0;t<3;t++){var e=cc.instantiate(this.monsterPrefab);e.parent=s.default.instance.gameEventNode,this.monsterPool.put(e)}},e.prototype.onLoad=function(){n.instance=this,this.init()},e.prototype.start=function(){},e.prototype.getMonsterItem=function(){var t=this.monsterPrefab,e=this.monsterPool,n=e.get();return n||((n=cc.instantiate(t)).parent=s.default.instance.gameEffectNode,e.put(n)),n},e.prototype.create=function(){this.getMonsterItem()},e.instance=null,o([l(cc.Prefab)],e.prototype,"monsterPrefab",void 0),e=n=o([c],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../Game":"Game","../nativets/NodePool":"NodePool"}],MonsterNodePool:[function(t,e,n){"use strict";cc._RF.push(e,"28f6a0ni+RPSJ8LSg7OPWcZ","MonsterNodePool");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Game"),s=t("./Monster"),r=cc._decorator,c=r.ccclass,l=r.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.monsterPrefab=null,e.berserkerPrefab=null,e.elephantPrefab=null,e.eaglePrefab=null,e.xuchuPrefab=null,e.caocaoPrefab=null,e.xiahoudunPrefab=null,e.fangshuPrefab=null,e.bossShowPrefab=null,e}var n;return i(e,t),n=e,e.prototype.init=function(){this.monsterPool=new cc.NodePool;for(var t=0;t<10;t++){var e=cc.instantiate(this.monsterPrefab);e.getComponent(s.default).init(),this.monsterPool.put(e)}this.berserkerPool=new cc.NodePool;for(var n=0;n<5;n++){var i=cc.instantiate(this.berserkerPrefab);i.getComponent(s.default).init(),this.berserkerPool.put(i)}this.elephantPool=new cc.NodePool;for(var o=0;o<5;o++){(c=cc.instantiate(this.elephantPrefab)).getComponent(s.default).init(),this.elephantPool.put(c)}this.eaglePool=new cc.NodePool;for(var a=0;a<5;a++){(c=cc.instantiate(this.eaglePrefab)).getComponent(s.default).init(),this.eaglePool.put(c)}this.fangshuPool=new cc.NodePool;for(var r=0;r<5;r++){var c;(c=cc.instantiate(this.fangshuPrefab)).getComponent(s.default).init(),this.fangshuPool.put(c)}},e.prototype.onLoad=function(){n.instance=this,this.init()},e.prototype.create=function(t,e,n){var i=null,o=a.default.instance.getMonsterIndex(t);(i=99==o?this.getXuchuInstance():98==o?this.getCaocaoInstance():97==o?this.getXiahoudunInstance():4==o||5==o?this.getBerserkerInstance():6==o?this.getElephantInstance():7==o?this.getEagleInstance():8==o?this.getFangshuInstance():this.getMonsterInstance()).type=o,i.parent=a.default.instance.gameEventNode,i.position=e,i.getComponent(s.default).use(t)},e.prototype.getBossShow=function(){var t=cc.instantiate(this.bossShowPrefab);return t.parent=a.default.instance.gameEventNode,t},e.prototype.getXuchuInstance=function(){var t=cc.instantiate(this.xuchuPrefab);return t.getComponent(s.default).init(),t},e.prototype.getCaocaoInstance=function(){var t=cc.instantiate(this.caocaoPrefab);return t.getComponent(s.default).init(),t},e.prototype.getXiahoudunInstance=function(){var t=cc.instantiate(this.xiahoudunPrefab);return t.getComponent(s.default).init(),t},e.prototype.getMonsterInstance=function(){var t=null;return this.monsterPool.size()>0?t=this.monsterPool.get():(t=cc.instantiate(this.monsterPrefab)).getComponent(s.default).init(),t},e.prototype.getBerserkerInstance=function(){var t=null;return this.berserkerPool.size()>0?t=this.berserkerPool.get():(t=cc.instantiate(this.berserkerPrefab)).getComponent(s.default).init(),t},e.prototype.getElephantInstance=function(){var t=null;return this.elephantPool.size()>0?t=this.elephantPool.get():(t=cc.instantiate(this.elephantPrefab)).getComponent(s.default).init(),t},e.prototype.getEagleInstance=function(){var t=null;return this.eaglePool.size()>0?t=this.eaglePool.get():(t=cc.instantiate(this.eaglePrefab)).getComponent(s.default).init(),t},e.prototype.getFangshuInstance=function(){var t=null;return this.fangshuPool.size()>0?t=this.fangshuPool.get():(t=cc.instantiate(this.fangshuPrefab)).getComponent(s.default).init(),t},e.prototype.start=function(){},e.prototype.GCAll=function(){for(var t=a.default.instance.gameEventNode.children,e=t.length-1;e>=0;e--)this.recycle(t[e])},e.prototype.recycle=function(t){switch(t.name){case"boss":t.destroy();break;case"berserker":this.berserkerPool.put(t);break;case"elephant":this.elephantPool.put(t);break;case"eagle":this.eaglePool.put(t);break;case"monster":this.monsterPool.put(t);break;case"fangshu":this.fangshuPool.put(t);break;default:t.destroy()}},e.instance=null,o([l(cc.Prefab)],e.prototype,"monsterPrefab",void 0),o([l(cc.Prefab)],e.prototype,"berserkerPrefab",void 0),o([l(cc.Prefab)],e.prototype,"elephantPrefab",void 0),o([l(cc.Prefab)],e.prototype,"eaglePrefab",void 0),o([l(cc.Prefab)],e.prototype,"xuchuPrefab",void 0),o([l(cc.Prefab)],e.prototype,"caocaoPrefab",void 0),o([l(cc.Prefab)],e.prototype,"xiahoudunPrefab",void 0),o([l(cc.Prefab)],e.prototype,"fangshuPrefab",void 0),o([l(cc.Prefab)],e.prototype,"bossShowPrefab",void 0),e=n=o([c],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../Game":"Game","./Monster":"Monster"}],Monster:[function(t,e,n){"use strict";cc._RF.push(e,"e0ebf17v9ZKiKKYcmMbTwQ6","Monster");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./MonsterNodePool"),s=t("./MonsterFSM"),r=t("../Hero/Hero"),c=t("../nativets/Global"),l=t("../BulletMgr"),u=t("../Game"),d=t("../LifeProgress"),p=t("../Reward/RewardMgr"),h=t("../Director"),f=t("../Main"),g=t("../Audio"),m=t("../nativets/Config"),y=t("../BizarreAdventure/BizarreAdventure"),v=t("./BossShow"),b=cc._decorator,A=b.ccclass,S=b.property,I=["sword_","spear_","bow_","bow_"],_=["02_huangtoujin","01","03_gaojixiaobing"],B=["001_\u51b0","002_\u706b"],C=["001_\u8fd1\u6218","001_\u8fdc\u653b"],w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.skstr="\u5200_",e.attackRange=100,e.move=0,e.speed=300,e.count=0,e.attackSpace=0,e.attackSpaceCount=0,e.AiActive=!1,e.standTime=0,e.isBoss=!1,e}return i(e,t),e.prototype.init=function(){this.body=this.node.getChildByName("body"),this.hitbox=this.node.getChildByName("hitbox"),this.hitaoe=this.node.getChildByName("hitaoe"),this.hitCollider=this.hitbox.getComponent(cc.BoxCollider),this.hitaoe&&(this.hitaoeCollider=this.hitaoe.getComponent(cc.BoxCollider)),this.MonsterFSM=this.node.getComponent(s.default),this.MonsterFSM.init(),this.material=this.node.getComponent(sp.Skeleton).getMaterial(0),this.initEvent()},e.prototype.initEvent=function(){this.body.on("Hit",this.customHit,this),cc.director.on("TowerDestroy",this.onTowerDestroy,this)},e.prototype.use=function(t){this.MonsterFSM.fsm.reset();var e=u.default.instance.getMonsterIndex(t),n=u.default.instance.getMonsterColor(t)-1;this.type=e,this.armor=m.MonsterArmor[c.default.getInstance().gameDifficulty][c.default.getInstance().nowLevel-40*c.default.getInstance().gameDifficulty-1],this.baseHP=m.MonsterHP[c.default.getInstance().gameDifficulty][c.default.getInstance().nowLevel-40*c.default.getInstance().gameDifficulty-1],this.baseATK=m.MonsterATK[c.default.getInstance().gameDifficulty][c.default.getInstance().nowLevel-40*c.default.getInstance().gameDifficulty-1],99==this.type||98==this.type||97==this.type?(this.isBoss=!0,this.attackRange=500,this.bossLifeMgr=u.default.instance.bossHp.getComponent(d.default),this.bossLifeMgr.init(!0),this.HP=1e4,this.attackSpace=1.5+Math.floor(2*Math.random())):(this.isBoss=!1,this.HP=1e3,this.attackSpace=3+Math.floor(5*Math.random())),this.isBoss?(this.HP=5*this.baseHP,this.hitCollider.tag=1.2*this.baseATK,this.hitaoeCollider.tag=1.3*this.baseATK):this.isElite()?(this.HP=2*this.baseHP,this.hitCollider.tag=1.1*this.baseATK):(this.HP=this.baseHP,this.hitCollider.tag=1*this.baseATK),3==this.type?(this.isRemote=1,this.attackRange=1e3+Math.floor(150*Math.random())):2==this.type?(this.isRemote=0,this.attackRange=cc.winSize.width):4==this.type?(this.isRemote=-1,this.attackRange=700+Math.floor(150*Math.random())):5==this.type?(this.hitball=this.node.getChildByName("hitball"),this.ballBone=this.MonsterFSM.sk.findBone("B"),this.isRemote=1,this.attackRange=1e3+Math.floor(150*Math.random())):6==this.type?(this.isRemote=-1,this.attackRange=400+Math.floor(150*Math.random())):7==this.type?(this.isRemote=-1,this.attackRange=200+Math.floor(150*Math.random())):8==this.type?(this.isRemote=1,this.attackRange=1e3+Math.floor(150*Math.random()),this.fangshuskin=n,this.MonsterFSM.setSkin(B[n])):(this.isRemote=-1,this.attackRange=100+Math.floor(150*Math.random())),this.setSkStr(this.type),this.type<4&&this.MonsterFSM.setSkin(_[n]),4!=this.type&&5!=this.type||this.MonsterFSM.setSkin(C[this.type-4]),this.MonsterFSM.fsm.show(),this.isInScreen()&&this.scheduleOnce(function(){g.default.instance.playAudio("MonsterShow")},.3),this.body.active=!0,this.BASE_SCALEX=.4,this.isBoss&&(this.BASE_SCALEX=-1.2),4!=this.type&&5!=this.type||(this.BASE_SCALEX=-1),6==this.type&&(this.BASE_SCALEX=-1),7==this.type&&(this.BASE_SCALEX=-.3),8==this.type&&(this.BASE_SCALEX=-1),this.speed=350,this.bodyWidth=200,this.eyeRange=2*cc.winSize.width,this.scaleFlag=this.BASE_SCALEX>0?1:-1},e.prototype.unuse=function(){},e.prototype.start=function(){},e.prototype.onTowerDestroy=function(){var t=this;this.node.runAction(cc.sequence(cc.moveTo(.5,cc.v2(this.node.x,-191)),cc.callFunc(function(){t.type=3,t.isRemote=1,t.attackRange=1e3+Math.floor(150*Math.random())})))},e.prototype.setSkStr=function(t){this.skstr=I[t]},e.prototype.attack=function(){this.isRemote>-1?this.remoteAttack():this.closeAttack()},e.prototype.closeAttack=function(){var t=this;this.hitbox.active=!0,this.scheduleOnce(function(){t.hitbox.active=!1})},e.prototype.bossAttack=function(){var t=this;this.hitaoe.active=!0,this.scheduleOnce(function(){t.hitaoe.active=!1})},e.prototype.berserkerAttack=function(){this.hitball.active=!0},e.prototype.remoteAttack=function(){if(8==this.type)0==this.fangshuskin?(l.default.instance.createForMonsterIce(r.default.instance.node.x,.9*this.baseATK),g.default.instance.playAudio(c.default.getInstance().MonsterAudio.\u51b0)):(l.default.instance.createForMonsterFire(r.default.instance.node.x,.9*this.baseATK),g.default.instance.playAudio(c.default.getInstance().MonsterAudio.\u706b));else{var t=this.node.scaleX>0?1:-1,e=this.node.x+50*t,n=this.node.y+85;l.default.instance.createForMonster(this.type,cc.v2(e,n),t,.9*this.baseATK)}},e.prototype.onCustomHit=function(t,e,n,i){t>0?(this.node.x>r.default.instance.node.x&&this.getDistance()<=i-30+this.bodyWidth&&this.hit(e,n),this.node.x<=r.default.instance.node.x&&this.getDistance()<=30+this.bodyWidth&&this.hit(e,n)):(this.node.x<r.default.instance.node.x&&this.getDistance()<=i-30+this.bodyWidth&&this.hit(e,n),this.node.x>=r.default.instance.node.x&&this.getDistance()<=30+this.bodyWidth&&this.hit(e,n))},e.prototype.customHit=function(t,e,n){n&&this.away(),this.hit(t,e)},e.prototype.hit=function(t,e){var n=this;if(t*=1-this.armor/(this.armor+2e3),this.HP-=t*(e?2:1),this.showDamage(t,e),this.refreshLifeProgress(t*(e?2:1)),this.material.effect.setProperty("isFlash",1.1),this.scheduleOnce(function(){n.material.effect.setProperty("isFlash",.5)},.1),this.MonsterFSM.fsm.can("hit")){if(this.HP<=0)return this.MonsterFSM.fsm.hit(),this.CoinsFall(),void this.dead();this.isBoss?Math.random()<.07&&this.MonsterFSM.fsm.hit():this.isElite()?Math.random()<.12&&this.MonsterFSM.fsm.hit():Math.random()<.2&&this.MonsterFSM.fsm.hit()}},e.prototype.refreshLifeProgress=function(t){if(this.isBoss){var e=100*t/(5*this.baseHP);this.bossLifeMgr.damage(4*e)}},e.prototype.dead=function(){if(this.MonsterFSM.fsm.can("dead")&&(this.MonsterFSM.fsm.dead(),this.type<6&&g.default.instance.playAudio("MonsterDead"),this.body.active=!1),c.default.getInstance().monsterCount--,cc.log("monstercount",c.default.getInstance().monsterCount),c.default.getInstance().monsterCount<=0)if(c.default.getInstance().MapLevelIndex==c.default.getInstance().MapLevelCount){for(var t=0;t<u.default.instance.rewardItmeArrs.length;t++)p.default.instance.createReward(u.default.instance.rewardItmeArrs[t],cc.v2(this.node.x-400+400*Math.random(),-172)),2;y.default.instance.onOpen(!0),u.default.instance.showReward()}else c.default.getInstance().levelNext=!0,u.default.instance.nextArrow.active=!0},e.prototype.away=function(){this.node.x>r.default.instance.node.x?this.node.x+=60:this.node.x-=60},e.prototype.showDamage=function(t,e){t=Math.floor(t),cc.director.emit("showdmg",t,this.node.x,e,this.isBoss,r.default.instance.node.scaleX)},e.prototype.getDistance=function(){return Math.abs(this.node.x-r.default.instance.node.x)},e.prototype.getPosInScreen=function(){var t=cc.v2(0,0);return f.default.instance.heroCamera.getComponent(cc.Camera).getWorldToScreenPoint(this.node.position,t),t},e.prototype.isInScreen=function(){var t=this.getPosInScreen();return t.x>0&&t.x<cc.winSize.width},e.prototype.isElite=function(){return 4==this.type||5==this.type||6==this.type},e.prototype.getPosInScreenCustom=function(){},e.prototype.bossMagicStart=function(){this.bossMagic=!0,this.bossMagicTime=0,g.default.instance.playAudio("XHDSkill3")},e.prototype.bossMagicEnd=function(){this.bossMagic=!1},e.prototype.updateBossMagic=function(t){var e=this;this.bossMagic&&(this.bossMagicTime>0?this.bossMagicTime-=t:(this.bossMagicTime=.1,this.node.getChildByName("hitmagic").getComponent(cc.CircleCollider).tag=.2*this.baseATK,this.node.getChildByName("hitmagic").active=!0,this.scheduleOnce(function(){e.node.getChildByName("hitmagic").active=!1})))},e.prototype.activeBoss=function(){},e.prototype.setBossShowType=function(t){},e.prototype.MonsterUpdate=function(){var t=this;if(3!=this.move){if(this.attackSpaceCount++,!this.AiActive&&this.isBoss&&!u.default.instance.gameEventNode.getChildByName("bossShow")){var e=a.default.instance.getBossShow();e.position=cc.v2(this.node.x,this.node.y+120);var n=e.getComponent(cc.Animation);e.getComponent(v.default).setType(this.type),n.stop(),n.play(),c.default.getInstance().inGame=!1,n.on(cc.Animation.EventType.FINISHED,function(){e.active=!1,t.AiActive=!0,h.default.instance.onOpen(c.default.getInstance().nowLevel,c.default.getInstance().MapLevelIndex)})}!this.AiActive&&this.getDistance()<this.eyeRange&&(this.isBoss||(this.AiActive=!0)),this.AiActive&&(r.default.instance.node.x<=this.node.x?this.node.scaleX=-this.BASE_SCALEX:this.node.scaleX=this.BASE_SCALEX,this.isInScreen()?this.getDistance()>this.attackRange?(this.MonsterFSM.fsm.can("move")&&this.MonsterFSM.fsm.move(),this.node.scaleX<0?this.move=-1*this.scaleFlag:this.move=1*this.scaleFlag,this.isBoss||3==this.type&&8!=this.node.type&&Math.random()<.1&&this.MonsterFSM.fsm.can("lancerDash")&&this.MonsterFSM.fsm.lancerDash()):this.getDistance()<30?Math.random()<.05&&(this.MonsterFSM.fsm.can("move")&&this.MonsterFSM.fsm.move(),this.node.scaleX<0?this.move=1*this.scaleFlag:this.move=-1*this.scaleFlag):(97==this.type&&Math.random()<.35&&(this.node.scaleX<0?this.move=-1*this.scaleFlag:this.move=1*this.scaleFlag,this.MonsterFSM.fsm.can("bossMagic")&&(this.MonsterFSM.fsm.bossMagic(),this.bossMagicStart())),98==this.type&&Math.random()<.25&&this.MonsterFSM.fsm.can("bossDouble")&&this.MonsterFSM.fsm.bossDouble(),this.move=0,this.MonsterFSM.fsm.is("state_move")&&this.MonsterFSM.fsm.reset(),this.attackSpaceCount>=this.attackSpace&&(this.attackSpaceCount=0,this.isBoss?this.MonsterFSM.fsm.can("attack")&&this.MonsterFSM.fsm.attack():this.MonsterFSM.fsm.can("attack")&&(7==this.type&&this.node.y>-140?(this.MonsterFSM.fsm.can("move")&&this.MonsterFSM.fsm.move(),this.down=!0):this.MonsterFSM.fsm.attack()))):(this.MonsterFSM.fsm.can("move")&&this.MonsterFSM.fsm.move(),this.node.scaleX<0?this.move=-1*this.scaleFlag:this.move=1*this.scaleFlag))}},e.prototype.remoteMonsterUpdate=function(){this.attackSpaceCount++,!this.AiActive&&this.getDistance()<this.eyeRange&&(this.AiActive=!0),this.AiActive&&(r.default.instance.node.x<=this.node.x?this.node.scaleX=-this.BASE_SCALEX:this.node.scaleX=this.BASE_SCALEX,this.isInScreen()?this.getDistance()>this.attackRange*(.6+.4*Math.random())?(this.MonsterFSM.fsm.can("move")&&this.MonsterFSM.fsm.move(),this.node.scaleX<0?this.move=-1*this.scaleFlag:this.move=1*this.scaleFlag):(this.getDistance(),this.attackRange,Math.random(),this.move=0,this.MonsterFSM.fsm.is("state_move")&&this.MonsterFSM.fsm.reset(),this.attackSpaceCount>=this.attackSpace&&(this.attackSpaceCount=0,this.MonsterFSM.fsm.can("attack")&&(this.MonsterFSM.fsm.attack(),this.standTime=3))):(this.MonsterFSM.fsm.can("move")&&this.MonsterFSM.fsm.move(),this.node.scaleX<0?this.move=-1*this.scaleFlag:this.move=1*this.scaleFlag))},e.prototype.towerMonsterUpdate=function(){this.attackSpaceCount++,!this.AiActive&&this.getDistance()<this.eyeRange&&(this.AiActive=!0),this.AiActive&&(r.default.instance.node.x<=this.node.x?this.node.scaleX=-this.BASE_SCALEX:this.node.scaleX=this.BASE_SCALEX,this.isInScreen()?(this.move=0,this.MonsterFSM.fsm.is("state_move")&&this.MonsterFSM.fsm.reset(),this.attackSpaceCount>=this.attackSpace&&(this.attackSpaceCount=0,this.MonsterFSM.fsm.can("attack")&&(this.MonsterFSM.fsm.attack(),this.standTime=3))):(this.MonsterFSM.fsm.can("move")&&this.MonsterFSM.fsm.move(),this.node.scaleX<0?this.move=-1*this.scaleFlag:this.move=1*this.scaleFlag))},e.prototype.CoinsFall=function(){p.default.instance.createCoins(9e4,cc.v2(this.node.x,-172))},e.prototype.recycle=function(){"boss"!=this.node.name&&"berserker"!=this.node.name&&"elephant"!=this.node.name&&"eagle"!=this.node.name?a.default.instance.recycle(this.node):this.node.destroy()},e.prototype.update=function(t){if(c.default.getInstance().inGame){if(this.updateBossMagic(t),this.hitball&&this.hitball.active&&(this.hitball.x=this.ballBone.worldX,this.hitball.x<-1250&&(this.hitball.active=!1)),this.standTime>0&&(this.standTime-=t),this.count+=1,20==this.count){if(this.count=0,this.MonsterFSM.fsm.is("state_dead"))return;switch(this.isRemote){case-1:this.MonsterUpdate();break;case 0:case 1:this.standTime<=0&&this.remoteMonsterUpdate()}}if(this.MonsterFSM.fsm.is("state_move")||this.MonsterFSM.fsm.is("state_bossmagic")){switch(this.move){case-1:this.node.x-=this.speed*t;break;case 1:this.node.x+=this.speed*t}this.down&&(this.node.y-=this.speed*t,this.node.y<=-140&&(this.down=!1))}}},e.prototype.onDestroy=function(){this.body.off("Hit",this.customHit,this),cc.director.off("TowerDestroy",this.onTowerDestroy,this)},o([S(cc.String)],e.prototype,"skstr",void 0),e=o([A],e)}(cc.Component);n.default=w,cc._RF.pop()},{"../Audio":"Audio","../BizarreAdventure/BizarreAdventure":"BizarreAdventure","../BulletMgr":"BulletMgr","../Director":"Director","../Game":"Game","../Hero/Hero":"Hero","../LifeProgress":"LifeProgress","../Main":"Main","../Reward/RewardMgr":"RewardMgr","../nativets/Config":"Config","../nativets/Global":"Global","./BossShow":"BossShow","./MonsterFSM":"MonsterFSM","./MonsterNodePool":"MonsterNodePool"}],NativeAd:[function(t,e,n){"use strict";cc._RF.push(e,"6ff2cI0RQBACbqKKQRpnPeE","NativeAd");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Audio"),s=t("../nativets/Platform"),r=cc._decorator,c=r.ccclass,l=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return i(e,t),n=e,e.prototype.init=function(){var t=this.node.getChildByName("box");this.titleLabel=t.getChildByName("title").getComponent(cc.Label),this.desLabel=t.getChildByName("des").getComponent(cc.Label),this.imgSprite=t.getChildByName("img").getComponent(cc.Sprite)},e.prototype.onLoad=function(){n.instance=this,this.init(),this.node.active=!1},e.prototype.start=function(){},e.prototype.open=function(){window.qg&&(this.loadNaitveAd(),this.node.active=!0)},e.prototype.loadNaitveAd=function(){var t=this;s.getPlatform()==s.Platform.OPPO?this.nativeAd=qg.createNativeAd({adUnitId:Math.random()<.5?"176991":"176994"}):s.getPlatform()==s.Platform.VIVO&&(this.nativeAd=qg.createNativeAd({posId:Math.random()<.5?"b4e2e0c887ed42fe9d6947f5e573d72f":"aaab4f80bb33414bb886f62b6df5c98a"})),this.nativeAd.onLoad(function(e){if(console.log("\u539f\u751f\u5e7f\u544a\u52a0\u8f7d\u5b8c\u6210",JSON.stringify(e)),e&&e.adList){t.nativeCurrentAd=e.adList.pop(),t.titleLabel.string=t.nativeCurrentAd.title,t.desLabel.string=t.nativeCurrentAd.desc;var n=t.nativeCurrentAd.imgUrlList[0];cc.loader.load(n,function(e,n){if(null!=n){var i=new cc.SpriteFrame(n);t.imgSprite.spriteFrame=i}})}}),this.show()},e.prototype.show=function(){var t=this;console.log("\u539f\u751f\u5e7f\u544ashow");var e=this.nativeAd.load();e&&e.then(function(){t.reportAdShow(),t.nativeAd.show().then(function(){})}).catch(function(e){console.log("\u52a0\u8f7d\u5931\u8d25",JSON.stringify(e)),e.errMsg&&(t.node.active=!1)})},e.prototype.reportAdShow=function(){console.log("\u539f\u751f\u5e7f\u544ashow\u4e0a"),this.nativeAd.reportAdShow({adId:this.nativeCurrentAd.adId.toString()})},e.prototype.reportAdClick=function(){this.nativeAd.reportAdClick({adId:this.nativeCurrentAd.adId.toString()})},e.prototype.onBtnClose=function(){a.default.instance.playAudio("BtnClick"),this.onClose()},e.prototype.onClose=function(){this.node.active=!1},e.prototype.onBtnOk=function(){a.default.instance.playAudio("BtnClick"),this.reportAdClick()},e.prototype.onEnable=function(){},e.prototype.onDisable=function(){this.nativeAd&&s.getPlatform()==s.Platform.OPPO&&(this.nativeAd.destroy(),this.nativeAd=null)},e.instance=null,e=n=o([c],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../Audio":"Audio","../nativets/Platform":"Platform"}],NativeBanner2:[function(t,e,n){"use strict";cc._RF.push(e,"b43abipeINGKpk6Xk8iyM07","NativeBanner2");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Audio"),s=t("../nativets/Platform"),r=cc._decorator,c=r.ccclass,l=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return i(e,t),n=e,e.prototype.init=function(){this.desLabel=this.node.getChildByName("des").getComponent(cc.Label),this.imgSprite=this.node.getChildByName("img").getComponent(cc.Sprite),this.titleLabel=this.node.getChildByName("title").getComponent(cc.Label)},e.prototype.onLoad=function(){n.instance=this,this.init(),this.node.active=!1},e.prototype.start=function(){},e.prototype.open=function(){window.qg&&(this.loadNaitveAd(),this.node.active=!0)},e.prototype.loadNaitveAd=function(){var t=this;s.getPlatform()==s.Platform.OPPO?this.nativeAd=qg.createNativeAd({adUnitId:Math.random()<.5?"176991":"176994"}):s.getPlatform()==s.Platform.VIVO&&(this.nativeAd=qg.createNativeAd({posId:Math.random()<.5?"b4e2e0c887ed42fe9d6947f5e573d72f":"aaab4f80bb33414bb886f62b6df5c98a"})),this.nativeAd.onLoad(function(e){if(console.log("\u539f\u751f\u5e7f\u544a\u52a0\u8f7d\u5b8c\u6210",JSON.stringify(e)),e&&e.adList){t.nativeCurrentAd=e.adList.pop(),t.titleLabel.string=t.nativeCurrentAd.title,t.desLabel.string=t.nativeCurrentAd.desc;var n=t.nativeCurrentAd.icon;cc.loader.load(n,function(e,n){if(null!=n){var i=new cc.SpriteFrame(n);t.imgSprite.spriteFrame=i}})}}),this.show()},e.prototype.show=function(){var t=this;console.log("\u539f\u751f\u5e7f\u544ashow");var e=this.nativeAd.load();e&&e.then(function(){t.reportAdShow(),t.nativeAd.show().then(function(){})}).catch(function(e){console.log("\u52a0\u8f7d\u5931\u8d25",JSON.stringify(e)),e.errMsg&&(t.node.active=!1)})},e.prototype.reportAdShow=function(){console.log("\u539f\u751f\u5e7f\u544ashow\u4e0a"),this.nativeAd.reportAdShow({adId:this.nativeCurrentAd.adId.toString()})},e.prototype.reportAdClick=function(){this.nativeAd.reportAdClick({adId:this.nativeCurrentAd.adId.toString()})},e.prototype.onBtnClose=function(){a.default.instance.playAudio("BtnClick"),this.onClose()},e.prototype.onClose=function(){this.node.active=!1},e.prototype.onBtnOk=function(){a.default.instance.playAudio("BtnClick"),this.reportAdClick()},e.prototype.onEnable=function(){},e.prototype.onDisable=function(){this.nativeAd&&s.getPlatform()==s.Platform.OPPO&&(this.nativeAd.destroy(),this.nativeAd=null)},e.instance=null,e=n=o([c],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../Audio":"Audio","../nativets/Platform":"Platform"}],NativeBanner3:[function(t,e,n){"use strict";cc._RF.push(e,"f76e7WAvz5NqqWBSpLeQS34","NativeBanner3");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Audio"),s=t("../nativets/Platform"),r=cc._decorator,c=r.ccclass,l=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return i(e,t),n=e,e.prototype.init=function(){this.imgSprite=this.node.getChildByName("img").getComponent(cc.Sprite),this.titleLabel=this.node.getChildByName("title").getComponent(cc.Label)},e.prototype.onLoad=function(){n.instance=this,this.init(),this.node.active=!1},e.prototype.start=function(){},e.prototype.open=function(){window.qg&&(this.loadNaitveAd(),this.node.active=!0)},e.prototype.loadNaitveAd=function(){var t=this;s.getPlatform()==s.Platform.OPPO?this.nativeAd=qg.createNativeAd({adUnitId:Math.random()<.5?"176991":"176994"}):s.getPlatform()==s.Platform.VIVO&&(this.nativeAd=qg.createNativeAd({posId:Math.random()<.5?"b4e2e0c887ed42fe9d6947f5e573d72f":"aaab4f80bb33414bb886f62b6df5c98a"})),this.nativeAd.onLoad(function(e){if(console.log("\u539f\u751f\u5e7f\u544a\u52a0\u8f7d\u5b8c\u6210",JSON.stringify(e)),e&&e.adList){t.nativeCurrentAd=e.adList.pop(),t.titleLabel.string=t.nativeCurrentAd.title;var n=t.nativeCurrentAd.icon;cc.loader.load(n,function(e,n){if(null!=n){var i=new cc.SpriteFrame(n);t.imgSprite.spriteFrame=i}})}}),this.show()},e.prototype.show=function(){var t=this;console.log("\u539f\u751f\u5e7f\u544ashow");var e=this.nativeAd.load();e&&e.then(function(){t.reportAdShow(),t.nativeAd.show().then(function(){})}).catch(function(e){console.log("\u52a0\u8f7d\u5931\u8d25",JSON.stringify(e)),e.errMsg&&(t.node.active=!1)})},e.prototype.reportAdShow=function(){console.log("\u539f\u751f\u5e7f\u544ashow\u4e0a"),this.nativeAd.reportAdShow({adId:this.nativeCurrentAd.adId.toString()})},e.prototype.reportAdClick=function(){this.nativeAd.reportAdClick({adId:this.nativeCurrentAd.adId.toString()})},e.prototype.onBtnClose=function(){a.default.instance.playAudio("BtnClick"),this.onClose()},e.prototype.onClose=function(){this.node.active=!1},e.prototype.onBtnOk=function(){a.default.instance.playAudio("BtnClick"),this.reportAdClick()},e.prototype.onEnable=function(){},e.prototype.onDisable=function(){this.nativeAd&&s.getPlatform()==s.Platform.OPPO&&(this.nativeAd.destroy(),this.nativeAd=null)},e.instance=null,e=n=o([c],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../Audio":"Audio","../nativets/Platform":"Platform"}],NativeBanner4:[function(t,e,n){"use strict";cc._RF.push(e,"aefccEEbehHvLy8DsMa41pQ","NativeBanner4");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Audio"),s=t("../nativets/Platform"),r=cc._decorator,c=r.ccclass,l=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return i(e,t),n=e,e.prototype.init=function(){this.imgSprite=this.node.getChildByName("img").getComponent(cc.Sprite),this.titleLabel=this.node.getChildByName("title").getComponent(cc.Label)},e.prototype.onLoad=function(){n.instance=this,this.init(),this.node.active=!1},e.prototype.start=function(){},e.prototype.open=function(){window.qg&&(this.loadNaitveAd(),this.node.active=!0)},e.prototype.loadNaitveAd=function(){var t=this;s.getPlatform()==s.Platform.OPPO?this.nativeAd=qg.createNativeAd({adUnitId:Math.random()<.5?"176991":"176994"}):s.getPlatform()==s.Platform.VIVO&&(this.nativeAd=qg.createNativeAd({posId:Math.random()<.5?"b4e2e0c887ed42fe9d6947f5e573d72f":"aaab4f80bb33414bb886f62b6df5c98a"})),this.nativeAd.onLoad(function(e){if(console.log("\u539f\u751f\u5e7f\u544a\u52a0\u8f7d\u5b8c\u6210",JSON.stringify(e)),e&&e.adList){t.nativeCurrentAd=e.adList.pop(),t.titleLabel.string=t.nativeCurrentAd.title;var n=t.nativeCurrentAd.icon;cc.loader.load(n,function(e,n){if(null!=n){var i=new cc.SpriteFrame(n);t.imgSprite.spriteFrame=i}})}}),this.show()},e.prototype.show=function(){var t=this;console.log("\u539f\u751f\u5e7f\u544ashow");var e=this.nativeAd.load();e&&e.then(function(){t.reportAdShow(),t.nativeAd.show().then(function(){})}).catch(function(e){console.log("\u52a0\u8f7d\u5931\u8d25",JSON.stringify(e)),e.errMsg&&(t.node.active=!1)})},e.prototype.reportAdShow=function(){console.log("\u539f\u751f\u5e7f\u544ashow\u4e0a"),this.nativeAd.reportAdShow({adId:this.nativeCurrentAd.adId.toString()})},e.prototype.reportAdClick=function(){this.nativeAd.reportAdClick({adId:this.nativeCurrentAd.adId.toString()})},e.prototype.onBtnClose=function(){a.default.instance.playAudio("BtnClick"),this.onClose()},e.prototype.onClose=function(){this.node.active=!1},e.prototype.onBtnOk=function(){a.default.instance.playAudio("BtnClick"),this.reportAdClick()},e.prototype.onEnable=function(){},e.prototype.onDisable=function(){this.nativeAd&&s.getPlatform()==s.Platform.OPPO&&(this.nativeAd.destroy(),this.nativeAd=null)},e.instance=null,e=n=o([c],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../Audio":"Audio","../nativets/Platform":"Platform"}],NativeBanner:[function(t,e,n){"use strict";cc._RF.push(e,"3e971HZWthPFoWPjk9tPo3q","NativeBanner");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Audio"),s=t("../nativets/Platform"),r=cc._decorator,c=r.ccclass,l=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return i(e,t),n=e,e.prototype.init=function(){this.desLabel=this.node.getChildByName("des").getComponent(cc.Label),this.imgSprite=this.node.getChildByName("img").getComponent(cc.Sprite),this.widget=this.node.getComponent(cc.Widget)},e.prototype.onLoad=function(){n.instance=this,this.init(),this.node.active=!1},e.prototype.start=function(){},e.prototype.open=function(t){window.qg&&(this.loadNaitveAd(),t?(this.widget.enabled=!1,this.node.x=0):this.widget.enabled=!0,this.node.active=!0)},e.prototype.loadNaitveAd=function(){var t=this;s.getPlatform()==s.Platform.OPPO?this.nativeAd=qg.createNativeAd({adUnitId:Math.random()<.5?"176991":"176994"}):s.getPlatform()==s.Platform.VIVO&&(this.nativeAd=qg.createNativeAd({posId:Math.random()<.5?"b4e2e0c887ed42fe9d6947f5e573d72f":"aaab4f80bb33414bb886f62b6df5c98a"})),this.nativeAd.onLoad(function(e){if(console.log("\u539f\u751f\u5e7f\u544a\u52a0\u8f7d\u5b8c\u6210",JSON.stringify(e)),e&&e.adList){t.nativeCurrentAd=e.adList.pop(),t.desLabel.string=t.nativeCurrentAd.desc;var n=t.nativeCurrentAd.imgUrlList[0];cc.loader.load(n,function(e,n){if(null!=n){var i=new cc.SpriteFrame(n);t.imgSprite.spriteFrame=i}})}}),this.show()},e.prototype.show=function(){var t=this;console.log("\u539f\u751f\u5e7f\u544ashow");var e=this.nativeAd.load();e&&e.then(function(){t.reportAdShow(),t.nativeAd.show().then(function(){})}).catch(function(e){console.log("\u52a0\u8f7d\u5931\u8d25",JSON.stringify(e)),e.errMsg&&(t.node.active=!1)})},e.prototype.reportAdShow=function(){console.log("\u539f\u751f\u5e7f\u544ashow\u4e0a"),this.nativeAd.reportAdShow({adId:this.nativeCurrentAd.adId.toString()})},e.prototype.reportAdClick=function(){this.nativeAd.reportAdClick({adId:this.nativeCurrentAd.adId.toString()})},e.prototype.onBtnClose=function(){a.default.instance.playAudio("BtnClick"),this.onClose()},e.prototype.onClose=function(){this.node.active=!1},e.prototype.onBtnOk=function(){a.default.instance.playAudio("BtnClick"),this.reportAdClick()},e.prototype.onEnable=function(){},e.prototype.onDisable=function(){this.nativeAd&&s.getPlatform()==s.Platform.OPPO&&(this.nativeAd.destroy(),this.nativeAd=null)},e.instance=null,e=n=o([c],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../Audio":"Audio","../nativets/Platform":"Platform"}],NewHttp:[function(t,e,n){"use strict";cc._RF.push(e,"b3232Wt3HRF3oqlt2yOR3+0","NewHttp"),Object.defineProperty(n,"__esModule",{value:!0});var i="POST",o="cfKb@MIL2SnUhy#0Bnd#V1ClRdGgOaxh",a=t("../nativets/Platform").getPLATID(),s=function(){function e(){}return e.sendRequest=function(t,e,n,o){var a="https://h5admin.goodgame360.com";void 0!=t&&null!=t&&""!=t&&(a+=t),void 0!=e&&null!=e&&""!=e||(i="GET");var s=cc.loader.getXMLHttpRequest();s.timeout=5e3,s.onreadystatechange=function(){4==s.readyState&&200==s.status&&void 0!=n&&null!=n&&n(s.responseText)},s.ontimeout=function(){void 0!=o&&null!=o&&o()},s.open(i,a,!0),s.send(e)},e.getSwitch=function(t,e){var n="/index.php/Game/Game_switch/getSwitch?game_id="+a+"&id="+t;this.sendRequest(n,"",function(t){void 0!=e&&null!=e&&(console.log("\u5f00\u5173\u914d\u7f6e\u4fe1\u606f: ",JSON.parse(t)),e(JSON.parse(t)))})},e.reportEvent=function(t,e){var n=this.md5(a+t+e+o),i="/index.php/Game/report/reportEvent?game_id="+a+"&uuid="+t+"&event="+e+"&sign="+n;this.sendRequest(i,"",null)},e.reportStage=function(t,e,n,i){var s=this.md5(a+t+e+n+i+o),r="/index.php/Game/report/reportStage?game_id="+a+"&uuid="+t+"&stageid="+e+"&stagename="+n+"&event="+i+"&sign="+s;this.sendRequest(r,"",null)},e.register=function(t,e,n,i,s,r,c){var l=this.md5(a+e+n+i+t+s+r+o),u="/index.php/Game/user/register?game_id="+a+"&uuid="+e+"&name="+n+"&headpic="+i+"&platid="+t+"&sceneid="+s+"&openid="+r+"&sign="+l;console.log(u),this.sendRequest(u,"",function(t){void 0!=c&&null!=c&&c(JSON.parse(t))})},e.updateUserInfo=function(t,e,n,i){var s=this.md5(a+t+e+n+o),r="/index.php/Game/user/updateUserInfo?game_id="+a+"&uuid="+t+"&name="+e+"&headpic="+n+"&sign="+s;this.sendRequest(r,"",function(t){void 0!=i&&null!=i&&(i(JSON.parse(t)),console.log("\u66f4\u65b0: ",JSON.parse(t)))})},e.report=function(t,e,n){var i=this.md5(a+""+t+e+n+o),s="/index.php/Game/tank/report?game_id="+a+"&rid="+t+"&uuid="+e+"&score="+n+"&sign="+i;this.sendRequest(s,"",function(t){})},e.getRank=function(t,e,n,i){var o="/index.php/Game/tank/GetTank?game_id="+a+"&rid="+t+"&num="+e+"&uuid="+n;this.sendRequest(o,"",function(t){void 0!=i&&null!=i&&i(JSON.parse(t))})},e.getOpenid=function(t,e,n){var i=this.md5(a+""+t+e+o),s="/index.php/Game/user/getOpenid?game_id="+a+"&platid="+t+"&code="+e+"&sign="+i;this.sendRequest(s,"",function(t){void 0!=n&&null!=n&&n(JSON.parse(t))})},e.md5=t("md5"),e}();n.default=s,cc._RF.pop()},{"../nativets/Platform":"Platform",md5:"md5"}],NewScript:[function(t,e,n){"use strict";cc._RF.push(e,"9be9cxqcqxF06OtPhTcf1qQ","NewScript");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,a){function s(t){try{c(i.next(t))}catch(t){a(t)}}function r(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,r)}c((i=i.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(t){return function(e){return c([t,e])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../nativets/Config"),c=t("../Tool/LoadPromise"),l=cc._decorator,u=l.ccclass,d=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0,cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=cc.v2(0,0)},e.prototype.sfRect=function(){var t=this.node.getChildByName("sf").getComponent(cc.Sprite);cc.loader.loadRes("test/1",cc.SpriteFrame,function(e,n){cc.log(e,n),t.spriteFrame=new cc.SpriteFrame(n._texture,new cc.Rect(93,0,82,82))})},e.prototype.start=function(){this.baseNode=this.node.getChildByName("A");var t=cc.sequence(cc.moveTo(3,cc.v2(640,0)),cc.moveTo(3,cc.v2(-640,0)));this.baseNode.runAction(t.repeatForever()),this.sk=this.node.getChildByName("sp").getComponent(sp.Skeleton),cc.log(this.sk,this.sk._skeleton.data.animations),this.animIndex=0,this.bNode=this.node.getChildByName("sp").getChildByName("B"),this.testAnims(),this.testWidget(),this.testAsync()},e.prototype.setGray=function(){var t=this.node.getChildByName("img").getComponent(cc.Sprite);t.setMaterial(0,cc.MaterialVariant.createWithBuiltin("2d-gray-sprite",t)),cc.log(t)},e.prototype.testVec=function(){var t=cc.v2(0,100).rotateSelf(-Math.PI/6);cc.log(Math.atan2(0,1),"  ",t),this.node.getChildByName("dot").position=t},e.prototype.testAnims=function(){var t=this,e=this.sk._skeleton.data.animations;this.anims=[],e.forEach(function(e){t.anims.push(e.name)}),this.sk.setEventListener(function(t,e){var n=e.data.name;cc.log("skevent",n)}),this.node.on("touchend",function(){t.animIndex<t.anims.length-1?t.animIndex++:t.animIndex=0,t.sk.setAnimation(0,t.anims[t.animIndex],!0)})},e.prototype.testWorld=function(){var t=this.node.getChildByName("widget").getChildByName("node"),e=t.convertToWorldSpace(cc.v2(0,t.height));cc.log(e.x,e.y),cc.find("sf").position=e},e.prototype.testWidget=function(){var t=this.node.getChildByName("aaa").getComponent(cc.Widget);t.isAlignHorizontalCenter=!1,t.isAlignRight=!0,t.isAbsoluteRight=!0,t.right=28},e.prototype.testAsync=function(){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.loadMenuHeroSp(2)];case 1:return t.sent(),console.log("111"),[2]}})})},e.prototype.loadMenuHeroSp=function(t){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,c.loadSpinePromise(r.HeroSpName[t])];case 1:return e.sent(),console.log("loadsp"),[2]}})})},e.prototype.update=function(t){},e=o([u],e)}(cc.Component));n.default=d,cc._RF.pop()},{"../Tool/LoadPromise":"LoadPromise","../nativets/Config":"Config"}],NodePool:[function(t,e,n){"use strict";cc._RF.push(e,"50886DTr1hLN72W6xPuN80K","NodePool"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){this.pool=[]};i.prototype={constructor:i,size:function(){return this.pool.length},get:function(){var t=null,e=this.pool.length-1;return this.pool.length<=0?null:(e>=0&&(t=this.pool[e],this.pool.length=e),t)},put:function(t){t&&-1==this.pool.indexOf(t)?(t.opacity=0,t.y=900,this.pool.push(t)):(cc.log("\u6ca1put"),t&&"rewardItem"==t.name&&(t.y=900),t.opacity=0)}},n.default=i,cc._RF.pop()},{}],OPPOAdMgr:[function(t,e,n){"use strict";cc._RF.push(e,"5a32a1Sr+xLV7pNMc723s5M","OPPOAdMgr");var i=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s},o=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,a){function s(t){try{c(i.next(t))}catch(t){a(t)}}function r(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,r)}c((i=i.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(t){return function(e){return c([t,e])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("./AdList"),r=t("../nativets/Global"),c=t("../Game"),l=t("./AdRewardMgr"),u=t("../DataMgr"),d=t("./Shortcut"),p=t("../Tool/Statistics"),h=t("./NativeBanner"),f=t("./NativeBanner2"),g=t("./NativeBanner3"),m=t("./NativeBanner4"),y=cc._decorator,v=y.ccclass,b=(y.property,function(){function t(){}var e;return e=t,t.getInstance=function(){return this.instance||(this.instance=new e),this.instance},t.prototype.init=function(){this.OPPOInit()},t.prototype.OPPOInit=function(){this.windowWidth=qg.getSystemInfoSync().windowWidth,this.windowHeight=qg.getSystemInfoSync().windowHeight,this.zoomRateW=this.windowWidth/cc.winSize.width,this.zoomRateH=this.windowHeight/cc.winSize.height,qg.reportMonitor("game_scene",0),this.OPPOBannerInit(),this.OPPORewardInit(),this.OPPOSwitchInit()},t.prototype.OPPOSwitchInit=function(){return o(this,void 0,void 0,function(){return a(this,function(t){return this.OPPOIntersitialRate=p.default.getInstance().getVivoSwitchRate(1),[2]})})},t.prototype.OPPORewardInit=function(){var t=this,e=["176996","176997","191268"][Math.floor(3*Math.random())];this.OPPORewardAd1=qg.createRewardedVideoAd({adUnitId:e}),this.OPPORewardAd1.onLoad(function(){console.log("\u6fc0\u52b1\u89c6\u98911 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t.OPPOVideoLoad1=!0}),this.OPPORewardAd1.onError(function(t){console.log("reward error:",t,t.errMsg)}),this.OPPORewardAd1.onClose(function(e){console.log("videoClose",e),e&&e.isEnded||void 0===e?t.OPPORewardIndex1&&(l.default.instance.onSuccess(t.OPPORewardIndex1),t.OPPORewardIndex1=null):(0==r.default.getInstance().inGame&&(r.default.getInstance().inGame=!0),t.OPPORewardIndex1!=s.default.WXVIDEOLIST1.\u590d\u6d3b||c.default.instance.reviveNode.active||(c.default.instance.reviveNode.active=!0))})},t.prototype.OPPOBannerInit=function(){var t=this;this.OPPOBannerAd=qg.createBannerAd({adUnitId:"176982",style:{height:90,left:0,top:this.windowHeight-95,width:300}}),this.OPPOBannerAd.onResize(function(e){console.log("resize",t.windowHeight,t.OPPOBannerAd.style.realHeight,t.OPPOBannerAd.style.top),t.realHeight=t.OPPOBannerAd.style.realHeight}),this.OPPOBannerAd.onError(function(t){console.log(t)}),this.OPPOBannerAd.onLoad(function(){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")})},t.prototype.OPPOShowToast=function(t){qg.showToast({title:t,icon:"none",duration:2e3})},t.prototype.OPPOBannerShow=function(t,e){switch(this.OPPOBannerIndex=t,t){case s.default.BANNERLIST.\u52a0\u8f7d\u53f3\u4e0b:if(!this.OPPOBannerAd)return;this.OPPOBannerAd.show().catch(function(t){return console.log(t)});break;case s.default.BANNERLIST.\u9996\u9875\u53f3\u4e0b:case s.default.BANNERLIST.\u5730\u56fe\u8be6\u60c5\u53f3\u4e0b:h.default.instance&&h.default.instance.open();break;case s.default.BANNERLIST.\u6e38\u620f\u5185\u6682\u505c\u4e2d\u4e0b:if(!this.OPPOBannerAd)return;this.OPPOBannerAd.show().catch(function(t){return console.log(t)});break;case s.default.BANNERLIST.\u6e38\u620f\u7ed3\u7b97\u53f3\u4e0a:f.default.instance&&f.default.instance.open();break;case s.default.BANNERLIST.\u5947\u9047\u4e2d\u4e0b:h.default.instance&&h.default.instance.open(!0);break;case s.default.BANNERLIST.\u5468\u8fb9\u5de6\u4e0b:g.default.instance&&g.default.instance.open();break;case s.default.BANNERLIST.\u5730\u56fe\u53f3\u4e0a:m.default.instance&&m.default.instance.open()}},t.prototype.OPPOBannerHide=function(){this.OPPOBannerAd&&(this.OPPOBannerAd.hide(),this.OPPOBannerIndex=null),h.default.instance&&h.default.instance.onClose(),f.default.instance&&f.default.instance.onClose(),g.default.instance&&g.default.instance.onClose(),m.default.instance&&m.default.instance.onClose()},t.prototype.OPPOBannerDestroy=function(){this.OPPOBannerAd&&(this.OPPOBannerAd.destroy(),this.OPPOBannerIndex=null)},t.prototype.OPPORewardShow=function(t){var e=this;this.OPPORewardIndex1=t,this.OPPORewardAd1&&this.OPPORewardAd1.show().catch(function(t){e.OPPORewardAd1.load().then(function(){return e.OPPORewardAd1.show()})}).then(function(){e.needPause(t)&&e.OPPOVideoLoad1&&(r.default.getInstance().inGame=!1),e.OPPOVideoLoad1||e.OPPORewardIndex1&&e.OPPOShowToast("\u89c6\u9891\u51c6\u5907\u4e2d...")})},t.prototype.OPPOInterstitialShow=function(){var t=this;this.OPPOInterstitialAd=qg.createInterstitialAd({adUnitId:"176987"}),this.OPPOInterstitialAd.onLoad(function(){console.log("\u63d2\u5c4f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t.OPPOInterstitialAd.show().catch(function(t){console.error(t)}),u.default.instance.oppoLimitNum--,u.default.instance.saveOPPOLimitData()}),this.OPPOInterstitialAd.onError(function(t){console.log(t)})},t.prototype.OPPOShortcutShow=function(){qg.hasShortcutInstalled({success:function(t){0==t&&d.default.instance&&d.default.instance.open()},fail:function(t){},complete:function(){}})},t.prototype.OPPOShortcutAdd=function(){qg.installShortcut({success:function(){d.default.instance&&d.default.instance.onReward()},fail:function(t){},complete:function(){}})},t.prototype.needPause=function(t){return!1},t.instance=null,t=e=i([v],t)}());n.default=b,cc._RF.pop()},{"../DataMgr":"DataMgr","../Game":"Game","../Tool/Statistics":"Statistics","../nativets/Global":"Global","./AdList":"AdList","./AdRewardMgr":"AdRewardMgr","./NativeBanner":"NativeBanner","./NativeBanner2":"NativeBanner2","./NativeBanner3":"NativeBanner3","./NativeBanner4":"NativeBanner4","./Shortcut":"Shortcut"}],Others:[function(t,e,n){"use strict";cc._RF.push(e,"df429c96NhOHLYVZmcmp35e","Others");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Menu"),s=t("../Audio"),r=t("../DataMgr"),c=t("../nativets/Platform"),l=t("../nativets/Global"),u=t("../nativets/SaveMgr"),d=t("../Tool/Statistics"),p=t("../Hero/HeroGlobal"),h=t("../Ad/AdMgr"),f=t("../Ad/QQAdMgr"),g=t("../Ad/WXAdMgr"),m=t("../Ad/TTAdMgr"),y=cc._decorator,v=y.ccclass,b=(y.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return i(e,t),n=e,e.prototype.init=function(){n.instance=this,this.listNode=this.node.getChildByName("list"),this.listSelect=this.listNode.getChildByName("light"),this.layoutNode=this.node.getChildByName("Layout"),this.layoutArrs=[];for(var t=0;t<6;t++){var e=this.layoutNode.getChildByName(""+t);this.layoutArrs.push(e)}this.layoutArrs.push(this.layoutNode.getChildByName("9")),this.moreBtn=this.node.getChildByName("more")},e.prototype.onLoad=function(){this.init()},e.prototype.start=function(){},e.prototype.onBtnMoreGame=function(){s.default.instance.playAudio("BtnClick"),h.default.instance&&h.default.instance.showGamePortal()},e.prototype.onBtnListSelect=function(t){s.default.instance.playAudio("BtnClick");var e=parseInt(t.target.name);if(9!=e&&2!=e&&d.default.getInstance().reportEvent(["\u7b7e\u5230","\u6392\u884c\u699c","","\u6d3b\u52a8","\u4efb\u52a1","\u6210\u5c31"][e]),c.getPlatform()==c.Platform.TT&&1==e){if(!l.default.getInstance().ttAuthor)return void tt.login({success:function(t){tt.authorize({scope:"scope.userInfo",success:function(){m.default.instance&&m.default.instance.getUserInfo(),l.default.getInstance().ttAuthor=!0},fail:function(){m.default.instance&&m.default.instance.guideActive()}})}});this.open(e)}else this.open(e)},e.prototype.open=function(t){9==t&&(this.layoutArrs[6].active=!0),this.listIndex!=t&&(this.listIndex=t,this.refreshList(),1==t&&(r.default.instance.taskCountData[4]++,r.default.instance.saveSaveDate(),console.log("VIVOINFO",l.default.getInstance().vivoHead),c.getPlatform()!=c.Platform.VIVO||""!=l.default.getInstance().vivoHead&&void 0!=l.default.getInstance().vivoHead&&null!=l.default.getInstance().vivoHead||qg.getSystemInfoSync().platformVersionCode>=1053&&qg.getUserInfo().then(function(t){if(t.data){var e=t.data;console.log("\u5f53\u524d\u7528\u6237\u4fe1\u606f: ",e,e.nickName,e.smallAvatar),l.default.getInstance().vivoName=e.nickName,l.default.getInstance().vivoHead=e.smallAvatar;var n={vivoName:l.default.getInstance().vivoName,vivoHead:l.default.getInstance().vivoHead};u.save("VIVOInfo",JSON.stringify(n));d.default.getInstance().updateUserInfo(l.default.getInstance().vivoName,l.default.getInstance().vivoHead,function(t){cc.log("register",t),1==t.code?(cc.director.emit("FirstReport"),p.default.instance.MonsterKillCount>0&&d.default.getInstance().reportRank(d.default.RANKLIST.\u6740\u622e\u699c,p.default.instance.MonsterKillCount)):cc.log(t.error)})}},function(t){console.log("\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25"+JSON.stringify(t))})))},e.prototype.refreshList=function(){var t=[0,1,3,4,5].indexOf(this.listIndex);this.listSelect.y=-31-62*t,cc.log("ssss",this.listIndex);for(var e=0;e<6;e++){var n=this.layoutArrs[e];n&&(n.active=this.listIndex==e)}9==this.listIndex&&(this.listSelect.y=-93),this.layoutArrs[6].active=9==this.listIndex},e.prototype.onBtnClose=function(){s.default.instance.playAudio("BtnClick"),this.onClose(),this.layoutArrs[6].active=!1},e.prototype.onClose=function(){this.node.active=!1,a.default.instance&&a.default.instance.showRight()},e.prototype.onEnable=function(){c.getPlatform()==c.Platform.WX||c.getPlatform()==c.Platform.QQ?c.getPlatform()==c.Platform.QQ?Math.random()<f.default.instance.moreGameRate?this.moreBtn.active=!0:this.moreBtn.active=!1:Math.random()<g.default.instance.moreGameRate?this.moreBtn.active=!0:this.moreBtn.active=!1:this.moreBtn.active=!1},e.instance=null,e=n=o([v],e)}(cc.Component));n.default=b,cc._RF.pop()},{"../Ad/AdMgr":"AdMgr","../Ad/QQAdMgr":"QQAdMgr","../Ad/TTAdMgr":"TTAdMgr","../Ad/WXAdMgr":"WXAdMgr","../Audio":"Audio","../DataMgr":"DataMgr","../Hero/HeroGlobal":"HeroGlobal","../Menu":"Menu","../Tool/Statistics":"Statistics","../nativets/Global":"Global","../nativets/Platform":"Platform","../nativets/SaveMgr":"SaveMgr"}],Platform:[function(t,e,n){"use strict";cc._RF.push(e,"198308TuddGQJyEmijdzKEn","Platform"),Object.defineProperty(n,"__esModule",{value:!0});var i="",o=function(){return""==i&&(CC_WECHATGAME&&(i=a.WX),window.qq&&(i=a.QQ),cc.sys.platform===cc.sys.OPPO_GAME&&(i=a.OPPO),cc.sys.platform===cc.sys.VIVO_GAME&&(i=a.VIVO),window.tt&&(i=a.TT),window.FBInstant&&(i=a.FB)),i};n.getPlatform=o;var a=cc.Enum({WX:"wx",Android:"Android",IOS:"IOS",QQ:"qq",FB:"fb",WEB:"web",OPPO:"oppo",VIVO:"vivo",TT:"tt",m4399:"4399"});n.Platform=a;n.getPLATID=function(){switch(o()){case a.WEB:return 2;case a.WX:return 1;case a.QQ:return 4;case a.OPPO:return 2;case a.VIVO:return 1;case a.TT:return 3;default:return 99}},cc._RF.pop()},{}],QQAdMgr:[function(t,e,n){"use strict";cc._RF.push(e,"e933cSgG8ZEDJwVdEuQEKZK","QQAdMgr"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../nativets/Global"),o=t("./AdRewardMgr"),a=t("./AdList"),s=t("../Tool/Statistics"),r=t("../nativets/SaveMgr"),c=t("../Game"),l=t("./WXFLoat"),u=t("./Shortcut"),d=function(){function t(){this.shareCount=0,this.shareSuccess=0,this.moreGameRate=.5}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.init=function(){t.instance=this,this.QQInit()},t.prototype.QQInit=function(){this.windowWidth=wx.getSystemInfoSync().windowWidth,this.windowHeight=wx.getSystemInfoSync().windowHeight,this.zoomRateW=this.windowWidth/cc.winSize.width,this.zoomRateH=this.windowHeight/cc.winSize.height;var t=wx.getMenuButtonBoundingClientRect(),e=.5*cc.winSize.height-(t.bottom+.25*t.height)/this.zoomRateH,n=(t.left+.25*t.width)/this.zoomRateH-.5*cc.winSize.width;this.menuPosition=cc.v2(n,e),this.QQBannerInit(),this.QQRewardInit(),this.QQAppBoxInit(),this.QQHideShow(),this.initShareSuccess(),this.QQSwitchInit()},t.prototype.initShareSuccess=function(){var t=r.load("shareSuccess");t&&(this.shareSuccess=parseInt(t))},t.prototype.QQSwitchInit=function(){var t=this;s.default.getInstance().getSwitch(1,function(e){console.log("\u5f53\u524d\u57ce\u5e02\uff1a",cc.sys.localStorage.getItem("city")),1==e.code?(console.log("\u6982\u7387",e.data),-1==e.data.area.search(cc.sys.localStorage.getItem("city"))&&e.data.rate>0&&-1==e.data.version.search("1.0.30")?(t.winRate=e.data.rate,t.winLimit=e.data.show_limit):(t.winRate=0,t.winLimit=0),console.log("mytest",t.winRate,t.winLimit)):(t.winRate=0,t.winLimit=0)});s.default.getInstance().getSwitch(2,function(e){1==e.code?(console.log("\u6982\u7387",e.data),-1==e.data.area.search(cc.sys.localStorage.getItem("city"))&&e.data.rate>0&&-1==e.data.version.search("1.0.30")?(t.failRate=e.data.rate,t.failLimit=e.data.show_limit):(t.failRate=0,t.failLimit=0),console.log("mytest",t.failRate,t.failLimit)):(t.failRate=0,t.failLimit=0)});s.default.getInstance().getSwitch(3,function(e){1==e.code?(console.log("\u6982\u7387"+e.data),t.moreGameRate=e.data.rate):t.moreGameRate=.5})},t.prototype.QQHideShow=function(){var t=this;cc.game.on(cc.game.EVENT_HIDE,function(){cc.log("\u5207\u5230\u540e\u53f0")}),cc.game.on(cc.game.EVENT_SHOW,function(){var e=wx.getLaunchOptionsSync();console.log("QQscene:",e.scene);var n=cc.sys.localStorage.getItem("game_scene");if(null!=n&&""!=n||(n=e.scene,cc.sys.localStorage.setItem("game_scene",e.scene),console.log("scene:"+n)),s.default.getInstance().register(i.default.getInstance().wxName,i.default.getInstance().wxHead,n,"",null),t.QQBannerAd&&null!=t.QQBannerIndex){var a=t.QQBannerIndex;t.QQBannerHide(),t.QQBannerShow(a,!0)}if(t.shareStartTime){var c=Date.now()-t.shareStartTime;0==t.shareCount?c>5e3?t.shareCount<9?(console.log("\u5206\u4eab\u6210\u529f"),o.default.instance.onSuccess(t.shareIndex),t.shareSuccess++,r.save("shareSuccess",t.shareSuccess+"")):wx.showToast({title:"\u5206\u4eab\u6b21\u6570\u5df2\u6ee1\uff0c\u8bf7\u660e\u5929\u518d\u8bd5",icon:"none",duration:3500}):(console.log("\u5206\u4eab\u5931\u8d25"),wx.showToast({title:"\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u52ff\u9891\u7e41\u6253\u6270\u540c\u4e00\u4e2a\u7fa4",icon:"none",duration:3500})):c>2500?t.shareCount<9?(console.log("\u5206\u4eab\u6210\u529f"),o.default.instance.onSuccess(t.shareIndex),t.shareSuccess++,r.save("shareSuccess",t.shareSuccess+"")):wx.showToast({title:"\u5206\u4eab\u6b21\u6570\u5df2\u6ee1\uff0c\u8bf7\u660e\u5929\u518d\u8bd5",icon:"none",duration:2e3}):(console.log("\u5206\u4eab\u5931\u8d25"),wx.showToast({title:"\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u5206\u4eab\u5230\u4e0d\u540c\u7fa4",icon:"none",duration:2e3})),t.shareStartTime=null,t.shareCount++}})},t.prototype.QQBannerInit=function(){var t=this;this.QQBannerAd=wx.createBannerAd({adUnitId:"de33e0421f121bf4ee3052c1eefab4c3",style:{adIntervals:30,left:this.windowWidth-305,top:this.windowHeight-95,width:300}}),this.QQBannerAd.onResize(function(e){cc.log("resize",t.windowHeight,t.QQBannerAd.style.realHeight,t.QQBannerAd.style.top),t.realHeight=t.QQBannerAd.style.realHeight}),this.QQBannerAd.onError(function(t){cc.log(t)}),this.QQBannerAd.onLoad(function(){cc.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t.QQBannerHide()})},t.prototype.QQRewardInit=function(){var t=this;this.QQRewardAd1=wx.createRewardedVideoAd({adUnitId:"e893cc27a85d4f38b3aecf99238ad4c0"}),this.QQRewardAd1.onLoad(function(){cc.log("\u6fc0\u52b1\u89c6\u98911 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t.QQVideoLoad1=!0}),this.QQRewardAd1.onError(function(t){cc.log("reward error:"+t)}),this.QQRewardAd1.onClose(function(e){e&&e.isEnded||void 0===e?t.QQRewardIndex1&&(o.default.instance.onSuccess(t.QQRewardIndex1),t.QQRewardIndex1=null):(0==i.default.getInstance().inGame&&(i.default.getInstance().inGame=!0),t.QQRewardIndex1!=a.default.QQVIDEOLIST1.\u590d\u6d3b||c.default.instance.reviveNode.active||(c.default.instance.reviveNode.active=!0))}),this.QQRewardAd2=wx.createRewardedVideoAd({adUnitId:"e893cc27a85d4f38b3aecf99238ad4c0"}),this.QQRewardAd2.onLoad(function(){cc.log("\u6fc0\u52b1\u89c6\u98912 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t.QQVideoLoad2=!0}),this.QQRewardAd2.onError(function(t){cc.log("reward error:"+t)}),this.QQRewardAd2.onClose(function(e){e&&e.isEnded||void 0===e?t.QQRewardIndex2&&(o.default.instance.onSuccess(t.QQRewardIndex2),t.QQRewardIndex2=null):0==i.default.getInstance().inGame&&(i.default.getInstance().inGame=!0)})},t.prototype.QQGridAdInit=function(){wx.createGridAd&&(this.QQGridAd=wx.createGridAd({adUnitId:"adunit-4aaa88f45a957542",adTheme:"white",gridCount:5,style:{left:0,top:0,width:330,opacity:.8}}))},t.prototype.QQBlockAdInit=function(t,e,n){var i=this;this.QQBlockAdHide(),qq.createBlockAd&&(this.QQBlockAd=qq.createBlockAd({adUnitId:"fbf16d295ccb2bddaaf742ef907c01ae",size:t,orientation:"landscape",style:{left:e,top:n}}),console.log("InitBlockAd",this.QQBlockAd),this.QQBlockAd.onLoad(function(){console.log("BlockAdLoaded"),i.QQBlockAd&&i.QQBlockAd.show()}),this.QQBlockAd.onError(function(t){console.log(t.errMsg)}))},t.prototype.QQGridAdShow=function(){this.QQGridAd&&this.QQGridAd.show()},t.prototype.QQAppBoxInit=function(){qq.createAppBox&&(this.QQAppBox=qq.createAppBox({adUnitId:"b239dbac5a76ebf443481d2ce07a80ca"}))},t.prototype.QQAppBoxShow=function(){var t=this;this.QQAppBox&&this.QQAppBox.load().then(function(){t.QQAppBox.show()}).catch(function(t){console.error(t)})},t.prototype.QQGamePortalInit=function(){wx.createGamePortal&&(this.QQGamePortal=wx.createGamePortal({adUnitId:"PBgAAyAVEGWVHwUM"}))},t.prototype.QQGamePortalShow=function(){var t=this;this.QQGamePortal&&this.QQGamePortal.load().then(function(){t.QQGamePortal.show()}).catch(function(t){console.error(t)})},t.prototype.QQBannerShow=function(t,e){if(this.QQBannerAd)switch(this.QQBannerHide(),this.QQBannerIndex=t,this.QQBannerAd.style.width=t==a.default.BANNERLIST.\u901a\u5173\u5b9d\u7bb1?450:300,t){case a.default.BANNERLIST.\u9996\u9875\u53f3\u4e0b:this.QQBannerAd.style.left=this.windowWidth-305,this.QQBannerAd.style.top=this.windowHeight-this.realHeight,cc.sys.os==cc.sys.OS_IOS&&cc.winSize.height/cc.winSize.width>16/9&&(this.QQBannerAd.style.top=this.windowHeight-this.realHeight+(e?15:30)),this.QQBannerAd.show().catch(function(t){return console.log(t)});break;case a.default.BANNERLIST.\u5730\u56fe\u8be6\u60c5\u53f3\u4e0b:this.QQBannerAd.style.left=this.windowWidth-305,this.QQBannerAd.style.top=this.windowHeight-this.realHeight-0,cc.sys.os==cc.sys.OS_IOS&&cc.winSize.height/cc.winSize.width>16/9&&(this.QQBannerAd.style.top=this.windowHeight-this.realHeight+(e?15:30)),this.QQBannerAd.show().catch(function(t){return console.log(t)});break;case a.default.BANNERLIST.\u6e38\u620f\u5185\u6682\u505c\u4e2d\u4e0b:case a.default.BANNERLIST.\u5947\u9047\u4e2d\u4e0b:this.QQBannerAd.style.left=this.windowWidth/2-150,this.QQBannerAd.style.top=this.windowHeight-this.realHeight-0,cc.sys.os==cc.sys.OS_IOS&&cc.winSize.height/cc.winSize.width>16/9&&(this.QQBannerAd.style.top=this.windowHeight-this.realHeight+(e?15:30)),this.QQBannerAd.show().catch(function(t){return console.log(t)});break;case a.default.BANNERLIST.\u901a\u5173\u5b9d\u7bb1:this.QQBannerAd.style.left=.5*this.windowWidth-225,this.QQBannerAd.style.top=.5*this.windowHeight-.5*this.realHeight,this.QQBannerAd.show().catch(function(t){return console.log(t)})}},t.prototype.QQBannerHide=function(){this.QQBannerAd&&(this.QQBannerAd.hide(),this.QQBannerIndex=null)},t.prototype.QQBannerDestroy=function(){this.QQBannerAd&&(this.QQBannerAd.destroy(),this.QQBannerIndex=null)},t.prototype.QQRewardShow=function(t){var e=this;1==Math.floor(t/100)?(this.QQRewardIndex1=t,this.QQRewardAd1.show().catch(function(t){e.QQRewardAd1.load().then(function(){return e.QQRewardAd1.show()})}).then(function(){e.needPause(t)&&e.QQVideoLoad1&&(i.default.getInstance().inGame=!1),e.QQVideoLoad1||e.QQRewardIndex1&&e.QQShare(e.QQRewardIndex1)})):(this.QQRewardIndex2=t,this.QQRewardAd2.show().catch(function(t){e.QQRewardAd2.load().then(function(){return e.QQRewardAd2.show()})}).then(function(){e.needPause(t)&&e.QQVideoLoad2&&(i.default.getInstance().inGame=!1),e.QQVideoLoad2||e.QQRewardIndex2&&e.QQShare(e.QQRewardIndex2)}))},t.prototype.QQShare=function(t){wx.shareAppMessage({imageUrlId:"LIIp5vEGRPyw9qy+UwZg==",imageUrl:"https://mmocgame.qpic.cn/wechatgame/QdFKpXpcRxAqNjzd4G3ap1Mibr8WWzc35WgUNIZOp4oAXkpBdVrn6vRCd5NdUzdHX/0"}),this.shareStartTime=Date.now(),this.shareIndex=t},t.prototype.QQFLoatShow=function(){l.default.instance&&l.default.instance.open()},t.prototype.QQBlockAdShow=function(t){switch(console.log("ShowBlockAd",t,this.blockLeft,this.blockTop),t){case a.default.QQBlockList.\u9996\u9875\u5355\u4e2a:this.QQBlockAdInit(1,this.blockLeft,this.blockTop);break;case a.default.QQBlockList.\u7ed3\u7b975\u4e2a:this.QQBlockAdInit(5,this.windowWidth/2-150,cc.winSize.height)}},t.prototype.QQBlockAdHide=function(){this.QQBlockAd&&this.QQBlockAd.destroy()},t.prototype.needPause=function(t){return!1},t.prototype.QQShortcutShow=function(){cc.sys.os==cc.sys.OS_ANDROID&&u.default.instance&&u.default.instance.open()},t.prototype.QQShortcutAdd=function(){qq.saveAppToDesktop&&qq.saveAppToDesktop({success:function(t){u.default.instance&&u.default.instance.onReward()},fail:function(t){}})},t.instance=null,t}();n.default=d,cc._RF.pop()},{"../Game":"Game","../Tool/Statistics":"Statistics","../nativets/Global":"Global","../nativets/SaveMgr":"SaveMgr","./AdList":"AdList","./AdRewardMgr":"AdRewardMgr","./Shortcut":"Shortcut","./WXFLoat":"WXFLoat"}],QQBlockCtrl:[function(t,e,n){"use strict";cc._RF.push(e,"e4e58WpO/NBcJvYBP94mLdy","QQBlockCtrl");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./QQAdMgr"),s=t("./AdList"),r=t("../nativets/Platform"),c=cc._decorator,l=c.ccclass,u=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.style=s.default.QQBlockList.\u9996\u9875\u5355\u4e2a,e}return i(e,t),e.prototype.onEnable=function(){var t=this;if(r.getPlatform()==r.Platform.QQ)switch(this.style){case s.default.QQBlockList.\u9996\u9875\u5355\u4e2a:this.scheduleOnce(function(){var e,n,i=wx.getSystemInfoSync().windowWidth/cc.winSize.width,o=wx.getSystemInfoSync().windowHeight/cc.winSize.height,s=t.node.convertToWorldSpace(cc.v2(0,t.node.height));e=s.x,n=cc.winSize.height-s.y,t.WXLeft=e*i,t.WXTop=n*o,cc.log("WXTL",t.WXLeft,t.WXTop),a.default.instance&&(a.default.instance.blockLeft=t.WXLeft,a.default.instance.blockTop=t.WXTop,a.default.instance.QQBlockAdShow(t.style))});break;case s.default.QQBlockList.\u7ed3\u7b975\u4e2a:a.default.instance&&a.default.instance.QQBlockAdShow(this.style)}},e.prototype.onDisable=function(){a.default.instance&&a.default.instance.QQBlockAdHide()},o([u({type:cc.Enum(s.default.QQBlockList),displayName:"\u4f4d\u7f6e"})],e.prototype,"style",void 0),e=o([l],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../nativets/Platform":"Platform","./AdList":"AdList","./QQAdMgr":"QQAdMgr"}],QimenItem:[function(t,e,n){"use strict";cc._RF.push(e,"76daatkZt9JUYrkDfPrjLDA","QimenItem");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../TextureMgr"),s=cc._decorator,r=s.ccclass,c=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(){this.index=-1,this.icon=this.node.getChildByName("icon").getComponent(cc.Sprite),this.bg=this.node.getChildByName("bg").getComponent(cc.Sprite),this.nameLabel=this.node.getChildByName("name").getComponent(cc.Label),this.textLabel=this.node.getChildByName("text").getComponent(cc.Label),this.attLabel=this.node.getChildByName("att").getComponent(cc.Label)},e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.setItem=function(t,e,n,i,o){this.index=t,this.icon.node.scale=t<4?1.2:1,this.bg.spriteFrame=t<4?a.default.instance.rewardBg:null,this.icon.spriteFrame=e,this.nameLabel.string=n,this.textLabel.string=i,this.attLabel.string=o},e=o([r],e)}(cc.Component));n.default=c,cc._RF.pop()},{"../../TextureMgr":"TextureMgr"}],Qimen:[function(t,e,n){"use strict";cc._RF.push(e,"7577e52JUtExqsqvpG8Oogx","Qimen");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../i18n/Language"),s=t("../../nativets/Config"),r=t("../../Hero/HeroGlobal"),c=t("../../TextureMgr"),l=t("./QimenItem"),u=t("../../Ad/AdMgr"),d=t("../../Ad/AdList"),p=t("../../Audio"),h=t("../../Menu"),f=t("../../Message"),g=t("../../Ad/QQAdMgr"),m=[[50105,50101,40102,40101,30105,30104],[50204,40103,30107],[50302,40207,40204,30203,30202],[50303,40305,30206],[50306,40306,30308,30301]],y=[[60101,60102,60103,60104,60105,60106,60107,60108],[60201,60202,60203,60204,60205,60206,60207,60208],[60301,60302,60303,60304,60305,60306,60307,60308],[60401,60402,60403,60404,60405,60406,60407,60408],[60501,60502,60503,60504,60505,60506,60507,60508],[60601,60602,60603,60604,60605,60606,60609]],v=[[71101,71102,72101,72102,73101,73102,75101,75102,74101,74102],[71201,71202,72201,72202,73201,73202,73203,75201,75202,74201,74202],[71301,71302,71303,73301,73302,73303,73304,75301,74301]],b=["gem","gold","life","item","soul","book"],A=["\u53ef\u83b7\u5f97\u5b9d\u77f3","\u53ef\u83b7\u5f97\u91d1\u5e01","\u53ef\u83b7\u5f97\u519b\u7cae","\u53ef\u83b7\u5f97\u88c5\u5907","\u53ef\u4e0e\u88c5\u5907\u878d\u5408","\u6c38\u4e45\u63d0\u5347\u5c5e\u6027"],S=["atk","def","hp","ls","sp","cr","arp","bonus","cd","miss","exp","gold"],I=[a.default.equipmentAtk,a.default.equipmentDef,a.default.equipmentHp,a.default.equipmentLs,a.default.equipmentSp,a.default.equipmentCr,a.default.equipmentArp,a.default.equipmentBonus,a.default.equipmentCd,a.default.equipmentMiss,a.default.equipmentExp,a.default.equipmentGold],_=cc._decorator,B=_.ccclass,C=_.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.qimenItmePrefab=null,e.iconSf=[],e.iconBgSf=[],e}var n;return i(e,t),n=e,e.prototype.init=function(){this.box1Node=this.node.getChildByName("box1"),this.box2Node=this.node.getChildByName("box2"),this.resultNode=cc.instantiate(this.qimenItmePrefab),this.resultNode.parent=this.box2Node,this.resultNode.scaleX=0,this.leftNode=this.box1Node.getChildByName("left"),this.box2TextNode=this.box2Node.getChildByName("text"),this.iconSp=this.box2Node.getChildByName("icon").getComponent(cc.Sprite),this.iconBgSp=this.box2Node.getChildByName("iconBg").getComponent(cc.Sprite),this.videoBtn=this.box1Node.getChildByName("video").getComponent(cc.Button),this.openBtn=this.box1Node.getChildByName("open").getComponent(cc.Button),this.allBtn=this.box2Node.getChildByName("all"),this.closeBtn=this.box2Node.getChildByName("close"),this.eightNode=this.box1Node.getChildByName("eight"),this.eightMidNode=this.box1Node.getChildByName("mid"),this.eightCenterNode=this.box1Node.getChildByName("center"),this.anim=this.eightNode.getComponent(cc.Animation),this.cardArrs=[],this.resultArrs=[],this.itemScripts=[];for(var t=0;t<3;t++){this.cardArrs.push(this.box2Node.getChildByName(""+t));var e=cc.instantiate(this.qimenItmePrefab);e.parent=this.box2Node,e.scaleX=0,e.position=this.cardArrs[t].position,this.resultArrs.push(e),this.itemScripts.push(e.getComponent(l.default)),this.itemScripts[t].init()}},e.prototype.onLoad=function(){n.instance=this,this.node.active=!1,this.init()},e.prototype.start=function(){},e.prototype.open=function(){var t=this;this.node.active=!0,this.box1Node.active=!0,this.eightNode.stopAllActions(),this.eightMidNode.stopAllActions(),this.eightCenterNode.stopAllActions(),this.eightNode.opacity=255,this.eightMidNode.opacity=255,this.eightCenterNode.opacity=255,p.default.instance.playAudio("CEUp"),this.leftNode.opacity=0,this.leftNode.stopAllActions(),this.leftNode.runAction(cc.fadeIn(.3)),this.eightNode.runAction(cc.rotateBy(.5,-30)),this.openBtn.interactable=!0,this.videoBtn.interactable=!0,this.openBtn.node.active=!1,this.videoBtn.node.active=!1,this.scheduleOnce(function(){t.openBtn.node.active=!0,t.videoBtn.node.active=!0},1),this.box2Node.active=!1},e.prototype.onBtnAll=function(){p.default.instance.playAudio("BtnClick"),u.default.instance?u.default.instance.showRewardAd(d.default.WXVIDEOLIST2.\u5947\u95e8\u62bd\u5956):this.getAll()},e.prototype.getAll=function(){for(var t=0;t<3;t++)this.showCard(t)},e.prototype.getEightJson=function(){var t=Math.random();cc.log(t);var e=0;return t<=.25||(e=t>.25&&t<=.4?1:t>.4&&t<=.5?2:t>.5&&t<=.6?3:t>.6&&t<=.8?4:5),this.iconBgSp.spriteFrame=this.iconBgSf[e],this.iconSp.spriteFrame=this.iconSf[e],s.Eight[e]},e.prototype.getArrs=function(t){for(var e=[],n=0;n<b.length;n++)if(t[b[n]])for(var i=t[b[n]],o=0;o<i.length;o++){var a=t.factor[o]*r.default.instance.Level,s=Math.floor(i[o]+a);switch(console.log(s),n){case 3:s>m.length&&(s=m.length),s=m[s-1][Math.floor(Math.random()*m[s-1].length)];break;case 4:s>y.length&&(s=y.length),s=y[s-1][Math.floor(Math.random()*y[s-1].length)];break;case 5:s>v.length&&(s=v.length),s=v[s-1][Math.floor(Math.random()*v[s-1].length)]}e.push({index:n,id:s})}for(var c=0;c<e.length;c++){var l=Math.floor(Math.random()*e.length),u=e[l];e[l]=e[c],e[c]=u}console.log("DataArrs1",e),this.dataArrs=e;for(var d=0;d<e.length;d++){var p=e[d].index,h=e[d].id,f=this.getImgByJson(p,h),g=this.getNameByJson(p,h),S=this.getAttInData(p,h);this.itemScripts[d].setItem(p,f,g,A[e[d].index],S)}},e.prototype.unlockReward=function(t){if(t){cc.log("reward",t);var e=parseInt(t.id);switch(t.index){case 0:h.default.instance.addJade(e);break;case 1:h.default.instance.addCoins(e);break;case 2:h.default.instance.addLife(e);break;case 3:r.default.instance.pushEquipmentData(1e4*e);break;case 4:r.default.instance.pushEquipmentData(e);break;case 5:r.default.instance.pushEquipmentData(e),r.default.instance.HeroDataArrs[r.default.instance.MainHeroIndex].updateAttribute()}}},e.prototype.getNameByJson=function(t,e){switch(t){case 0:return"\u5b9d\u77f3";case 1:return"\u91d1\u5e01";case 2:return"\u519b\u7cae";case 3:return s.getDataById(e).name;case 4:return s.getDataById(e).name+"\xb7\u6b66\u9b42";case 5:return s.getDataById(e).name}return t+""+e},e.prototype.getImgByJson=function(t,e){switch(t){case 0:case 1:case 2:return c.default.instance.rewardSfInGame[t];case 3:return c.default.instance.getEquipmentIconById(e);case 4:return c.default.instance.getSoulIconById(e);case 5:return c.default.instance.rewardSfInGame[3]}},e.prototype.getAttInData=function(t,e){switch(t){case 0:return"\u5b9d\u77f3 x "+e;case 1:return"\u91d1\u5e01 x "+e;case 2:return"\u519b\u7cae x "+e;case 3:var n=s.getDataById(e);return this.getDetailByJson(n);case 4:var i=s.getDataById(e);return this.getDetailByJson(i);case 5:var o=s.getDataById(e);return this.getDetailByJson(o)}return t+""+e},e.prototype.getDetailByJson=function(t){for(var e=0,n="",i=0;i<S.length;i++){var o=S[i];t[o]&&(n+=I[i]+"+"+t[o],n+=++e%2==0?"\n":"  ")}return n},e.prototype.onBtnClose=function(){p.default.instance.playAudio("BtnClick"),this.close()},e.prototype.close=function(){this.node.active=!1},e.prototype.onBtnOpen=function(){p.default.instance.playAudio("BtnClick"),u.default.instance?u.default.instance.showRewardAd(d.default.WXVIDEOLIST2.\u514d\u8d39\u5947\u95e8):this.onOpen()},e.prototype.onBtnOpenByJada=function(){p.default.instance.playAudio("BtnClick"),r.default.instance.Jade>=40?(r.default.instance.Jade-=40,h.default.instance.refreshTopLabel(!0),r.default.instance.saveHeroGlobal(),this.onOpen()):f.default.instance.showLack("jade")},e.prototype.onOpen=function(){p.default.instance.playAudio("Eight"),this.scheduleOnce(function(){p.default.instance.playAudio("CEUp")},4.8),this.leftNode.stopAllActions(),this.leftNode.runAction(cc.fadeOut(3)),this.openBtn.interactable=!1,this.videoBtn.interactable=!1,this.anim.stop(),this.anim.play(),this.eightMidNode.runAction(cc.sequence(cc.delayTime(.5),cc.rotateBy(3.5,-1080))),this.eightCenterNode.runAction(cc.sequence(cc.delayTime(1),cc.rotateBy(3,-4096))),this.anim.on(cc.Animation.EventType.FINISHED,this.showBox2,this),this.getArrs(this.getEightJson())},e.prototype.showBox2=function(){var t=this;this.eightNode.runAction(cc.fadeOut(.9)),this.eightMidNode.runAction(cc.fadeOut(.9)),this.eightCenterNode.runAction(cc.fadeOut(.9)),this.scheduleOnce(function(){t.box1Node.active=!1,t.initCards(),t.chanceCount=1,t.box2Node.active=!0,t.iconSp.node.opacity=0,t.iconBgSp.node.opacity=0,t.iconSp.node.runAction(cc.fadeIn(.3)),t.iconBgSp.node.runAction(cc.fadeIn(.3)),t.allBtn.active=!1,t.closeBtn.active=!1},1)},e.prototype.initCards=function(){for(var t=this,e=0;e<this.cardArrs.length;e++)this.cardArrs[e].scaleX=1,this.cardArrs[e].stopAllActions(),this.cardArrs[e].opacity=0,this.cardArrs[e].runAction(cc.sequence(cc.delayTime(.45*(e+1)),cc.fadeIn(.3))),this.resultArrs[e].scaleX=0;this.box2TextNode.active=!1,this.scheduleOnce(function(){t.box2TextNode.active=!0},1.65)},e.prototype.onBtnCard=function(t){var e=parseInt(t.target.name);this.chanceCount<1||(p.default.instance.playAudio("BtnClick"),this.chanceCount--,this.showCard(e))},e.prototype.showCard=function(t){var e=this,n=this.cardArrs[t];if(1==n.scaleX){p.default.instance.playAudio("CEUp"),n.stopAllActions();var i=cc.sequence(cc.scaleTo(.5,0,1),cc.callFunc(function(){e.resultArrs[t].runAction(cc.scaleTo(.12,.85,.85)),e.unlockReward(e.dataArrs[t]),e.allBtn.active||(e.allBtn.active=!0,e.scheduleOnce(function(){e.closeBtn.active=!0},0))}));n.runAction(i)}},e.prototype.onEnable=function(){u.default.instance&&u.default.instance.hideBanner(),g.default.instance&&g.default.instance.QQBlockAdHide()},e.prototype.onDisable=function(){u.default.instance&&u.default.instance.showBannerAd(d.default.BANNERLIST.\u9996\u9875\u53f3\u4e0b),g.default.instance&&g.default.instance.QQBlockAdShow(1)},e.instance=null,o([C(cc.Prefab)],e.prototype,"qimenItmePrefab",void 0),o([C([cc.SpriteFrame])],e.prototype,"iconSf",void 0),o([C([cc.SpriteFrame])],e.prototype,"iconBgSf",void 0),e=n=o([B],e)}(cc.Component);n.default=w,cc._RF.pop()},{"../../Ad/AdList":"AdList","../../Ad/AdMgr":"AdMgr","../../Ad/QQAdMgr":"QQAdMgr","../../Audio":"Audio","../../Hero/HeroGlobal":"HeroGlobal","../../Menu":"Menu","../../Message":"Message","../../TextureMgr":"TextureMgr","../../i18n/Language":"Language","../../nativets/Config":"Config","./QimenItem":"QimenItem"}],RankWX:[function(t,e,n){"use strict";cc._RF.push(e,"7c0ecs29iVCD6ROcETGsHY6","RankWX");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../Audio"),s={InitKey:"initKey",Grade:"testkey",LevelKey:"reachlevel",ScoreKey:"levelScore",KillKey:"KillRank",StarKey:"StarRank"},r={FetchFriend:"FetchFriend",FetchGroup:"FetchGroup",FetchFriendLevel:"FetchFriendLevel",FetchFriendScore:"FetchFriendScore",HorConmpar:"HorConmpar",Paging:"Paging",Scrolling:"Scrolling",KillRank:"KillRank",StarRank:"StarRank"},c=cc._decorator,l=c.ccclass,u=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rankRender=null,e.rankListNode=null,e.enableScroll=!0,e._timeCounter=0,e.rendInterval=.5,e.rankTexture=null,e.rankSpriteFrame=null,e.closeBackRank=0,e.id=0,e}var n;return i(e,t),n=e,e.prototype.onLoad=function(){n.instance=this,this.rankTexture=new cc.Texture2D,this.rankSpriteFrame=new cc.SpriteFrame,this.resizeSharedCanvas(this.rankRender.node.width,this.rankRender.node.height)},e.prototype.onBtnRankSelect=function(t){var e=t.target.parent;e.getChildByName("0").getComponent(cc.Button).interactable=!e.getChildByName("0").getComponent(cc.Button).interactable,e.getChildByName("1").getComponent(cc.Button).interactable=!e.getChildByName("1").getComponent(cc.Button).interactable,this.id=0==this.id?1:0,this.showRank(this.id)},e.prototype.refreshRank=function(t){},e.prototype.update=function(t){this.updateRankList()},e.prototype.resizeSharedCanvas=function(t,e){if(window.wx){var n=window.wx.getOpenDataContext().canvas;n.width=t,n.height=e,console.log(n)}},e.prototype.changeRender=function(t){this.rankRender.node.width=t.width,this.rankRender.node.height=t.height,this.rankRender.node.position=t.position,this.resizeSharedCanvas(t.width,t.height)},e.prototype.updateRankList=function(){if(window.wx&&this.rankTexture){var t=window.wx.getOpenDataContext().canvas;this.rankTexture.initWithElement(t),this.rankTexture.handleLoadedTexture(),this.rankSpriteFrame||(this.rankSpriteFrame=new cc.SpriteFrame),this.rankSpriteFrame.setTexture(this.rankTexture),this.rankRender.spriteFrame=this.rankSpriteFrame}},e.prototype.onEnable=function(){this.rankRender.spriteFrame=null,this.changeRender(this.rankListNode),this.enableScroll&&this.rankRender.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.showRank(this.id)},e.prototype.onDisable=function(){this.enableScroll&&this.rankRender.node.off(cc.Node.EventType.TOUCH_MOVE),this.rankRender.spriteFrame=null},e.prototype.onPageUp=function(){cc.log(this),this.postMessage("Paging",-1)},e.prototype.onPageDown=function(){this.postMessage("Paging",1)},e.prototype.onTouchMove=function(t){var e=t.getDeltaY();this.postMessage("Scrolling",e)},e.prototype.onBtnClose=function(){a.default.instance.playAudio("BtnClick");var t=this.node,e=cc.sequence(cc.scaleTo(.12,1.1),cc.scaleTo(.1,.5),cc.callFunc(function(){t.active=!1,t.scaleX=1,t.scaleY=1}));t.runAction(e)},e.prototype.loadLevelOpenRank=function(){this.node.active=!0,this.onEnable(),this.changeRender(this.rankListNode),this.postMessage(r.FetchFriendLevel)},e.prototype.showRank=function(t){0==t?this.postMessage(r.KillRank):this.postMessage(r.StarRank)},e.prototype.postMessage=function(t,e,n){(void 0===e&&(e=null),void 0===n&&(n=null),window.wx)&&window.wx.getOpenDataContext().postMessage({action:t,data:e,dataEx:n})},e.prototype.uploadScore=function(t,e){window.wx&&(e=e.toString(),window.wx.setUserCloudStorage({KVDataList:[{key:s.ScoreKey+t,value:e}],success:function(t){console.log("uploadScore success:res=>",t)},fail:function(t){console.log("uploadScore fail:res=>",t)}}))},e.prototype.uploadLevelOpen=function(t){window.window.wx&&(t=t.toString(),window.wx.setUserCloudStorage({KVDataList:[{key:s.LevelKey,value:t}],success:function(t){console.log("uploadScore success:res=>",t)},fail:function(t){console.log("uploadScore fail:res=>",t)}}))},e.uploadWXKill=function(t){if(window.window.wx){var e=t+"";window.wx.setUserCloudStorage({KVDataList:[{key:s.KillKey,value:e}],success:function(t){console.log("uploadScore Kill success:res=>",t)},fail:function(t){console.log("uploadScore Kill fail:res=>",t)}})}},e.prototype.uploadWXStar=function(t){if(window.window.wx){var e=t+"";window.wx.setUserCloudStorage({KVDataList:[{key:s.StarKey,value:e}],success:function(t){console.log("uploadScore Star success:res=>",t)},fail:function(t){console.log("uploadScore Star fail:res=>",t)}})}},e.prototype.removeUserKey=function(t){window.window.wx&&("string"==typeof t&&(t=[t]),window.wx.removeUserCloudStorage({keyList:t,success:function(t){console.log("uploadScore success:res=>",t)},fail:function(t){console.log("uploadScore fail:res=>",t)}}))},e.instance=null,o([u(cc.Sprite)],e.prototype,"rankRender",void 0),o([u(cc.Node)],e.prototype,"rankListNode",void 0),e=n=o([l],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../../Audio":"Audio"}],Rank:[function(t,e,n){"use strict";cc._RF.push(e,"67f59Mk2rJDJphQOmeJBF5y","Rank");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../Tool/Statistics"),s=t("../../Hero/HeroGlobal"),r=t("../../nativets/Global"),c=cc._decorator,l=c.ccclass,u=c.property,d=["\u5168\u533a\u6218\u529b\u699c","\u5168\u533a\u6210\u5c31\u699c","\u5168\u533a\u6740\u622e\u699c"],p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.myItem=null,e.layoutNode=null,e.itemPrefab=null,e.id=2,e}var n;return i(e,t),n=e,e.prototype.init=function(){this.layoutNode=this.node.getChildByName("ScrollView").getChildByName("view").getChildByName("content"),this.selectNode=this.node.getChildByName("select"),this.titleLabel=this.node.getChildByName("Title").getComponent(cc.Label),this.selectArrs=[],this.selectTexts=[];for(var t=0;t<3;t++)this.selectArrs.push(this.selectNode.getChildByName(""+t)),this.selectTexts.push(this.selectNode.getChildByName("t"+t));this.createMyItem()},e.prototype.onLoad=function(){n.instance=this,this.init()},e.prototype.start=function(){},e.prototype.createMyItem=function(){var t=cc.instantiate(this.itemPrefab);t.parent=this.node,t.position=cc.v2(0,-244),this.myItem=t,t.active=!1},e.prototype.onBtnRankSelect=function(t){this.id!=parseInt(t.target.name)&&(this.id=parseInt(t.target.name),this.refreshRank(this.id))},e.prototype.refreshState=function(t){this.titleLabel.string=d[t];for(var e=0;e<3;e++)this.selectArrs[e].active=t==e,this.selectTexts[e].color=t==e?cc.Color.WHITE:cc.color(108,109,117)},e.prototype.refreshRank=function(t){var e=this;this.refreshState(t),this.layoutNode.removeAllChildren();var n=!0;switch(t){case 0:n=s.default.instance.HighestCE<90231;break;case 1:n=s.default.instance.StarCount<124;break;case 2:n=s.default.instance.MonsterKillCount<1053}this.isNewbie=n,a.default.getInstance().getRank(t+1,function(t){if(console.log(t),1==t.code){for(var n=0;n<t.data.length;n++){var i=cc.instantiate(e.itemPrefab);e.initItem(i,n+1,t.data[n].name,t.data[n].score,t.data[n].headpic),i.parent=e.layoutNode}0!=t.mypos?(0==s.default.instance.AchieveCountData[4]?s.default.instance.AchieveCountData[4]=t.mypos:t.mypos<s.default.instance.AchieveCountData[4]&&(s.default.instance.AchieveCountData[4]=t.mypos),e.initItem(e.myItem,t.mypos,t.myname,t.myscore,t.myheadpic),e.myItem.active=!0):e.myItem.active=!1}else cc.log(t.error),e.myItem.active=!1},n)},e.prototype.initItem=function(t,e,n,i,o){console.log("HEAD",o);for(var a=1;a<=3;a++)t.getChildByName(""+a).active=!1,t.getChildByName("rank").getComponent(cc.Label).string="";if(1==e||2==e||3==e)t.getChildByName(""+e).active=!0;else{var s=""+e;e>50&&(s="100+"),t.getChildByName("rank").getComponent(cc.Label).string=s}n||(n=""),t.getChildByName("iconbg1").active=1==e,t.getChildByName("bg1").active=1==e,t.getChildByName("name").getComponent(cc.Label).string=n;t.getChildByName("text").getComponent(cc.Label).string=["\u6218\u529b ","\u661f\u6570 ","\u6740\u654c "][this.id]+i+"",t.getChildByName("good").getComponent(cc.Label).string=Math.floor(18*Math.random())+"",o&&cc.loader.load(o,function(e,n){var i=new cc.SpriteFrame(n);n&&(t.getChildByName("icon").setContentSize(74,74),t.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=i,t.getChildByName("icon").setContentSize(74,74))})},e.prototype.sortRank=function(t,e){return parseInt(e.score)-parseInt(t.score)},e.prototype.showNewbie=function(t,e){var n=!0,i=101,o=0;switch(t){case 1:n=s.default.instance.HighestCE>0,o=s.default.instance.HighestCE;break;case 2:n=s.default.instance.StarCount>0,o=s.default.instance.StarCount;break;case 3:n=s.default.instance.MonsterKillCount>0,o=s.default.instance.MonsterKillCount}if(n){var a={name:r.default.getInstance().registerName,headpic:r.default.getInstance().registerHead,score:o};e.push(a),e.sort(this.sortRank),i=e.indexOf(a)+1,cc.log(i,e)}for(var c=0;c<50;c++){var l=cc.instantiate(this.itemPrefab);this.initItem(l,c+1,e[c].name,e[c].score,e[c].headpic),l.parent=this.layoutNode}0!=i?(0==s.default.instance.AchieveCountData[4]?s.default.instance.AchieveCountData[4]=i:i<s.default.instance.AchieveCountData[4]&&(s.default.instance.AchieveCountData[4]=i),this.initItem(this.myItem,i,r.default.getInstance().registerName,o,r.default.getInstance().registerHead),this.myItem.active=!0):this.myItem.active=!1},e.prototype.onEnable=function(){this.refreshRank(this.id)},e.instance=null,o([u(cc.Prefab)],e.prototype,"itemPrefab",void 0),e=n=o([l],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../../Hero/HeroGlobal":"HeroGlobal","../../Tool/Statistics":"Statistics","../../nativets/Global":"Global"}],Ref:[function(t,e,n){"use strict";cc._RF.push(e,"b3c18ClOTlOYpjxIlHGRz6z","Ref");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,r=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){},e=o([s],e)}(cc.Component));n.default=r,cc._RF.pop()},{}],ReleaseMgr:[function(t,e,n){"use strict";cc._RF.push(e,"bc7b0TBEp1Mga9dd7emcFJV","ReleaseMgr"),Object.defineProperty(n,"__esModule",{value:!0});var i=["12/1234","18/188b4","43/43e41f41"];n.default=function(t){for(var e=0;e<i.length;e++){if(-1!=t.indexOf(i[e]))return void console.log("notreslease",t);cc.loader.release(t)}},cc._RF.pop()},{}],RewardAuto:[function(t,e,n){"use strict";cc._RF.push(e,"d643clFJZBOJJWCedVNUQcR","RewardAuto");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Audio"),s=t("./RewardItem"),r=t("../Hero/HeroGlobal"),c=t("../nativets/Config"),l=t("../nativets/Global"),u=t("../Ad/AdMgr"),d=t("../nativets/Platform"),p=cc._decorator,h=p.ccclass,f=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return i(e,t),n=e,e.prototype.init=function(){this.rewardScript=this.node.getChildByName("rewardItem").getComponent(s.default),this.textLabel=this.node.getChildByName("text").getComponent(cc.Label)},e.prototype.onLoad=function(){n.instance=this,this.init(),this.node.active=!1},e.prototype.start=function(){},e.prototype.open=function(t){var e=this;if(this.id=t,0==c.getWhoId(t)||c.getWhoId(t)==r.default.instance.MainHeroIndex+1){var n=Math.floor(this.id/1e4);if(!(t%1e3<=Math.floor(r.default.instance.getMainHeroData().getDataByType(n)/1e4)%1e3)){this.rewardScript.setByIdLayout(t),this.node.active=!0,this.time=6,this.textLabel.string="\u81ea\u52a8\u88c5\u59075";this.schedule(function(){e.time--,e.textLabel.string="\u81ea\u52a8\u88c5\u5907"+e.time,e.time<=0&&e.autoSetEuipment()},1,5)}}},e.prototype.onBtnAuto=function(){a.default.instance.playAudio("BtnClick"),this.autoSetEuipment()},e.prototype.autoSetEuipment=function(){r.default.instance.getMainHeroData().setEquip(Math.floor(this.id/1e4),1e4*this.id),this.onClose()},e.prototype.onClose=function(){this.unscheduleAllCallbacks(),this.node.active=!1,1==l.default.getInstance().nowLevel&&(d.getPlatform()!=d.Platform.OPPO&&d.getPlatform()!=d.Platform.VIVO||u.default.instance&&u.default.instance.showShortcut())},e.instance=null,e=n=o([h],e)}(cc.Component));n.default=f,cc._RF.pop()},{"../Ad/AdMgr":"AdMgr","../Audio":"Audio","../Hero/HeroGlobal":"HeroGlobal","../nativets/Config":"Config","../nativets/Global":"Global","../nativets/Platform":"Platform","./RewardItem":"RewardItem"}],RewardItem:[function(t,e,n){"use strict";cc._RF.push(e,"e6916SP6KtGlIrBLSfadABA","RewardItem");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./RewardMgr"),s=t("../Hero/HeroPet"),r=t("../nativets/Config"),c=t("../TextureMgr"),l=cc._decorator,u=l.ccclass,d=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(){this.bgSprite=this.node.getChildByName("bg").getComponent(cc.Sprite),this.lightSprite=this.node.getChildByName("light").getComponent(cc.Sprite),this.itemSprite=this.node.getChildByName("item").getComponent(cc.Sprite),this.nameLabel=this.node.getChildByName("name").getComponent(cc.Label),cc.director.on("PetMove",this.onPetMove,this)},e.prototype.onLoad=function(){this.init()},e.prototype.start=function(){},e.prototype.setById=function(t){var e=r.getTypeId(t);r.getLvId(t),r.getIndexId(t);this.nameLabel.string="",9==e?(this.bgSprite.spriteFrame=null,this.lightSprite.node.active=!1,this.itemSprite.spriteFrame=c.default.instance.rewardSfInGame[1],this.itemSprite.node.scale=.8):6==e?(this.bgSprite.spriteFrame=null,this.itemSprite.spriteFrame=c.default.instance.getSoulRankIconById(t)):(this.lightSprite.node.active=!0,this.itemSprite.spriteFrame=c.default.instance.getEquipmentIconById(t),this.itemSprite.node.scale=1)},e.prototype.setByIdLayout=function(t){this.lightSprite||this.init();var e=r.getTypeId(t);cc.log("IDDD",e),this.lightSprite.node.active=!1,this.bgSprite.node.active=!0,6==e?(this.bgSprite.spriteFrame=null,this.itemSprite.spriteFrame=c.default.instance.getSoulIconById(t)):(this.bgSprite.spriteFrame=c.default.instance.getLvIconById(t),this.itemSprite.spriteFrame=c.default.instance.getEquipmentIconById(t)),this.nameLabel.string=r.getDataById(t).name},e.prototype.onPetMove=function(t){900!=this.node.y&&Math.abs(t-this.node.x)<80&&a.default.instance.rewardPool&&(s.default.instance.pickup(),a.default.instance.recycle(this.node))},e=o([u],e)}(cc.Component));n.default=d,cc._RF.pop()},{"../Hero/HeroPet":"HeroPet","../TextureMgr":"TextureMgr","../nativets/Config":"Config","./RewardMgr":"RewardMgr"}],RewardMapMgr:[function(t,e,n){"use strict";cc._RF.push(e,"52340tLPMVOuIy5q+LIdeZD","RewardMapMgr");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./RewardItem"),s=t("../Map/MapSelect"),r=cc._decorator,c=r.ccclass,l=r.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rewardPrefab=null,e}var n;return i(e,t),n=e,e.prototype.init=function(){n.instance=this},e.prototype.onLoad=function(){this.init()},e.prototype.createRewardMap=function(t){var e=null;(e=cc.instantiate(this.rewardPrefab)).parent=s.default.instance.rightLayout,e.opacity=255,cc.log("REWARD",t),e.getComponent(a.default).setByIdLayout(t)},e.prototype.start=function(){},e.prototype.onDestroy=function(){},e.instance=null,o([l(cc.Prefab)],e.prototype,"rewardPrefab",void 0),e=n=o([c],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../Map/MapSelect":"MapSelect","./RewardItem":"RewardItem"}],RewardMgr:[function(t,e,n){"use strict";cc._RF.push(e,"ac721obEg5Cz4bsa/PwA/We","RewardMgr");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../nativets/NodePool"),s=t("../Game"),r=t("./RewardItem"),c=t("../Map/MapSelect"),l=cc._decorator,u=l.ccclass,d=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rewardPrefab=null,e}var n;return i(e,t),n=e,e.prototype.init=function(){n.instance=this,this.rewardPool=new a.default;for(var t=0;t<15;t++){var e=cc.instantiate(this.rewardPrefab);e.parent=s.default.instance.rewardEventNode,this.rewardPool.put(e)}this.unColleted=[]},e.prototype.onLoad=function(){this.init()},e.prototype.createCoins=function(t,e){var n=this,i=this.rewardPool.get();i||((i=cc.instantiate(this.rewardPrefab)).parent=s.default.instance.rewardEventNode,this.rewardPool.put(i)),i.stopAllActions(),i.position=e,i.y+=80,i.opacity=255;var o=Math.random()<.5?1:-1,a=[cc.v2(0,0),cc.v2(o*(40+20*Math.random()),40+20*Math.random()),cc.v2(o*(100+20*Math.random()),-80)];i.runAction(cc.sequence(cc.bezierBy(.3,a),cc.callFunc(function(){n.pushInUncollected(i)}))),i.getComponent(r.default).setById(t)},e.prototype.createReward=function(t,e){var n=this.rewardPool.get();n||((n=cc.instantiate(this.rewardPrefab)).parent=s.default.instance.rewardEventNode,this.rewardPool.put(n)),n.position=e,n.opacity=255,n.getComponent(r.default).setById(t),this.pushInUncollected(n)},e.prototype.createRewardEnd=function(t){var e=null;(e=cc.instantiate(this.rewardPrefab)).parent=s.default.instance.gameEndLayout,e.opacity=255,e.getComponent(r.default).setByIdLayout(t)},e.prototype.createRewardMap=function(t){var e=null;(e=cc.instantiate(this.rewardPrefab)).parent=c.default.instance.rightLayout,e.opacity=255,e.getComponent(r.default).setByIdLayout(t)},e.prototype.pushInUncollected=function(t){t&&-1==this.unColleted.indexOf(t)&&this.unColleted.push(t)},e.prototype.recycle=function(t){var e=this.unColleted.indexOf(t);-1!=e&&this.unColleted.splice(e,1),this.rewardPool.put(t)},e.prototype.GCAll=function(){for(var t=s.default.instance.rewardEventNode.children,e=t.length-1;e>=0;e--)this.rewardPool.put(t[e]);this.unColleted=[]},e.prototype.start=function(){},e.prototype.onDestroy=function(){},e.instance=null,o([d(cc.Prefab)],e.prototype,"rewardPrefab",void 0),e=n=o([u],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../Game":"Game","../Map/MapSelect":"MapSelect","../nativets/NodePool":"NodePool","./RewardItem":"RewardItem"}],Rotate:[function(t,e,n){"use strict";cc._RF.push(e,"dd2de8NJwpFc49f4TgoklVP","Rotate");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,r=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return i(e,t),n=e,e.prototype.onLoad=function(){n.instance=this,this.time=0,this.count=0,this.material=this.node.getComponent(cc.Sprite).getMaterial(0)},e.prototype.updateEffect=function(t){this.time+=t,this.material.effect.setProperty("time",this.time)},e.prototype.start=function(){},e.prototype.update=function(t){this.count<4?this.count++:(this.count=0,this.updateEffect(t))},e.instance=null,e=n=o([s],e)}(cc.Component));n.default=r,cc._RF.pop()},{}],SaveMgr:[function(t,e,n){"use strict";cc._RF.push(e,"5b3501l1QZGnab+Yq15kV0B","SaveMgr"),Object.defineProperty(n,"__esModule",{value:!0});n.save=function(t,e){cc.sys.localStorage.setItem(t,e)};n.load=function(t){return cc.sys.localStorage.getItem(t)},cc._RF.pop()},{}],Setting:[function(t,e,n){"use strict";cc._RF.push(e,"4cc2comuMhAZ69aOZP0PWBi","Setting");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./nativets/SaveMgr"),s=t("./Hero/HeroGlobal"),r=t("./Audio"),c=cc._decorator,l=c.ccclass,u=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){},e.prototype.onBtnChick=function(){r.default.instance.playAudio("BtnClick"),this.node.scaleX*=-1,"effect"==this.node.name&&(s.default.instance.EffectSwitch=!s.default.instance.EffectSwitch),"bgm"==this.node.name&&(s.default.instance.BgmSwitch=!s.default.instance.BgmSwitch,cc.find("Canvas").getChildByName("Setting").active||(s.default.instance.BgmSwitch?r.default.instance.playBgm("game"):r.default.instance.stopBgm("game")));var t={bgm:s.default.instance.BgmSwitch,effect:s.default.instance.EffectSwitch};a.save("Setting",JSON.stringify(t))},e.prototype.onBtnClose=function(){r.default.instance.playAudio("BtnClick"),this.node.parent.parent.active=!1},e.prototype.onEnable=function(){"effect"==this.node.name&&(this.node.scaleX=s.default.instance.EffectSwitch?-1:1),"bgm"==this.node.name&&(this.node.scaleX=s.default.instance.BgmSwitch?-1:1,s.default.instance.BgmSwitch||r.default.instance.stopBgm("game"))},e=o([l],e)}(cc.Component));n.default=u,cc._RF.pop()},{"./Audio":"Audio","./Hero/HeroGlobal":"HeroGlobal","./nativets/SaveMgr":"SaveMgr"}],Shortcut:[function(t,e,n){"use strict";cc._RF.push(e,"3c6b9QL2n1KPJEX9TDU3Tli","Shortcut");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Audio"),s=t("../Hero/HeroGlobal"),r=t("./AdMgr"),c=cc._decorator,l=c.ccclass,u=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return i(e,t),n=e,e.prototype.init=function(){var t=this.node.getChildByName("box");this.closeBtn=t.getChildByName("close")},e.prototype.onLoad=function(){n.instance=this,this.init(),this.node.active=!1},e.prototype.start=function(){},e.prototype.open=function(){var t=this;this.node.active=!0,this.closeBtn.active=!1,this.unscheduleAllCallbacks(),this.scheduleOnce(function(){t.closeBtn.active=!0},3)},e.prototype.onBtnClose=function(){a.default.instance.playAudio("BtnClick"),this.onClose()},e.prototype.onClose=function(){this.node.active=!1},e.prototype.onBtnAdd=function(){a.default.instance.playAudio("BtnClick"),r.default.instance&&r.default.instance.addShortcut()},e.prototype.onReward=function(){s.default.instance.Coins+=1e3,s.default.instance.saveHeroGlobal(),this.onClose()},e.instance=null,e=n=o([l],e)}(cc.Component));n.default=u,cc._RF.pop()},{"../Audio":"Audio","../Hero/HeroGlobal":"HeroGlobal","./AdMgr":"AdMgr"}],Sign:[function(t,e,n){"use strict";cc._RF.push(e,"4d019A6895IZYwSts2kn4vx","Sign");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,a){function s(t){try{c(i.next(t))}catch(t){a(t)}}function r(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,r)}c((i=i.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(t){return function(e){return c([t,e])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Audio"),c=t("../nativets/SaveMgr"),l=t("../Tool/TimeMgr"),u=t("../TextureMgr"),d=t("../Menu"),p=t("../Hero/HeroGlobal"),h=t("../Ad/AdMgr"),f=t("../Ad/AdList"),g=t("../Tool/LoadPromise"),m=t("../nativets/Config"),y=cc._decorator,v=y.ccclass,b=y.property,A=cc.Enum({"\u8865\u7b7e":0,"\u7b7e\u5230":1,"\u5df2\u7b7e":2}),S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemPrefab=null,e.stateSf=[],e.haveSf=[],e.nowSf=[],e.nothaveSf=[],e}return i(e,t),e.prototype.init=function(){this.layoutNode=this.node.getChildByName("Layout"),this.signBtn=this.node.getChildByName("sign"),this.retroBtn=this.node.getChildByName("retro"),this.signIndex=1,this.initLayout()},e.prototype.initLayout=function(){this.itemBg=[],this.itemIcon=[],this.itemName=[],this.itemNum=[],this.itemTitle=[],this.loadPet();for(var t=0;t<6;t++){var e=cc.instantiate(this.itemPrefab);switch(e.name=""+t,e.parent=this.layoutNode,e.position=t<3?cc.v2(240*t-240,70):cc.v2(240*(t-3)-240,-126),this.itemBg.push(e.getComponent(cc.Sprite)),this.itemTitle.push(e.getChildByName("title").getComponent(cc.Sprite)),this.itemIcon.push(e.getChildByName("icon").getComponent(cc.Sprite)),this.itemName.push(e.getChildByName("name").getComponent(cc.Label)),this.itemNum.push(e.getChildByName("num").getComponent(cc.Label)),t){case 0:this.itemIcon[t].spriteFrame=u.default.instance.rewardSfInGame[1],this.itemName[t].string="\u91d1\u5e01",this.itemNum[t].string="x150";break;case 1:this.itemIcon[t].spriteFrame=u.default.instance.rewardSfInGame[2],this.itemName[t].string="\u519b\u7cae",this.itemNum[t].string="x10";break;case 2:this.itemIcon[t].spriteFrame=u.default.instance.getEquipmentIconById(30308),this.itemName[t].string="\u6212\u6307",this.itemNum[t].string="\u4f3c\u6c34\u6d41\u5e74";break;case 3:this.itemIcon[t].spriteFrame=u.default.instance.rewardSfInGame[0],this.itemName[t].string="\u94bb\u77f3",this.itemNum[t].string="x100";break;case 4:this.itemIcon[t].spriteFrame=u.default.instance.getEquipmentIconById(50303),this.itemName[t].string="\u7fc5\u8180",this.itemNum[t].string="\u6d85\u69c3\u795e\u51e4\u7ffc";break;case 5:this.itemIcon[t].spriteFrame=u.default.instance.rewardSfInGame[1],this.itemName[t].string="\u91d1\u5e01",this.itemNum[t].string="x1500"}}},e.prototype.onLoad=function(){this.init(),this.loadSignData()},e.prototype.start=function(){},e.prototype.loadPet=function(){return a(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return[4,g.loadSpinePromise(m.PetSpName[0])];case 1:return t=e.sent(),this.petSk=this.layoutNode.getChildByName("7").getComponent(sp.Skeleton),this.petSk.skeletonData=t,this.petSk.animation="fly",this.petSk._updateSkeletonData(),this.petSk.setSkin("default"),[2]}})})},e.prototype.loadSignData=function(){var t=c.load("SignData");t||(t=JSON.stringify({start_date:l.default.getFullYMDToday(),sign_arrs:"0000000",needreset:!1,hadretro:l.default.getFullYMDYesterday()}));var e=JSON.parse(t);this.start_date=e.start_date,this.sign_arrs=e.sign_arrs,this.needreset=e.needreset,this.hadretro=e.hadretro,this.curr_day=l.default.getDelayDay(this.start_date,l.default.getFullYMDToday())+1,this.needreset&&this.curr_day>0&&(this.sign_arrs="0000000",this.needreset=!1),this.saveSignData(),this.initSignItem()},e.prototype.saveSignData=function(){var t={start_date:this.start_date,sign_arrs:this.sign_arrs,needreset:this.needreset,hadretro:this.hadretro};c.save("SignData",JSON.stringify(t))},e.prototype.initSignItem=function(){for(var t=(this.sign_arrs+"").split(""),e=0;e<6;e++)this.setItemState(e,A.\u7b7e\u5230);if(0==this.curr_day&&this.needreset)for(var n=0;n<6;n++)this.setItemState(n,A.\u5df2\u7b7e);else{for(var i=0;i<this.curr_day-1;i++)"0"==t[i]?this.setItemState(i,A.\u8865\u7b7e):"1"==t[i]&&this.setItemState(i,A.\u5df2\u7b7e);var o=!1;if("1"==t[this.curr_day-1]){this.setItemState(this.curr_day-1,A.\u5df2\u7b7e);for(var a=0;a<this.curr_day-1;a++)if("0"==t[a]){this.retro_day=a+1,o=!0;break}o?this.setButtonState(A.\u8865\u7b7e):this.setButtonState(A.\u5df2\u7b7e)}else this.setButtonState(A.\u7b7e\u5230);if(this.curr_day>7){for(var s=0;s<this.curr_day-1;s++)if("0"==t[s]){this.retro_day=s+1,o=!0;break}o?this.setButtonState(A.\u8865\u7b7e):this.setButtonState(A.\u5df2\u7b7e)}l.default.getFullYMDToday()==this.hadretro&&this.setButtonState(A.\u5df2\u7b7e)}},e.prototype.setButtonState=function(t){switch(this.signBtn.active=!1,this.retroBtn.active=!1,t){case A.\u7b7e\u5230:this.signBtn.active=!0;break;case A.\u8865\u7b7e:this.retroBtn.active=!0}},e.prototype.setItemState=function(t,e){if(6!=t){this.itemBg[t].spriteFrame=this.stateSf[e];var n=[this.nothaveSf,this.haveSf,this.nowSf];this.itemTitle[t].spriteFrame=n[e][t]}},e.prototype.onBtnSign=function(){r.default.instance.playAudio("BtnClick"),this.onSign()},e.prototype.onSign=function(){null!=this.curr_day&&this.onUpdateSign(this.curr_day)},e.prototype.onBtnRetro=function(){r.default.instance.playAudio("BtnClick"),this.onRetro()},e.prototype.onRetro=function(){null!=this.retro_day&&(this.hadretro=l.default.getFullYMDToday(),this.onUpdateSign(this.retro_day,!0))},e.prototype.onUpdateSign=function(t,e){var n=(this.sign_arrs+"").split("");n[t-1]="1",this.sign_arrs=n.join(""),"1111111"==this.sign_arrs&&(this.start_date=l.default.getFullYMDTomorrow(),this.needreset=!0),this.saveSignData(),e&&h.default.instance?(h.default.instance.showRewardAd(f.default.WXVIDEOLIST2.\u8865\u7b7e),this.videoDay=t):this.onReward(t),this.initSignItem()},e.prototype.onSuccess=function(){this.videoDay&&this.onReward(this.videoDay)},e.prototype.onReward=function(t){switch(cc.log("Reward",t),t-1){case 0:d.default.instance.addCoins(150);break;case 1:d.default.instance.addLife(10);break;case 2:p.default.instance.pushEquipmentData(30308e4);break;case 3:d.default.instance.addJade(100);break;case 4:p.default.instance.pushEquipmentData(50303e4);break;case 5:d.default.instance.addCoins(1500);break;case 6:p.default.instance.unlockPet(0)}this.videoDay=null},e.prototype.refreshState=function(){this.initSignItem(),this.refreshLayout()},e.prototype.refreshLayout=function(){for(var t=1;t<6;t++);},e.prototype.onEnable=function(){this.layoutNode&&this.refreshState()},e.instance=null,o([b(cc.Prefab)],e.prototype,"itemPrefab",void 0),o([b([cc.SpriteFrame])],e.prototype,"stateSf",void 0),o([b([cc.SpriteFrame])],e.prototype,"haveSf",void 0),o([b([cc.SpriteFrame])],e.prototype,"nowSf",void 0),o([b([cc.SpriteFrame])],e.prototype,"nothaveSf",void 0),e=o([v],e)}(cc.Component);n.default=S,cc._RF.pop()},{"../Ad/AdList":"AdList","../Ad/AdMgr":"AdMgr","../Audio":"Audio","../Hero/HeroGlobal":"HeroGlobal","../Menu":"Menu","../TextureMgr":"TextureMgr","../Tool/LoadPromise":"LoadPromise","../Tool/TimeMgr":"TimeMgr","../nativets/Config":"Config","../nativets/SaveMgr":"SaveMgr"}],SkillMgr:[function(t,e,n){"use strict";cc._RF.push(e,"2e35dtDfmZO5IgfWCid6h+W","SkillMgr");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./Game"),s=t("./nativets/NodePool"),r=t("./Hero/Hero"),c=t("./Hero/HeroSkill"),l=t("./Hero/HeroGlobal"),u=t("./nativets/Global"),d=cc._decorator,p=d.ccclass,h=d.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.skillPrefab=null,e.ZYskillPrefab=null,e.DQskillPrefab=null,e}var n;return i(e,t),n=e,e.prototype.init=function(){switch(l.default.instance.MainHeroIndex){case 1:this.SkillPool=new s.default;var t=cc.instantiate(this.skillPrefab);t.parent=a.default.instance.gameEffectNode,this.SkillPool.put(t);break;case 0:this.ZYSkillPool=new s.default;var e=cc.instantiate(this.ZYskillPrefab);e.parent=a.default.instance.gameEffectNode,this.ZYSkillPool.put(e);break;case 2:this.DQSkillPool=new s.default;var n=cc.instantiate(this.DQskillPrefab);n.parent=a.default.instance.gameEffectNode,this.DQSkillPool.put(n)}},e.prototype.onLoad=function(){n.instance=this,this.init()},e.prototype.start=function(){},e.prototype.getSkillPool=function(t){return 0==t?this.ZYSkillPool:1==t?this.SkillPool:this.DQSkillPool},e.prototype.getSkillItem=function(){var t=l.default.instance.MainHeroIndex,e=null,n=null;0==t?(e=this.ZYskillPrefab,n=this.ZYSkillPool):1==t?(e=this.skillPrefab,n=this.SkillPool):(e=this.DQskillPrefab,n=this.DQSkillPool);var i=n.get();return i||((i=cc.instantiate(e)).parent=a.default.instance.gameEffectNode,n.put(i)),i},e.prototype.create=function(t){var e=this.getSkillItem(),n=r.default.instance.node.position;"jump_middle_attack"==t&&(1==l.default.instance.MainHeroIndex?(r.default.instance.speedY=100,u.default.getInstance().gravity=200):2==l.default.instance.MainHeroIndex&&(n.y=-200)),e.position=n,e.scaleX=r.default.instance.node.scaleX,e.getComponent(c.default).play(t)},e.instance=null,o([h(cc.Prefab)],e.prototype,"skillPrefab",void 0),o([h(cc.Prefab)],e.prototype,"ZYskillPrefab",void 0),o([h(cc.Prefab)],e.prototype,"DQskillPrefab",void 0),e=n=o([p],e)}(cc.Component);n.default=f,cc._RF.pop()},{"./Game":"Game","./Hero/Hero":"Hero","./Hero/HeroGlobal":"HeroGlobal","./Hero/HeroSkill":"HeroSkill","./nativets/Global":"Global","./nativets/NodePool":"NodePool"}],SkillProgress:[function(t,e,n){"use strict";cc._RF.push(e,"74264QsPDdK56MvJpeQ9Lc6","SkillProgress");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./Hero"),s=t("./HeroFSM"),r=cc._decorator,c=r.ccclass,l=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(){this.progressBar=this.node.getComponent(cc.ProgressBar),this.node.on("touchstart",this.onClick,this),this.count=0,this.sprite=this.node.getComponent(cc.Sprite),this.barSprite=this.node.getChildByName("bar").getComponent(cc.Sprite)},e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.setSkill=function(t,e,n){this.sprite||this.init(),this.index=t,this.cd=e,this.sprite.spriteFrame=n,this.barSprite.spriteFrame=n},e.prototype.resetCD=function(){this.time=0,this.progressBar.progress=0},e.prototype.onClick=function(){this.getCanClick()&&s.default.instance.fsm.can("skill")&&(a.default.instance.node.y>-200||(this.time=this.cd,a.default.instance.onSkill(this.index)))},e.prototype.getCanClick=function(){return-1!=this.cd&&0==this.progressBar.progress},e.prototype.updateProgress=function(){var t=this.time/this.cd;this.progressBar.progress=t},e.prototype.update=function(t){this.time>0&&(this.time-=t,this.time<=0&&(this.time=0,this.progressBar.progress=0),this.count++,10==this.count&&(this.count=0,this.updateProgress()))},e=o([c],e)}(cc.Component));n.default=l,cc._RF.pop()},{"./Hero":"Hero","./HeroFSM":"HeroFSM"}],Sort:[function(t,e,n){"use strict";cc._RF.push(e,"888a6C7ms1MK4T7M/QmGo44","Sort"),Object.defineProperty(n,"__esModule",{value:!0});n.default=function(t,e){return t<e?-1:t==e?0:1},cc._RF.pop()},{}],SoulDialog:[function(t,e,n){"use strict";cc._RF.push(e,"79bfbLOA/hB364kmUdLBZO4","SoulDialog");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./TextureMgr"),s=t("./nativets/Config"),r=t("./i18n/Language"),c=t("./Equipment"),l=t("./Audio"),u=cc._decorator,d=u.ccclass,p=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return i(e,t),n=e,e.prototype.init=function(){n.instance=this,this.icon=this.node.getChildByName("icon").getComponent(cc.Sprite),this.lvBg=this.node.getChildByName("lvbg").getComponent(cc.Sprite),this.nameLabel=this.node.getChildByName("name").getComponent(cc.Label),this.lvLabel=this.node.getChildByName("lv").getComponent(cc.Label),this.equipLabel=this.node.getChildByName("textequip").getComponent(cc.Label),this.textlabel0=this.node.getChildByName("text0").getComponent(cc.Label),this.upBtn=this.node.getChildByName("up").getComponent(cc.Button),this.recycleBtn=this.node.getChildByName("recycle").getComponent(cc.Button),this.equipBtn=this.node.getChildByName("equip").getComponent(cc.Button),this.unequipBtn=this.node.getChildByName("unequip").getComponent(cc.Button)},e.prototype.setButtonState=function(t){this.equipBtn.node.active=!t,this.equipBtn.node.active=t},e.prototype.onOpen=function(t){cc.log(t),this.typeIndex=c.default.instance.soulTitleIndex+1;var e=c.default.instance.soulCompressArrs[0];-1!=c.default.instance.soulCompressArrs.indexOf(t)?(this.upBtn.node.active=!1,this.equipBtn.node.active=!1):0==e?(this.upBtn.node.active=!0,this.equipBtn.node.active=!1):(this.upBtn.node.active=!1,this.equipBtn.node.active=!0,6==s.getLvId(e)&&(this.equipBtn.node.active=!1));this.id=t,this.icon.spriteFrame=a.default.instance.getSoulIconById(t),this.lvBg.spriteFrame=a.default.instance.getLvIconById(t);var n=s.getDataById(t);this.nameLabel.string=n.name,this.lvLabel.string=r.default["star"+s.getLvId(t)]+r.default.soul;var i="";n.atk&&(i+=r.default.equipmentAtk+"+"+n.atk+"                   \n"),n.def&&(i+=r.default.equipmentDef+"+"+n.def+"                   \n");var o=""+i;n.hp&&(o+=r.default.equipmentHp+"+"+n.hp+"                   \n"),n.ls&&(o+=r.default.equipmentLs+"+"+n.ls+"%                   \n"),n.sp&&(o+=r.default.equipmentSp+"+"+n.sp+"%                   \n"),n.cr&&(o+=r.default.equipmentCr+"+"+n.cr+"%                   \n"),n.arp&&(o+=r.default.equipmentArp+"+"+n.arp+"                   \n"),n.bonus&&(o+=r.default.equipmentBonus+"+"+n.bonus+"%                   \n"),n.cd&&(o+=r.default.equipmentCd+"-"+n.cd+"%                   \n"),n.miss&&(o+=r.default.equipmentMiss+"+"+n.miss+"%                   \n"),n.exp&&(o+=r.default.equipmentExp+"+"+n.exp+"%                   \n"),n.gold&&(o+=r.default.equipmentGold+"+"+n.gold+"%                   \n"),this.textlabel0.string=o,this.node.active=!0},e.prototype.onBtnSoulMain=function(){l.default.instance.playAudio("BtnClick"),c.default.instance.soulCompressArrs[0]=this.id,c.default.instance.icon0.spriteFrame=this.icon.spriteFrame,this.equipBtn.node.active=!1,c.default.instance.soulHC.active=!0,c.default.instance.setSoulHCDialog(this.id),c.default.instance.soulFM.active=!1,this.upBtn.node.active=!1,c.default.instance.onSoulDialogClose()},e.prototype.onBtnSoulSub=function(){l.default.instance.playAudio("BtnClick"),0==c.default.instance.soulCompressArrs[1]?(c.default.instance.soulCompressArrs[1]=this.id,c.default.instance.icon1.spriteFrame=this.icon.spriteFrame):(c.default.instance.soulCompressArrs[2]=this.id,c.default.instance.icon2.spriteFrame=this.icon.spriteFrame),c.default.instance.soulHC.active=!0,c.default.instance.soulFM.active=!1,this.equipBtn.node.active=!1,c.default.instance.onSoulDialogClose(),c.default.instance.refreshSoulCompressRate()},e.prototype.onBtnSoulToWeapon=function(){l.default.instance.playAudio("BtnClick"),c.default.instance.soulHC.active=!1,c.default.instance.soulFM.active=!0,c.default.instance.soulRight.active=!1,c.default.instance.equipmentNode.active=!0,c.default.instance.equipmentLeft.active=!1,this.node.active=!1,c.default.instance.fmIcon0.spriteFrame=this.icon.spriteFrame},e.prototype.onBtnUnequip=function(){},e.prototype.onBtnRecycle=function(){},e.prototype.onBtnUpgrade=function(){},e.prototype.start=function(){},e.instance=null,e=n=o([d],e)}(cc.Component));n.default=p,cc._RF.pop()},{"./Audio":"Audio","./Equipment":"Equipment","./TextureMgr":"TextureMgr","./i18n/Language":"Language","./nativets/Config":"Config"}],Spikeweed:[function(t,e,n){"use strict";cc._RF.push(e,"de8ef75E69MZZ1h4kO7gs0Y","Spikeweed");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../nativets/Global"),s=cc._decorator,r=s.ccclass,c=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.attackSpace=2,e.attackTime=.5,e}return i(e,t),e.prototype.init=function(){this.attackSpace=2,this.hit=this.node.getChildByName("hit")},e.prototype.onLoad=function(){this.init(),this.playing=!0},e.prototype.use=function(){this.playing=!0,this.hit.active=!1},e.prototype.unuse=function(){this.playing=!1},e.prototype.start=function(){},e.prototype.update=function(t){a.default.getInstance().inGame&&this.playing&&(this.attackSpace-=t,this.hit.active=this.attackSpace>1.6,this.attackSpace<0&&(this.attackSpace=2))},e=o([r],e)}(cc.Component));n.default=c,cc._RF.pop()},{"../nativets/Global":"Global"}],Statistics:[function(t,e,n){"use strict";cc._RF.push(e,"130a72aNr1N9ro8iQBK31K+","Statistics"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../nativets/Global"),o=t("../nativets/Platform"),a=t("../lib/NewHttp"),s=t("../lib/httpjs"),r=function(){function t(){}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.getSwitchRate=function(t){s.getSwitch(t,function(t){return 200==t.code?(console.log("\u6982\u7387",t.data),t.data.rate):.65})},t.prototype.getVivoSwitchRate=function(t){return new Promise(function(e,n){a.default.getSwitch(t,function(t){1==t.code?e(t.data.rate):n(.65)})})},t.prototype.getSwitch=function(t,e){a.default.getSwitch(t,e)},t.prototype.reportEvent=function(t){a.default.reportEvent(i.default.getInstance().uuid,t)},t.prototype.reportStage=function(t,e,n){if(o.getPlatform()==o.Platform.Android||o.getPlatform()==o.Platform.m4399){var s=0;s=n?0:e?1:-1,jsb.reflection.callStaticMethod("com/td/AnalyticsManager","reportStage","(II)V",t,s)}else{var r=e?"complete":"fail";n&&(r="");var c="\u7b2c"+t+"\u5173";a.default.reportStage(i.default.getInstance().uuid,t,c,r)}},t.prototype.register=function(t,e,n,s,r){console.log("uuid\uff1a",i.default.getInstance().uuid,"PLAT:",o.getPLATID()),a.default.register(o.getPLATID(),i.default.getInstance().uuid,t,e,n,s,r)},t.prototype.updateUserInfo=function(t,e,n){a.default.updateUserInfo(i.default.getInstance().uuid,t,e,n)},t.prototype.reportSubscribe=function(t){var e=wx.getSystemInfoSync().version;s.reportSubs(o.getPLATID(),i.default.getInstance().wxOpenId,t,e)},t.prototype.getOpenid=function(t){a.default.getOpenid(o.getPLATID(),t,function(t){cc.log("WXOPENID",t),i.default.getInstance().wxOpenId=t.openid})},t.prototype.reportRank=function(t,e){console.log("REPORTRANK",t+this.getRanKIdOffset(),i.default.getInstance().uuid),a.default.report(t+this.getRanKIdOffset(),i.default.getInstance().uuid,e)},t.prototype.getRank=function(t,e,n){a.default.getRank(t+this.getRanKIdOffset(),50,i.default.getInstance().uuid,e)},t.prototype.getRanKIdOffset=function(){return 0},t.instance=null,t.RANKLIST=cc.Enum({"\u6218\u529b\u699c":1,"\u901a\u5173\u699c":2,"\u6740\u622e\u699c":3}),t}();n.default=r,cc._RF.pop()},{"../lib/NewHttp":"NewHttp","../lib/httpjs":"httpjs","../nativets/Global":"Global","../nativets/Platform":"Platform"}],TTAdMgr:[function(t,e,n){"use strict";cc._RF.push(e,"a2669LhHvBHB7BYpxqinR1x","TTAdMgr");var i=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var o=t("../Game"),a=t("../BizarreAdventure/BATips"),s=t("../Tool/Statistics"),r=t("../Hero/HeroGlobal"),c=t("../Menu"),l=t("./AdList"),u=t("./AdRewardMgr"),d=t("../nativets/Global"),p=cc._decorator,h=p.ccclass,f=(p.property,function(){function t(){this.ttName="",this.ttHead=""}var e;return e=t,t.getInstance=function(){return this.instance||(this.instance=new e),this.instance},t.prototype.init=function(){e.instance=this,this.TTInit()},t.prototype.TTInit=function(){this.windowWidth=wx.getSystemInfoSync().windowWidth,this.windowHeight=wx.getSystemInfoSync().windowHeight,this.zoomRateW=this.windowWidth/cc.winSize.width,this.zoomRateH=this.windowHeight/cc.winSize.height,this.TTBannerInit(),this.TTRewardInit()},t.prototype.TTBannerInit=function(){this.TTBannerAd=wx.createBannerAd({adUnitId:"32memq0e04i9e3g5b6",style:{adIntervals:30,left:this.windowWidth-250,top:this.windowHeight-84.375-12,width:150}}),this.TTBannerAd.onResize(function(t){}),this.TTBannerAd.onError(function(t){cc.log(t)}),this.TTBannerAd.onLoad(function(){cc.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")})},t.prototype.TTBannerShow=function(t,e){if(this.TTBannerAd)switch(this.TTBannerIndex=t,this.TTBannerAd.style.width=t==l.default.BANNERLIST.\u901a\u5173\u5b9d\u7bb1?550:300,t){case l.default.BANNERLIST.\u9996\u9875\u53f3\u4e0b:case l.default.BANNERLIST.\u5730\u56fe\u8be6\u60c5\u53f3\u4e0b:this.TTBannerAd.show().catch(function(t){return console.log(t)})}},t.prototype.TTBannerHide=function(){this.TTBannerAd&&this.TTBannerAd.hide(),this.TTBannerIndex=null},t.prototype.TTRewardInit=function(){var t=this;this.TTRewardAd=wx.createRewardedVideoAd({adUnitId:"220e52hfnkn3ggao3e"}),this.TTRewardAd.onLoad(function(){cc.log("\u6fc0\u52b1\u89c6\u98911 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t.TTVideoLoad=!0}),this.TTRewardAd.onError(function(t){cc.log("reward error:"+t)}),this.TTRewardAd.onClose(function(e){e&&e.isEnded||void 0===e?t.WXRewardIndex1&&(u.default.instance.onSuccess(t.WXRewardIndex1),t.WXRewardIndex1=null):(0==d.default.getInstance().inGame&&(d.default.getInstance().inGame=!0),t.WXRewardIndex1!=l.default.WXVIDEOLIST1.\u590d\u6d3b||o.default.instance.reviveNode.active||(o.default.instance.reviveNode.active=!0))})},t.prototype.TTRewardShow=function(t){var e=this;this.WXRewardIndex1=t,this.TTRewardAd.show().catch(function(t){e.TTRewardAd.load().then(function(){return e.TTRewardAd.show()})}).then(function(){e.TTVideoLoad||e.WXRewardIndex1})},t.prototype.TTToastShow=function(){tt.showToast({title:"\u89c6\u9891\u51c6\u5907\u4e2d...",icon:"none",success:function(t){console.log(""+t)},fail:function(t){console.log("showToast\u8c03\u7528\u5931\u8d25")}})},t.prototype.startRecoder=function(){var t=this;console.log("\u8c03\u7528\u5f55\u5c4f"),window.tt&&(this.gameRecorderManager||(this.gameRecorderManager=tt.getGameRecorderManager()),this.gameRecorderManager.start({duration:300}),this.gameRecorderManager.onStart(function(t){cc.log("\u5f55\u5c4f\u5f00\u59cb,\u5f39\u51fa\u63d0\u793a"),tt.showToast({title:"\u5f00\u59cb\u5f55\u5c4f",duration:2e3,success:function(t){console.log("\u5f39\u51fa\u63d0\u793a\u6210\u529f")},fail:function(t){console.log("\u5f39\u51fa\u63d0\u793a\u5931\u8d25")}})}),this.gameRecorderManager.onPause(function(t){cc.log("\u6682\u505c\u5f55\u5c4f")}),this.gameRecorderManager.onResume(function(t){cc.log("\u7ee7\u7eed\u5f55\u5c4f")}),this.gameRecorderManager.onStop(function(e){t.mVideoPath=e.videoPath,cc.log("\u5f55\u5c4f\u7ed3\u675f\uff1a "+t.mVideoPath)}))},t.prototype.pauseRecoder=function(){this.gameRecorderManager&&this.gameRecorderManager.pause()},t.prototype.resumeRecoder=function(){this.gameRecorderManager&&this.gameRecorderManager.resume()},t.prototype.stopRecoder=function(){this.gameRecorderManager&&this.gameRecorderManager.stop()},t.prototype.getUserInfo=function(){console.log("ttgetuserinfo");wx.getUserInfo({fail:function(t){(t.errMsg.indexOf("auth deny")>-1||t.errMsg.indexOf("auth denied")>-1)&&this.guideActive()}.bind(this),success:function(t){console.log("ttgetuserinfoSuccess"),this.setUserData(t)}.bind(this)})},t.prototype.guideActive=function(){wx.showModal({title:"\u8b66\u544a",content:"\u62d2\u7edd\u6388\u6743\u5c06\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u6392\u884c\u699c",cancelText:"\u53d6\u6d88",showCancel:!0,confirmText:"\u8bbe\u7f6e",success:function(t){t.confirm&&wx.openSetting({success:function(t){!0===t.authSetting["scope.userInfo"]&&this.getUserInfo()}.bind(this)})}.bind(this)})},t.prototype.setUserData=function(t){this.ttName=t.userInfo.nickName.replace(/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g,""),this.ttHead=t.userInfo.avatarUrl;s.default.getInstance().updateUserInfo(this.ttName,this.ttHead,function(t){console.log("register",t),1==t.code?(cc.director.emit("FirstReport"),s.default.getInstance().reportRank(s.default.RANKLIST.\u6740\u622e\u699c,r.default.instance.MonsterKillCount),s.default.getInstance().reportRank(s.default.RANKLIST.\u901a\u5173\u699c,r.default.instance.StarCount),c.default.instance&&c.default.instance.OpenRank()):cc.log(t.error)})},t.prototype.TTVideoShare=function(){cc.log("\u8c03\u7528\u5206\u4eab"),tt.shareVideo({videoPath:this.mVideoPath,success:function(){cc.log("\u5206\u4eab\u6210\u529f\uff01"),o.default.instance.ttShareBtn.interactable=!1,a.default.instance&&a.default.instance.showBoxGiftReward()},fail:function(t){cc.log("\u5206\u4eab\u5931\u8d25\uff01")}})},t.instance=null,t=e=i([h],t)}());n.default=f,cc._RF.pop()},{"../BizarreAdventure/BATips":"BATips","../Game":"Game","../Hero/HeroGlobal":"HeroGlobal","../Menu":"Menu","../Tool/Statistics":"Statistics","../nativets/Global":"Global","./AdList":"AdList","./AdRewardMgr":"AdRewardMgr"}],TTHero:[function(t,e,n){"use strict";cc._RF.push(e,"e2517/hCQJGPodoKNx0zEbl","TTHero");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,r=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.heroArrs=[],e}return i(e,t),o([r([sp.SkeletonData])],e.prototype,"heroArrs",void 0),e=o([s],e)}(cc.Component);n.default=c,cc._RF.pop()},{}],TaskItem:[function(t,e,n){"use strict";cc._RF.push(e,"48533up2lJJpJbgI4fFoBRm","TaskItem");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../nativets/Config"),s=t("../../DataMgr"),r=t("../../TextureMgr"),c=t("../../Menu"),l=t("../../Audio"),u=t("../Others"),d=cc._decorator,p=d.ccclass,h=(d.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(t){this.goBtn=this.node.getChildByName("go"),this.getBtn=this.node.getChildByName("get"),this.icon=this.node.getChildByName("icon").getComponent(cc.Sprite),this.progressBar=this.node.getChildByName("ProgressBar").getComponent(cc.ProgressBar),this.textLabel=this.node.getChildByName("text").getComponent(cc.Label),this.countLabel=this.node.getChildByName("count").getComponent(cc.Label),this.coinsLabel=this.node.getChildByName("coins").getComponent(cc.Label),this.titleLabel=this.node.getChildByName("title").getComponent(cc.Label)},e.prototype.onLoad=function(){},e.prototype.onRefresh=function(t){this.index=t;var e=a.Task[t],n=e.amount,i=s.default.instance.taskCountData[t];i>n&&(i=n);var o=i/n,c=-1;0==s.default.instance.taskGetCountData[t]?i==n&&(c=0):c=1,this.setState(c),e.gold?(this.icon.spriteFrame=r.default.instance.rewardSfInGame[1],this.rewardNum=e.gold,this.isGold=!0):(this.icon.spriteFrame=r.default.instance.rewardSfInGame[0],this.rewardNum=e.dimond,this.isGold=!1),this.coinsLabel.string="x "+this.rewardNum,this.textLabel.string=e.name+e.amount+e.unit,this.countLabel.string=i+"/"+e.amount,this.titleLabel.string=e.title,this.progressBar.progress=o},e.prototype.setState=function(t){this.goBtn.active=-1==t,this.getBtn.active=0==t},e.prototype.onBtnGet=function(){l.default.instance.playAudio("BtnClick"),this.onGet()},e.prototype.onGet=function(){this.isGold?c.default.instance.addCoins(this.rewardNum):c.default.instance.addJade(this.rewardNum),s.default.instance.taskGetCountData[this.index]=1,s.default.instance.saveSaveDate(),this.onRefresh(this.index)},e.prototype.onBtnGo=function(){l.default.instance.playAudio("BtnClick"),u.default.instance.onClose()},e.prototype.start=function(){},e=o([p],e)}(cc.Component));n.default=h,cc._RF.pop()},{"../../Audio":"Audio","../../DataMgr":"DataMgr","../../Menu":"Menu","../../TextureMgr":"TextureMgr","../../nativets/Config":"Config","../Others":"Others"}],Task:[function(t,e,n){"use strict";cc._RF.push(e,"ddb25XYXrdNoIiwpWpfapPn","Task");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./TaskItem"),s=cc._decorator,r=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.taskItem=null,e}var n;return i(e,t),n=e,e.prototype.init=function(){this.layoutNode=this.node.getChildByName("ScrollView").getChildByName("view").getChildByName("content"),this.initLayout()},e.prototype.initLayout=function(){this.taskScripts=[];for(var t=0;t<9;t++){var e=cc.instantiate(this.taskItem);e.parent=this.layoutNode,this.taskScripts.push(e.getComponent(a.default)),this.taskScripts[t].init(t)}},e.prototype.onLoad=function(){n.instance=this,this.init()},e.prototype.onRefresh=function(){for(var t=0;t<9;t++)this.taskScripts[t].onRefresh(t)},e.prototype.onEnable=function(){this.onRefresh()},e.prototype.start=function(){},e.instance=null,o([c(cc.Prefab)],e.prototype,"taskItem",void 0),e=n=o([r],e)}(cc.Component);n.default=l,cc._RF.pop()},{"./TaskItem":"TaskItem"}],Test:[function(t,e,n){"use strict";cc._RF.push(e,"a018e3uTsBPgLylAlmzvTHL","Test");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,r=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hero=null,e.ad=null,e}return i(e,t),e.prototype.start=function(){this.sk=this.hero.getComponent(sp.Skeleton),cc.log(this.sk.skeletonData.skeletonJson)},e.prototype.onBtnTest=function(){var t=this.sk.findSlot("W"),e=this.sk.skeletonData.getRuntimeData(),n=e.findSkin("003"),i=e.findSlotIndex("W"),o=n.getAttachment(i,"W");t.setAttachment(o);var a=this.sk.findSlot("chibang_zuo"),s=e.findSlotIndex("chibang_zuo"),r=n.getAttachment(s,"chibang_zuo");a.setAttachment(r),cc.log(n,a,s,r);var c=this.sk.findSlot("AF"),l=e.findSlotIndex("AF"),u=n.getAttachment(l,"AF");c.setAttachment(u)},e.prototype.onbtnACT=function(){this.ad.opacity=255==this.ad.opacity?0:255},o([r(cc.Node)],e.prototype,"hero",void 0),o([r(cc.Node)],e.prototype,"ad",void 0),e=o([s],e)}(cc.Component);n.default=c,cc._RF.pop()},{}],TextureMgr:[function(t,e,n){"use strict";cc._RF.push(e,"98cfcA7GElCJJ+6yq4llCdT","TextureMgr");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./nativets/Config"),s=cc._decorator,r=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.heroIconSf=[],e.heroIconGameSf=[],e.heroIconRectSf=[],e.heroIconRectMapselectSf=[],e.bossIconGameSf=[],e.monsterIconGameSf=[],e.petIconSf=[],e.petIconBoxSf=[],e.petIconBoxMapselectSf=[],e.lvSf=[],e.weaponSf=[],e.armorSf=[],e.ringSf=[],e.ornamentSf=[],e.wingSf=[],e.soulSf=[],e.skillZYSf=[],e.skillDCSf=[],e.skillDQSf=[],e.rewardSfInGame=[],e.rewardBg=null,e.coinSf=null,e.rewardSf=null,e.addHpSf=null,e.lockSf=null,e.soulRankSf=[],e}var n;return i(e,t),n=e,e.prototype.init=function(){this.typeArrs=[this.weaponSf,this.armorSf,this.ringSf,this.ornamentSf,this.wingSf,this.soulSf],this.skillArrs=[this.skillZYSf,this.skillDCSf,this.skillDQSf]},e.prototype.onLoad=function(){n.instance=this,this.init()},e.prototype.start=function(){},e.prototype.getLvIconById=function(t){var e=a.getLvId(t);return this.lvSf[e-1]},e.prototype.getEquipmentIconById=function(t){var e=a.getTypeId(t)-1,n=a.getIndexId(t)-1;return this.typeArrs[e][n]},e.prototype.getSoulIconById=function(t){var e=a.getLvId(t)-1,n=a.getIndexId(t)-1;return this.soulSf[9*e+n]},e.prototype.getSoulRankIconById=function(t){var e=a.getLvId(t)-1;return this.soulRankSf[e]},e.instance=null,o([c([cc.SpriteFrame])],e.prototype,"heroIconSf",void 0),o([c([cc.SpriteFrame])],e.prototype,"heroIconGameSf",void 0),o([c([cc.SpriteFrame])],e.prototype,"heroIconRectSf",void 0),o([c([cc.SpriteFrame])],e.prototype,"heroIconRectMapselectSf",void 0),o([c([cc.SpriteFrame])],e.prototype,"bossIconGameSf",void 0),o([c([cc.SpriteFrame])],e.prototype,"monsterIconGameSf",void 0),o([c([cc.SpriteFrame])],e.prototype,"petIconSf",void 0),o([c([cc.SpriteFrame])],e.prototype,"petIconBoxSf",void 0),o([c([cc.SpriteFrame])],e.prototype,"petIconBoxMapselectSf",void 0),o([c([cc.SpriteFrame])],e.prototype,"lvSf",void 0),o([c([cc.SpriteFrame])],e.prototype,"weaponSf",void 0),o([c([cc.SpriteFrame])],e.prototype,"armorSf",void 0),o([c([cc.SpriteFrame])],e.prototype,"ringSf",void 0),o([c([cc.SpriteFrame])],e.prototype,"ornamentSf",void 0),o([c([cc.SpriteFrame])],e.prototype,"wingSf",void 0),o([c([cc.SpriteFrame])],e.prototype,"soulSf",void 0),o([c([cc.SpriteFrame])],e.prototype,"skillZYSf",void 0),o([c([cc.SpriteFrame])],e.prototype,"skillDCSf",void 0),o([c([cc.SpriteFrame])],e.prototype,"skillDQSf",void 0),o([c([cc.SpriteFrame])],e.prototype,"rewardSfInGame",void 0),o([c(cc.SpriteFrame)],e.prototype,"rewardBg",void 0),o([c(cc.SpriteFrame)],e.prototype,"coinSf",void 0),o([c(cc.SpriteFrame)],e.prototype,"rewardSf",void 0),o([c(cc.SpriteFrame)],e.prototype,"addHpSf",void 0),o([c(cc.SpriteFrame)],e.prototype,"lockSf",void 0),o([c([cc.SpriteFrame])],e.prototype,"soulRankSf",void 0),e=n=o([r],e)}(cc.Component);n.default=l,cc._RF.pop()},{"./nativets/Config":"Config"}],TimeLimit:[function(t,e,n){"use strict";cc._RF.push(e,"677e5sQKbVCUbg3vd5j8k6j","TimeLimit");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,a){function s(t){try{c(i.next(t))}catch(t){a(t)}}function r(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,r)}c((i=i.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(t){return function(e){return c([t,e])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Audio"),c=t("../../Ad/AdMgr"),l=t("../../Ad/AdList"),u=t("../../Ad/AdRewardMgr"),d=t("../../Tool/LoadPromise"),p=t("../../nativets/Config"),h=t("../../Menu"),f=t("../../nativets/SaveMgr"),g=cc._decorator,m=g.ccclass,y=(g.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return i(e,t),n=e,e.prototype.init=function(){this.closeBtn=this.node.getChildByName("box").getChildByName("close"),this.petNode=this.node.getChildByName("pet"),this.wingNode=this.node.getChildByName("wing"),this.titleLabel=this.node.getChildByName("box").getChildByName("title").getComponent(cc.Label)},e.prototype.onLoad=function(){n.instance=this,this.init(),this.node.active=!1},e.prototype.start=function(){},e.prototype.open=function(t){!t&&f.load("WingReward")||(this.isPet=t,this.petNode.active=t,this.wingNode.active=!t,this.titleLabel.string=t?"\u9650\u65f6\u795e\u5ba0\u793c\u5305":"\u9650\u65f6\u795e\u7fc5",t&&this.loadPet(),this.node.active=!0)},e.prototype.loadPet=function(){return a(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return[4,d.loadSpinePromise(p.PetSpName[1])];case 1:return t=e.sent(),this.petSk=this.petNode.getComponent(sp.Skeleton),this.petSk.skeletonData=t,this.petSk.animation="fly",this.petSk._updateSkeletonData(),this.petSk.setSkin("default"),[2]}})})},e.prototype.onBtnVideo=function(){r.default.instance.playAudio("BtnClick"),c.default.instance?c.default.instance.showRewardAd(this.isPet?l.default.WXVIDEOLIST2.\u9650\u65f6\u6b66\u9b42:l.default.WXVIDEOLIST2.\u795e\u7fc5):u.default.getInstance().onSuccess(this.isPet?l.default.WXVIDEOLIST2.\u9650\u65f6\u6b66\u9b42:l.default.WXVIDEOLIST2.\u795e\u7fc5),this.onClose()},e.prototype.onBtnClose=function(){r.default.instance.playAudio("BtnClick"),this.onClose()},e.prototype.onClose=function(){this.node.active=!1,h.default.instance.setTimeLimitState()},e.prototype.onEnable=function(){var t=this;this.closeBtn||this.init(),this.unscheduleAllCallbacks(),this.closeBtn.active=!1,this.scheduleOnce(function(){t.closeBtn.active=!0},2)},e.prototype.update=function(t){},e.instance=null,e=n=o([m],e)}(cc.Component));n.default=y,cc._RF.pop()},{"../../Ad/AdList":"AdList","../../Ad/AdMgr":"AdMgr","../../Ad/AdRewardMgr":"AdRewardMgr","../../Audio":"Audio","../../Menu":"Menu","../../Tool/LoadPromise":"LoadPromise","../../nativets/Config":"Config","../../nativets/SaveMgr":"SaveMgr"}],TimeMgr:[function(t,e,n){"use strict";cc._RF.push(e,"a889bX1K/pEH5qqCUubNG9O","TimeMgr"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.getFullYMD=function(t){var e=t.getMonth();e<10&&(e="0"+e);var n=t.getDate();return n<10&&(n="0"+n),""+t.getFullYear()+e+n},t.getFullYMDToday=function(){return this.getFullYMD(new Date)},t.getFullYMDYesterday=function(){return this.getFullYMD(new Date(Date.now()-864e5))},t.getFullYMDTomorrow=function(){return this.getFullYMD(new Date(Date.now()+864e5))},t.getDelayNow=function(e){return t.getDelayDay(e,t.getFullYMD(new Date))},t.getDelayDay=function(t,e){var n=parseInt(t.substr(0,4)),i=parseInt(t.substr(4,2)),o=parseInt(t.substr(6,2)),a=new Date(n,i,o),s=parseInt(e.substr(0,4)),r=parseInt(e.substr(4,2)),c=parseInt(e.substr(6,2));return(new Date(s,r,c).getTime()-a.getTime())/864e5},t.formatTime=function(t){var e=t%60<10?"0"+Math.floor(t%60):""+Math.floor(t%60);return(t/60<10?"0"+Math.floor(t/60):""+Math.floor(t/60))+":"+e},t.formatTimeH=function(t){var e=t%60<10?"0"+Math.floor(t%60):""+Math.floor(t%60),n=Math.floor(t/3600);return n+":"+((t-3600*n)/60<10?"0"+Math.floor((t-3600*n)/60):""+Math.floor((t-3600*n)/60))+":"+e},t}();n.default=i,cc._RF.pop()},{}],Tips:[function(t,e,n){"use strict";cc._RF.push(e,"68fa5Ud79NJcYCRk2BKXXGX","Tips");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./Main"),s=t("./Audio"),r=t("./Game"),c=t("./BizarreAdventure/BATips"),l=cc._decorator,u=l.ccclass,d=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sfArrs=[],e}var n;return i(e,t),n=e,e.prototype.init=function(){this.anim=this.node.getComponent(cc.Animation),this.bg=this.node.getChildByName("bg").getComponent(cc.Sprite),this.ceNode=this.node.getChildByName("ce"),this.upNode=this.node.getChildByName("up"),this.upIcon=this.upNode.getComponent(cc.Sprite),this.label=this.ceNode.getChildByName("num").getComponent(cc.Label),this.anim.on(cc.Animation.EventType.FINISHED,this.hideSuccess,this)},e.prototype.onLoad=function(){n.instance=this,this.init()},e.prototype.start=function(){},e.prototype.showSuccess=function(t){a.default.instance.gameNode.getChildByName("Game")&&r.default.instance&&r.default.instance.gameEndNode&&!r.default.instance.gameEndNode.active&&c.default.instance&&c.default.instance.node&&!c.default.instance.node.active||a.default.instance.loadingNode&&a.default.instance.loadingNode.active||(s.default.instance.playAudio("CEUp"),this.anim&&(this.bg.spriteFrame=this.sfArrs[0],this.ceNode&&(this.ceNode.active=!0),this.upIcon.spriteFrame=null,this.anim.stop(),this.unscheduleAllCallbacks(),this.node&&(this.node.active=!0),this.anim.play(),t&&(this.label.string=t)))},e.prototype.hideSuccess=function(){var t=this;this.scheduleOnce(function(){t.node.active=!1},1.5)},e.prototype.showSuccessInGame=function(t){s.default.instance.playAudio("CEUp"),this.anim&&(this.bg.spriteFrame=this.sfArrs[0],this.ceNode.active=!0,this.upIcon.spriteFrame=null,this.anim.stop(),this.unscheduleAllCallbacks(),this.node.active=!0,this.anim.play(),t&&(this.label.string=t))},e.prototype.showRankUp=function(t){s.default.instance.playAudio("CEUp"),this.anim&&(this.bg.spriteFrame=t?this.sfArrs[0]:this.sfArrs[1],this.ceNode.active=!1,this.upIcon.spriteFrame=t?this.sfArrs[2]:this.sfArrs[3],this.anim.stop(),this.unscheduleAllCallbacks(),this.node.active=!0,this.anim.play())},e.prototype.showUpgrade=function(t){s.default.instance.playAudio("CEUp"),this.anim&&(this.bg.spriteFrame=t?this.sfArrs[0]:this.sfArrs[1],this.ceNode.active=!1,this.upIcon.spriteFrame=t?this.sfArrs[4]:this.sfArrs[5],this.anim.stop(),this.unscheduleAllCallbacks(),this.node.active=!0,this.anim.play())},e.prototype.onDestroy=function(){this.anim.off(cc.Animation.EventType.FINISHED,this.hideSuccess,this)},e.instance=null,o([d([cc.SpriteFrame])],e.prototype,"sfArrs",void 0),e=n=o([u],e)}(cc.Component);n.default=p,cc._RF.pop()},{"./Audio":"Audio","./BizarreAdventure/BATips":"BATips","./Game":"Game","./Main":"Main"}],TransArrs:[function(t,e,n){"use strict";cc._RF.push(e,"a4c4bQMvEpMKaU2QGN1Jnf7","TransArrs");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,r=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){this.edit=this.node.getComponent(cc.EditBox)},e.prototype.onBtnOut=function(){var t=[],e=this.edit.string.replace(" ","").split("\n");for(var n in cc.log(e),e)e[n].length>0&&t.push(parseInt(e[n].replace(" ","")));cc.log(t),this.edit.string="["+t.toString()+"]"},e=o([s],e)}(cc.Component));n.default=r,cc._RF.pop()},{}],UVMove:[function(t,e,n){"use strict";cc._RF.push(e,"b6789klXkZCmaFl7Uy5fudG","UVMove");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,r=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.time=0,e}return i(e,t),e.prototype.onLoad=function(){this.material=this.node.getComponent(cc.Sprite).getMaterial(0)},e.prototype.start=function(){},e.prototype.effect=function(){this.schedule(this.upd,0,cc.macro.REPEAT_FOREVER,1)},e.prototype.upd=function(){this.time+=.01,this.material.effect.setProperty("time",this.time)},e.prototype.onEnable=function(){this.effect()},e=o([s],e)}(cc.Component));n.default=r,cc._RF.pop()},{}],VIVOAdMgr:[function(t,e,n){"use strict";cc._RF.push(e,"04544T05gVGLanuy7GmosGP","VIVOAdMgr");var i=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s},o=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,a){function s(t){try{c(i.next(t))}catch(t){a(t)}}function r(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,r)}c((i=i.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(t){return function(e){return c([t,e])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("./AdList"),r=t("../nativets/Global"),c=t("./AdRewardMgr"),l=t("../Game"),u=t("../nativets/SaveMgr"),d=t("./Shortcut"),p=t("./NativeBanner"),h=t("../Tool/Statistics"),f=t("./NativeBanner2"),g=t("./NativeBanner3"),m=t("./NativeBanner4"),y=cc._decorator,v=y.ccclass,b=(y.property,function(){function t(){}var e;return e=t,t.getInstance=function(){return this.instance||(this.instance=new e),this.instance},t.prototype.init=function(){this.windowWidth=qg.getSystemInfoSync().screenWidth,this.windowHeight=qg.getSystemInfoSync().screenHeight,console.log("WH",qg.getSystemInfoSync(),this.windowHeight,this.windowWidth),this.VIVOInit()},t.prototype.VIVOInit=function(){this.VIVOBannerInit(),this.VIVORewardInit(),this.VIVOInfoLoad(),this.VIVOSwitchInit(),this.VIVOInterstitialLoad()},t.prototype.VIVOSwitchInit=function(){return o(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return t=this,[4,h.default.getInstance().getVivoSwitchRate(69)];case 1:return t.VIVOIntersitialRate=e.sent(),[2]}})})},t.prototype.VIVOInfoLoad=function(){var t=u.load("VIVOInfo");if(t){var e=JSON.parse(t);console.log("VIVOJSON",e),r.default.getInstance().vivoName=e.vivoName,r.default.getInstance().vivoHead=e.vivoHead}else;},t.prototype.VIVOBannerInit=function(){var t=this;this.VIVOBannerAd=qg.createBannerAd({posId:"ce3e5243fee144c1915ee8de8b944257",style:{height:170,left:.5*this.windowWidth-540,top:this.windowHeight-175,width:1080}}),this.VIVOBannerAd.onSize(function(e){console.log("banner \u5e7f\u544asize",e,t.VIVOBannerAd)}),this.VIVOBannerAd.onResize(function(t){console.log("banner \u5e7f\u544aresize",t)}),this.VIVOBannerAd.onError(function(t){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",t,t.errCode,t.errMsg)}),this.VIVOBannerAd.onLoad(function(){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f",t.VIVOBannerAd.style)})},t.prototype.VIVORewardInit=function(){var t=this,e=["37e8460a834a4585b8418e3d70a85b42","4dfc0f3912294a42bc0012c34481e248","66e55a1192a9457383aa1ca91a801a51"][Math.floor(3*Math.random())];this.VIVORewardAd1=qg.createRewardedVideoAd({posId:e}),this.VIVORewardAd1.onLoad(function(){console.log("\u6fc0\u52b1\u89c6\u98911 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t.VIVOVideoLoad1=!0}),this.VIVORewardAd1.onError(function(t){console.log("reward error:",t,t.errMsg)}),this.VIVORewardAd1.onClose(function(e){console.log("videoClose",e),e&&e.isEnded||void 0===e?t.VIVORewardIndex1&&(c.default.instance.onSuccess(t.VIVORewardIndex1),t.VIVORewardIndex1=null):(0==r.default.getInstance().inGame&&(r.default.getInstance().inGame=!0),t.VIVORewardIndex1!=s.default.WXVIDEOLIST1.\u590d\u6d3b||l.default.instance.reviveNode.active||(l.default.instance.reviveNode.active=!0))})},t.prototype.VIVOBannerShow=function(t,e){switch(this.VIVOBannerIndex=t,t){case s.default.BANNERLIST.\u52a0\u8f7d\u53f3\u4e0b:if(!this.VIVOBannerAd)return void this.VIVOBannerInit();this.VIVOBannerAd.show().catch(function(t){return console.log(t)});break;case s.default.BANNERLIST.\u9996\u9875\u53f3\u4e0b:case s.default.BANNERLIST.\u5730\u56fe\u8be6\u60c5\u53f3\u4e0b:p.default.instance&&p.default.instance.open();break;case s.default.BANNERLIST.\u6e38\u620f\u5185\u6682\u505c\u4e2d\u4e0b:if(!this.VIVOBannerAd)return;this.VIVOBannerAd.show().catch(function(t){return console.log(t)});break;case s.default.BANNERLIST.\u6e38\u620f\u7ed3\u7b97\u53f3\u4e0a:f.default.instance&&f.default.instance.open();break;case s.default.BANNERLIST.\u5947\u9047\u4e2d\u4e0b:p.default.instance&&p.default.instance.open(!0);break;case s.default.BANNERLIST.\u5468\u8fb9\u5de6\u4e0b:g.default.instance&&g.default.instance.open();break;case s.default.BANNERLIST.\u5730\u56fe\u53f3\u4e0a:m.default.instance&&m.default.instance.open()}},t.prototype.VIVOBannerHide=function(){this.VIVOBannerAd&&(this.VIVOBannerAd.hide(),this.VIVOBannerIndex=null),p.default.instance&&p.default.instance.onClose(),f.default.instance&&f.default.instance.onClose(),g.default.instance&&g.default.instance.onClose(),m.default.instance&&m.default.instance.onClose()},t.prototype.VIVOBannerDestroy=function(){this.VIVOBannerAd&&(this.VIVOBannerAd.destroy(),this.VIVOBannerIndex=null)},t.prototype.VIVOShowToast=function(t){qg.showToast({message:t})},t.prototype.VIVORewardShow=function(t){var e=this;this.VIVORewardIndex1=t;var n=this.VIVORewardAd1.load();n&&n.catch(function(t){console.log("\u6fc0\u52b1\u5e7f\u544aload\u5931\u8d25"+JSON.stringify(t)),e.VIVOShowToast("\u89c6\u9891\u51c6\u5907\u4e2d...")}),this.VIVORewardAd1.onLoad(function(){var t=e.VIVORewardAd1.show();t&&t.catch(function(t){console.log("\u6fc0\u52b1\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(t)),e.VIVOShowToast("\u89c6\u9891\u51c6\u5907\u4e2d...")})})},t.prototype.VIVOInterstitialLoad=function(){var t=this,e=["cd35c14b52874b75ad13e5e96b25ccd5","f9b8dd17e8004d7c9c818f80ad15c4bc","81cb5047e29042aea6f09ab5fc11d7b7"][Math.floor(3*Math.random())];this.VIVOInterstitialAd=qg.createInterstitialAd({posId:e}),this.VIVOInterstitialAd.onLoad(function(){console.log("\u63d2\u5c4f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),this.VIVOInterstitialAd.onError(function(e){console.log("\u63d2\u5c4f \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",e),setTimeout(function(){var e=["cd35c14b52874b75ad13e5e96b25ccd5","f9b8dd17e8004d7c9c818f80ad15c4bc","81cb5047e29042aea6f09ab5fc11d7b7"][Math.floor(3*Math.random())];t.VIVOInterstitialAd=qg.createInterstitialAd({posId:e}),t.VIVOInterstitialAd.onLoad(function(){console.log("\u63d2\u5c4f \u5e7f\u544a\u91cd\u8f7d\u6210\u529f")})},5)})},t.prototype.VIVOInterstitialShow=function(){console.error("\u663e\u793a\u63d2\u5c4f"),this.VIVOInterstitialAd&&this.VIVOInterstitialAd.show().catch(function(t){console.error("\u63d2\u5c4f \u5e7f\u544a\u663e\u793a\u5931\u8d25",t)}),this.VIVOInterstitialLoad()},t.prototype.VIVOShortcutShow=function(){qg.hasShortcutInstalled({success:function(t){0==t&&d.default.instance&&d.default.instance.open()},fail:function(t){},complete:function(){}})},t.prototype.VIVOShortcutAdd=function(){qg.installShortcut({success:function(){d.default.instance&&d.default.instance.onReward()},fail:function(t){},complete:function(){}})},t.prototype.needPause=function(t){return!1},t.instance=null,t=e=i([v],t)}());n.default=b,cc._RF.pop()},{"../Game":"Game","../Tool/Statistics":"Statistics","../nativets/Global":"Global","../nativets/SaveMgr":"SaveMgr","./AdList":"AdList","./AdRewardMgr":"AdRewardMgr","./NativeBanner":"NativeBanner","./NativeBanner2":"NativeBanner2","./NativeBanner3":"NativeBanner3","./NativeBanner4":"NativeBanner4","./Shortcut":"Shortcut"}],WXAdCtrl:[function(t,e,n){"use strict";cc._RF.push(e,"2aed1/gJbpC/YVesUxKX95C","WXAdCtrl");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./AdMgr"),s=t("./AdList"),r=t("../Others/Others"),c=cc._decorator,l=c.ccclass,u=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.style=s.default.BANNERLIST.\u9996\u9875\u53f3\u4e0b,e}return i(e,t),e.prototype.start=function(){},e.prototype.onEnable=function(){var t=this;cc.log("baseonenable"),a.default.instance&&(this.style==s.default.BANNERLIST.\u5468\u8fb9\u5de6\u4e0b?this.scheduleOnce(function(){r.default.instance&&r.default.instance.node.active&&a.default.instance.showBannerAd(t.style)},1):a.default.instance.showBannerAd(this.style))},e.prototype.onDisable=function(){this.unscheduleAllCallbacks(),a.default.instance&&a.default.instance.hideBanner()},o([u({type:cc.Enum(s.default.BANNERLIST),displayName:"Banner\u4f4d\u7f6e"})],e.prototype,"style",void 0),e=o([l],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../Others/Others":"Others","./AdList":"AdList","./AdMgr":"AdMgr"}],WXAdMgr:[function(t,e,n){"use strict";cc._RF.push(e,"2a61epQKEhH+IR5uLXo2gAU","WXAdMgr"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../nativets/Global"),o=t("./AdRewardMgr"),a=t("./AdList"),s=t("../Tool/Statistics"),r=t("../nativets/SaveMgr"),c=t("../Game"),l=t("./WXFLoat"),u=function(){function t(){this.shareCount=0,this.shareSuccess=0}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.init=function(){t.instance=this,this.WXInit()},t.prototype.WXInit=function(){this.windowWidth=wx.getSystemInfoSync().windowWidth,this.windowHeight=wx.getSystemInfoSync().windowHeight,this.zoomRateW=this.windowWidth/cc.winSize.width,this.zoomRateH=this.windowHeight/cc.winSize.height;var t=wx.getMenuButtonBoundingClientRect(),e=.5*cc.winSize.height-(t.bottom+.25*t.height)/this.zoomRateH,n=(t.left+.25*t.width)/this.zoomRateH-.5*cc.winSize.width;this.menuPosition=cc.v2(n,e),this.WXBannerInit(),this.WXRewardInit(),this.WXGamePortalInit(),this.WXHideShow(),this.WXInfoLoad(),this.initShareSuccess(),this.WXSwitchInit()},t.prototype.initShareSuccess=function(){var t=r.load("shareSuccess");t&&(this.shareSuccess=parseInt(t))},t.prototype.WXSwitchInit=function(){var t=this;s.default.getInstance().getSwitch(76,function(e){console.log("\u5f53\u524d\u57ce\u5e02\uff1a",cc.sys.localStorage.getItem("city")),200==e.code?(console.log("\u6982\u7387",e.data),-1==e.data.area.search(cc.sys.localStorage.getItem("city"))&&e.data.rate>0&&-1==e.data.version.search(",1.0.25,")?(t.winRate=e.data.rate,t.winLimit=e.data.show_limit):(t.winRate=0,t.winLimit=0)):(t.winRate=0,t.winLimit=0)});s.default.getInstance().getSwitch(75,function(e){200==e.code?(console.log("\u6982\u7387",e.data),-1==e.data.area.search(cc.sys.localStorage.getItem("city"))&&e.data.rate>0&&-1==e.data.version.search(",1.0.25,")?(t.failRate=e.data.rate,t.failLimit=e.data.show_limit):(t.failRate=0,t.failLimit=0)):(t.failRate=0,t.failLimit=0)});s.default.getInstance().getSwitch(74,function(e){200==e.code?(console.log("\u6982\u7387"+e.data),t.moreGameRate=e.data.rate):t.moreGameRate=.5})},t.prototype.WXHideShow=function(){var t=this;cc.game.on(cc.game.EVENT_HIDE,function(){cc.log("\u5207\u5230\u540e\u53f0"),l.default.instance&&l.default.instance.node.active&&(l.default.instance.node.active=!0)}),cc.game.on(cc.game.EVENT_SHOW,function(){var e=wx.getLaunchOptionsSync(),n=cc.sys.localStorage.getItem("game_scene");if(console.log("scene:",e.scene),null!=n&&""!=n||(n=e.scene,cc.sys.localStorage.setItem("game_scene",e.scene),console.log("scene:"+n)),s.default.getInstance().register(i.default.getInstance().wxName,i.default.getInstance().wxHead,n,"",null),t.WXBannerAd&&null!=t.WXBannerIndex){var a=t.WXBannerIndex;t.WXBannerHide(),t.WXBannerShow(a,!0)}if(t.shareStartTime){var c=Date.now()-t.shareStartTime;0==t.shareCount?c>5e3?t.shareCount<9?(console.log("\u5206\u4eab\u6210\u529f"),o.default.instance.onSuccess(t.shareIndex),t.shareSuccess++,r.save("shareSuccess",t.shareSuccess+"")):wx.showToast({title:"\u5206\u4eab\u6b21\u6570\u5df2\u6ee1\uff0c\u8bf7\u660e\u5929\u518d\u8bd5",icon:"none",duration:3500}):(console.log("\u5206\u4eab\u5931\u8d25"),wx.showToast({title:"\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u52ff\u9891\u7e41\u6253\u6270\u540c\u4e00\u4e2a\u7fa4",icon:"none",duration:3500})):c>2500?t.shareCount<9?(console.log("\u5206\u4eab\u6210\u529f"),o.default.instance.onSuccess(t.shareIndex),t.shareSuccess++,r.save("shareSuccess",t.shareSuccess+"")):wx.showToast({title:"\u5206\u4eab\u6b21\u6570\u5df2\u6ee1\uff0c\u8bf7\u660e\u5929\u518d\u8bd5",icon:"none",duration:2e3}):(console.log("\u5206\u4eab\u5931\u8d25"),wx.showToast({title:"\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u5206\u4eab\u5230\u4e0d\u540c\u7fa4",icon:"none",duration:2e3})),t.shareStartTime=null,t.shareCount++}})},t.prototype.WXBannerInit=function(){var t=this;this.WXBannerAd=wx.createBannerAd({adUnitId:"adunit-aa8bcb718d1c1800",style:{adIntervals:30,left:this.windowWidth-305,top:this.windowHeight-95,width:300}}),this.WXBannerAd.onResize(function(e){cc.log("resize",t.windowHeight,t.WXBannerAd.style.realHeight,t.WXBannerAd.style.top),t.realHeight=t.WXBannerAd.style.realHeight}),this.WXBannerAd.onError(function(t){cc.log(t)}),this.WXBannerAd.onLoad(function(){cc.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")})},t.prototype.WXRewardInit=function(){var t=this;this.WXRewardAd1=wx.createRewardedVideoAd({adUnitId:"adunit-90add2032634a60c"}),this.WXRewardAd1.onLoad(function(){cc.log("\u6fc0\u52b1\u89c6\u98911 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t.WXVideoLoad1=!0}),this.WXRewardAd1.onError(function(t){cc.log("reward error:"+t)}),this.WXRewardAd1.onClose(function(e){e&&e.isEnded||void 0===e?t.WXRewardIndex1&&(o.default.instance.onSuccess(t.WXRewardIndex1),t.WXRewardIndex1=null):(0==i.default.getInstance().inGame&&(i.default.getInstance().inGame=!0),t.WXRewardIndex1!=a.default.WXVIDEOLIST1.\u590d\u6d3b||c.default.instance.reviveNode.active||(c.default.instance.reviveNode.active=!0))}),this.WXRewardAd2=wx.createRewardedVideoAd({adUnitId:"adunit-f00eb3c8cad7ed3d"}),this.WXRewardAd2.onLoad(function(){cc.log("\u6fc0\u52b1\u89c6\u98912 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t.WXVideoLoad2=!0}),this.WXRewardAd2.onError(function(t){cc.log("reward error:"+t)}),this.WXRewardAd2.onClose(function(e){e&&e.isEnded||void 0===e?t.WXRewardIndex2&&(o.default.instance.onSuccess(t.WXRewardIndex2),t.WXRewardIndex2=null):0==i.default.getInstance().inGame&&(i.default.getInstance().inGame=!0)})},t.prototype.WXGridAdInit=function(){wx.createGridAd&&(this.WXGridAd=wx.createGridAd({adUnitId:"adunit-4aaa88f45a957542",adTheme:"white",gridCount:5,style:{left:0,top:0,width:330,opacity:.8}}))},t.prototype.WXGridAdShow=function(){this.WXGridAd&&this.WXGridAd.show()},t.prototype.WXGamePortalInit=function(){wx.createGamePortal&&(this.WXGamePortal=wx.createGamePortal({adUnitId:"PBgAAyAVEGWVHwUM"}))},t.prototype.WXGamePortalShow=function(){var t=this;this.WXGamePortal&&this.WXGamePortal.load().then(function(){t.WXGamePortal.show()}).catch(function(t){console.error(t)})},t.prototype.WXBannerShow=function(t,e){if(this.WXBannerAd)switch(this.WXBannerIndex=t,this.WXBannerAd.style.width=t==a.default.BANNERLIST.\u901a\u5173\u5b9d\u7bb1?550:300,t){case a.default.BANNERLIST.\u9996\u9875\u53f3\u4e0b:this.WXBannerAd.style.left=this.windowWidth-305,this.WXBannerAd.style.top=this.windowHeight-this.realHeight,cc.sys.os==cc.sys.OS_IOS&&cc.winSize.height/cc.winSize.width>16/9&&(this.WXBannerAd.style.top=this.windowHeight-this.realHeight+(e?15:30)),this.WXBannerAd.show().catch(function(t){return console.log(t)});break;case a.default.BANNERLIST.\u5730\u56fe\u8be6\u60c5\u53f3\u4e0b:this.WXBannerAd.style.left=this.windowWidth-305,this.WXBannerAd.style.top=this.windowHeight-this.realHeight-0,cc.sys.os==cc.sys.OS_IOS&&cc.winSize.height/cc.winSize.width>16/9&&(this.WXBannerAd.style.top=this.windowHeight-this.realHeight+(e?15:30)),this.WXBannerAd.show().catch(function(t){return console.log(t)});break;case a.default.BANNERLIST.\u6e38\u620f\u5185\u6682\u505c\u4e2d\u4e0b:case a.default.BANNERLIST.\u5947\u9047\u4e2d\u4e0b:this.WXBannerAd.style.left=.5*this.windowWidth-150,this.WXBannerAd.style.top=this.windowHeight-this.realHeight-0,cc.sys.os==cc.sys.OS_IOS&&cc.winSize.height/cc.winSize.width>16/9&&(this.WXBannerAd.style.top=this.windowHeight-this.realHeight+(e?15:30)),this.WXBannerAd.show().catch(function(t){return console.log(t)});break;case a.default.BANNERLIST.\u901a\u5173\u5b9d\u7bb1:this.WXBannerAd.style.left=.5*this.windowWidth-275,this.WXBannerAd.style.top=.5*this.windowHeight-.5*this.realHeight,this.WXBannerAd.show().catch(function(t){return console.log(t)})}},t.prototype.WXBannerHide=function(){this.WXBannerAd&&this.WXBannerAd.hide(),this.WXBannerIndex=null},t.prototype.WXBannerDestroy=function(){this.WXBannerAd&&(this.WXBannerAd.destroy(),this.WXBannerIndex=null)},t.prototype.WXRewardShow=function(t){var e=this;1==Math.floor(t/100)?(this.WXRewardIndex1=t,this.WXRewardAd1.show().catch(function(t){e.WXRewardAd1.load().then(function(){return e.WXRewardAd1.show()})}).then(function(){e.needPause(t)&&e.WXVideoLoad1&&(i.default.getInstance().inGame=!1),e.WXVideoLoad1||e.WXRewardIndex1&&e.WXShare(e.WXRewardIndex1)})):(this.WXRewardIndex2=t,this.WXRewardAd2.show().catch(function(t){e.WXRewardAd2.load().then(function(){return e.WXRewardAd2.show()})}).then(function(){e.needPause(t)&&e.WXVideoLoad2&&(i.default.getInstance().inGame=!1),e.WXVideoLoad2||e.WXRewardIndex2&&e.WXShare(e.WXRewardIndex2)}))},t.prototype.WXShare=function(t){wx.shareAppMessage({imageUrlId:"LIIp5vEGRPyw9qy+UwZg==",imageUrl:"https://mmocgame.qpic.cn/wechatgame/QdFKpXpcRxAqNjzd4G3ap1Mibr8WWzc35WgUNIZOp4oAXkpBdVrn6vRCd5NdUzdHX/0"}),this.shareStartTime=Date.now(),this.shareIndex=t},t.prototype.needPause=function(t){return!1},t.prototype.WXInfoLoad=function(){var t=r.load("WXInfo");if(t){var e=JSON.parse(t);i.default.getInstance().wxName=e.wxName,i.default.getInstance().wxHead=e.wxHead}else;},t.prototype.WXFLoatShow=function(){l.default.instance&&l.default.instance.open()},t.prototype.WXSubscribe=function(t){wx.requestSubscribeMessage({tmplIds:[["1x7vvnRfIifokNXPkZsKHl9FUlc1lSSERSWUN1xpcGA","xwdX9_xc_uG-MSlglpBcQH9Ahd0JQWbCDGxi9xAFN1U"][t]],success:function(t){console.log(t),s.default.getInstance().reportSubscribe("1x7vvnRfIifokNXPkZsKHl9FUlc1lSSERSWUN1xpcGA")},fail:function(t){console.log(t)}})},t.instance=null,t}();n.default=u,cc._RF.pop()},{"../Game":"Game","../Tool/Statistics":"Statistics","../nativets/Global":"Global","../nativets/SaveMgr":"SaveMgr","./AdList":"AdList","./AdRewardMgr":"AdRewardMgr","./WXFLoat":"WXFLoat"}],WXFLoat:[function(t,e,n){"use strict";cc._RF.push(e,"195a6YJnCBCx5kC2ddC1sCt","WXFLoat");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./WXAdMgr"),s=t("./QQAdMgr"),r=cc._decorator,c=r.ccclass,l=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return i(e,t),n=e,e.prototype.init=function(){},e.prototype.onLoad=function(){n.instance=this,a.default.instance&&(this.node.position=a.default.instance.menuPosition),s.default.instance&&(this.node.position=s.default.instance.menuPosition),this.node.active=!1},e.prototype.open=function(){var t=this;this.node.active=!0,this.scheduleOnce(function(){t.close()},10)},e.prototype.close=function(){this.node.active=!1},e.prototype.start=function(){},e.instance=null,e=n=o([c],e)}(cc.Component));n.default=l,cc._RF.pop()},{"./QQAdMgr":"QQAdMgr","./WXAdMgr":"WXAdMgr"}],WXFile:[function(t,e,n){"use strict";cc._RF.push(e,"a68d9lknmhITLXzq76mncvt","WXFile");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,r=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){},e=o([s],e)}(cc.Component));n.default=r,cc._RF.pop()},{}],WXInfoBtn:[function(t,e,n){"use strict";cc._RF.push(e,"9a0edgndyxIY6IMLmeVWV5/","WXInfoBtn");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../nativets/Global"),s=t("../Tool/Statistics"),r=t("../nativets/SaveMgr"),c=t("../Menu"),l=t("../Hero/HeroGlobal"),u=t("../nativets/Platform"),d=cc._decorator,p=d.ccclass,h=(d.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){var t=this;u.getPlatform()==u.Platform.WX||u.getPlatform()==u.Platform.QQ?this.scheduleOnce(function(){var e=wx.getSystemInfoSync().windowWidth/cc.winSize.width,n=wx.getSystemInfoSync().windowHeight/cc.winSize.height,i=0,o=.5*cc.winSize.height+t.node.y+t.node.height+100;t.node.getComponent(cc.Widget)&&(i=cc.winSize.width-t.node.getComponent(cc.Widget).right-t.node.width,o=.5*cc.winSize.height+t.node.y+t.node.height);var a=t.node.convertToWorldSpace(cc.v2(0,t.node.height));i=a.x,o=cc.winSize.height-a.y,t.WXLeft=i*e,t.WXTop=o*n,cc.log("WXTL",t.WXLeft,t.WXTop),t.WXHeight=t.node.height*n*t.node.scaleX,t.WXWidth=t.node.width*e*t.node.scaleX,wx.login({success:function(e){console.log("wxlogin",e),t.wxCode=e.code,t.wxGetOpenid(),t.wxGetUserState()}}),cc.director.on("WXHideInfo",function(){t.WXInfoButton&&t.WXInfoButton.hide()})}):(u.getPlatform(),u.Platform.TT)},e.prototype.ttLogin=function(){var t=this;wx.login({success:function(e){console.log("ttlogin",e),t.wxGetUserState()}})},e.prototype.wxGetOpenid=function(){u.getPlatform()==u.Platform.WX&&s.default.getInstance().getOpenid(this.wxCode)},e.prototype.wxGetUserState=function(){wx.getSetting({fail:function(t){this.wxGetUserInfo()}.bind(this),success:function(t){t.authSetting["scope.userInfo"]?(a.default.getInstance().ttAuthor=!0,this.getUserInfo()):this.wxGetUserInfo()}.bind(this)})},e.prototype.wxGetUserInfo=function(){var t=this;u.getPlatform()!=u.Platform.TT?(this.WXInfoButton=wx.createUserInfoButton({type:"text",text:"",style:{left:this.WXLeft,top:this.WXTop,width:this.WXWidth,height:this.WXHeight,lineHeight:600,backgroundColor:"#00000000",borderColor:"#00000000",color:"#00000000",textAlign:"center",fontSize:40,borderRadius:4}}),this.WXInfoButton.onTap(function(e){e.errMsg.indexOf("auth deny")>-1||e.errMsg.indexOf("auth denied")>-1?t.guideActive():(t.setUserDataOnTap(e),t.WXInfoButton.hide())}),this.WXInfoButton.show()):a.default.getInstance().ttAuthor=!1},e.prototype.getUserInfo=function(){wx.getUserInfo({fail:function(t){(t.errMsg.indexOf("auth deny")>-1||t.errMsg.indexOf("auth denied")>-1)&&this.guideActive()}.bind(this),success:function(t){this.setUserData(t)}.bind(this)})},e.prototype.guideActive=function(){wx.showModal({title:"\u8b66\u544a",content:"\u62d2\u7edd\u6388\u6743\u5c06\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u6392\u884c\u699c",cancelText:"\u53d6\u6d88",showCancel:!0,confirmText:"\u8bbe\u7f6e",success:function(t){t.confirm&&wx.openSetting({success:function(t){!0===t.authSetting["scope.userInfo"]&&this.getUserInfo()}.bind(this)})}.bind(this)})},e.prototype.setUserDataOnTap=function(t){this.setUserData(t),this.WXInfoButton&&(this.WXInfoButton.destroy(),cc.director.emit("WXHideInfo")),"Advan"==this.node.name?c.default.instance.OpenFriend():c.default.instance.OpenRank()},e.prototype.setUserData=function(t){a.default.getInstance().wxName=t.userInfo.nickName.replace(/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g,""),a.default.getInstance().wxHead=t.userInfo.avatarUrl;var e={wxName:a.default.getInstance().wxName,wxHead:a.default.getInstance().wxHead};r.save("WXInfo",JSON.stringify(e));s.default.getInstance().updateUserInfo(a.default.getInstance().wxName,a.default.getInstance().wxHead,function(t){cc.log("register",t),1==t.code?(cc.director.emit("FirstReport"),s.default.getInstance().reportRank(s.default.RANKLIST.\u6740\u622e\u699c,l.default.instance.MonsterKillCount),s.default.getInstance().reportRank(s.default.RANKLIST.\u901a\u5173\u699c,l.default.instance.StarCount)):cc.log(t.error)})},e.prototype.onEnable=function(){this.WXInfoButton&&this.WXInfoButton.show()},e.prototype.onDisable=function(){this.WXInfoButton&&this.WXInfoButton.hide()},e=o([p],e)}(cc.Component));n.default=h,cc._RF.pop()},{"../Hero/HeroGlobal":"HeroGlobal","../Menu":"Menu","../Tool/Statistics":"Statistics","../nativets/Global":"Global","../nativets/Platform":"Platform","../nativets/SaveMgr":"SaveMgr"}],ZH:[function(t,e,n){"use strict";cc._RF.push(e,"e3038v3+EVEspDV0kPGUkLo","ZH"),Object.defineProperty(n,"__esModule",{value:!0});n.default={1:"\u4e00",2:"\u4e8c",3:"\u4e09",4:"\u56db",5:"\u4e94",6:"\u516d",7:"\u4e03",8:"\u516b",9:"\u4e5d",10:"\u5341",textNull:"\u65e0",star1:"\u4e00\u661f",star2:"\u4e8c\u661f",star3:"\u4e09\u661f",star4:"\u56db\u661f",star5:"\u4e94\u661f",star6:"\u516d\u661f",lvup:"\u5347\u7ea7",coins:"\u91d1\u5e01",lv:"\u7b49\u7ea7",soul:"\u6b66\u9b42",endHome:"\u8fd4\u56de\u4e3b\u9875",endNext:"\u4e0b\u4e00\u5173",endRevive:"\u590d\u6d3b",endTask0:"\u6210\u529f\u901a\u5173",endTask1:"\u5269\u4f59\u8840\u91cf\u5927\u4e8e60%",endTask2:"\u901a\u5173\u65f6\u95f4\u5c11\u4e8e180S",Task0:"\u6210\u529f\u901a\u5173",Task1:"${time}\u79d2\u5185\u901a\u5173",Task2:"\u4e0d\u4f7f\u7528\u8f85\u52a9\u6280\u80fd",Task3:"\u8fde\u51fb\u8fbe\u5230${combo}",Task4:"\u8840\u91cf${hp}%\u901a\u5173",pauseHome:"\u9000\u51fa\u5173\u5361",pauseRestart:"\u91cd\u65b0\u518d\u6765",pauseResume:"\u7ee7\u7eed\u6218\u6597",settingEffect:"\u97f3\u6548",settingBgm:"\u97f3\u4e50",settingOn:"\u5f00",settingOff:"\u5173",settingOk:"\u786e\u8ba4",settingCancel:"\u53d6\u6d88",mapTitle1:"\u7b2c\u4e00\u7ae0 \u771f\u9f99\u51fa\u5c71",mapTitle2:"\u7b2c\u4e8c\u7ae0 \u5a01\u9707\u6c49\u4e2d",mapTitle3:"\u7b2c\u4e09\u7ae0 \u96ea\u6218\u8346\u5dde",mapTitle4:"\u7b2c\u56db\u7ae0 \u5929\u4e0b\u5f52\u4e00",mapSelectStart:"\u5f00\u59cb\u6e38\u620f",mapSelectConsume:"\u6d88\u8017\u4e24\u519b\u7cae",mapSelectMission:"\u7b2c${x}\u7ae0",mapSelectTurn:"\u7b2c${x}\u56de",mapSelectRequirement:"\u4e09\u661f\u6761\u4ef6:",mapSelectAward:"\u6389\u843d\u7269\u54c1:",heroName0:"\u8d75\u4e91",heroName1:"\u8c82\u8749",heroName2:"\u5927\u4e54",bossName0:"\u590f\u4faf\u60c7",bossName1:"\u66f9\u64cd",bossName2:"\u8bb8\u891a",petName0:"\u51e4\u51f0",petName1:"\u9752\u9f99",petName2:"\u8150\u9cb2",equipmentWeapon:"\u6b66\u5668",equipmentArmor:"\u62a4\u7532",equipmentRing:"\u6212\u6307",equipmentOrnament:"\u9970\u54c1",equipmentWing:"\u7fc5\u8180",equipmentHp:"\u751f\u547d",equipmentDef:"\u9632\u5fa1",equipmentAtk:"\u653b\u51fb",equipmentLs:"\u5438\u8840",equipmentSp:"\u79fb\u901f",equipmentBonus:"\u4f24\u5bb3",equipmentCr:"\u66b4\u51fb\u7387",equipmentArp:"\u7a7f\u900f",equipmentMiss:"\u95ea\u907f\u7387",equipmentCd:"\u51b7\u5374\u7f29\u51cf",equipmentExp:"\u7ecf\u9a8c",equipmentGold:"\u91d1\u94b1",equipmentBaseAtt:"\u3010\u57fa\u7840\u5c5e\u6027\u3011",equipmentSpecialAtt:"\u3010\u7279\u6b8a\u5c5e\u6027\u3011",equipmentSoulAtt:"\u3010\u6b66\u9b42\u5c5e\u6027\u3011",equipmentLvup:"\u7b49\u7ea7\u63d0\u5347",equipmentHpup:"\u751f\u547d\u63d0\u5347",equipmentAtkup:"\u653b\u51fb\u63d0\u5347",upgrade:"\u5347\u7ea7",equip:"\u88c5\u5907",unequip:"\u5378\u4e0b",recycle:"\u56de\u6536",enchant:"\u9644\u9b54",equiped:"\u5df2\u88c5\u5907",notEquip:"\u672a\u88c5\u5907",skillZY0:"\u96f7\u706d\u65a9",skillZY1:"\u96f7\u52a8\u4e5d\u5929",skillZY2:"\u96f7\u9f99\u77ac\u6740",skillZY3:"\u795e\u738b\u5929\u5f81",skillZY4:"\u4e0d\u52a8\u5982\u5c71",skillZY5:"\u7075\u5149\u704c\u9876",skillZY6:"\u65e0\u575a\u4e0d\u6467",skillDC0:"\u5ba1\u5224\u4e4b\u7bad",skillDC1:"\u75be\u98ce\u7bad\u96e8",skillDC2:"\u98ce\u795e\u8fde\u51fb",skillDC3:"\u5bd2\u51b0\u98ce\u66b4",skillDC4:"\u70b9\u77f3\u6210\u91d1",skillDC5:"\u75be\u6b65\u5982\u98de",skillDC6:"\u767e\u6b65\u7a7f\u6768",skillDQ3:"\u5730\u7206\u5929\u661f",skillDQ2:"\u9ed1\u6d1e",skillDQ0:"\u708e\u843d\u65a9",skillDQ1:"\u6d41\u661f\u96e8",skillDQ4:"\u4f1a\u5fc3\u4e00\u51fb",skillDQ5:"\u75be\u6b65\u5982\u98de",skillDQ6:"\u767e\u6b65\u7a7f\u6768",equipmentSkillDetail:"\u6280\u80fd\u8be6\u60c5",equipmentSkillCd:"\u51b7\u5374\u65f6\u95f4",equipmentSkillDmg:"\u6280\u80fd\u4f24\u5bb3",equipmentSkillText:"",equipmentActiveSkill:"\u4e3b\u52a8\u6280\u80fd",equipmentPassiveSkill:"\u88ab\u52a8\u6280\u80fd",equipmentPetText:"\u7279\u6b8a\u6280\u80fd: \u81ea\u52a8\u62fe\u53d6\u6389\u843d\u7269\u54c1"},cc._RF.pop()},{}],httpjs:[function(t,e,n){"use strict";cc._RF.push(e,"aa824kUXUNLZoBMzGsMjLbN","httpjs");var i="POST",o="cfKb@MIL2SnUhy#0Bnd#V1ClRdGgOaxh";cc.Class({extends:cc.Component,statics:{sendRequest:function(t,e,n,o){var a="https://api.goodgame360.com/index.php";void 0!=t&&null!=t&&""!=t&&(a+=t),void 0!=e&&null!=e&&""!=e||(i="GET");var s=cc.loader.getXMLHttpRequest();s.timeout=5e3,s.onreadystatechange=function(){4==s.readyState&&200==s.status&&void 0!=n&&null!=n&&n(s.responseText)},s.ontimeout=function(){void 0!=o&&null!=o&&o()},s.open(i,a,!0),s.send(e)},md5:t("md5"),getOpenid:function(t,e,n){var i="?r=api/getopenid&pid=24&platid="+t+"&code="+e+"&sign="+this.md5("24"+t+e+o);this.sendRequest(i,"",function(t){void 0!=n&&null!=n&&n(JSON.parse(t))})},isSwitchOn:function(t){this.getStrikeId(function(e){void 0!=t&&null!=t&&(console.log(e),console.log("\u5f53\u524d\u57ce\u5e02\uff1a"+cc.sys.localStorage.getItem("city")),200==e.code?t(-1==e.data.area.search(cc.sys.localStorage.getItem("city"))&&e.data.rate>0&&-1==e.data.version.search(",1.0.4,")):t(!1))})},getSwitch:function(t,e){console.log("getSwithch = ",t);var n="?r=api/getswitch&id="+t;this.sendRequest(n,"",function(t){void 0!=e&&null!=e&&(console.log("\u5f00\u5173\u914d\u7f6e\u4fe1\u606f: "+JSON.parse(t)),e(JSON.parse(t)))})},getRate:function(t){this.getStrikeId(function(e){void 0!=t&&null!=t&&(200==e.code?t(e.data.rate):t(0))})},getStrikeId:function(t){console.log("getStrike,_STRIKEID = 62");this.sendRequest("?r=api/getswitch&id=62","",function(e){void 0!=t&&null!=t&&(cc.log("\u5f00\u5173\u914d\u7f6e\u4fe1\u606f: "+JSON.parse(e)),t(JSON.parse(e)))})},register:function(t,e,n,i,a,s,r){var c="?r=api/register&pid=24&uuid="+e+"&name="+n+"&headpic="+i+"&platid="+t+"&sceneid="+a+"&openid="+s+"&sign="+this.md5(24+e+n+i+t+a+s+o);this.sendRequest(c,"",function(t){void 0!=r&&null!=r&&r(JSON.parse(t))}),console.log("register")},exit:function(t){var e="?r=api/exit&pid=24&uuid="+t+"&sign="+this.md5(24+t+o);this.sendRequest(e)},report:function(t,e,n){var i="?r=api/report&pid=24&rid="+t+"&uuid="+e+"&score="+n+"&sign="+this.md5("24"+t+e+n+o);this.sendRequest(i,"",function(t){})},getRank:function(t,e,n,i){var o="?r=api/getrank&pid=24&rid="+t+"&num="+e+"&uuid="+n;this.sendRequest(o,"",function(t){void 0!=i&&null!=i&&i(JSON.parse(t))})},reportStage:function(t,e,n,i){var a="?r=api/reportstage&pid=24&uuid="+t+"&stageid="+e+"&stagename="+n+"&event="+i+"&sign="+this.md5(24+t+e+n+i+o);this.sendRequest(a)},reportEvent:function(t,e){console.log("reportEvent");var n="?r=api/reportevent&pid=24&uuid="+t+"&event="+e+"&sign="+this.md5(24+t+e+o);this.sendRequest(n)},reportAdv:function(t,e){var n="?r=api/reportadv&pid=24&uuid="+t+"&event="+e+"&sign="+this.md5(24+t+e+o);this.sendRequest(n)},reportSubs:function(t,e,n,i){var a="?r=api/reportsubscribe&pid=24&pid2=62&platid="+t+"&openid="+e+"&tpl_id="+n+"&version="+i+"&sign="+this.md5("2462"+t+e+n+i+o);this.sendRequest(a,"",function(t){cc.log(t,JSON.parse(t))})}}});cc._RF.pop()},{md5:"md5"}],i18n:[function(t,e,n){"use strict";cc._RF.push(e,"f269a7ULRNDg4j7Ca5dbW6F","i18n");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./Language"),s=cc._decorator,r=s.ccclass,c=s.property,l=s.executeInEditMode,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text="",e}return i(e,t),e.prototype.onLoad=function(){this.node.getComponent(cc.Label).string=a.default[this.text]},e.prototype.start=function(){},o([c(cc.String)],e.prototype,"text",void 0),e=o([r,l],e)}(cc.Component);n.default=u,cc._RF.pop()},{"./Language":"Language"}],md5:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"ed942J/1dBFa4mFn3vvITmb","md5");e.exports=function(t){function e(t){var e=(t>>>0).toString(16);return"00000000".substr(0,8-e.length)+e}function n(t){for(var e=[],n=0;n<8;n++)e.push(255&t),t>>>=8;return e}function o(t,e){return t<<e&4294967295|t>>>32-e}function a(t,e,n){return t&e|~t&n}function s(t,e,n){return n&t|~n&e}function r(t,e,n){return t^e^n}function c(t,e,n){return e^(t|~n)}function l(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}function u(t){for(var e=[],n=0;n<t.length;n++)if(t.charCodeAt(n)<=127)e.push(t.charCodeAt(n));else for(var i=encodeURIComponent(t.charAt(n)).substr(1).split("%"),o=0;o<i.length;o++)e.push(parseInt(i[o],16));return e}function d(t,n,i,o){for(var a="",s=0,r=0,c=3;c>=0;c--)s=255&(r=arguments[c]),s<<=8,s|=255&(r>>>=8),s<<=8,s|=255&(r>>>=8),s<<=8,a+=e(s|=r>>>=8);return a}function p(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=t[n];return e}var h=null;function f(t){return t.slice()}var g=null;function m(t,e){return 4294967295&t+e}return"string"==typeof t?h=u(t):t.constructor==Array?0===t.length?h=f(t):"string"==typeof t[0]?h=function(t){for(var e=[],n=0;n<t.length;n++)e=e.concat(u(t[n]));return e}(t):"number"==typeof t[0]?h=f(t):g=i(t[0]):"undefined"!=typeof ArrayBuffer?t instanceof ArrayBuffer?h=p(new Uint8Array(t)):t instanceof Uint8Array||t instanceof Int8Array?h=p(t):t instanceof Uint32Array||t instanceof Int32Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Float32Array||t instanceof Float64Array?h=p(new Uint8Array(t.buffer)):g=i(t):g=i(t),g&&alert("MD5 type mismatch, cannot process "+g),function(){function t(t,e,n,i){var a=S;S=A,A=b,b=m(b,o(m(v,m(t,m(e,n))),i)),v=a}var e=h.length;h.push(128);var i=h.length%64;if(i>56){for(var u=0;u<64-i;u++)h.push(0);i=h.length%64}for(u=0;u<56-i;u++)h.push(0);h=h.concat(n(8*e));var p=1732584193,f=4023233417,g=2562383102,y=271733878,v=0,b=0,A=0,S=0;for(u=0;u<h.length/64;u++){v=p;var I=64*u;t(a(b=f,A=g,S=y),3614090360,l(h,I),7),t(a(b,A,S),3905402710,l(h,I+4),12),t(a(b,A,S),606105819,l(h,I+8),17),t(a(b,A,S),3250441966,l(h,I+12),22),t(a(b,A,S),4118548399,l(h,I+16),7),t(a(b,A,S),1200080426,l(h,I+20),12),t(a(b,A,S),2821735955,l(h,I+24),17),t(a(b,A,S),4249261313,l(h,I+28),22),t(a(b,A,S),1770035416,l(h,I+32),7),t(a(b,A,S),2336552879,l(h,I+36),12),t(a(b,A,S),4294925233,l(h,I+40),17),t(a(b,A,S),2304563134,l(h,I+44),22),t(a(b,A,S),1804603682,l(h,I+48),7),t(a(b,A,S),4254626195,l(h,I+52),12),t(a(b,A,S),2792965006,l(h,I+56),17),t(a(b,A,S),1236535329,l(h,I+60),22),t(s(b,A,S),4129170786,l(h,I+4),5),t(s(b,A,S),3225465664,l(h,I+24),9),t(s(b,A,S),643717713,l(h,I+44),14),t(s(b,A,S),3921069994,l(h,I),20),t(s(b,A,S),3593408605,l(h,I+20),5),t(s(b,A,S),38016083,l(h,I+40),9),t(s(b,A,S),3634488961,l(h,I+60),14),t(s(b,A,S),3889429448,l(h,I+16),20),t(s(b,A,S),568446438,l(h,I+36),5),t(s(b,A,S),3275163606,l(h,I+56),9),t(s(b,A,S),4107603335,l(h,I+12),14),t(s(b,A,S),1163531501,l(h,I+32),20),t(s(b,A,S),2850285829,l(h,I+52),5),t(s(b,A,S),4243563512,l(h,I+8),9),t(s(b,A,S),1735328473,l(h,I+28),14),t(s(b,A,S),2368359562,l(h,I+48),20),t(r(b,A,S),4294588738,l(h,I+20),4),t(r(b,A,S),2272392833,l(h,I+32),11),t(r(b,A,S),1839030562,l(h,I+44),16),t(r(b,A,S),4259657740,l(h,I+56),23),t(r(b,A,S),2763975236,l(h,I+4),4),t(r(b,A,S),1272893353,l(h,I+16),11),t(r(b,A,S),4139469664,l(h,I+28),16),t(r(b,A,S),3200236656,l(h,I+40),23),t(r(b,A,S),681279174,l(h,I+52),4),t(r(b,A,S),3936430074,l(h,I),11),t(r(b,A,S),3572445317,l(h,I+12),16),t(r(b,A,S),76029189,l(h,I+24),23),t(r(b,A,S),3654602809,l(h,I+36),4),t(r(b,A,S),3873151461,l(h,I+48),11),t(r(b,A,S),530742520,l(h,I+60),16),t(r(b,A,S),3299628645,l(h,I+8),23),t(c(b,A,S),4096336452,l(h,I),6),t(c(b,A,S),1126891415,l(h,I+28),10),t(c(b,A,S),2878612391,l(h,I+56),15),t(c(b,A,S),4237533241,l(h,I+20),21),t(c(b,A,S),1700485571,l(h,I+48),6),t(c(b,A,S),2399980690,l(h,I+12),10),t(c(b,A,S),4293915773,l(h,I+40),15),t(c(b,A,S),2240044497,l(h,I+4),21),t(c(b,A,S),1873313359,l(h,I+32),6),t(c(b,A,S),4264355552,l(h,I+60),10),t(c(b,A,S),2734768916,l(h,I+24),15),t(c(b,A,S),1309151649,l(h,I+52),21),t(c(b,A,S),4149444226,l(h,I+16),6),t(c(b,A,S),3174756917,l(h,I+44),10),t(c(b,A,S),718787259,l(h,I+8),15),t(c(b,A,S),3951481745,l(h,I+36),21),p=m(p,v),f=m(f,b),g=m(g,A),y=m(y,S)}return d(y,g,f,p)}()},cc._RF.pop()},{}],"state-machine.min":[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"f79a2gSYyhOjKDEtsbQl0Uc","state-machine.min"),function(t,o){"object"==(void 0===n?"undefined":i(n))&&"object"==(void 0===e?"undefined":i(e))?e.exports=o():"function"==typeof define&&define.amd?define("StateMachine",[],o):"object"==(void 0===n?"undefined":i(n))?n.StateMachine=o():(void 0).StateMachine=o()}(0,function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=5)}([function(t,e,n){t.exports=function(t,e){var n,i,o;for(n=1;n<arguments.length;n++)for(o in i=arguments[n])i.hasOwnProperty(o)&&(t[o]=i[o]);return t}},function(t,e,n){var i=n(0);t.exports={build:function(t,e){var n,o,a,s=e.plugins;for(n=0,o=s.length;n<o;n++)(a=s[n]).methods&&i(t,a.methods),a.properties&&Object.defineProperties(t,a.properties)},hook:function(t,e,n){var i,o,a,s,r=t.config.plugins,c=[t.context];for(n&&(c=c.concat(n)),i=0,o=r.length;i<o;i++)s=r[i],(a=r[i][e])&&a.apply(s,c)}}},function(t,e,n){function i(t){if(0===t.length)return t;var e,n,i=t.split(/[_-]/);if(1===i.length&&i[0][0].toLowerCase()===i[0][0])return t;for(n=i[0].toLowerCase(),e=1;e<i.length;e++)n=n+i[e].charAt(0).toUpperCase()+i[e].substring(1).toLowerCase();return n}i.prepended=function(t,e){return t+(e=i(e))[0].toUpperCase()+e.substring(1)},t.exports=i},function(t,e,n){function o(t,e){t=t||{},this.options=t,this.defaults=e.defaults,this.states=[],this.transitions=[],this.map={},this.lifecycle=this.configureLifecycle(),this.init=this.configureInitTransition(t.init),this.data=this.configureData(t.data),this.methods=this.configureMethods(t.methods),this.map[this.defaults.wildcard]={},this.configureTransitions(t.transitions||[]),this.plugins=this.configurePlugins(t.plugins,e.plugin)}var a=n(0),s=n(2);a(o.prototype,{addState:function(t){this.map[t]||(this.states.push(t),this.addStateLifecycleNames(t),this.map[t]={})},addStateLifecycleNames:function(t){this.lifecycle.onEnter[t]=s.prepended("onEnter",t),this.lifecycle.onLeave[t]=s.prepended("onLeave",t),this.lifecycle.on[t]=s.prepended("on",t)},addTransition:function(t){this.transitions.indexOf(t)<0&&(this.transitions.push(t),this.addTransitionLifecycleNames(t))},addTransitionLifecycleNames:function(t){this.lifecycle.onBefore[t]=s.prepended("onBefore",t),this.lifecycle.onAfter[t]=s.prepended("onAfter",t),this.lifecycle.on[t]=s.prepended("on",t)},mapTransition:function(t){var e=t.name,n=t.from,i=t.to;return this.addState(n),"function"!=typeof i&&this.addState(i),this.addTransition(e),this.map[n][e]=t,t},configureLifecycle:function(){return{onBefore:{transition:"onBeforeTransition"},onAfter:{transition:"onAfterTransition"},onEnter:{state:"onEnterState"},onLeave:{state:"onLeaveState"},on:{transition:"onTransition"}}},configureInitTransition:function(t){return"string"==typeof t?this.mapTransition(a({},this.defaults.init,{to:t,active:!0})):"object"==i(t)?this.mapTransition(a({},this.defaults.init,t,{active:!0})):(this.addState(this.defaults.init.from),this.defaults.init)},configureData:function(t){return"function"==typeof t?t:"object"==i(t)?function(){return t}:function(){return{}}},configureMethods:function(t){return t||{}},configurePlugins:function(t,e){var n,i,o;for(n=0,i=(t=t||[]).length;n<i;n++)"function"==typeof(o=t[n])&&(t[n]=o=o()),o.configure&&o.configure(this);return t},configureTransitions:function(t){var e,n,i,o,a,s=this.defaults.wildcard;for(n=0;n<t.length;n++)for(i=t[n],o=Array.isArray(i.from)?i.from:[i.from||s],a=i.to||s,e=0;e<o.length;e++)this.mapTransition({name:i.name,from:o[e],to:a})},transitionFor:function(t,e){var n=this.defaults.wildcard;return this.map[t][e]||this.map[n][e]},transitionsFor:function(t){var e=this.defaults.wildcard;return Object.keys(this.map[t]).concat(Object.keys(this.map[e]))},allStates:function(){return this.states},allTransitions:function(){return this.transitions}}),t.exports=o},function(t,e,n){function i(t,e){this.context=t,this.config=e,this.state=e.init.from,this.observers=[t]}var o=n(0),a=n(6),s=n(1),r=[null,[]];o(i.prototype,{init:function(t){if(o(this.context,this.config.data.apply(this.context,t)),s.hook(this,"init"),this.config.init.active)return this.fire(this.config.init.name,[])},is:function(t){return Array.isArray(t)?t.indexOf(this.state)>=0:this.state===t},isPending:function(){return this.pending},can:function(t){return!this.isPending()&&!!this.seek(t)},cannot:function(t){return!this.can(t)},allStates:function(){return this.config.allStates()},allTransitions:function(){return this.config.allTransitions()},transitions:function(){return this.config.transitionsFor(this.state)},seek:function(t,e){var n=this.config.defaults.wildcard,i=this.config.transitionFor(this.state,t),o=i&&i.to;return"function"==typeof o?o.apply(this.context,e):o===n?this.state:o},fire:function(t,e){return this.transit(t,this.state,this.seek(t,e),e)},transit:function(t,e,n,i){var o=this.config.lifecycle,a=this.config.options.observeUnchangedState||e!==n;return n?this.isPending()?this.context.onPendingTransition(t,e,n):(this.config.addState(n),this.beginTransit(),i.unshift({transition:t,from:e,to:n,fsm:this.context}),this.observeEvents([this.observersForEvent(o.onBefore.transition),this.observersForEvent(o.onBefore[t]),a?this.observersForEvent(o.onLeave.state):r,a?this.observersForEvent(o.onLeave[e]):r,this.observersForEvent(o.on.transition),a?["doTransit",[this]]:r,a?this.observersForEvent(o.onEnter.state):r,a?this.observersForEvent(o.onEnter[n]):r,a?this.observersForEvent(o.on[n]):r,this.observersForEvent(o.onAfter.transition),this.observersForEvent(o.onAfter[t]),this.observersForEvent(o.on[t])],i)):this.context.onInvalidTransition(t,e,n)},beginTransit:function(){this.pending=!0},endTransit:function(t){return this.pending=!1,t},failTransit:function(t){throw this.pending=!1,t},doTransit:function(t){this.state=t.to},observe:function(t){if(2===t.length){var e={};e[t[0]]=t[1],this.observers.push(e)}else this.observers.push(t[0])},observersForEvent:function(t){for(var e,n=0,i=this.observers.length,o=[];n<i;n++)(e=this.observers[n])[t]&&o.push(e);return[t,o,!0]},observeEvents:function(t,e,n,i){if(0===t.length)return this.endTransit(void 0===i||i);var o=t[0][0],a=t[0][1],r=t[0][2];if(e[0].event=o,o&&r&&o!==n&&s.hook(this,"lifecycle",e),0===a.length)return t.shift(),this.observeEvents(t,e,o,i);var c=a.shift(),l=c[o].apply(c,e);return l&&"function"==typeof l.then?l.then(this.observeEvents.bind(this,t,e,o)).catch(this.failTransit.bind(this)):!1===l?this.endTransit(!1):this.observeEvents(t,e,o,l)},onInvalidTransition:function(t,e,n){throw new a("transition is invalid in current state",t,e,n,this.state)},onPendingTransition:function(t,e,n){throw new a("transition is invalid while previous transition is still in progress",t,e,n,this.state)}}),t.exports=i},function(t,e,n){function o(t){return a(this||{},t)}function a(t,e){return s(t,new u(e,o)),t._fsm(),t}function s(t,e){if("object"!=i(t)||Array.isArray(t))throw Error("StateMachine can only be applied to objects");l.build(t,e),Object.defineProperties(t,h),r(t,p),r(t,e.methods),e.allTransitions().forEach(function(e){t[c(e)]=function(){return this._fsm.fire(e,[].slice.call(arguments))}}),t._fsm=function(){this._fsm=new d(this,e),this._fsm.init(arguments)}}var r=n(0),c=n(2),l=n(1),u=n(3),d=n(4),p={is:function(t){return this._fsm.is(t)},can:function(t){return this._fsm.can(t)},cannot:function(t){return this._fsm.cannot(t)},observe:function(){return this._fsm.observe(arguments)},transitions:function(){return this._fsm.transitions()},allTransitions:function(){return this._fsm.allTransitions()},allStates:function(){return this._fsm.allStates()},onInvalidTransition:function(t,e,n){return this._fsm.onInvalidTransition(t,e,n)},onPendingTransition:function(t,e,n){return this._fsm.onPendingTransition(t,e,n)}},h={state:{configurable:!1,enumerable:!0,get:function(){return this._fsm.state},set:function(t){throw Error("use transitions to change state")}}};o.version="3.0.1",o.factory=function(){var t,e;"function"==typeof arguments[0]?(t=arguments[0],e=arguments[1]||{}):(t=function(){this._fsm.apply(this,arguments)},e=arguments[0]||{});var n=new u(e,o);return s(t.prototype,n),t.prototype._fsm.config=n,t},o.apply=a,o.defaults={wildcard:"*",init:{name:"init",from:"none"}},t.exports=o},function(t,e,n){t.exports=function(t,e,n,i,o){this.message=t,this.transition=e,this.from=n,this.to=i,this.current=o}}])}),cc._RF.pop()},{}],testitem:[function(t,e,n){"use strict";cc._RF.push(e,"1b86f2MtCFDc79CH2M8TOPS","testitem");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,r=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){},e.prototype.onCollisionEnter=function(t,e){this.node.color=cc.Color.RED},e.prototype.onCollisionExit=function(t,e){this.node.color=cc.Color.WHITE},e=o([s],e)}(cc.Component));n.default=r,cc._RF.pop()},{}],"use_v2.1-2.2.1_cc.Toggle_event":[function(t,e,n){"use strict";cc._RF.push(e,"5064ayZsAZFP5sCqlaCUiYR","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}],wxmenu:[function(t,e,n){"use strict";cc._RF.push(e,"b3192wlBCZLMojI7HPpWSW5","wxmenu");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Ad/WXAdMgr"),s=cc._decorator,r=s.ccclass,c=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){a.default.instance&&(console.log(a.default.instance.menuPosition),this.node.position=a.default.instance.menuPosition)},e=o([r],e)}(cc.Component));n.default=c,cc._RF.pop()},{"../Ad/WXAdMgr":"WXAdMgr"}]},{},["AdList","AdMgr","AdRewardMgr","AndroidAdMgr","AndroidHide","NativeAd","NativeBanner","NativeBanner2","NativeBanner3","NativeBanner4","OPPOAdMgr","QQAdMgr","QQBlockCtrl","Shortcut","TTAdMgr","TTHero","VIVOAdMgr","WXAdCtrl","WXAdMgr","WXFLoat","WXInfoBtn","Audio","AudioGame","LifeMgr","BgMgr","BAItem","BATips","BizarreAdventure","BulletItem","BulletMgr","ComboMgr","DataMgr","Director","DmgMgr","Equipment","EquipmentDialog","FirstSelect","Game","God","Hero","HeroBody","HeroData","HeroFSM","HeroGlobal","HeroHit","HeroPet","HeroSPSet","HeroSkill","SkillProgress","Joystick","LifeProgress","Loading","Main","Map","ArrowRain","Box","MapBox","MapBoxItem","MapItem","MapSelect","Spikeweed","Menu","MenuSelect","Message","BossShow","Monster","MonsterAnimState","MonsterBulletItem","MonsterFSM","MonsterFactory","MonsterNodePool","Achieve","AchieveItem","AchieveLv","Activity","BoxGift","Others","Qimen","QimenItem","Rank","RankWX","Sign","Task","TaskItem","TimeLimit","RewardAuto","RewardItem","RewardMapMgr","RewardMgr","Setting","Gradient","Rotate","UVMove","SkillMgr","SoulDialog","Test","NewScript","Ref","TransArrs","WXFile","testitem","wxmenu","TextureMgr","Tips","Http","LoadPromise","Sort","Statistics","TimeMgr","EN","Language","ZH","i18n","NewHttp","httpjs","md5","state-machine.min","Config","GetJsonData","Global","NodePool","Platform","ReleaseMgr","SaveMgr","use_v2.1-2.2.1_cc.Toggle_event"]);